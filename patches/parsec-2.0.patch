diff -crB parsec-2.0/config/gcc.bldconf parsec-2.0-modified/config/gcc.bldconf
*** parsec-2.0/config/gcc.bldconf	2009-01-29 16:16:55.000000000 -0600
--- parsec-2.0-modified/config/gcc.bldconf	2019-04-04 11:21:09.240805462 -0500
***************
*** 27,35 ****
    export SFW_HOME="/usr/sfw"
  
    # CC_HOME is installation root of the C compiler
!   export CC_HOME="/usr/local/gcc-4.2.1"
    # BINUTIL_HOME is installation root of the GNU binutils
!   export BINUTIL_HOME="/usr/local"
    # GNUTOOL_HOME is installation root of the GNU tools
    export GNUTOOL_HOME="${SFW_HOME}"
    # BINARY_PREFIX is the string which is used as prefix for the GNU binaries
--- 27,35 ----
    export SFW_HOME="/usr/sfw"
  
    # CC_HOME is installation root of the C compiler
!   export CC_HOME="/usr/bin"
    # BINUTIL_HOME is installation root of the GNU binutils
!   export BINUTIL_HOME="/usr/bin"
    # GNUTOOL_HOME is installation root of the GNU tools
    export GNUTOOL_HOME="${SFW_HOME}"
    # BINARY_PREFIX is the string which is used as prefix for the GNU binaries
***************
*** 39,47 ****
    # Linux + default case
  
    # CC_HOME is installation root of the C compiler
!   export CC_HOME="/usr/local/gcc-4.2.1"
    # BINUTIL_HOME is installation root of the GNU binutils
!   export BINUTIL_HOME="/usr/local"
    # GNUTOOL_HOME is installation root of the GNU tools
    export GNUTOOL_HOME="/usr"
    # BINARY_PREFIX is the string which is used as prefix for the GNU binaries
--- 39,47 ----
    # Linux + default case
  
    # CC_HOME is installation root of the C compiler
!   export CC_HOME="/usr"
    # BINUTIL_HOME is installation root of the GNU binutils
!   export BINUTIL_HOME="/usr"
    # GNUTOOL_HOME is installation root of the GNU tools
    export GNUTOOL_HOME="/usr"
    # BINARY_PREFIX is the string which is used as prefix for the GNU binaries
Only in parsec-2.0-modified/config: gcc.bldconf~
diff -crB parsec-2.0/config/gcc-hooks.bldconf parsec-2.0-modified/config/gcc-hooks.bldconf
*** parsec-2.0/config/gcc-hooks.bldconf	2009-01-27 14:29:10.000000000 -0600
--- parsec-2.0-modified/config/gcc-hooks.bldconf	2019-04-04 11:21:09.240805462 -0500
***************
*** 9,16 ****
  source ${PARSECDIR}/config/gcc.bldconf
  
  # Enable PARSEC hooks
! CFLAGS="${CFLAGS} -DENABLE_PARSEC_HOOKS -I${PARSECDIR}/pkgs/libs/hooks/inst/${PARSECPLAT}/include"
! CXXFLAGS="${CXXFLAGS} -DENABLE_PARSEC_HOOKS -I${PARSECDIR}/pkgs/libs/hooks/inst/${PARSECPLAT}/include"
! LDFLAGS="${LDFLAGS} -L${PARSECDIR}/pkgs/libs/hooks/inst/${PARSECPLAT}/lib"
! LIBS="${LIBS} -lhooks"
  
--- 9,21 ----
  source ${PARSECDIR}/config/gcc.bldconf
  
  # Enable PARSEC hooks
! #CFLAGS="${CFLAGS} -DENABLE_PARSEC_HOOKS -I${PARSECDIR}/pkgs/libs/hooks/inst/${PARSECPLAT}/include -I/afs/csail.mit.edu/u/h/hank/heartbeats-google-code/heartbeats/inc"
! #CXXFLAGS="${CXXFLAGS} -DENABLE_PARSEC_HOOKS -I${PARSECDIR}/pkgs/libs/hooks/inst/${PARSECPLAT}/include -I/afs/csail.mit.edu/u/h/hank/heartbeats-google-code/heartbeats/inc"
! #LDFLAGS="${LDFLAGS} -L${PARSECDIR}/pkgs/libs/hooks/inst/${PARSECPLAT}/lib -L/afs/csail.mit.edu/u/h/hank/heartbeats-google-code/heartbeats/lib"
! #LIBS="${LIBS} -lhooks -lhb-shared -lrt"
! 
! CFLAGS="${CFLAGS} -DENABLE_PARSEC_HOOKS -I${PARSECDIR}/pkgs/libs/hooks/inst/x86_64-linux.gcc-hooks/include -I/home/hankhoffmann/heartbeats-development/heartbeats-google-code/heartbeats/inc"
! CXXFLAGS="${CXXFLAGS} -DENABLE_PARSEC_HOOKS -I${PARSECDIR}/pkgs/libs/hooks/inst/x86_64-linux.gcc-hooks/include -I/home/hankhoffmann/heartbeats-development/heartbeats-google-code/heartbeats/inc"
! LDFLAGS="${LDFLAGS} -L${PARSECDIR}/pkgs/libs/hooks/inst/x86_64-linux.gcc-hooks/lib -L/home/hankhoffmann/heartbeats-development/heartbeats-google-code/heartbeats/lib"
! LIBS="${LIBS} -lhooks -lhb-acc-pow-shared2 -lrt -lstdc++"
  
Only in parsec-2.0-modified/config: gcc-hooks.bldconf~
diff -crB parsec-2.0/config/gcc-openmp.bldconf parsec-2.0-modified/config/gcc-openmp.bldconf
*** parsec-2.0/config/gcc-openmp.bldconf	2009-02-05 00:25:28.000000000 -0600
--- parsec-2.0-modified/config/gcc-openmp.bldconf	2019-04-04 11:21:09.244805556 -0500
***************
*** 6,12 ****
  # Copyright (C) 2008 Princeton University
  # Written by Christian Bienia
  
! source ${PARSECDIR}/config/gcc.bldconf
  
  # Enable OpenMP
  CFLAGS="${CFLAGS} -fopenmp"
--- 6,12 ----
  # Copyright (C) 2008 Princeton University
  # Written by Christian Bienia
  
! source ${PARSECDIR}/config/gcc-hooks.bldconf
  
  # Enable OpenMP
  CFLAGS="${CFLAGS} -fopenmp"
Only in parsec-2.0-modified/config: gcc-openmp.bldconf~
Only in parsec-2.0-modified: log
Only in parsec-2.0-modified: out
Only in parsec-2.0-modified/pkgs/apps/blackscholes: inst
Only in parsec-2.0-modified/pkgs/apps/blackscholes: obj
Only in parsec-2.0-modified/pkgs/apps/blackscholes/src: #blackscholes.c#
diff -crB parsec-2.0/pkgs/apps/blackscholes/src/blackscholes.c parsec-2.0-modified/pkgs/apps/blackscholes/src/blackscholes.c
*** parsec-2.0/pkgs/apps/blackscholes/src/blackscholes.c	2009-02-12 12:04:23.000000000 -0600
--- parsec-2.0-modified/pkgs/apps/blackscholes/src/blackscholes.c	2019-04-04 11:21:07.480764278 -0500
***************
*** 16,21 ****
--- 16,24 ----
  #include <hooks.h>
  #endif
  
+ #include <heartbeat-accuracy-power.h>
+ heartbeat_t heart;
+ 
  // Multi-threaded pthreads header
  #ifdef ENABLE_THREADS
  #define MAX_THREADS 128
***************
*** 30,35 ****
--- 33,771 ----
  #ifdef ENABLE_OPENMP
  #include <omp.h>
  #endif
+ //---------------------------------------------------
+ // Control stuff
+ 
+ int current_action = 0;
+ int h1, h2, h3, h4;
+ int max_actions = 0;
+ 
+ typedef struct {
+   int beat;
+   double rate;
+   int state;
+ } controller_log_entry_t;
+ 
+ 
+ controller_log_entry_t controller_log[1000];
+ 
+ 
+ #define FAST 1
+ #define SLOW 1
+ 
+ #if FAST 
+ double p1 = 0.0;
+ double p2 = 0.0;
+ double z1 = 0.0;
+ #elif SLOW
+ const double p1 = 0.01;
+ const double p2 = 0.1;
+ const double z1 = 0.05;
+ #else
+ const double p1 = -0.5;
+ const double p2 =  0.0;
+ const double z1 =  0.0;
+ #endif
+ 
+ const double mu = 1.0;
+ //double last_speedup = 1.0;
+ #define STARTING_POWERUP 1
+ #define STARTING_SPEEDUP 3
+ double last_powerup = STARTING_POWERUP;
+ double last_speedup = STARTING_SPEEDUP;
+ 
+ double act_acc  = 0.0;                 // and the idled application
+ 
+ double power_u         = STARTING_POWERUP;                   // control variable
+ double power_uo        = STARTING_POWERUP;                   // old value for the control variable
+ double power_uoo       = STARTING_POWERUP;
+ double power_e         = 100000;
+ double power_eo        = 100000;
+ 
+ double speed_u         = STARTING_SPEEDUP;                   // control variable
+ double speed_uo        = STARTING_SPEEDUP;                   // old value for the control variable
+ double speed_uoo       = STARTING_SPEEDUP;
+ double speed_e         = 100000;
+ double speed_eo        = 100000;
+ 
+ int state_1 = 0;
+ int state_2 = 0;
+ int power_tdo_state_1 = 0;
+ int power_tdo_state_2 = 0;
+ int speed_tdo_state_1 = 0;
+ int speed_tdo_state_2 = 0;
+ int current_beat = 0;
+ int npids = 0;
+ pid_t pids[128]; 
+ int apps[1024];
+ 
+ 
+ int get_all_subpids(pid_t pid, pid_t* pids) {
+   int   n=0;
+   FILE  *cret;
+   int   stret;
+   char  pid_string[128];
+   char  cretpids[100];	
+   sprintf(cretpids,"ps -eLf | awk '(/%d/) && (!/awk/) {print $4}'",pid);
+   cret = popen(cretpids, "r");
+ 
+   if (cret == NULL) { 
+     printf("Error in popen\n"); 
+     exit(-1); 
+   }
+ 
+   while (fgets(pid_string, 128, cret) != NULL)  { 
+       pids[n] = atoi(pid_string); 
+       printf(" from ps - %d\n", pids[n]);
+       n++; 
+     }
+ 
+   stret = pclose(cret);
+ 
+   if (stret == -1) { 
+     printf("Error in pclose\n"); 
+     exit(-1); 
+   }
+ 
+   return n;
+ }
+ 
+ typedef int state_id_t;
+ 
+ //#define NSTATES 17
+ #define NSYSSTATES 53
+ //#define NSYSSTATES 12
+ #define NAPPSTATES 52
+ 
+ typedef struct {
+   int id;
+ 
+   double speedup;
+   double cost;
+ } control_state_t;
+ 
+ typedef struct {
+ 
+   int id;
+ 
+   double freq;
+   int cores; 
+ } power_state_t;
+ 
+ typedef struct {
+   int id;
+ 
+   int ref;
+   int range;
+   int subme;
+ } speed_state_t;
+ 
+ typedef struct {
+   int id;
+ 
+   int ref;
+   int range;
+   int subme;
+ } accuracy_state_t;
+ 
+ 
+ control_state_t power_controller_states[] = {
+ #if NSYSSTATES == 53
+ {	0	,	1	,	1	},
+ {	1	,	1.163271732	,	1.065459386	},
+ {	2	,	1.326450802	,	1.152370031	},
+ {	3	,	2.000779119	,	1.158258946	},
+ {	4	,	2.342362224	,	1.255978706	},
+ {	5	,	2.998628978	,	1.299315462	},
+ {	6	,	3.497754833	,	1.439517358	},
+ {	7	,	3.998042748	,	1.444595407	},
+ {	8	,	4.008467244	,	1.589721291	},
+ {	9	,	4.971273774	,	1.592954925	},
+ {	10	,	5.930045717	,	1.726970261	},
+ {	11	,	6.112010628	,	1.752157068	},
+ {	12	,	6.294323495	,	1.772866618	},
+ {	13	,	6.540468322	,	1.816738742	},
+ {	14	,	6.830129396	,	1.847993334	},
+ {	15	,	7.014754091	,	1.875424987	},
+ {	16	,	7.22679923	,	1.895050481	},
+ {	17	,	7.363138412	,	2.029663413	},
+ {	18	,	7.673919847	,	2.073628968	},
+ {	19	,	7.872333244	,	2.092926031	},
+ {	20	,	8.135646106	,	2.131456092	},
+ {	21	,	8.391979993	,	2.167973466	},
+ {	22	,	8.404035533	,	2.301570847	},
+ {	23	,	8.711506659	,	2.349388177	},
+ {	24	,	8.888993528	,	2.362690163	},
+ {	25	,	9.282032517	,	2.425433104	},
+ {	26	,	9.57516275	,	2.454561209	},
+ {	27	,	9.739863181	,	2.636924624	},
+ {	28	,	10.0788924	,	2.687586586	},
+ {	29	,	10.4058207	,	2.74523928	},
+ {	30	,	10.79348906	,	2.769645477	},
+ {	31	,	10.80531768	,	2.974609988	},
+ {	32	,	11.15136748	,	3.019535793	},
+ {	33	,	11.51035878	,	3.096745832	},
+ {	34	,	11.91013564	,	3.121659746	},
+ {	35	,	12.18132289	,	3.376517983	},
+ {	36	,	13.08318039	,	3.442629909	},
+ {	37	,	13.29497213	,	3.812376705	},
+ {	38	,	13.69964495	,	3.880726313	},
+ {	39	,	14.18314966	,	3.955659357	},
+ {	40	,	14.38812127	,	4.260517126	},
+ {	41	,	14.81921322	,	4.346649056	},
+ {	42	,	15.35247753	,	4.420098325	},
+ {	43	,	15.36429858	,	4.744361745	},
+ {	44	,	15.84191262	,	4.828515862	},
+ {	45	,	16.51979142	,	4.96835753	},
+ {	46	,	16.97220796	,	5.334766603	},
+ {	47	,	17.67476894	,	5.486239027	},
+ {	48	,	18.11240302	,	5.917762179	},
+ {	49	,	18.7258797	,	6.043033844	},
+ {	50	,	18.99855523	,	7.015605922	},
+ {	51	,	19.68798937	,	7.176472013	},
+ {	52	,	20.52524998	,	7.349292258	}
+ #else
+ {	0	,	1	,	1	},
+ {	1	,	1.163271732	,	1.065459386	},
+ {	2	,	1.326450802	,	1.152370031	},
+ {	3	,	1.488810095	,	1.24329113	},
+ {	4	,	1.650068787	,	1.353627355	},
+ {	5	,	1.80753684	,	1.468675067	},
+ {	6	,	1.967211766	,	1.584900326	},
+ {	7	,	2.125857007	,	1.733380748	},
+ {	8	,	2.280853438	,	1.860046486	},
+ {	9	,	2.437647326	,	2.042786943	},
+ {	10	,	2.591623527	,	2.253330233	},
+ {	11	,	3.080682296	,	3.09230493	}
+ #endif
+ };
+ 
+ control_state_t speed_controller_states[] = {
+ {	0	,	1	,	0	},
+ #if 1
+ {	1	,	1.077	,	0.11	},
+ {	2	,	1.0797	,	0.1175	},
+ {	3	,	1.1032	,	0.14	},
+ {	4	,	1.1902	,	0.16	},
+ {	5	,	1.2182	,	0.21	},
+ {	6	,	1.2187	,	0.23	},
+ {	7	,	1.2415	,	0.2425	},
+ {	8	,	1.3105	,	0.2775	},
+ {	9	,	1.333	,	0.3025	},
+ {	10	,	1.404	,	0.4325	},
+ {	11	,	1.4055	,	0.4325	},
+ {	12	,	1.4257	,	0.4725	},
+ {	13	,	1.52	,	0.535	},
+ {	14	,	1.5405	,	0.6475	},
+ {	15	,	1.5407	,	0.6475	},
+ {	16	,	1.556	,	0.7475	},
+ {	17	,	1.6357	,	0.8425	},
+ {	18	,	1.653	,	0.905	},
+ {	19	,	1.674	,	0.9575	},
+ {	20	,	1.676	,	0.9575	},
+ {	21	,	1.8322	,	1.14	},
+ {	22	,	1.8402	,	1.1475	},
+ {	23	,	1.915	,	1.32	},
+ {	24	,	1.936	,	1.33	},
+ {	25	,	1.9557	,	1.38	},
+ {	26	,	1.9565	,	1.38	},
+ {	27	,	2.0372	,	1.595	},
+ {	28	,	2.0842	,	2.13	},
+ //{	29	,	2.1747	,	2.4025	},
+ //{	30	,	2.192	,	2.435	},
+ {	31	,	2.25 /*2.2545*/	,	2.485	},
+ {	32	,	2.2665	,	2.4975	},
+ {	33	,	2.3835	,	2.68	},
+ {	34	,	2.416	,	2.6875	},
+ {	35	,	2.4507	,	2.7375	},
+ {	36	,	2.5765	,	2.9575	},
+ {	37	,	2.589	,	3.0125	},
+ {	38	,	2.6955	,	3.5325	},
+ {	39	,	2.701	,	3.545	},
+ {	40	,	2.7665	,	4.82	},
+ {	41	,	2.827	,	4.845	},
+ {	42	,	2.8807	,	4.85	},
+ {	43	,	3.1925	,	5.18	},
+ {	44	,	3.2432	,	5.2775	},
+ {	45	,	3.3797	,	5.4325	},
+ {	46	,	3.3822	,	5.5775	},
+ {	47	,	3.4307	,	5.6225	},
+ {	48	,	3.457	,	5.705	},
+ {	49	,	3.7525	,	5.7325	},
+ {	50	,	3.7615	,	5.7325	},
+ {	51	,	4.1185	,	6.2425	},
+ {	52	,	4.2537	,	6.255	},
+ #endif
+ {	53	,	7/*4.2615*/	,	6.295	}
+ };
+ 
+ speed_state_t speed_states[] = {
+ {	0	,	5,16,7	},
+ #if 1
+ {	1	,	5,15,7	},
+ {	2	,	5,14,7	},
+ {	3	,	5,12,7	},
+ {	4	,	5,10,7	},
+ {	5	,	4,15,7	},
+ {	6	,	4,14,7	},
+ {	7	,	4,12,7	},
+ {	8	,	4,11,7	},
+ {	9	,	4,10,7	},
+ {	10	,	3,15,7	},
+ {	11	,	3,14,7	},
+ {	12	,	3,12,7	},
+ {	13	,	3,10,7	},
+ {	14	,	3,9,7	},
+ {	15	,	3,8,7	},
+ {	16	,	2,12,7	},
+ {	17	,	3,6,7	},
+ {	18	,	2,10,7	},
+ {	19	,	2,9,7	},
+ {	20	,	2,8,7	},
+ {	21	,	1,13,7	},
+ {	22	,	1,12,7	},
+ {	23	,	1,11,7	},
+ {	24	,	1,10,7	},
+ {	25	,	1,9,7	},
+ {	26	,	1,8,7	},
+ {	27	,	1,6,7	},
+ {	28	,	1,4,7	},
+ //{	29	,	2,7,6	},
+ //{	30	,	2,6,6	},
+ {	31	,	1,13,6	},
+ {	32	,	1,12,6	},
+ {	33	,	1,11,6	},
+ {	34	,	1,10,6	},
+ {	35	,	1,9,6	},
+ {	36	,	1,7,6	},
+ {	37	,	1,6,6	},
+ {	38	,	1,5,6	},
+ {	39	,	1,4,6	},
+ {	40	,	3,11,1	},
+ {	41	,	3,10,1	},
+ {	42	,	3,9,1	},
+ {	43	,	3,7,1	},
+ {	44	,	3,6,1	},
+ {	45	,	3,5,1	},
+ {	46	,	3,4,1	},
+ {	47	,	1,12,1	},
+ {	48	,	2,7,1	},
+ {	49	,	1,9,1	},
+ {	50	,	1,8,1	},
+ {	51	,	1,6,1	},
+ {	52	,	1,5,1	},
+ #endif
+ {	53	,	1,4,1	}
+ };
+ 
+ power_state_t power_states[] = {
+ #if NSYSSTATES == 53
+ {	0	,	1.2	,	1	},
+ {	1	,	1.4	,	1	},
+ {	2	,	1.6	,	1	},
+ {	3	,	1.2	,	2	},
+ {	4	,	1.4	,	2	},
+ {	5	,	1.2	,	3	},
+ {	6	,	1.4	,	3	},
+ {	7	,	1.2	,	4	},
+ {	8	,	1.6	,	3	},
+ {	9	,	1.2	,	5	},
+ {	10	,	1.2	,	6	},
+ {	11	,	1.2	,	7	},
+ {	12	,	1.2	,	8	},
+ {	13	,	1.2	,	9	},
+ {	14	,	1.2	,	10	},
+ {	15	,	1.2	,	11	},
+ {	16	,	1.2	,	12	},
+ {	17	,	1.4	,	8	},
+ {	18	,	1.4	,	9	},
+ {	19	,	1.4	,	10	},
+ {	20	,	1.4	,	11	},
+ {	21	,	1.4	,	12	},
+ {	22	,	1.6	,	8	},
+ {	23	,	1.6	,	9	},
+ {	24	,	1.6	,	10	},
+ {	25	,	1.6	,	11	},
+ {	26	,	1.6	,	12	},
+ {	27	,	1.8	,	9	},
+ {	28	,	1.8	,	10	},
+ {	29	,	1.8	,	11	},
+ {	30	,	1.8	,	12	},
+ {	31	,	2	,	9	},
+ {	32	,	2	,	10	},
+ {	33	,	2	,	11	},
+ {	34	,	2	,	12	},
+ {	35	,	2.2	,	10	},
+ {	36	,	2.2	,	12	},
+ {	37	,	2.4	,	10	},
+ {	38	,	2.4	,	11	},
+ {	39	,	2.4	,	12	},
+ {	40	,	2.6	,	10	},
+ {	41	,	2.6	,	11	},
+ {	42	,	2.6	,	12	},
+ {	43	,	2.8	,	10	},
+ {	44	,	2.8	,	11	},
+ {	45	,	2.8	,	12	},
+ {	46	,	3	,	11	},
+ {	47	,	3	,	12	},
+ {	48	,	3.2	,	11	},
+ {	49	,	3.2	,	12	},
+ {	50	,	3.201	,	10	},
+ {	51	,	3.201	,	11	},
+ {	52	,	3.201	,	12	}
+ #else
+ {	0	,	1.2	,	1	},
+ {	1	,	1.4	,	1	},
+ {	2	,	1.6	,	1	},
+ {	3	,	1.8	,	1	},
+ {	4	,	2.0	,	1	},
+ {	5	,	2.2	,	1	},
+ {	6	,	2.4	,	1	},
+ {	7	,	2.6	,	1	},
+ {	8	,	2.8	,	1	},
+ {	9	,	3.0	,	1	},
+ {	10	,	3.2	,	1	},
+ {	11	,	3.201	,	1	}
+ #endif
+ };
+ 
+ double x_hat_minus = 0.0;
+ double x_hat = .2;
+ double Q = .00001;
+ double P = 1.0;
+ double P_minus = 0.0;
+ double H = 0.0;
+ double R = .01;
+ double K = 0.0; 
+ 
+ typedef struct {  
+   double x_hat_minus;
+   double x_hat;
+   double Q;
+   double P;
+   double P_minus;
+   double H;
+   double R;
+   double K;
+ } kalman_filter_t;
+ 
+ kalman_filter_t filter_init = {0.0, 0.3125, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ 
+ #define HEURISTIC_W 0
+ 
+ int adaptation_level = 1;
+ 
+ kalman_filter_t power_filter = {0.0, 0.2, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ kalman_filter_t speed_filter = {0.0, 0.3125, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ 
+ double get_base_value(kalman_filter_t* k,
+ 		      double current_measurement, 
+ 		      double last_coeff) {
+   
+   k->x_hat_minus = k->x_hat;
+   k->P_minus = k->P + k->Q;
+   
+   k->H = last_coeff;
+   k->K = k->P_minus * k->H /( k->H * k->P_minus* k->H + k->R);
+   k->x_hat = k->x_hat_minus + k->K * (current_measurement - k->H * k->x_hat_minus);
+   k->P = (1 - k->K * k->H) * k->P_minus;
+   
+   return 1.0/k->x_hat;
+ }
+ 
+ void get_power_signal(double current_power, 
+ 		      double desired_power,
+ 		      double base_power,
+ 		      double* e,
+ 		      double* eo,
+ 		      double* u,
+ 		      double* uo,
+ 		      double* uoo) {
+ 
+   if(current_power < desired_power) {
+     p1 = 0.1;
+     p2 = 0.8;
+     z1 = 0.2;
+     p1 = 0;
+     p2 = 0;
+     z1 = 0;
+   }
+   else {
+     p1 = 0;
+     p2 = 0;
+     z1 = 0;
+ 
+   }
+ 
+   
+   double A         = -(-p1*z1 - p2*z1 + mu*p1*p2 - mu*p2 + p2 - mu*p1 + p1 + mu);
+   double B         = -(-mu*p1*p2*z1 + p1*p2*z1 + mu*p2*z1 + mu*p1*z1 - mu*z1 - p1*p2);
+   double C         = ((mu - mu*p1)*p2 + mu*p1 - mu)*base_power;
+   double D         = ((mu*p1-mu)*p2 - mu*p1 + mu)*base_power*z1;
+   double F         = 1/(z1-1);
+   
+   double y = current_power;
+   *e = desired_power - y;
+   
+   //printf("u = %f, uo = %f, e = %f, A = %f, B= %f, C = %f, D= %f, F = %f\n",
+   // *u, *uo, *e, A, B, C, D, F);
+   
+   *u = F * (A*(*uo) + B*(*uoo) + C*(*e) + D*(*eo));
+ 
+   
+   
+   if (*u<1)  *u=1;        
+   if (*u>power_controller_states[NSYSSTATES-1].cost) *u=power_controller_states[NSYSSTATES-1].cost;  
+   *uoo = *uo;            // saving values
+   *uo  = *u;
+   *eo  = *e;
+ }
+ 
+ double max_speedup;
+ 
+ void get_speed_signal(double current_speed, 
+ 		      double desired_speed,
+ 		      double base_speed,
+ 		      double* e,
+ 		      double* eo,
+ 		      double* u,
+ 		      double* uo,
+ 		      double* uoo) {
+   //double p1 = 0.1;
+   //double p2 = 0.2;
+   //double z1 = 0.15; 
+ 
+   double A         = -(-p1*z1 - p2*z1 + mu*p1*p2 - mu*p2 + p2 - mu*p1 + p1 + mu);
+   double B         = -(-mu*p1*p2*z1 + p1*p2*z1 + mu*p2*z1 + mu*p1*z1 - mu*z1 - p1*p2);
+   double C         = ((mu - mu*p1)*p2 + mu*p1 - mu)*base_speed;
+   double D         = ((mu*p1-mu)*p2 - mu*p1 + mu)*base_speed*z1;
+   double F         = 1/(z1-1);
+   
+   double y = current_speed;
+   *e = desired_speed - y;
+   
+   
+   //*u = F * (A*(*uo) + B*(*uoo) + C*(*e) + D*(*eo));
+ 
+   *u = *uo + *e/base_speed;
+ 
+   //  printf("u = %f, uo = %f, e = %f, base_speed = %f\n",
+   // *u, *uo, *e, base_speed);
+ 
+ 
+   //double max_speedup = speed_controller_states[NAPPSTATES-1].speedup * 
+   //power_controller_states[NSYSSTATES-1].speedup;
+   if (*u<1)  *u=1;        
+   if (*u>max_speedup) *u=max_speedup;  
+   *uoo = *uo;            // saving values
+   *uo  = *u;
+   *eo  = *e;
+ }
+ 
+ 
+ int power_translate(double u, 
+ 		    const control_state_t* states, 
+ 		    int nstates) {
+   int i;
+ 
+   control_state_t cs = states[nstates-1];
+ 
+   double efficiency = cs.speedup/cs.cost;
+   int index = nstates-1;
+ 
+ 
+   for(i = 0; i < nstates; i++) {
+     if(states[i].cost >= u) {
+ 
+       double new_eff = states[i].speedup/states[i].cost;
+       if(new_eff > efficiency) {
+ 
+ 	cs = states[i];
+ 	efficiency = new_eff;
+ 	index = i;
+       }	
+     }
+   }
+ 
+   return index;
+ }
+ 
+ int power_translate2(double u, 
+ 		     const control_state_t* states, 
+ 		     int state1,
+ 		     const power_state_t* pstates,
+ 		     int nstates) {
+   int i;
+   
+   control_state_t cs = states[0];
+   
+   double efficiency = cs.speedup;///cs.cost;
+     int index = 0;
+     
+     for(i = 0; i < nstates; i++) {
+       if(states[i].cost < u && pstates[state1].cores == pstates[i].cores) {
+ 	
+ 	double new_eff = states[i].speedup;///states[i].cost;
+ 	  if(new_eff >= efficiency) {
+ 	    
+ 	    cs = states[i];
+ 	    efficiency = new_eff;
+ 	    index = i;
+ 	  }	
+       }
+     }
+     
+     return index;
+ }
+ 
+ int speed_translate(double u, 
+ 		    const control_state_t* states, 
+ 		    int nstates) {
+   int i;
+ 
+   control_state_t cs = states[nstates-1];
+ 
+   double efficiency = cs.speedup/(cs.cost+1);
+   int index = nstates-1;
+ 
+ 
+   for(i = 0; i < nstates; i++) {
+     if(states[i].speedup >= u) {
+ 
+       //index = i;
+       //break;
+       double new_eff = states[i].speedup/(states[i].cost+1);
+       if(new_eff > efficiency) {
+ 
+       	cs = states[i];
+ 	efficiency = new_eff;
+ 	index = i;
+       }	
+     }
+   }
+ 
+   return index;
+ }
+ 
+ int speed_translate2(double u, 
+ 		     const control_state_t* states, 
+ 		     int nstates) {
+   int i;
+   
+   control_state_t cs = states[0];
+   
+   double efficiency = cs.speedup/(cs.cost+1);
+     int index = 0;
+     
+     for(i = 0; i < nstates; i++) {
+       if(states[i].speedup < u) {
+ 	
+ 	double new_eff = states[i].speedup/(states[i].cost+1);
+ 	  if(new_eff >= efficiency) {
+ 	    
+ 	    cs = states[i];
+ 	    efficiency = new_eff;
+ 	    index = i;
+ 	  }	
+       }
+     }
+     
+     return index;
+ }
+ 
+ 
+ int last_speed_state = 0;	
+ int control_nref = 5;
+ int control_range = 16;
+ int control_refine = 7;
+ 
+ void speed_apply(int state,
+ 		 speed_state_t* ps,
+ 		 int nstates) {
+   
+   char command[4096];
+   int i;
+   
+   //printf("APPLYING SPPED STATE %d\n", state);
+ 
+   if(last_speed_state ==state)
+     return;
+   else 
+     last_speed_state = state;
+ 
+ #if 0
+   control_nref = ps[state].ref;
+   control_range = ps[state].range;
+   control_refine = ps[state].subme;
+ #endif
+   //sprintf(command,"echo \"%d\n%d\n%d\n\" >  x264_settings",
+   //	  ps[state].ref,ps[state].range,ps[state].subme);
+   //system(command);
+   
+ }
+ 
+ int last_power_state = 0;
+ int last_cores = 1;
+ int power_apply(int state_id,
+ 		pid_t* pid,
+ 		int npids,
+ 		const power_state_t* states,
+ 		int nstates) {
+   
+   int i;
+   
+   int rc = 0;
+   int retvalsyscall1 = 0;
+   int retvalsyscall2 = 0;
+   power_state_t state = states[0];
+   char command[4096];
+   
+   if(state_id == last_power_state)
+     return 0;
+   else
+     last_power_state = state_id;
+   
+   for(i = 0; i < nstates; i++) {
+     if( states[i].id == state_id) {
+       state = states[i];
+       break;
+     }
+   }
+ 
+ 
+   if(last_cores != state.cores) {
+   sprintf(command,"taskset -p -c 0-%d  %d > /dev/null",state.cores-1, getpid());
+   retvalsyscall1 = system(command);
+   //printf("%s\n", command);
+   for( i = 1; i < 12; i++) {
+     sprintf(command,"taskset -p -c 0-%d  %d > /dev/null",state.cores-1, pid[i]);
+     //printf("%s\n", command);
+     retvalsyscall1 = system(command);
+   }
+   last_cores = state.cores;
+   }
+ #if 1
+   for(i = 0; i < 12; i++) {
+     sprintf(command,
+ 	    "echo %d > /sys/devices/system/cpu/cpu%d/cpufreq/scaling_setspeed", 
+ 	    (int) (state.freq * 1000000), i);
+ 
+     retvalsyscall2 = system(command);
+     if(retvalsyscall2 != 0)
+       fprintf(stderr, "ERROR setting clocks: %d\n", retvalsyscall2);
+   }
+ #endif
+ 
+   if(retvalsyscall1 || retvalsyscall2) {
+     rc = -1;
+   }
+ 
+   return rc;
+ }
+         int window_size;
+ double power_target;
+ 
+ //----------------------------------------------------
  
  // Multi-threaded header for Windows
  #ifdef WIN32
***************
*** 42,48 ****
  //Precision to use for calculations
  #define fptype float
  
! #define NUM_RUNS 100
  
  typedef struct OptionData_ {
          fptype s;          // spot price
--- 778,784 ----
  //Precision to use for calculations
  #define fptype float
  
! #define NUM_RUNS 36000
  
  typedef struct OptionData_ {
          fptype s;          // spot price
***************
*** 227,232 ****
--- 963,969 ----
  //////////////////////////////////////////////////////////////////////////////////////
  //////////////////////////////////////////////////////////////////////////////////////
  //////////////////////////////////////////////////////////////////////////////////////
+ int counter = 0;
  #ifdef WIN32
  DWORD WINAPI bs_thread(LPVOID tid_ptr){
  #else
***************
*** 238,249 ****
--- 975,1215 ----
      int tid = *(int *)tid_ptr;
      int start = tid * (numOptions / nThreads);
      int end = start + (numOptions / nThreads);
+     printf("Starting bs_thread %d\n", tid);
  
  #ifdef ENABLE_THREADS
      BARRIER(barrier);
  #endif
  
      for (j=0; j<NUM_RUNS; j++) {
+       int old_counter = __sync_fetch_and_add(&counter, 1);
+       if(old_counter % 1000 == 0) {
+ 	heartbeat(&heart, counter, 1);
+ 	//if(tid == 0) {
+ #if 0// Power and performance control
+ 	int PERIOD = window_size;
+ 	heartbeat_record_t hbr;
+ 	hb_get_current(&heart, &hbr);
+ 	
+ 	double power_goal = power_target;
+ 	double speed_goal = 1.4;
+ 	
+ 	//if(hbr.beat >= 100) {/*power_goal = 35.0;*/ speed_goal = 4.615;}
+ 	if(hbr.beat >= 500) {speed_goal = 14.8;}
+ 	if(hbr.beat >= 1000) {speed_goal = 10.6;}
+ 	
+ 	//	printf("power goal is 70\n");
+ 	
+ 	int old_action = __sync_fetch_and_add(&current_action,1);
+ 	if(old_action == PERIOD) {
+ 	  current_action = 0;
+ 	}
+ 	if( old_action == 0) {
+ 	  double act_power = hbr.window_power;
+ 	  double act_speed = hbr.window_rate;
+ 	  
+ 	  double base_power = get_base_value(&power_filter, act_power, last_powerup);
+ 	  
+ 	  double base_speed = get_base_value(&speed_filter, act_speed, last_speedup);
+ 	  
+ 	  //double app_state = acc_translate();
+ 	  
+ 	  get_power_signal(act_power,
+ 			   power_goal,
+ 			   base_power,
+ 			   &power_e,
+ 			   &power_eo,
+ 			   &power_u,
+ 			   &power_uo,
+ 			   &power_uoo);
+ 	  
+ 	  get_speed_signal(act_speed,
+ 			   speed_goal,
+ 			   1.0/base_speed,
+ 			   &speed_e,
+ 			   &speed_eo,
+ 			   &speed_u,
+ 			   &speed_uo,
+ 			   &speed_uoo);
+ 	  
+ 	  
+ 	  double act_power_up = last_powerup = power_u;
+ 	  
+ 	  double act_speed_up = last_speedup = speed_u;//*power_u;
+ 	  
+ 	  power_tdo_state_1 = power_translate(power_u, 
+ 					      power_controller_states, 
+ 					      (int) NSYSSTATES);
+ 	  power_tdo_state_2 = power_translate2(power_u, 
+ 					       power_controller_states,
+ 					       power_tdo_state_1,
+ 					       power_states,
+ 					       (int) NSYSSTATES);
+ 
+ 	  //power_tdo_state_1 = 11;
+ 	  //power_tdo_state_2 = 11;
+ 	  
+ 	  if(power_controller_states[power_tdo_state_1].speedup 
+ 	     <= power_controller_states[power_tdo_state_2].speedup) {
+ 	    power_tdo_state_1 = power_tdo_state_2;
+ 	  }
+ 	  
+ 	  double power_time1;
+ 	  
+ 	  if(power_controller_states[power_tdo_state_1].cost == 
+ 	     power_controller_states[power_tdo_state_2].cost ||
+ 	     power_u == power_controller_states[power_tdo_state_1].cost) 
+ 	    power_time1 = 1.0;
+ 	  else
+ 	    power_time1 = (power_u - 
+ 		     power_controller_states[power_tdo_state_2].cost) /
+ 	      (power_controller_states[power_tdo_state_1].cost - 
+ 	       power_controller_states[power_tdo_state_2].cost);
+ 	  
+ 	  double power_time2 = 1.0 - power_time1;
+ 	  
+ 	  h1 = power_time1*PERIOD+0.5;
+ 	  h2 = PERIOD-h1;
+ 	  //h1 = PERIOD;
+ 	  
+ 	  double sys_speedup = (power_controller_states[power_tdo_state_1].speedup 
+ 				* power_time1 
+ 				+
+ 				power_controller_states[power_tdo_state_2].speedup
+ 				* power_time2);
+ 	  
+ 	  double sub_speedup = speed_u;//sys_speedup;
+ 	  
+ 	  
+ 
+ 	  speed_tdo_state_1 = speed_translate(sub_speedup,
+ 					      speed_controller_states,
+ 					      (int) NAPPSTATES);
+ 	  //speed_tdo_state_1 = 17;
+ 	  speed_tdo_state_2 = speed_translate2(sub_speedup,
+ 					       speed_controller_states,
+ 					       (int) NAPPSTATES);
+ 	  //	   speed_tdo_state_2 = 20;
+ 	  double speed_time1;
+ 	  
+ 	  
+ 
+ 	  if (hbr.beat >=1000) speed_tdo_state_1 = speed_tdo_state_2 = 51; 
+ 	  //else  speed_tdo_state_1 = speed_tdo_state_2 = 0; 
+ 	  
+ 	  if(speed_controller_states[speed_tdo_state_1].speedup == 
+ 	     speed_controller_states[speed_tdo_state_2].speedup ||
+ 	     sub_speedup == speed_controller_states[speed_tdo_state_1].speedup) 
+ 	    speed_time1 = 1.0;
+ 	  else
+ 	    speed_time1 = (sub_speedup - 
+ 			   speed_controller_states[speed_tdo_state_2].speedup) /
+ 	      (speed_controller_states[speed_tdo_state_1].speedup - 
+ 	       speed_controller_states[speed_tdo_state_2].speedup);
+ 	  
+ 	  
+ 	  double window_time = ((double) PERIOD)/(sub_speedup*base_speed);
+ 	  
+ 	  speed_time1 = (window_time - ((double) PERIOD)/(base_speed*speed_controller_states[speed_tdo_state_2].speedup))
+ 	    /
+ 	    (1.0/(base_speed*speed_controller_states[speed_tdo_state_1].speedup) 
+ 	     - 1.0/(base_speed*speed_controller_states[speed_tdo_state_2].speedup));
+ 	  
+ 	  if(speed_time1 < 0.0) speed_time1 = 0.0;
+ 
+ 	  //if(hbr.beat <  500) {speed_tdo_state_1 = 0; speed_time1 = 1.0;}
+ 	  //if(hbr.beat >= 500) {speed_tdo_state_1 = NAPPSTATES-1; speed_time1 = 1.0;}
+ 	  //speed_tdo_state_1 = 27;
+ 	  //speed_time1 = 1.0;
+ 	  
+ 	  double speed_time2 = ((double) PERIOD) - speed_time1;
+ 	  
+ 	  h3 = ((int)(speed_time1+0.5));
+ 	  h4 = PERIOD - h3;
+ 	  
+ 	  
+ 	  // h3 = speed_time1*PERIOD+0.5;
+ 	  //h4 = PERIOD-h3;
+ 	  
+ 	  
+ #if 1
+ 	  printf("\nCONTROL counter = %d, beat=%lld, power=%f, des=%f, w=%f, u=%f, uo=%f, state=%d, state2=%d, %f, %f, %d, %d\n\n",
+ 		 old_counter, hbr.beat,act_power,power_goal,1.0/base_power,power_u,last_powerup,power_controller_states[power_tdo_state_1].id, power_controller_states[power_tdo_state_2].id,  power_time1, power_time2, h1, h2); 
+ 	  
+ #endif
+ 	  
+ 	  if(npids == 0) {
+ 	    npids = get_all_subpids(getpid(), pids);
+ 	  }
+ 	  //power_tdo_state_1 = power_tdo_state_2 = 42;
+ 	  power_apply(power_tdo_state_1,
+ 		      pids,
+ 		      npids,
+ 		      power_states,
+ 		      NSYSSTATES);
+ 	  
+ 	  //speed_apply(speed_tdo_state_1,
+ 	  //      speed_states,
+ 	  //      NAPPSTATES);
+ 	  
+ 	  if(h1 == 0)
+ 	    power_apply(power_tdo_state_2,
+ 			pids,
+ 			npids,
+ 			power_states,
+ 			NSYSSTATES);
+ 	  //if(h3 == 0)
+ 	  //speed_apply(speed_tdo_state_2,
+ 	  //	speed_states,
+ 	  //	NAPPSTATES);
+ 	}
+ 	
+ 	if (old_action == h1) {
+ 	   if(npids == 0) {
+ 	  npids = get_all_subpids(getpid(), pids);
+ 	  }
+ 	  //printf("APPLYING 2\n");
+ 	  power_apply(power_tdo_state_2,
+ 		      pids,
+ 		      npids,
+ 		      power_states,
+ 		      NSYSSTATES);
+ 	  
+ 	}
+ 	//if (old_action == h3) {
+ 	//speed_apply(speed_tdo_state_2,
+ 	//	      speed_states,
+ 	//	      NAPPSTATES);
+ 	//}
+ 	
+ 	//	else if (current_action == PERIOD) {
+ 	// if(npids == 0) {
+ 	  //npids = get_all_subpids(getpid(), pids);
+ 	//}
+ 	//power_apply(power_tdo_state_1,
+ 	//      pids,
+ 	//      npids,
+ 	//      power_states,
+ 	//      NSYSSTATES);
+ 	
+ 	//}
+ 	//else if (current_action == h1+PERIOD) {
+ 	// if(npids == 0) {
+ 	//npids = get_all_subpids(getpid(), pids);
+ 	//}
+ 	//power_apply(power_tdo_state_2,
+ 	//      pids,
+ 	//      npids,
+ 	//      power_states,
+ 	//      NSYSSTATES);
+ 	
+ 	//}
+ 	
+ 	
+       
+ #endif
+       }
+       //printf("Start run %d, %d\n", j, tid);
  #ifdef ENABLE_OPENMP
  #pragma omp parallel for
          for (i=0; i<numOptions; i++) {
***************
*** 267,274 ****
--- 1233,1242 ----
              }
  #endif
          }
+ 	//printf("Stop run %d, %d\n", j, tid);
      }
  
+ 	//printf("Exiting bs_thread %d\n", tid);
      return 0;
  }
  
***************
*** 291,296 ****
--- 1259,1301 ----
  #ifdef ENABLE_PARSEC_HOOKS
     __parsec_bench_begin(__parsec_blackscholes);
  #endif
+ 	float min_heartrate;
+ 	float max_heartrate; 
+ 	//int window_size;
+ 	
+ 	if(getenv("BLACKSCHOLES_MIN_HEART_RATE") == NULL) {
+ 	  min_heartrate = 0.0;
+ 	}
+ 	else
+ 	  min_heartrate = atof(getenv("BLACKSCHOLES_MIN_HEART_RATE"));
+ 
+ 	if(getenv("BLACKSCHOLES_MAX_HEART_RATE") == NULL) {
+ 	  max_heartrate = 100.0;
+ 	}
+ 	else
+ 	  max_heartrate = atof(getenv("BLACKSCHOLES_MAX_HEART_RATE"));
+ 	
+ 	if(getenv("BLACKSCHOLES_WINDOW_SIZE") == NULL) {
+ 	  window_size = 20;
+ 	}
+ 	else
+ 	  window_size = atoi(getenv("BLACKSCHOLES_WINDOW_SIZE"));
+ 	
+ 	if(getenv("BLACKSCHOLES_POWER_TARGET") == NULL) {
+ 	  power_target = 70;
+ 	}
+ 	else
+ 	  power_target = atof(getenv("BLACKSCHOLES_POWER_TARGET"));
+ 	
+ 	printf("init heartbeat with %f %f %d\n", min_heartrate, max_heartrate, window_size);
+ 	
+ 	heartbeat_init(&heart, 
+ 		       min_heartrate, max_heartrate, 
+ 		       0, 1,
+ 		       0, 150,
+ 		       window_size, 1, "blackscholes_heartbeat.log");
+ 	
+ 	printf("heartbeat init'd\n");
  
     if (argc != 3)
          {
***************
*** 401,406 ****
--- 1406,1412 ----
  #ifdef ENABLE_PARSEC_HOOKS
      __parsec_roi_end();
  #endif
+     heartbeat_finish(&heart);
  
  #ifdef ERR_CHK
      printf("Num Errors: %d\n", numError);
Only in parsec-2.0-modified/pkgs/apps/blackscholes/src: blackscholes.c~
Only in parsec-2.0/pkgs/apps/bodytrack: inputs
Only in parsec-2.0-modified/pkgs/apps/bodytrack: inst
Only in parsec-2.0-modified/pkgs/apps/bodytrack: obj
diff -crB parsec-2.0/pkgs/apps/bodytrack/src/FlexImageLib/FlexIO.h parsec-2.0-modified/pkgs/apps/bodytrack/src/FlexImageLib/FlexIO.h
*** parsec-2.0/pkgs/apps/bodytrack/src/FlexImageLib/FlexIO.h	2007-04-26 15:55:15.000000000 -0500
--- parsec-2.0-modified/pkgs/apps/bodytrack/src/FlexImageLib/FlexIO.h	2019-04-04 11:20:46.672277696 -0500
***************
*** 27,32 ****
--- 27,33 ----
  #if HAVE_STDINT_H
  # include <stdint.h>
  #endif //HAVE_STDINT_H
+ #include <stdio.h>
  
  #include "FlexImage.h"
  #include "FlexColor.h"
Only in parsec-2.0-modified/pkgs/apps/bodytrack/src/FlexImageLib: FlexIO.h~
diff -crB parsec-2.0/pkgs/apps/bodytrack/src/TrackingBenchmark/main.cpp parsec-2.0-modified/pkgs/apps/bodytrack/src/TrackingBenchmark/main.cpp
*** parsec-2.0/pkgs/apps/bodytrack/src/TrackingBenchmark/main.cpp	2008-11-06 14:01:14.000000000 -0600
--- parsec-2.0-modified/pkgs/apps/bodytrack/src/TrackingBenchmark/main.cpp	2019-04-04 11:20:46.620276483 -0500
***************
*** 22,27 ****
--- 22,28 ----
  //
  //  modified : 
  //--------------------------------------------------------------
+ #include <heartbeat-accuracy-power.h>
  
  #if defined(HAVE_CONFIG_H)
  # include "config.h"
***************
*** 67,72 ****
--- 68,802 ----
  
  
  using namespace std;
+ heartbeat_t heart;
+ //---------------------------------------------------
+ // Control stuff
+ 
+ int current_action = -1;
+ int h1, h2, h3, h4;
+ int max_actions = 0;
+ 
+ typedef struct {
+   int beat;
+   double rate;
+   int state;
+ } controller_log_entry_t;
+ 
+ 
+ controller_log_entry_t controller_log[1000];
+ 
+ 
+ #define FAST 1
+ #define SLOW 1
+ 
+ #if FAST 
+ double p1 = 0.0;
+ double p2 = 0.0;
+ double z1 = 0.0;
+ #elif SLOW
+ const double p1 = 0.01;
+ const double p2 = 0.1;
+ const double z1 = 0.05;
+ #else
+ const double p1 = -0.5;
+ const double p2 =  0.0;
+ const double z1 =  0.0;
+ #endif
+ 
+ const double mu = 1.0;
+ //double last_speedup = 1.0;
+ #define STARTING_POWERUP 7.4
+ #define STARTING_SPEEDUP 3
+ double last_powerup = STARTING_POWERUP;
+ double last_speedup = STARTING_SPEEDUP;
+ 
+ double act_acc  = 0.0;                 // and the idled application
+ 
+ double power_u         = STARTING_POWERUP;                   // control variable
+ double power_uo        = STARTING_POWERUP;                   // old value for the control variable
+ double power_uoo       = STARTING_POWERUP;
+ double power_e         = 100000;
+ double power_eo        = 100000;
+ 
+ double speed_u         = STARTING_SPEEDUP;                   // control variable
+ double speed_uo        = STARTING_SPEEDUP;                   // old value for the control variable
+ double speed_uoo       = STARTING_SPEEDUP;
+ double speed_e         = 100000;
+ double speed_eo        = 100000;
+ 
+ int state_1 = 0;
+ int state_2 = 0;
+ int power_tdo_state_1 = 52;
+ int power_tdo_state_2 = 52;
+ int speed_tdo_state_1 = 0;
+ int speed_tdo_state_2 = 0;
+ int current_beat = 0;
+ int npids = 0;
+ pid_t pids[128]; 
+ int apps[1024];
+ 
+ 
+ int get_all_subpids(pid_t pid, pid_t* pids) {
+   int   n=0;
+   FILE  *cret;
+   int   stret;
+   char  pid_string[128];
+   char  cretpids[100];	
+   sprintf(cretpids,"ps -eLf | awk '(/%d/) && (!/awk/) {print $4}'",pid);
+   cret = popen(cretpids, "r");
+ 
+   if (cret == NULL) { 
+     printf("Error in popen\n"); 
+     exit(-1); 
+   }
+ 
+   while (fgets(pid_string, 128, cret) != NULL)  { 
+       pids[n] = atoi(pid_string); 
+       printf(" from ps - %d\n", pids[n]);
+       n++; 
+     }
+ 
+   stret = pclose(cret);
+ 
+   if (stret == -1) { 
+     printf("Error in pclose\n"); 
+     exit(-1); 
+   }
+ 
+   return n;
+ }
+ 
+ typedef int state_id_t;
+ 
+ //#define NSTATES 17
+ #define NSYSSTATES 53
+ //#define NSYSSTATES 12
+ #define NAPPSTATES 52
+ 
+ typedef struct {
+   int id;
+ 
+   double speedup;
+   double cost;
+ } control_state_t;
+ 
+ typedef struct {
+ 
+   int id;
+ 
+   double freq;
+   int cores; 
+ } power_state_t;
+ 
+ typedef struct {
+   int id;
+ 
+   int ref;
+   int range;
+   int subme;
+ } speed_state_t;
+ 
+ typedef struct {
+   int id;
+ 
+   int ref;
+   int range;
+   int subme;
+ } accuracy_state_t;
+ 
+ 
+ control_state_t power_controller_states[] = {
+ #if NSYSSTATES == 53
+ {	0	,	1	,	1	},
+ {	1	,	1.163271732	,	1.065459386	},
+ {	2	,	1.326450802	,	1.152370031	},
+ {	3	,	2.000779119	,	1.158258946	},
+ {	4	,	2.342362224	,	1.255978706	},
+ {	5	,	2.998628978	,	1.299315462	},
+ {	6	,	3.497754833	,	1.439517358	},
+ {	7	,	3.998042748	,	1.444595407	},
+ {	8	,	4.008467244	,	1.589721291	},
+ {	9	,	4.971273774	,	1.592954925	},
+ {	10	,	5.930045717	,	1.726970261	},
+ {	11	,	6.112010628	,	1.752157068	},
+ {	12	,	6.294323495	,	1.772866618	},
+ {	13	,	6.540468322	,	1.816738742	},
+ {	14	,	6.830129396	,	1.847993334	},
+ {	15	,	7.014754091	,	1.875424987	},
+ {	16	,	7.22679923	,	1.895050481	},
+ {	17	,	7.363138412	,	2.029663413	},
+ {	18	,	7.673919847	,	2.073628968	},
+ {	19	,	7.872333244	,	2.092926031	},
+ {	20	,	8.135646106	,	2.131456092	},
+ {	21	,	8.391979993	,	2.167973466	},
+ {	22	,	8.404035533	,	2.301570847	},
+ {	23	,	8.711506659	,	2.349388177	},
+ {	24	,	8.888993528	,	2.362690163	},
+ {	25	,	9.282032517	,	2.425433104	},
+ {	26	,	9.57516275	,	2.454561209	},
+ {	27	,	9.739863181	,	2.636924624	},
+ {	28	,	10.0788924	,	2.687586586	},
+ {	29	,	10.4058207	,	2.74523928	},
+ {	30	,	10.79348906	,	2.769645477	},
+ {	31	,	10.80531768	,	2.974609988	},
+ {	32	,	11.15136748	,	3.019535793	},
+ {	33	,	11.51035878	,	3.096745832	},
+ {	34	,	11.91013564	,	3.121659746	},
+ {	35	,	12.18132289	,	3.376517983	},
+ {	36	,	13.08318039	,	3.442629909	},
+ {	37	,	13.29497213	,	3.812376705	},
+ {	38	,	13.69964495	,	3.880726313	},
+ {	39	,	14.18314966	,	3.955659357	},
+ {	40	,	14.38812127	,	4.260517126	},
+ {	41	,	14.81921322	,	4.346649056	},
+ {	42	,	15.35247753	,	4.420098325	},
+ {	43	,	15.36429858	,	4.744361745	},
+ {	44	,	15.84191262	,	4.828515862	},
+ {	45	,	16.51979142	,	4.96835753	},
+ {	46	,	16.97220796	,	5.334766603	},
+ {	47	,	17.67476894	,	5.486239027	},
+ {	48	,	18.11240302	,	5.917762179	},
+ {	49	,	18.7258797	,	6.043033844	},
+ {	50	,	18.99855523	,	7.015605922	},
+ {	51	,	19.68798937	,	7.176472013	},
+ {	52	,	20.52524998	,	7.349292258	}
+ #else
+ {	0	,	1	,	1	},
+ {	1	,	1.163271732	,	1.065459386	},
+ {	2	,	1.326450802	,	1.152370031	},
+ {	3	,	1.488810095	,	1.24329113	},
+ {	4	,	1.650068787	,	1.353627355	},
+ {	5	,	1.80753684	,	1.468675067	},
+ {	6	,	1.967211766	,	1.584900326	},
+ {	7	,	2.125857007	,	1.733380748	},
+ {	8	,	2.280853438	,	1.860046486	},
+ {	9	,	2.437647326	,	2.042786943	},
+ {	10	,	2.591623527	,	2.253330233	},
+ {	11	,	3.080682296	,	3.09230493	}
+ #endif
+ };
+ 
+ control_state_t speed_controller_states[] = {
+ {	0	,	1	,	0	},
+ #if 1
+ {	1	,	1.077	,	0.11	},
+ {	2	,	1.0797	,	0.1175	},
+ {	3	,	1.1032	,	0.14	},
+ {	4	,	1.1902	,	0.16	},
+ {	5	,	1.2182	,	0.21	},
+ {	6	,	1.2187	,	0.23	},
+ {	7	,	1.2415	,	0.2425	},
+ {	8	,	1.3105	,	0.2775	},
+ {	9	,	1.333	,	0.3025	},
+ {	10	,	1.404	,	0.4325	},
+ {	11	,	1.4055	,	0.4325	},
+ {	12	,	1.4257	,	0.4725	},
+ {	13	,	1.52	,	0.535	},
+ {	14	,	1.5405	,	0.6475	},
+ {	15	,	1.5407	,	0.6475	},
+ {	16	,	1.556	,	0.7475	},
+ {	17	,	1.6357	,	0.8425	},
+ {	18	,	1.653	,	0.905	},
+ {	19	,	1.674	,	0.9575	},
+ {	20	,	1.676	,	0.9575	},
+ {	21	,	1.8322	,	1.14	},
+ {	22	,	1.8402	,	1.1475	},
+ {	23	,	1.915	,	1.32	},
+ {	24	,	1.936	,	1.33	},
+ {	25	,	1.9557	,	1.38	},
+ {	26	,	1.9565	,	1.38	},
+ {	27	,	2.0372	,	1.595	},
+ {	28	,	2.0842	,	2.13	},
+ //{	29	,	2.1747	,	2.4025	},
+ //{	30	,	2.192	,	2.435	},
+ {	31	,	2.25 /*2.2545*/	,	2.485	},
+ {	32	,	2.2665	,	2.4975	},
+ {	33	,	2.3835	,	2.68	},
+ {	34	,	2.416	,	2.6875	},
+ {	35	,	2.4507	,	2.7375	},
+ {	36	,	2.5765	,	2.9575	},
+ {	37	,	2.589	,	3.0125	},
+ {	38	,	2.6955	,	3.5325	},
+ {	39	,	2.701	,	3.545	},
+ {	40	,	2.7665	,	4.82	},
+ {	41	,	2.827	,	4.845	},
+ {	42	,	2.8807	,	4.85	},
+ {	43	,	3.1925	,	5.18	},
+ {	44	,	3.2432	,	5.2775	},
+ {	45	,	3.3797	,	5.4325	},
+ {	46	,	3.3822	,	5.5775	},
+ {	47	,	3.4307	,	5.6225	},
+ {	48	,	3.457	,	5.705	},
+ {	49	,	3.7525	,	5.7325	},
+ {	50	,	3.7615	,	5.7325	},
+ {	51	,	4.1185	,	6.2425	},
+ {	52	,	4.2537	,	6.255	},
+ #endif
+ {	53	,	7/*4.2615*/	,	6.295	}
+ };
+ 
+ speed_state_t speed_states[] = {
+ {	0	,	5,16,7	},
+ #if 1
+ {	1	,	5,15,7	},
+ {	2	,	5,14,7	},
+ {	3	,	5,12,7	},
+ {	4	,	5,10,7	},
+ {	5	,	4,15,7	},
+ {	6	,	4,14,7	},
+ {	7	,	4,12,7	},
+ {	8	,	4,11,7	},
+ {	9	,	4,10,7	},
+ {	10	,	3,15,7	},
+ {	11	,	3,14,7	},
+ {	12	,	3,12,7	},
+ {	13	,	3,10,7	},
+ {	14	,	3,9,7	},
+ {	15	,	3,8,7	},
+ {	16	,	2,12,7	},
+ {	17	,	3,6,7	},
+ {	18	,	2,10,7	},
+ {	19	,	2,9,7	},
+ {	20	,	2,8,7	},
+ {	21	,	1,13,7	},
+ {	22	,	1,12,7	},
+ {	23	,	1,11,7	},
+ {	24	,	1,10,7	},
+ {	25	,	1,9,7	},
+ {	26	,	1,8,7	},
+ {	27	,	1,6,7	},
+ {	28	,	1,4,7	},
+ //{	29	,	2,7,6	},
+ //{	30	,	2,6,6	},
+ {	31	,	1,13,6	},
+ {	32	,	1,12,6	},
+ {	33	,	1,11,6	},
+ {	34	,	1,10,6	},
+ {	35	,	1,9,6	},
+ {	36	,	1,7,6	},
+ {	37	,	1,6,6	},
+ {	38	,	1,5,6	},
+ {	39	,	1,4,6	},
+ {	40	,	3,11,1	},
+ {	41	,	3,10,1	},
+ {	42	,	3,9,1	},
+ {	43	,	3,7,1	},
+ {	44	,	3,6,1	},
+ {	45	,	3,5,1	},
+ {	46	,	3,4,1	},
+ {	47	,	1,12,1	},
+ {	48	,	2,7,1	},
+ {	49	,	1,9,1	},
+ {	50	,	1,8,1	},
+ {	51	,	1,6,1	},
+ {	52	,	1,5,1	},
+ #endif
+ {	53	,	1,4,1	}
+ };
+ 
+ power_state_t power_states[] = {
+ #if NSYSSTATES == 53
+ {	0	,	1.2	,	1	},
+ {	1	,	1.4	,	1	},
+ {	2	,	1.6	,	1	},
+ {	3	,	1.2	,	2	},
+ {	4	,	1.4	,	2	},
+ {	5	,	1.2	,	3	},
+ {	6	,	1.4	,	3	},
+ {	7	,	1.2	,	4	},
+ {	8	,	1.6	,	3	},
+ {	9	,	1.2	,	5	},
+ {	10	,	1.2	,	6	},
+ {	11	,	1.2	,	7	},
+ {	12	,	1.2	,	8	},
+ {	13	,	1.2	,	9	},
+ {	14	,	1.2	,	10	},
+ {	15	,	1.2	,	11	},
+ {	16	,	1.2	,	12	},
+ {	17	,	1.4	,	8	},
+ {	18	,	1.4	,	9	},
+ {	19	,	1.4	,	10	},
+ {	20	,	1.4	,	11	},
+ {	21	,	1.4	,	12	},
+ {	22	,	1.6	,	8	},
+ {	23	,	1.6	,	9	},
+ {	24	,	1.6	,	10	},
+ {	25	,	1.6	,	11	},
+ {	26	,	1.6	,	12	},
+ {	27	,	1.8	,	9	},
+ {	28	,	1.8	,	10	},
+ {	29	,	1.8	,	11	},
+ {	30	,	1.8	,	12	},
+ {	31	,	2	,	9	},
+ {	32	,	2	,	10	},
+ {	33	,	2	,	11	},
+ {	34	,	2	,	12	},
+ {	35	,	2.2	,	10	},
+ {	36	,	2.2	,	12	},
+ {	37	,	2.4	,	10	},
+ {	38	,	2.4	,	11	},
+ {	39	,	2.4	,	12	},
+ {	40	,	2.6	,	10	},
+ {	41	,	2.6	,	11	},
+ {	42	,	2.6	,	12	},
+ {	43	,	2.8	,	10	},
+ {	44	,	2.8	,	11	},
+ {	45	,	2.8	,	12	},
+ {	46	,	3	,	11	},
+ {	47	,	3	,	12	},
+ {	48	,	3.2	,	11	},
+ {	49	,	3.2	,	12	},
+ {	50	,	3.201	,	10	},
+ {	51	,	3.201	,	11	},
+ {	52	,	3.201	,	12	}
+ #else
+ {	0	,	1.2	,	1	},
+ {	1	,	1.4	,	1	},
+ {	2	,	1.6	,	1	},
+ {	3	,	1.8	,	1	},
+ {	4	,	2.0	,	1	},
+ {	5	,	2.2	,	1	},
+ {	6	,	2.4	,	1	},
+ {	7	,	2.6	,	1	},
+ {	8	,	2.8	,	1	},
+ {	9	,	3.0	,	1	},
+ {	10	,	3.2	,	1	},
+ {	11	,	3.201	,	1	}
+ #endif
+ };
+ 
+ double x_hat_minus = 0.0;
+ double x_hat = .2;
+ double Q = .00001;
+ double P = 1.0;
+ double P_minus = 0.0;
+ double H = 0.0;
+ double R = .01;
+ double K = 0.0; 
+ 
+ typedef struct {  
+   double x_hat_minus;
+   double x_hat;
+   double Q;
+   double P;
+   double P_minus;
+   double H;
+   double R;
+   double K;
+ } kalman_filter_t;
+ 
+ kalman_filter_t filter_init = {0.0, 0.3125, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ 
+ #define HEURISTIC_W 0
+ 
+ int adaptation_level = 1;
+ 
+ kalman_filter_t power_filter = {0.0, 0.2, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ kalman_filter_t speed_filter = {0.0, 0.3125, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ 
+ double get_base_value(kalman_filter_t* k,
+ 		      double current_measurement, 
+ 		      double last_coeff) {
+   
+   k->x_hat_minus = k->x_hat;
+   k->P_minus = k->P + k->Q;
+   
+   k->H = last_coeff;
+   k->K = k->P_minus * k->H /( k->H * k->P_minus* k->H + k->R);
+   k->x_hat = k->x_hat_minus + k->K * (current_measurement - k->H * k->x_hat_minus);
+   k->P = (1 - k->K * k->H) * k->P_minus;
+   
+   return 1.0/k->x_hat;
+ }
+ 
+ void get_power_signal(double current_power, 
+ 		      double desired_power,
+ 		      double base_power,
+ 		      double* e,
+ 		      double* eo,
+ 		      double* u,
+ 		      double* uo,
+ 		      double* uoo) {
+ 
+   if(current_power < desired_power) {
+     p1 = 0.1;
+     p2 = 0.8;
+     z1 = 0.2;
+     p1 = 0;
+     p2 = 0;
+     z1 = 0;
+   }
+   else {
+     p1 = 0;
+     p2 = 0;
+     z1 = 0;
+ 
+   }
+ 
+   
+   double A         = -(-p1*z1 - p2*z1 + mu*p1*p2 - mu*p2 + p2 - mu*p1 + p1 + mu);
+   double B         = -(-mu*p1*p2*z1 + p1*p2*z1 + mu*p2*z1 + mu*p1*z1 - mu*z1 - p1*p2);
+   double C         = ((mu - mu*p1)*p2 + mu*p1 - mu)*base_power;
+   double D         = ((mu*p1-mu)*p2 - mu*p1 + mu)*base_power*z1;
+   double F         = 1/(z1-1);
+   
+   double y = current_power;
+   *e = desired_power - y;
+   
+   //printf("u = %f, uo = %f, e = %f, A = %f, B= %f, C = %f, D= %f, F = %f\n",
+   // *u, *uo, *e, A, B, C, D, F);
+   
+   *u = F * (A*(*uo) + B*(*uoo) + C*(*e) + D*(*eo));
+ 
+   
+   
+   if (*u<1)  *u=1;        
+   if (*u>power_controller_states[NSYSSTATES-1].cost) *u=power_controller_states[NSYSSTATES-1].cost;  
+   *uoo = *uo;            // saving values
+   *uo  = *u;
+   *eo  = *e;
+ }
+ 
+ double max_speedup;
+ 
+ void get_speed_signal(double current_speed, 
+ 		      double desired_speed,
+ 		      double base_speed,
+ 		      double* e,
+ 		      double* eo,
+ 		      double* u,
+ 		      double* uo,
+ 		      double* uoo) {
+   //double p1 = 0.1;
+   //double p2 = 0.2;
+   //double z1 = 0.15; 
+ 
+   double A         = -(-p1*z1 - p2*z1 + mu*p1*p2 - mu*p2 + p2 - mu*p1 + p1 + mu);
+   double B         = -(-mu*p1*p2*z1 + p1*p2*z1 + mu*p2*z1 + mu*p1*z1 - mu*z1 - p1*p2);
+   double C         = ((mu - mu*p1)*p2 + mu*p1 - mu)*base_speed;
+   double D         = ((mu*p1-mu)*p2 - mu*p1 + mu)*base_speed*z1;
+   double F         = 1/(z1-1);
+   
+   double y = current_speed;
+   *e = desired_speed - y;
+   
+   
+   //*u = F * (A*(*uo) + B*(*uoo) + C*(*e) + D*(*eo));
+ 
+   *u = *uo + *e/base_speed;
+ 
+   //  printf("u = %f, uo = %f, e = %f, base_speed = %f\n",
+   // *u, *uo, *e, base_speed);
+ 
+ 
+   //double max_speedup = speed_controller_states[NAPPSTATES-1].speedup * 
+   //power_controller_states[NSYSSTATES-1].speedup;
+   if (*u<1)  *u=1;        
+   if (*u>max_speedup) *u=max_speedup;  
+   *uoo = *uo;            // saving values
+   *uo  = *u;
+   *eo  = *e;
+ }
+ 
+ 
+ int power_translate(double u, 
+ 		    const control_state_t* states, 
+ 		    int nstates) {
+   int i;
+ 
+   control_state_t cs = states[nstates-1];
+ 
+   double efficiency = cs.speedup/cs.cost;
+   int index = nstates-1;
+ 
+ 
+   for(i = 0; i < nstates; i++) {
+     if(states[i].cost >= u) {
+ 
+       double new_eff = states[i].speedup/states[i].cost;
+       if(new_eff > efficiency) {
+ 
+ 	cs = states[i];
+ 	efficiency = new_eff;
+ 	index = i;
+       }	
+     }
+   }
+ 
+   return index;
+ }
+ 
+ int power_translate2(double u, 
+ 		     const control_state_t* states, 
+ 		     int state1,
+ 		     const power_state_t* pstates,
+ 		     int nstates) {
+   int i;
+   
+   control_state_t cs = states[0];
+   
+   double efficiency = cs.speedup;///cs.cost;
+     int index = 0;
+     
+     for(i = 0; i < nstates; i++) {
+       if(states[i].cost < u && pstates[state1].cores == pstates[i].cores) {
+ 	
+ 	double new_eff = states[i].speedup;///states[i].cost;
+ 	  if(new_eff >= efficiency) {
+ 	    
+ 	    cs = states[i];
+ 	    efficiency = new_eff;
+ 	    index = i;
+ 	  }	
+       }
+     }
+     
+     return index;
+ }
+ 
+ int speed_translate(double u, 
+ 		    const control_state_t* states, 
+ 		    int nstates) {
+   int i;
+ 
+   control_state_t cs = states[nstates-1];
+ 
+   double efficiency = cs.speedup/(cs.cost+1);
+   int index = nstates-1;
+ 
+ 
+   for(i = 0; i < nstates; i++) {
+     if(states[i].speedup >= u) {
+ 
+       //index = i;
+       //break;
+       double new_eff = states[i].speedup/(states[i].cost+1);
+       if(new_eff > efficiency) {
+ 
+       	cs = states[i];
+ 	efficiency = new_eff;
+ 	index = i;
+       }	
+     }
+   }
+ 
+   return index;
+ }
+ 
+ int speed_translate2(double u, 
+ 		     const control_state_t* states, 
+ 		     int nstates) {
+   int i;
+   
+   control_state_t cs = states[0];
+   
+   double efficiency = cs.speedup/(cs.cost+1);
+     int index = 0;
+     
+     for(i = 0; i < nstates; i++) {
+       if(states[i].speedup < u) {
+ 	
+ 	double new_eff = states[i].speedup/(states[i].cost+1);
+ 	  if(new_eff >= efficiency) {
+ 	    
+ 	    cs = states[i];
+ 	    efficiency = new_eff;
+ 	    index = i;
+ 	  }	
+       }
+     }
+     
+     return index;
+ }
+ 
+ 
+ int last_speed_state = 52;	
+ int control_nref = 5;
+ int control_range = 16;
+ int control_refine = 7;
+ 
+ void speed_apply(int state,
+ 		 speed_state_t* ps,
+ 		 int nstates) {
+   
+   char command[4096];
+   int i;
+   
+   //printf("APPLYING SPPED STATE %d\n", state);
+ 
+   if(last_speed_state ==state)
+     return;
+   else 
+     last_speed_state = state;
+ 
+ #if 0
+   control_nref = ps[state].ref;
+   control_range = ps[state].range;
+   control_refine = ps[state].subme;
+ #endif
+   //sprintf(command,"echo \"%d\n%d\n%d\n\" >  x264_settings",
+   //	  ps[state].ref,ps[state].range,ps[state].subme);
+   //system(command);
+   
+ }
+ 
+ int last_power_state = 52;
+ int power_apply(int state_id,
+ 		pid_t* pid,
+ 		int npids,
+ 		const power_state_t* states,
+ 		int nstates) {
+   
+   int i;
+   
+   int rc = 0;
+   int retvalsyscall1 = 0;
+   int retvalsyscall2 = 0;
+   power_state_t state = states[0];
+   char command[4096];
+   
+   if(state_id == last_power_state)
+     return 0;
+   else
+     last_power_state = state_id;
+   
+   for(i = 0; i < nstates; i++) {
+     if( states[i].id == state_id) {
+       state = states[i];
+       break;
+     }
+   }
+ 
+   //sprintf(command,"taskset -p -c 0-%d  %d > /dev/null",state.cores-1, getpid());
+   retvalsyscall1 = system(command);
+   //printf("%s\n", command);
+   for( i = 1; i < 12; i++) {
+     sprintf(command,"taskset -p -c 0-%d  %d > /dev/null",state.cores-1, pid[i]);
+     //printf("%s\n", command);
+     retvalsyscall1 = system(command);
+   }
+   
+ #if 1
+   for(i = 0; i < 12; i++) {
+     sprintf(command,
+ 	    "echo %d > /sys/devices/system/cpu/cpu%d/cpufreq/scaling_setspeed", 
+ 	    (int) (state.freq * 1000000), i);
+ 
+     retvalsyscall2 = system(command);
+     if(retvalsyscall2 != 0)
+       fprintf(stderr, "ERROR setting clocks: %d\n", retvalsyscall2);
+   }
+ #endif
+ 
+   if(retvalsyscall1 || retvalsyscall2) {
+     rc = -1;
+   }
+ 
+   return rc;
+ }
+         int window_size;
+ double power_target;
+ //----------------------------------------------------
  
  //templated conversion from string
  template<class T>
***************
*** 158,163 ****
--- 888,898 ----
  	return true;
  }
  
+ double edgeTime = 0.0;
+ double insideTime = 0.0;
+ double edgeMapTime = 0.0;
+ double insideMapTime = 0.0;
+ 
  //Body tracking threaded with OpenMP
  #if defined(USE_OPENMP)
  int mainOMP(string path, int cameras, int frames, int particles, int layers, int threads, bool OutputBMP)
***************
*** 190,196 ****
          __parsec_roi_begin();
  #endif
  	for(int i = 0; i < frames; i++)														//process each set of frames
! 	{	cout << "Processing frame " << i << endl;
  		if(!pf.Update((float)i))														//Run particle filter step
  		{	cout << "Error loading observation data" << endl;
  			return 0;
--- 925,932 ----
          __parsec_roi_begin();
  #endif
  	for(int i = 0; i < frames; i++)														//process each set of frames
! 	  {		     heartbeat(&heart, i, 1.0);
! cout << "Processing frame " << i << endl;
  		if(!pf.Update((float)i))														//Run particle filter step
  		{	cout << "Error loading observation data" << endl;
  			return 0;
***************
*** 204,209 ****
--- 940,948 ----
          __parsec_roi_end();
  #endif
  
+ 	//printf("Edge error took %f seconds\n", edgeTime);
+ 	//printf("Inside error took %f seconds\n", insideTime);
+ 
  	return 1;
  }
  #endif
***************
*** 251,257 ****
          __parsec_roi_begin();
  #endif
  	for(int i = 0; i < frames; i++)														//process each set of frames
! 	{	cout << "Processing frame " << i << endl;
  		if(!pf.Update((float)i))														//Run particle filter step
  		{	cout << "Error loading observation data" << endl;
  			workers.JoinAll();
--- 990,1220 ----
          __parsec_roi_begin();
  #endif
  	for(int i = 0; i < frames; i++)														//process each set of frames
! 	  {		     heartbeat(&heart, i, 1.0);
! #if 0// Power and performance control
! 	int PERIOD = window_size;
! 	heartbeat_record_t hbr;
! 	hb_get_current(&heart, &hbr);
! 	
! 	double power_goal = power_target;
! 	double speed_goal = 1.4;
! 	
! 	//if(hbr.beat >= 100) {/*power_goal = 35.0;*/ speed_goal = 4.615;}
! 	if(hbr.beat >= 500) {speed_goal = 14.8;}
! 	if(hbr.beat >= 1000) {speed_goal = 10.6;}
! 	
! 	//	printf("power goal is 70\n");
! 	
! 	if( current_action == 0 && hbr.window_rate != 0.0) {
! 	  double act_power = hbr.window_power;
! 	  double act_speed = hbr.window_rate;
! 	  
! 	  double base_power = get_base_value(&power_filter, act_power, last_powerup);
! 	  
! 	  double base_speed = get_base_value(&speed_filter, act_speed, last_speedup);
! 	  
! 	  //double app_state = acc_translate();
! 	  
! 	  get_power_signal(act_power,
! 			   power_goal,
! 			   base_power,
! 			   &power_e,
! 			   &power_eo,
! 			   &power_u,
! 			   &power_uo,
! 			   &power_uoo);
! 	  
! 	  get_speed_signal(act_speed,
! 			   speed_goal,
! 			   1.0/base_speed,
! 			   &speed_e,
! 			   &speed_eo,
! 			   &speed_u,
! 			   &speed_uo,
! 			   &speed_uoo);
! 	  
! 	  
! 	  double act_power_up = last_powerup = power_u;
! 	  
! 	  double act_speed_up = last_speedup = speed_u;//*power_u;
! 	  
! 	  power_tdo_state_1 = power_translate(power_u, 
! 					      power_controller_states, 
! 					      (int) NSYSSTATES);
! 	  power_tdo_state_2 = power_translate2(power_u, 
! 					       power_controller_states,
! 					       power_tdo_state_1,
! 					       power_states,
! 					       (int) NSYSSTATES);
! 
! 	  //power_tdo_state_1 = 11;
! 	  //power_tdo_state_2 = 11;
! 	  
! 	  if(power_controller_states[power_tdo_state_1].speedup 
! 	     <= power_controller_states[power_tdo_state_2].speedup) {
! 	    power_tdo_state_1 = power_tdo_state_2;
! 	  }
! 	  
! 	  double power_time1;
! 	  
! 	  if(power_controller_states[power_tdo_state_1].cost == 
! 	     power_controller_states[power_tdo_state_2].cost ||
! 	     power_u == power_controller_states[power_tdo_state_1].cost) 
! 	    power_time1 = 1.0;
! 	  else
! 	    power_time1 = (power_u - 
! 		     power_controller_states[power_tdo_state_2].cost) /
! 	      (power_controller_states[power_tdo_state_1].cost - 
! 	       power_controller_states[power_tdo_state_2].cost);
! 	  
! 	  double power_time2 = 1.0 - power_time1;
! 	  
! 	  h1 = power_time1*PERIOD+0.5;
! 	  h2 = PERIOD-h1;
! 	  //h1 = PERIOD;
! 	  
! 	  double sys_speedup = (power_controller_states[power_tdo_state_1].speedup 
! 				* power_time1 
! 				+
! 				power_controller_states[power_tdo_state_2].speedup
! 				* power_time2);
! 	  
! 	  double sub_speedup = speed_u;//sys_speedup;
! 	  
! 	  
! 
! 	  speed_tdo_state_1 = speed_translate(sub_speedup,
! 					      speed_controller_states,
! 					      (int) NAPPSTATES);
! 	  //speed_tdo_state_1 = 17;
! 	  speed_tdo_state_2 = speed_translate2(sub_speedup,
! 					       speed_controller_states,
! 					       (int) NAPPSTATES);
! 	  //	   speed_tdo_state_2 = 20;
! 	  double speed_time1;
! 	  
! 	  
! 
! 	  if (hbr.beat >=1000) speed_tdo_state_1 = speed_tdo_state_2 = 51; 
! 	  //else  speed_tdo_state_1 = speed_tdo_state_2 = 0; 
! 	  
! 	  if(speed_controller_states[speed_tdo_state_1].speedup == 
! 	     speed_controller_states[speed_tdo_state_2].speedup ||
! 	     sub_speedup == speed_controller_states[speed_tdo_state_1].speedup) 
! 	    speed_time1 = 1.0;
! 	  else
! 	    speed_time1 = (sub_speedup - 
! 			   speed_controller_states[speed_tdo_state_2].speedup) /
! 	      (speed_controller_states[speed_tdo_state_1].speedup - 
! 	       speed_controller_states[speed_tdo_state_2].speedup);
! 	  
! 	  
! 	  double window_time = ((double) PERIOD)/(sub_speedup*base_speed);
! 	  
! 	  speed_time1 = (window_time - ((double) PERIOD)/(base_speed*speed_controller_states[speed_tdo_state_2].speedup))
! 	    /
! 	    (1.0/(base_speed*speed_controller_states[speed_tdo_state_1].speedup) 
! 	     - 1.0/(base_speed*speed_controller_states[speed_tdo_state_2].speedup));
! 	  
! 	  if(speed_time1 < 0.0) speed_time1 = 0.0;
! 
! 	  //if(hbr.beat <  500) {speed_tdo_state_1 = 0; speed_time1 = 1.0;}
! 	  //if(hbr.beat >= 500) {speed_tdo_state_1 = NAPPSTATES-1; speed_time1 = 1.0;}
! 	  //speed_tdo_state_1 = 27;
! 	  //speed_time1 = 1.0;
! 	  
! 	  double speed_time2 = ((double) PERIOD) - speed_time1;
! 	  
! 	  h3 = ((int)(speed_time1+0.5));
! 	  h4 = PERIOD - h3;
! 	  
! 	  
! 	  // h3 = speed_time1*PERIOD+0.5;
! 	  //h4 = PERIOD-h3;
! 	  
! 	  
! #if 1
! 	  printf("\nCONTROL beat=%lld, power=%f, des=%f, w=%f, u=%f, uo=%f, state=%d, state2=%d, %f, %f, %d, %d\n\n",
! 		 hbr.beat,act_power,power_goal,1.0/base_power,power_u,last_powerup,power_controller_states[power_tdo_state_1].id, power_tdo_state_2, power_time1, power_time2, h1, h2); 
! 	  
! #endif
! 	  
! 	  if(npids == 0) {
! 	    npids = get_all_subpids(getpid(), pids);
! 	  }
! 	  //power_tdo_state_1 = power_tdo_state_2 = 42;
! 	  power_apply(power_tdo_state_1,
! 		      pids,
! 		      npids,
! 		      power_states,
! 		      NSYSSTATES);
! 	  
! 	  speed_apply(speed_tdo_state_1,
! 		      speed_states,
! 		      NAPPSTATES);
! 	  
! 	  if(h1 == 0)
! 	    power_apply(power_tdo_state_2,
! 			pids,
! 			npids,
! 			power_states,
! 			NSYSSTATES);
! 	  if(h3 == 0)
! 	    speed_apply(speed_tdo_state_2,
! 	  		speed_states,
! 	  		NAPPSTATES);
! 	}
! 	
! 	if (current_action == h1) {
! 	  // if(npids == 0) {
! 	  //npids = get_all_subpids(getpid(), pids);
! 	  //}
! 	  //printf("APPLYING 2\n");
! 	  power_apply(power_tdo_state_2,
! 		      pids,
! 		      npids,
! 		      power_states,
! 		      NSYSSTATES);
! 	  
! 	}
! 	if (current_action == h3) {
! 	  speed_apply(speed_tdo_state_2,
! 	  	      speed_states,
! 	  	      NAPPSTATES);
! 	}
! 	
! 	//	else if (current_action == PERIOD) {
! 	// if(npids == 0) {
! 	  //npids = get_all_subpids(getpid(), pids);
! 	//}
! 	//power_apply(power_tdo_state_1,
! 	//      pids,
! 	//      npids,
! 	//      power_states,
! 	//      NSYSSTATES);
! 	
! 	//}
! 	//else if (current_action == h1+PERIOD) {
! 	// if(npids == 0) {
! 	//npids = get_all_subpids(getpid(), pids);
! 	//}
! 	//power_apply(power_tdo_state_2,
! 	//      pids,
! 	//      npids,
! 	//      power_states,
! 	//      NSYSSTATES);
! 	
! 	//}
! 	
! 	
! 	current_action++;
! 	if(current_action == PERIOD) {
! 	  current_action = 0;
! 	}
!       
! #endif
! 
! cout << "Processing frame " << i << endl;
  		if(!pf.Update((float)i))														//Run particle filter step
  		{	cout << "Error loading observation data" << endl;
  			workers.JoinAll();
***************
*** 267,272 ****
--- 1230,1238 ----
  #if defined(ENABLE_PARSEC_HOOKS)
          __parsec_roi_end();
  #endif
+ 	//printf("Edge error took %f seconds\n", edgeTime);
+ 	//printf("Inside error took %f seconds\n", insideTime);
+ 	cout << "Leaving pthreads\n" << endl;
  
  	return 1;
  }
***************
*** 348,354 ****
          __parsec_roi_begin();
  #endif
  	for(int i = 0; i < frames; i++)														//process each set of frames
! 	{	cout << "Processing frame " << i << endl;
  		if(!pf.Update((float)i))														//Run particle filter step
  		{	cout << "Error loading observation data" << endl;
  			return 0;
--- 1314,1321 ----
          __parsec_roi_begin();
  #endif
  	for(int i = 0; i < frames; i++)														//process each set of frames
! 	  {		     heartbeat(&heart, i, 1.0);
! cout << "Processing frame " << i << endl;
  		if(!pf.Update((float)i))														//Run particle filter step
  		{	cout << "Error loading observation data" << endl;
  			return 0;
***************
*** 365,372 ****
--- 1332,1383 ----
  	return 1;
  }
  
+ extern int edgeDone;
+ extern pthread_t edgeHandle;
+ 
+ extern int insideDone;
+ extern pthread_t insideHandle;
+ 
  int main(int argc, char **argv)
  {
+         float min_heartrate;
+         float max_heartrate;
+ 
+         if(getenv("BODYTRACK_MIN_HEART_RATE") == NULL) {
+           min_heartrate = 0.0;
+         }
+         else
+           min_heartrate = atof(getenv("BODYTRACK_MIN_HEART_RATE"));
+ 
+         if(getenv("BODYTRACK_MAX_HEART_RATE") == NULL) {
+           max_heartrate = 5.0;
+         }
+         else
+           max_heartrate = atof(getenv("BODYTRACK_MAX_HEART_RATE"));
+ 
+         if(getenv("BODYTRACK_WINDOW_SIZE") == NULL) {
+           window_size = 20;
+         }
+         else
+           window_size = atoi(getenv("BODYTRACK_WINDOW_SIZE"));
+ 
+ 	if(getenv("BODYTRACK_POWER_TARGET") == NULL) {
+ 	  power_target = 70;
+ 	}
+ 	else
+ 	  power_target = atof(getenv("BODYTRACK_POWER_TARGET"));
+ 
+         printf("init heartbeat with %f %f %d\n", min_heartrate, max_heartrate, window_size);
+ 	/*
+  	heartbeat_init(&heart, 
+ 		       min_heartrate, max_heartrate, 
+ 		       0, 1,
+ 		       0, 150,
+ 		       window_size, 100, "heartbeat.log");
+ 	*/
+         printf("heartbeat init'd\n");
+ 
+ 
  	string path;
  	bool OutputBMP;
  	int cameras, frames, particles, layers, threads, threadModel;								//process command line parameters to get path, cameras, and frames
***************
*** 385,390 ****
--- 1396,1407 ----
  	if(!ProcessCmdLine(argc, argv, path, cameras, frames, particles, layers, threads, threadModel, OutputBMP))	
  		return 0;
  
+        heartbeat_init(&heart,
+                        min_heartrate, max_heartrate,
+ 		      0, 1,
+ 		      0, 150,
+                        window_size, 1, "bodytrack_heartbeat.log");
+ 
          if(threadModel == 0) {
  #if defined(USE_TBB)
                  threadModel = 1;
***************
*** 448,453 ****
--- 1465,1482 ----
                          cout << "               4 = Serial" << endl;
  			break;
  	}
+ 	//heartbeat_finish(&heart);
+ 	cout << "Edning benchmark\n" << endl;
+ 	cout << "Edning benchmark\n" << endl;
+ 	//__sync_add_and_fetch(&edgeDone, 1);
+ 	//__sync_add_and_fetch(&insideDone, 1);
+ 	//	pthread_join(edgeHandle, NULL);
+ 	//pthread_join(insideHandle, NULL);
+ 	printf("Edge error took %f seconds\n", edgeTime);
+ 	printf("Inside error took %f seconds\n", insideTime);
+ 	printf("Edge map took %f seconds\n", edgeMapTime);
+ 	printf("Inside map took %f seconds\n", insideMapTime);
+ 
  
  #if defined(ENABLE_PARSEC_HOOKS)
          __parsec_bench_end();
Only in parsec-2.0-modified/pkgs/apps/bodytrack/src/TrackingBenchmark: main.cpp~
diff -crB parsec-2.0/pkgs/apps/bodytrack/src/TrackingBenchmark/ParticleFilter.h parsec-2.0-modified/pkgs/apps/bodytrack/src/TrackingBenchmark/ParticleFilter.h
*** parsec-2.0/pkgs/apps/bodytrack/src/TrackingBenchmark/ParticleFilter.h	2008-09-04 12:35:24.000000000 -0500
--- parsec-2.0-modified/pkgs/apps/bodytrack/src/TrackingBenchmark/ParticleFilter.h	2019-04-04 11:20:46.640276950 -0500
***************
*** 40,46 ****
  #include "RandomGenerator.h"
  #include "AnnealingFactor.h"
  
! #define uint unsigned int								
  #undef min
  
  //Generic particle filter class templated on model object
--- 40,48 ----
  #include "RandomGenerator.h"
  #include "AnnealingFactor.h"
  
! //#define uint unsigned int								
! #include <stdlib.h>
! 
  #undef min
  
  //Generic particle filter class templated on model object
Only in parsec-2.0-modified/pkgs/apps/bodytrack/src/TrackingBenchmark: ParticleFilter.h~
diff -crB parsec-2.0/pkgs/apps/bodytrack/src/TrackingBenchmark/TrackingModel.cpp parsec-2.0-modified/pkgs/apps/bodytrack/src/TrackingBenchmark/TrackingModel.cpp
*** parsec-2.0/pkgs/apps/bodytrack/src/TrackingBenchmark/TrackingModel.cpp	2008-09-04 12:35:25.000000000 -0500
--- parsec-2.0-modified/pkgs/apps/bodytrack/src/TrackingBenchmark/TrackingModel.cpp	2019-04-04 11:20:46.640276950 -0500
***************
*** 26,32 ****
  #include "FlexLib.h"
  #include "system.h"
  
! #define uint unsigned int
  
  using namespace std;
  
--- 26,33 ----
  #include "FlexLib.h"
  #include "system.h"
  
! //#define uint unsigned int
! //#include <types.h>
  
  using namespace std;
  
***************
*** 86,91 ****
--- 87,95 ----
  }
  
  // ------------------------- Likelihood computation ---------------------------
+ extern double edgeTime;
+ extern double insideTime;
+ #include <sys/time.h>
  
  //Calculate the likelihood for the current observation
  float TrackingModel::LogLikelihood(const vector<float> &v, bool &valid, int thread)
***************
*** 108,115 ****
--- 112,130 ----
  	if(!body.Valid())														//test for valid geometry (reject poses with intersecting body parts)
  		return -1e10;
  	projections.ImageProjection(body, mCameras);							//compute projected 2D points into each camera image for each body part
+ 	struct timeval t1;
+ 	gettimeofday(&t1,NULL);
+ 	double time1 = (double)t1.tv_sec+(double)t1.tv_usec*1e-6;
  	float err = measurements.ImageErrorEdge(mEdgeMaps, projections);		//compute cylinder edge map term
+ 	struct timeval t2;
+ 	gettimeofday(&t2,NULL);
+ 	double time2 = (double)t2.tv_sec+(double)t2.tv_usec*1e-6;
  	err += measurements.ImageErrorInside(mFGMaps, projections);				//compute silhouette term
+ 	struct timeval t3;
+ 	gettimeofday(&t3,NULL);
+ 	double time3 = (double)t3.tv_sec+(double)t3.tv_usec*1e-6;
+ 	edgeTime += time2-time1;
+ 	insideTime += time3-time2;
  	valid = true;
  	return -err;
  }
Only in parsec-2.0-modified/pkgs/apps/bodytrack/src/TrackingBenchmark: TrackingModel.cpp~
Only in parsec-2.0-modified/pkgs/apps/bodytrack/src/TrackingBenchmark: TrackingModel-orig.cpp
Only in parsec-2.0-modified/pkgs/apps/bodytrack/src/TrackingBenchmark: TrackingModel-sip.cpp
Only in parsec-2.0-modified/pkgs/apps: bodytrack-orig
Only in parsec-2.0/pkgs/apps/facesim: inputs
Only in parsec-2.0-modified/pkgs/apps/facesim: inst
Only in parsec-2.0-modified/pkgs/apps/facesim: obj
diff -crB parsec-2.0/pkgs/apps/facesim/src/Benchmarks/facesim/main.cpp parsec-2.0-modified/pkgs/apps/facesim/src/Benchmarks/facesim/main.cpp
*** parsec-2.0/pkgs/apps/facesim/src/Benchmarks/facesim/main.cpp	2007-10-16 12:16:45.000000000 -0500
--- parsec-2.0-modified/pkgs/apps/facesim/src/Benchmarks/facesim/main.cpp	2019-04-04 11:20:55.492483754 -0500
***************
*** 14,19 ****
--- 14,24 ----
  #include <hooks.h>
  #endif
  
+ #include <heartbeat-accuracy-power.h>
+ heartbeat_t heart;
+ int window_size;
+ float power_target;
+ 
  using namespace PhysBAM;
  
  #ifdef USE_DEFAULT_SERIAL
***************
*** 41,46 ****
--- 46,88 ----
      __parsec_bench_begin(__parsec_facesim);
  #endif
  
+ 	float min_heartrate;
+ 	float max_heartrate; 
+ 	
+ 	if(getenv("FACESIM_MIN_HEART_RATE") == NULL) {
+ 	  min_heartrate = 0.0;
+ 	}
+ 	else
+ 	  min_heartrate = atof(getenv("FACESIM_MIN_HEART_RATE"));
+ 
+ 	if(getenv("FACESIM_MAX_HEART_RATE") == NULL) {
+ 	  max_heartrate = 100.0;
+ 	}
+ 	else
+ 	  max_heartrate = atof(getenv("FACESIM_MAX_HEART_RATE"));
+ 	
+ 	if(getenv("FACESIM_WINDOW_SIZE") == NULL) {
+ 	  window_size = 20;
+ 	}
+ 	else
+ 	  window_size = atoi(getenv("FACESIM_WINDOW_SIZE"));
+ 
+ 	if(getenv("FACESIM_POWER_TARGET") == NULL) {
+ 	  power_target = 70;
+ 	}
+ 	else
+ 	  power_target = atof(getenv("FACESIM_POWER_TARGET"));
+ 	
+ 	printf("init heartbeat with %f %f %d\n", min_heartrate, max_heartrate, window_size);
+ 	
+ 	heartbeat_init(&heart, 
+ 		       min_heartrate, max_heartrate,
+ 		       0, 1,
+ 		       0, 150,
+ 		       window_size, 100, "heartbeat.log");
+ 	
+ 	printf("heartbeat init'd\n");
+ 
      PARSE_ARGS parse_args;
      parse_args.Add_Integer_Argument("-restart", 0);
      parse_args.Add_Integer_Argument("-lastframe", 300);
***************
*** 82,87 ****
--- 124,130 ----
      delete output;
      delete (THREAD_POOL::Singleton());
      */
+   heartbeat_finish(&heart);
  
  #ifdef ENABLE_PARSEC_HOOKS
      __parsec_bench_end();
Only in parsec-2.0-modified/pkgs/apps/facesim/src/Benchmarks/facesim: main.cpp~
diff -crB parsec-2.0/pkgs/apps/facesim/src/Public_Library/Matrices_And_Vectors/VECTOR_ND_PARALLEL.h parsec-2.0-modified/pkgs/apps/facesim/src/Public_Library/Matrices_And_Vectors/VECTOR_ND_PARALLEL.h
*** parsec-2.0/pkgs/apps/facesim/src/Public_Library/Matrices_And_Vectors/VECTOR_ND_PARALLEL.h	2007-08-12 23:15:17.000000000 -0500
--- parsec-2.0-modified/pkgs/apps/facesim/src/Public_Library/Matrices_And_Vectors/VECTOR_ND_PARALLEL.h	2019-04-04 11:20:55.544484970 -0500
***************
*** 10,15 ****
--- 10,16 ----
  #include <assert.h>
  #include <iostream>
  #include <math.h>
+ #include <stdio.h>
  #include "../Math_Tools/sqr.h"
  #include "../Math_Tools/maxabs.h"
  #include "../Arrays/ARRAY.h"
Only in parsec-2.0-modified/pkgs/apps/facesim/src/Public_Library/Matrices_And_Vectors: VECTOR_ND_PARALLEL.h~
diff -crB parsec-2.0/pkgs/apps/facesim/src/Public_Library/Solids_And_Fluids/SOLIDS_FLUIDS_DRIVER.cpp parsec-2.0-modified/pkgs/apps/facesim/src/Public_Library/Solids_And_Fluids/SOLIDS_FLUIDS_DRIVER.cpp
*** parsec-2.0/pkgs/apps/facesim/src/Public_Library/Solids_And_Fluids/SOLIDS_FLUIDS_DRIVER.cpp	2007-10-11 12:49:03.000000000 -0500
--- parsec-2.0-modified/pkgs/apps/facesim/src/Public_Library/Solids_And_Fluids/SOLIDS_FLUIDS_DRIVER.cpp	2019-04-04 11:20:55.584485907 -0500
***************
*** 40,50 ****
--- 40,918 ----
  //#####################################################################
  // Function Simulate_To_Frame
  //#####################################################################
+ #include <heartbeat-accuracy-power.h>
+ extern heartbeat_t heart;
+ extern int window_size;
+ extern float power_target;
+ //---------------------------------------------------
+ // Control stuff
+ 
+ int current_action = -1;
+ int h1, h2, h3, h4;
+ int max_actions = 0;
+ 
+ typedef struct {
+   int beat;
+   double rate;
+   int state;
+ } controller_log_entry_t;
+ 
+ 
+ controller_log_entry_t controller_log[1000];
+ 
+ 
+ #define FAST 1
+ #define SLOW 1
+ 
+ #if FAST 
+ double p1 = 0.0;
+ double p2 = 0.0;
+ double z1 = 0.0;
+ #elif SLOW
+ const double p1 = 0.01;
+ const double p2 = 0.1;
+ const double z1 = 0.05;
+ #else
+ const double p1 = -0.5;
+ const double p2 =  0.0;
+ const double z1 =  0.0;
+ #endif
+ 
+ const double mu = 1.0;
+ //double last_speedup = 1.0;
+ #define STARTING_POWERUP 7.4
+ #define STARTING_SPEEDUP 3
+ double last_powerup = STARTING_POWERUP;
+ double last_speedup = STARTING_SPEEDUP;
+ 
+ double act_acc  = 0.0;                 // and the idled application
+ 
+ double power_u         = STARTING_POWERUP;                   // control variable
+ double power_uo        = STARTING_POWERUP;                   // old value for the control variable
+ double power_uoo       = STARTING_POWERUP;
+ double power_e         = 100000;
+ double power_eo        = 100000;
+ 
+ double speed_u         = STARTING_SPEEDUP;                   // control variable
+ double speed_uo        = STARTING_SPEEDUP;                   // old value for the control variable
+ double speed_uoo       = STARTING_SPEEDUP;
+ double speed_e         = 100000;
+ double speed_eo        = 100000;
+ 
+ int state_1 = 0;
+ int state_2 = 0;
+ int power_tdo_state_1 = 0;
+ int power_tdo_state_2 = 0;
+ int speed_tdo_state_1 = 0;
+ int speed_tdo_state_2 = 0;
+ int current_beat = 0;
+ int npids = 0;
+ pid_t pids[128]; 
+ int apps[1024];
+ 
+ 
+ int get_all_subpids(pid_t pid, pid_t* pids) {
+   int   n=0;
+   FILE  *cret;
+   int   stret;
+   char  pid_string[128];
+   char  cretpids[100];	
+   sprintf(cretpids,"ps -eLf | awk '(/%d/) && (!/awk/) {print $4}'",pid);
+   cret = popen(cretpids, "r");
+ 
+   if (cret == NULL) { 
+     printf("Error in popen\n"); 
+     exit(-1); 
+   }
+ 
+   while (fgets(pid_string, 128, cret) != NULL)  { 
+       pids[n] = atoi(pid_string); 
+       printf(" from ps - %d\n", pids[n]);
+       n++; 
+     }
+ 
+   stret = pclose(cret);
+ 
+   if (stret == -1) { 
+     printf("Error in pclose\n"); 
+     exit(-1); 
+   }
+ 
+   return n;
+ }
+ 
+ typedef int state_id_t;
+ 
+ //#define NSTATES 17
+ #define NSYSSTATES 53
+ //#define NSYSSTATES 12
+ #define NAPPSTATES 52
+ 
+ typedef struct {
+   int id;
+ 
+   double speedup;
+   double cost;
+ } control_state_t;
+ 
+ typedef struct {
+ 
+   int id;
+ 
+   double freq;
+   int cores; 
+ } power_state_t;
+ 
+ typedef struct {
+   int id;
+ 
+   int ref;
+   int range;
+   int subme;
+ } speed_state_t;
+ 
+ typedef struct {
+   int id;
+ 
+   int ref;
+   int range;
+   int subme;
+ } accuracy_state_t;
+ 
+ 
+ control_state_t power_controller_states[] = {
+ #if NSYSSTATES == 53
+ {	0	,	1	,	1	},
+ {	1	,	1.163271732	,	1.065459386	},
+ {	2	,	1.326450802	,	1.152370031	},
+ {	3	,	2.000779119	,	1.158258946	},
+ {	4	,	2.342362224	,	1.255978706	},
+ {	5	,	2.998628978	,	1.299315462	},
+ {	6	,	3.497754833	,	1.439517358	},
+ {	7	,	3.998042748	,	1.444595407	},
+ {	8	,	4.008467244	,	1.589721291	},
+ {	9	,	4.971273774	,	1.592954925	},
+ {	10	,	5.930045717	,	1.726970261	},
+ {	11	,	6.112010628	,	1.752157068	},
+ {	12	,	6.294323495	,	1.772866618	},
+ {	13	,	6.540468322	,	1.816738742	},
+ {	14	,	6.830129396	,	1.847993334	},
+ {	15	,	7.014754091	,	1.875424987	},
+ {	16	,	7.22679923	,	1.895050481	},
+ {	17	,	7.363138412	,	2.029663413	},
+ {	18	,	7.673919847	,	2.073628968	},
+ {	19	,	7.872333244	,	2.092926031	},
+ {	20	,	8.135646106	,	2.131456092	},
+ {	21	,	8.391979993	,	2.167973466	},
+ {	22	,	8.404035533	,	2.301570847	},
+ {	23	,	8.711506659	,	2.349388177	},
+ {	24	,	8.888993528	,	2.362690163	},
+ {	25	,	9.282032517	,	2.425433104	},
+ {	26	,	9.57516275	,	2.454561209	},
+ {	27	,	9.739863181	,	2.636924624	},
+ {	28	,	10.0788924	,	2.687586586	},
+ {	29	,	10.4058207	,	2.74523928	},
+ {	30	,	10.79348906	,	2.769645477	},
+ {	31	,	10.80531768	,	2.974609988	},
+ {	32	,	11.15136748	,	3.019535793	},
+ {	33	,	11.51035878	,	3.096745832	},
+ {	34	,	11.91013564	,	3.121659746	},
+ {	35	,	12.18132289	,	3.376517983	},
+ {	36	,	13.08318039	,	3.442629909	},
+ {	37	,	13.29497213	,	3.812376705	},
+ {	38	,	13.69964495	,	3.880726313	},
+ {	39	,	14.18314966	,	3.955659357	},
+ {	40	,	14.38812127	,	4.260517126	},
+ {	41	,	14.81921322	,	4.346649056	},
+ {	42	,	15.35247753	,	4.420098325	},
+ {	43	,	15.36429858	,	4.744361745	},
+ {	44	,	15.84191262	,	4.828515862	},
+ {	45	,	16.51979142	,	4.96835753	},
+ {	46	,	16.97220796	,	5.334766603	},
+ {	47	,	17.67476894	,	5.486239027	},
+ {	48	,	18.11240302	,	5.917762179	},
+ {	49	,	18.7258797	,	6.043033844	},
+ {	50	,	18.99855523	,	7.015605922	},
+ {	51	,	19.68798937	,	7.176472013	},
+ {	52	,	20.52524998	,	7.349292258	}
+ #else
+ {	0	,	1	,	1	},
+ {	1	,	1.163271732	,	1.065459386	},
+ {	2	,	1.326450802	,	1.152370031	},
+ {	3	,	1.488810095	,	1.24329113	},
+ {	4	,	1.650068787	,	1.353627355	},
+ {	5	,	1.80753684	,	1.468675067	},
+ {	6	,	1.967211766	,	1.584900326	},
+ {	7	,	2.125857007	,	1.733380748	},
+ {	8	,	2.280853438	,	1.860046486	},
+ {	9	,	2.437647326	,	2.042786943	},
+ {	10	,	2.591623527	,	2.253330233	},
+ {	11	,	3.080682296	,	3.09230493	}
+ #endif
+ };
+ 
+ control_state_t speed_controller_states[] = {
+ {	0	,	1	,	0	},
+ #if 1
+ {	1	,	1.077	,	0.11	},
+ {	2	,	1.0797	,	0.1175	},
+ {	3	,	1.1032	,	0.14	},
+ {	4	,	1.1902	,	0.16	},
+ {	5	,	1.2182	,	0.21	},
+ {	6	,	1.2187	,	0.23	},
+ {	7	,	1.2415	,	0.2425	},
+ {	8	,	1.3105	,	0.2775	},
+ {	9	,	1.333	,	0.3025	},
+ {	10	,	1.404	,	0.4325	},
+ {	11	,	1.4055	,	0.4325	},
+ {	12	,	1.4257	,	0.4725	},
+ {	13	,	1.52	,	0.535	},
+ {	14	,	1.5405	,	0.6475	},
+ {	15	,	1.5407	,	0.6475	},
+ {	16	,	1.556	,	0.7475	},
+ {	17	,	1.6357	,	0.8425	},
+ {	18	,	1.653	,	0.905	},
+ {	19	,	1.674	,	0.9575	},
+ {	20	,	1.676	,	0.9575	},
+ {	21	,	1.8322	,	1.14	},
+ {	22	,	1.8402	,	1.1475	},
+ {	23	,	1.915	,	1.32	},
+ {	24	,	1.936	,	1.33	},
+ {	25	,	1.9557	,	1.38	},
+ {	26	,	1.9565	,	1.38	},
+ {	27	,	2.0372	,	1.595	},
+ {	28	,	2.0842	,	2.13	},
+ //{	29	,	2.1747	,	2.4025	},
+ //{	30	,	2.192	,	2.435	},
+ {	31	,	2.25 /*2.2545*/	,	2.485	},
+ {	32	,	2.2665	,	2.4975	},
+ {	33	,	2.3835	,	2.68	},
+ {	34	,	2.416	,	2.6875	},
+ {	35	,	2.4507	,	2.7375	},
+ {	36	,	2.5765	,	2.9575	},
+ {	37	,	2.589	,	3.0125	},
+ {	38	,	2.6955	,	3.5325	},
+ {	39	,	2.701	,	3.545	},
+ {	40	,	2.7665	,	4.82	},
+ {	41	,	2.827	,	4.845	},
+ {	42	,	2.8807	,	4.85	},
+ {	43	,	3.1925	,	5.18	},
+ {	44	,	3.2432	,	5.2775	},
+ {	45	,	3.3797	,	5.4325	},
+ {	46	,	3.3822	,	5.5775	},
+ {	47	,	3.4307	,	5.6225	},
+ {	48	,	3.457	,	5.705	},
+ {	49	,	3.7525	,	5.7325	},
+ {	50	,	3.7615	,	5.7325	},
+ {	51	,	4.1185	,	6.2425	},
+ {	52	,	4.2537	,	6.255	},
+ #endif
+ {	53	,	7/*4.2615*/	,	6.295	}
+ };
+ 
+ speed_state_t speed_states[] = {
+ {	0	,	5,16,7	},
+ #if 1
+ {	1	,	5,15,7	},
+ {	2	,	5,14,7	},
+ {	3	,	5,12,7	},
+ {	4	,	5,10,7	},
+ {	5	,	4,15,7	},
+ {	6	,	4,14,7	},
+ {	7	,	4,12,7	},
+ {	8	,	4,11,7	},
+ {	9	,	4,10,7	},
+ {	10	,	3,15,7	},
+ {	11	,	3,14,7	},
+ {	12	,	3,12,7	},
+ {	13	,	3,10,7	},
+ {	14	,	3,9,7	},
+ {	15	,	3,8,7	},
+ {	16	,	2,12,7	},
+ {	17	,	3,6,7	},
+ {	18	,	2,10,7	},
+ {	19	,	2,9,7	},
+ {	20	,	2,8,7	},
+ {	21	,	1,13,7	},
+ {	22	,	1,12,7	},
+ {	23	,	1,11,7	},
+ {	24	,	1,10,7	},
+ {	25	,	1,9,7	},
+ {	26	,	1,8,7	},
+ {	27	,	1,6,7	},
+ {	28	,	1,4,7	},
+ //{	29	,	2,7,6	},
+ //{	30	,	2,6,6	},
+ {	31	,	1,13,6	},
+ {	32	,	1,12,6	},
+ {	33	,	1,11,6	},
+ {	34	,	1,10,6	},
+ {	35	,	1,9,6	},
+ {	36	,	1,7,6	},
+ {	37	,	1,6,6	},
+ {	38	,	1,5,6	},
+ {	39	,	1,4,6	},
+ {	40	,	3,11,1	},
+ {	41	,	3,10,1	},
+ {	42	,	3,9,1	},
+ {	43	,	3,7,1	},
+ {	44	,	3,6,1	},
+ {	45	,	3,5,1	},
+ {	46	,	3,4,1	},
+ {	47	,	1,12,1	},
+ {	48	,	2,7,1	},
+ {	49	,	1,9,1	},
+ {	50	,	1,8,1	},
+ {	51	,	1,6,1	},
+ {	52	,	1,5,1	},
+ #endif
+ {	53	,	1,4,1	}
+ };
+ 
+ power_state_t power_states[] = {
+ #if NSYSSTATES == 53
+ {	0	,	1.2	,	1	},
+ {	1	,	1.4	,	1	},
+ {	2	,	1.6	,	1	},
+ {	3	,	1.2	,	2	},
+ {	4	,	1.4	,	2	},
+ {	5	,	1.2	,	3	},
+ {	6	,	1.4	,	3	},
+ {	7	,	1.2	,	4	},
+ {	8	,	1.6	,	3	},
+ {	9	,	1.2	,	5	},
+ {	10	,	1.2	,	6	},
+ {	11	,	1.2	,	7	},
+ {	12	,	1.2	,	8	},
+ {	13	,	1.2	,	9	},
+ {	14	,	1.2	,	10	},
+ {	15	,	1.2	,	11	},
+ {	16	,	1.2	,	12	},
+ {	17	,	1.4	,	8	},
+ {	18	,	1.4	,	9	},
+ {	19	,	1.4	,	10	},
+ {	20	,	1.4	,	11	},
+ {	21	,	1.4	,	12	},
+ {	22	,	1.6	,	8	},
+ {	23	,	1.6	,	9	},
+ {	24	,	1.6	,	10	},
+ {	25	,	1.6	,	11	},
+ {	26	,	1.6	,	12	},
+ {	27	,	1.8	,	9	},
+ {	28	,	1.8	,	10	},
+ {	29	,	1.8	,	11	},
+ {	30	,	1.8	,	12	},
+ {	31	,	2	,	9	},
+ {	32	,	2	,	10	},
+ {	33	,	2	,	11	},
+ {	34	,	2	,	12	},
+ {	35	,	2.2	,	10	},
+ {	36	,	2.2	,	12	},
+ {	37	,	2.4	,	10	},
+ {	38	,	2.4	,	11	},
+ {	39	,	2.4	,	12	},
+ {	40	,	2.6	,	10	},
+ {	41	,	2.6	,	11	},
+ {	42	,	2.6	,	12	},
+ {	43	,	2.8	,	10	},
+ {	44	,	2.8	,	11	},
+ {	45	,	2.8	,	12	},
+ {	46	,	3	,	11	},
+ {	47	,	3	,	12	},
+ {	48	,	3.2	,	11	},
+ {	49	,	3.2	,	12	},
+ {	50	,	3.201	,	10	},
+ {	51	,	3.201	,	11	},
+ {	52	,	3.201	,	12	}
+ #else
+ {	0	,	1.2	,	1	},
+ {	1	,	1.4	,	1	},
+ {	2	,	1.6	,	1	},
+ {	3	,	1.8	,	1	},
+ {	4	,	2.0	,	1	},
+ {	5	,	2.2	,	1	},
+ {	6	,	2.4	,	1	},
+ {	7	,	2.6	,	1	},
+ {	8	,	2.8	,	1	},
+ {	9	,	3.0	,	1	},
+ {	10	,	3.2	,	1	},
+ {	11	,	3.201	,	1	}
+ #endif
+ };
+ 
+ double x_hat_minus = 0.0;
+ double x_hat = .2;
+ double Q = .00001;
+ double P = 1.0;
+ double P_minus = 0.0;
+ double H = 0.0;
+ double R = .01;
+ double K = 0.0; 
+ 
+ typedef struct {  
+   double x_hat_minus;
+   double x_hat;
+   double Q;
+   double P;
+   double P_minus;
+   double H;
+   double R;
+   double K;
+ } kalman_filter_t;
+ 
+ kalman_filter_t filter_init = {0.0, 0.3125, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ 
+ #define HEURISTIC_W 0
+ 
+ int adaptation_level = 1;
+ 
+ kalman_filter_t power_filter = {0.0, 0.2, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ kalman_filter_t speed_filter = {0.0, 0.3125, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ 
+ double get_base_value(kalman_filter_t* k,
+ 		      double current_measurement, 
+ 		      double last_coeff) {
+   
+   k->x_hat_minus = k->x_hat;
+   k->P_minus = k->P + k->Q;
+   
+   k->H = last_coeff;
+   k->K = k->P_minus * k->H /( k->H * k->P_minus* k->H + k->R);
+   k->x_hat = k->x_hat_minus + k->K * (current_measurement - k->H * k->x_hat_minus);
+   k->P = (1 - k->K * k->H) * k->P_minus;
+   
+   return 1.0/k->x_hat;
+ }
+ 
+ void get_power_signal(double current_power, 
+ 		      double desired_power,
+ 		      double base_power,
+ 		      double* e,
+ 		      double* eo,
+ 		      double* u,
+ 		      double* uo,
+ 		      double* uoo) {
+ 
+   if(current_power < desired_power) {
+     p1 = 0.1;
+     p2 = 0.8;
+     z1 = 0.2;
+     p1 = 0;
+     p2 = 0;
+     z1 = 0;
+   }
+   else {
+     p1 = 0;
+     p2 = 0;
+     z1 = 0;
+ 
+   }
+ 
+   
+   double A         = -(-p1*z1 - p2*z1 + mu*p1*p2 - mu*p2 + p2 - mu*p1 + p1 + mu);
+   double B         = -(-mu*p1*p2*z1 + p1*p2*z1 + mu*p2*z1 + mu*p1*z1 - mu*z1 - p1*p2);
+   double C         = ((mu - mu*p1)*p2 + mu*p1 - mu)*base_power;
+   double D         = ((mu*p1-mu)*p2 - mu*p1 + mu)*base_power*z1;
+   double F         = 1/(z1-1);
+   
+   double y = current_power;
+   *e = desired_power - y;
+   
+   //printf("u = %f, uo = %f, e = %f, A = %f, B= %f, C = %f, D= %f, F = %f\n",
+   // *u, *uo, *e, A, B, C, D, F);
+   
+   *u = F * (A*(*uo) + B*(*uoo) + C*(*e) + D*(*eo));
+ 
+   
+   
+   if (*u<1)  *u=1;        
+   if (*u>power_controller_states[NSYSSTATES-1].cost) *u=power_controller_states[NSYSSTATES-1].cost;  
+   *uoo = *uo;            // saving values
+   *uo  = *u;
+   *eo  = *e;
+ }
+ 
+ double max_speedup;
+ 
+ void get_speed_signal(double current_speed, 
+ 		      double desired_speed,
+ 		      double base_speed,
+ 		      double* e,
+ 		      double* eo,
+ 		      double* u,
+ 		      double* uo,
+ 		      double* uoo) {
+   //double p1 = 0.1;
+   //double p2 = 0.2;
+   //double z1 = 0.15; 
+ 
+   double A         = -(-p1*z1 - p2*z1 + mu*p1*p2 - mu*p2 + p2 - mu*p1 + p1 + mu);
+   double B         = -(-mu*p1*p2*z1 + p1*p2*z1 + mu*p2*z1 + mu*p1*z1 - mu*z1 - p1*p2);
+   double C         = ((mu - mu*p1)*p2 + mu*p1 - mu)*base_speed;
+   double D         = ((mu*p1-mu)*p2 - mu*p1 + mu)*base_speed*z1;
+   double F         = 1/(z1-1);
+   
+   double y = current_speed;
+   *e = desired_speed - y;
+   
+   
+   //*u = F * (A*(*uo) + B*(*uoo) + C*(*e) + D*(*eo));
+ 
+   *u = *uo + *e/base_speed;
+ 
+   //  printf("u = %f, uo = %f, e = %f, base_speed = %f\n",
+   // *u, *uo, *e, base_speed);
+ 
+ 
+   //double max_speedup = speed_controller_states[NAPPSTATES-1].speedup * 
+   //power_controller_states[NSYSSTATES-1].speedup;
+   if (*u<1)  *u=1;        
+   if (*u>max_speedup) *u=max_speedup;  
+   *uoo = *uo;            // saving values
+   *uo  = *u;
+   *eo  = *e;
+ }
+ 
+ 
+ int power_translate(double u, 
+ 		    const control_state_t* states, 
+ 		    int nstates) {
+   int i;
+ 
+   control_state_t cs = states[nstates-1];
+ 
+   double efficiency = cs.speedup/cs.cost;
+   int index = nstates-1;
+ 
+ 
+   for(i = 0; i < nstates; i++) {
+     if(states[i].cost >= u) {
+ 
+       double new_eff = states[i].speedup/states[i].cost;
+       if(new_eff > efficiency) {
+ 
+ 	cs = states[i];
+ 	efficiency = new_eff;
+ 	index = i;
+       }	
+     }
+   }
+ 
+   return index;
+ }
+ 
+ int power_translate2(double u, 
+ 		     const control_state_t* states, 
+ 		     int state1,
+ 		     const power_state_t* pstates,
+ 		     int nstates) {
+   int i;
+   
+   control_state_t cs = states[0];
+   
+   double efficiency = cs.speedup;///cs.cost;
+     int index = 0;
+     
+     for(i = 0; i < nstates; i++) {
+       if(states[i].cost < u && pstates[state1].cores == pstates[i].cores) {
+ 	
+ 	double new_eff = states[i].speedup;///states[i].cost;
+ 	  if(new_eff >= efficiency) {
+ 	    
+ 	    cs = states[i];
+ 	    efficiency = new_eff;
+ 	    index = i;
+ 	  }	
+       }
+     }
+     
+     return index;
+ }
+ 
+ int speed_translate(double u, 
+ 		    const control_state_t* states, 
+ 		    int nstates) {
+   int i;
+ 
+   control_state_t cs = states[nstates-1];
+ 
+   double efficiency = cs.speedup/(cs.cost+1);
+   int index = nstates-1;
+ 
+ 
+   for(i = 0; i < nstates; i++) {
+     if(states[i].speedup >= u) {
+ 
+       //index = i;
+       //break;
+       double new_eff = states[i].speedup/(states[i].cost+1);
+       if(new_eff > efficiency) {
+ 
+       	cs = states[i];
+ 	efficiency = new_eff;
+ 	index = i;
+       }	
+     }
+   }
+ 
+   return index;
+ }
+ 
+ int speed_translate2(double u, 
+ 		     const control_state_t* states, 
+ 		     int nstates) {
+   int i;
+   
+   control_state_t cs = states[0];
+   
+   double efficiency = cs.speedup/(cs.cost+1);
+     int index = 0;
+     
+     for(i = 0; i < nstates; i++) {
+       if(states[i].speedup < u) {
+ 	
+ 	double new_eff = states[i].speedup/(states[i].cost+1);
+ 	  if(new_eff >= efficiency) {
+ 	    
+ 	    cs = states[i];
+ 	    efficiency = new_eff;
+ 	    index = i;
+ 	  }	
+       }
+     }
+     
+     return index;
+ }
+ 
+ 
+ int last_speed_state = 0;	
+ int control_nref = 5;
+ int control_range = 16;
+ int control_refine = 7;
+ 
+ void speed_apply(int state,
+ 		 speed_state_t* ps,
+ 		 int nstates) {
+   
+   char command[4096];
+   int i;
+   
+   //printf("APPLYING SPPED STATE %d\n", state);
+ 
+   if(last_speed_state ==state)
+     return;
+   else 
+     last_speed_state = state;
+ 
+ #if 0
+   control_nref = ps[state].ref;
+   control_range = ps[state].range;
+   control_refine = ps[state].subme;
+ #endif
+   //sprintf(command,"echo \"%d\n%d\n%d\n\" >  x264_settings",
+   //	  ps[state].ref,ps[state].range,ps[state].subme);
+   //system(command);
+   
+ }
+ 
+ int last_power_state = 52;
+ int last_cores = 12;
+ int power_apply(int state_id,
+ 		pid_t* pid,
+ 		int npids,
+ 		const power_state_t* states,
+ 		int nstates) {
+   
+   int i;
+   
+   int rc = 0;
+   int retvalsyscall1 = 0;
+   int retvalsyscall2 = 0;
+   power_state_t state = states[0];
+   char command[4096];
+   
+   if(state_id == last_power_state)
+     return 0;
+   else
+     last_power_state = state_id;
+   
+   for(i = 0; i < nstates; i++) {
+     if( states[i].id == state_id) {
+       state = states[i];
+       break;
+     }
+   }
+ 
+ #if 0
+   sprintf(command,"taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; ",
+ 	  state.cores-1, getpid(), 
+ 	  state.cores-1, pid[1],
+ 	  state.cores-1, pid[2],
+ 	  state.cores-1, pid[3],
+ 	  state.cores-1, pid[4],
+ 	  state.cores-1, pid[5],
+ 	  state.cores-1, pid[6],
+ 	  state.cores-1, pid[7],
+ 	  state.cores-1, pid[8],
+ 	  state.cores-1, pid[9],
+ 	  state.cores-1, pid[10],
+ 	  state.cores-1, pid[11]);
+   retvalsyscall1 = system(command);
+ #endif
+ 
+ #if 1
+ 
+   if(last_cores != state.cores) {
+     sprintf(command,"taskset -p -c 0-%d  %d > /dev/null",state.cores-1, getpid());
+     retvalsyscall1 = system(command);
+     //printf("%s\n", command);
+     for( i = 1; i < npids; i++) {
+       sprintf(command,"taskset -p -c 0-%d  %d > /dev/null",state.cores-1, pid[i]);
+       //printf("%s\n", command);
+       retvalsyscall1 = system(command);
+     }
+     last_cores = state.cores;
+   }
+ #endif 
+ 
+ #if 1
+   for(i = 0; i < 12; i++) {
+     sprintf(command,
+ 	    "echo %d > /sys/devices/system/cpu/cpu%d/cpufreq/scaling_setspeed", 
+ 	    (int) (state.freq * 1000000), i);
+     
+     retvalsyscall2 = system(command);
+     if(retvalsyscall2 != 0)
+       fprintf(stderr, "ERROR setting clocks: %d\n", retvalsyscall2);
+   }
+ #endif
+   
+   if(retvalsyscall1 || retvalsyscall2) {
+     rc = -1;
+   }
+ 
+   return rc;
+ }
+ //int window_size;
+ 
+ //----------------------------------------------------
+ 
+ 
+ 
+ 
  template<class T> void SOLIDS_FLUIDS_DRIVER<T>::
  Simulate_To_Frame(const int frame_input)
  {
      while(current_frame < frame_input){
          LOG::Push_Scope("FRAME","Frame %d",current_frame+1);
+ 	heartbeat(&heart, current_frame,1);
+ 
+ #if 0// Power and performance control
+ 	int PERIOD = window_size;
+ 	heartbeat_record_t hbr;
+ 	hb_get_current(&heart, &hbr);
+ 	
+ 	double power_goal = power_target;
+ 	double speed_goal = 1.4;
+ 	
+ 	//if(hbr.beat >= 100) {/*power_goal = 35.0;*/ speed_goal = 4.615;}
+ 	//if(hbr.beat >= 500) {speed_goal = 14.8;}
+ 	//if(hbr.beat >= 1000) {speed_goal = 10.6;}
+ 	
+ 	//	printf("power goal is 70\n");
+ 	
+ 	int old_action = __sync_fetch_and_add(&current_action,1);
+ 	if(old_action == PERIOD) {
+ 	  current_action = 0;
+ 	}
+ 	if( old_action == 0) {
+ 	  double act_power = hbr.window_power;
+ 	  double act_speed = hbr.window_rate;
+ 	  
+ 	  double base_power = get_base_value(&power_filter, act_power, last_powerup);
+ 	  
+ 	  get_power_signal(act_power,
+ 			   power_goal,
+ 			   base_power,
+ 			   &power_e,
+ 			   &power_eo,
+ 			   &power_u,
+ 			   &power_uo,
+ 			   &power_uoo);
+ 	  
+ 	  double act_power_up = last_powerup = power_u;
+ 	  
+ 	  power_tdo_state_1 = power_translate(power_u, 
+ 					      power_controller_states, 
+ 					      (int) NSYSSTATES);
+ 	  power_tdo_state_2 = power_translate2(power_u, 
+ 					       power_controller_states,
+ 					       power_tdo_state_1,
+ 					       power_states,
+ 					       (int) NSYSSTATES);
+ 	  
+ 	  //power_tdo_state_1 = power_tdo_state_2;
+ 
+ 	  if(power_controller_states[power_tdo_state_1].speedup 
+ 	     <= power_controller_states[power_tdo_state_2].speedup) {
+ 	    power_tdo_state_1 = power_tdo_state_2;
+ 	  }
+ 	  
+ 	  double power_time1;
+ 	  
+ 	  if(power_controller_states[power_tdo_state_1].cost == 
+ 	     power_controller_states[power_tdo_state_2].cost ||
+ 	     power_u == power_controller_states[power_tdo_state_1].cost) 
+ 	    power_time1 = 1.0;
+ 	  else
+ 	    power_time1 = (power_u - 
+ 		     power_controller_states[power_tdo_state_2].cost) /
+ 	      (power_controller_states[power_tdo_state_1].cost - 
+ 	       power_controller_states[power_tdo_state_2].cost);
+ 	  
+ 	  double power_time2 = 1.0 - power_time1;
+ 	  
+ 	  h1 = power_time1*PERIOD+0.5;
+ 	  h2 = PERIOD-h1;
+ 	  
+ #if 1
+ 	  printf("\nCONTROL beat=%lld, power=%f, des=%f, w=%f, u=%f, uo=%f, state=%d, state2=%d, %f, %f, %d, %d\n\n",
+ 		 hbr.beat,act_power,power_goal,1.0/base_power,power_u,last_powerup,power_controller_states[power_tdo_state_1].id, power_controller_states[power_tdo_state_2].id,  power_time1, power_time2, h1, h2); 
+ 	  
+ #endif
+ 	  
+ 	  if(npids == 0) {
+ 	    npids = get_all_subpids(getpid(), pids);
+ 	  }
+ 	  power_apply(power_tdo_state_1,
+ 		      pids,
+ 		      npids,
+ 		      power_states,
+ 		      NSYSSTATES);
+ 	  
+ 	  if(h1 == 0)
+ 	    power_apply(power_tdo_state_2,
+ 			pids,
+ 			npids,
+ 			power_states,
+ 			NSYSSTATES);
+ 	}
+ 	
+ 	if (old_action == h1) {
+ 	  if(npids == 0) {
+ 	    npids = get_all_subpids(getpid(), pids);
+ 	  }
+ 	  power_apply(power_tdo_state_2,
+ 		      pids,
+ 		      npids,
+ 		      power_states,
+ 		      NSYSSTATES);
+ 	  
+ 	}
+       
+ #endif
+ 
+ 
          Preprocess_Frame(current_frame+1);
          Advance_To_Target_Time(Time_At_Frame(current_frame+1));
          Postprocess_Frame(++current_frame);
Only in parsec-2.0-modified/pkgs/apps/facesim/src/Public_Library/Solids_And_Fluids: SOLIDS_FLUIDS_DRIVER.cpp~
diff -crB parsec-2.0/pkgs/apps/facesim/src/Public_Library/Utilities/STRING_UTILITIES.cpp parsec-2.0-modified/pkgs/apps/facesim/src/Public_Library/Utilities/STRING_UTILITIES.cpp
*** parsec-2.0/pkgs/apps/facesim/src/Public_Library/Utilities/STRING_UTILITIES.cpp	2008-09-26 18:38:27.000000000 -0500
--- parsec-2.0-modified/pkgs/apps/facesim/src/Public_Library/Utilities/STRING_UTILITIES.cpp	2019-04-04 11:20:55.540484877 -0500
***************
*** 8,13 ****
--- 8,15 ----
  #include <ctype.h>
  #include <cstring>
  #include "../Arrays/LIST_ARRAY.h"
+ #include <stdio.h>
+ 
  namespace PhysBAM{
  namespace STRING_UTILITIES{
  
Only in parsec-2.0-modified/pkgs/apps/facesim/src/Public_Library/Utilities: STRING_UTILITIES.cpp~
Only in parsec-2.0/pkgs/apps/ferret: inputs
Only in parsec-2.0-modified/pkgs/apps/ferret: inst
Only in parsec-2.0-modified/pkgs/apps/ferret: obj
diff -crB parsec-2.0/pkgs/apps/ferret/src/benchmark/ferret-parallel.c parsec-2.0-modified/pkgs/apps/ferret/src/benchmark/ferret-parallel.c
*** parsec-2.0/pkgs/apps/ferret/src/benchmark/ferret-parallel.c	2008-12-04 15:44:40.000000000 -0600
--- parsec-2.0-modified/pkgs/apps/ferret/src/benchmark/ferret-parallel.c	2019-04-04 11:20:56.112498262 -0500
***************
*** 34,39 ****
--- 34,796 ----
  #include <hooks.h>
  #endif
  
+ #include <heartbeat-accuracy-power.h>
+ heartbeat_t heart;
+ int window_size;
+ float power_target;
+ //---------------------------------------------------
+ // Control stuff
+ 
+ int current_action = -1;
+ int h1, h2, h3, h4;
+ int max_actions = 0;
+ 
+ typedef struct {
+   int beat;
+   double rate;
+   int state;
+ } controller_log_entry_t;
+ 
+ 
+ controller_log_entry_t controller_log[1000];
+ 
+ 
+ #define FAST 1
+ #define SLOW 1
+ 
+ #if FAST 
+ double p1 = 0.0;
+ double p2 = 0.0;
+ double z1 = 0.0;
+ #elif SLOW
+ const double p1 = 0.01;
+ const double p2 = 0.1;
+ const double z1 = 0.05;
+ #else
+ const double p1 = -0.5;
+ const double p2 =  0.0;
+ const double z1 =  0.0;
+ #endif
+ 
+ const double mu = 1.0;
+ //double last_speedup = 1.0;
+ #define STARTING_POWERUP 7.4
+ #define STARTING_SPEEDUP 3
+ double last_powerup = STARTING_POWERUP;
+ double last_speedup = STARTING_SPEEDUP;
+ 
+ double act_acc  = 0.0;                 // and the idled application
+ 
+ double power_u         = STARTING_POWERUP;                   // control variable
+ double power_uo        = STARTING_POWERUP;                   // old value for the control variable
+ double power_uoo       = STARTING_POWERUP;
+ double power_e         = 100000;
+ double power_eo        = 100000;
+ 
+ double speed_u         = STARTING_SPEEDUP;                   // control variable
+ double speed_uo        = STARTING_SPEEDUP;                   // old value for the control variable
+ double speed_uoo       = STARTING_SPEEDUP;
+ double speed_e         = 100000;
+ double speed_eo        = 100000;
+ 
+ int state_1 = 0;
+ int state_2 = 0;
+ int power_tdo_state_1 = 0;
+ int power_tdo_state_2 = 0;
+ int speed_tdo_state_1 = 0;
+ int speed_tdo_state_2 = 0;
+ int current_beat = 0;
+ int npids = 0;
+ pid_t pids[128]; 
+ int apps[1024];
+ 
+ 
+ int get_all_subpids(pid_t pid, pid_t* pids) {
+   int   n=0;
+   FILE  *cret;
+   int   stret;
+   char  pid_string[128];
+   char  cretpids[100];	
+   sprintf(cretpids,"ps -eLf | awk '(/%d/) && (!/awk/) {print $4}'",pid);
+   cret = popen(cretpids, "r");
+ 
+   if (cret == NULL) { 
+     printf("Error in popen\n"); 
+     exit(-1); 
+   }
+ 
+   while (fgets(pid_string, 128, cret) != NULL)  { 
+       pids[n] = atoi(pid_string); 
+       printf(" from ps - %d\n", pids[n]);
+       n++; 
+     }
+ 
+   stret = pclose(cret);
+ 
+   if (stret == -1) { 
+     printf("Error in pclose\n"); 
+     exit(-1); 
+   }
+ 
+   return n;
+ }
+ 
+ typedef int state_id_t;
+ 
+ //#define NSTATES 17
+ #define NSYSSTATES 53
+ //#define NSYSSTATES 12
+ #define NAPPSTATES 52
+ 
+ typedef struct {
+   int id;
+ 
+   double speedup;
+   double cost;
+ } control_state_t;
+ 
+ typedef struct {
+ 
+   int id;
+ 
+   double freq;
+   int cores; 
+ } power_state_t;
+ 
+ typedef struct {
+   int id;
+ 
+   int ref;
+   int range;
+   int subme;
+ } speed_state_t;
+ 
+ typedef struct {
+   int id;
+ 
+   int ref;
+   int range;
+   int subme;
+ } accuracy_state_t;
+ 
+ 
+ control_state_t power_controller_states[] = {
+ #if NSYSSTATES == 53
+ {	0	,	1	,	1	},
+ {	1	,	1.163271732	,	1.065459386	},
+ {	2	,	1.326450802	,	1.152370031	},
+ {	3	,	2.000779119	,	1.158258946	},
+ {	4	,	2.342362224	,	1.255978706	},
+ {	5	,	2.998628978	,	1.299315462	},
+ {	6	,	3.497754833	,	1.439517358	},
+ {	7	,	3.998042748	,	1.444595407	},
+ {	8	,	4.008467244	,	1.589721291	},
+ {	9	,	4.971273774	,	1.592954925	},
+ {	10	,	5.930045717	,	1.726970261	},
+ {	11	,	6.112010628	,	1.752157068	},
+ {	12	,	6.294323495	,	1.772866618	},
+ {	13	,	6.540468322	,	1.816738742	},
+ {	14	,	6.830129396	,	1.847993334	},
+ {	15	,	7.014754091	,	1.875424987	},
+ {	16	,	7.22679923	,	1.895050481	},
+ {	17	,	7.363138412	,	2.029663413	},
+ {	18	,	7.673919847	,	2.073628968	},
+ {	19	,	7.872333244	,	2.092926031	},
+ {	20	,	8.135646106	,	2.131456092	},
+ {	21	,	8.391979993	,	2.167973466	},
+ {	22	,	8.404035533	,	2.301570847	},
+ {	23	,	8.711506659	,	2.349388177	},
+ {	24	,	8.888993528	,	2.362690163	},
+ {	25	,	9.282032517	,	2.425433104	},
+ {	26	,	9.57516275	,	2.454561209	},
+ {	27	,	9.739863181	,	2.636924624	},
+ {	28	,	10.0788924	,	2.687586586	},
+ {	29	,	10.4058207	,	2.74523928	},
+ {	30	,	10.79348906	,	2.769645477	},
+ {	31	,	10.80531768	,	2.974609988	},
+ {	32	,	11.15136748	,	3.019535793	},
+ {	33	,	11.51035878	,	3.096745832	},
+ {	34	,	11.91013564	,	3.121659746	},
+ {	35	,	12.18132289	,	3.376517983	},
+ {	36	,	13.08318039	,	3.442629909	},
+ {	37	,	13.29497213	,	3.812376705	},
+ {	38	,	13.69964495	,	3.880726313	},
+ {	39	,	14.18314966	,	3.955659357	},
+ {	40	,	14.38812127	,	4.260517126	},
+ {	41	,	14.81921322	,	4.346649056	},
+ {	42	,	15.35247753	,	4.420098325	},
+ {	43	,	15.36429858	,	4.744361745	},
+ {	44	,	15.84191262	,	4.828515862	},
+ {	45	,	16.51979142	,	4.96835753	},
+ {	46	,	16.97220796	,	5.334766603	},
+ {	47	,	17.67476894	,	5.486239027	},
+ {	48	,	18.11240302	,	5.917762179	},
+ {	49	,	18.7258797	,	6.043033844	},
+ {	50	,	18.99855523	,	7.015605922	},
+ {	51	,	19.68798937	,	7.176472013	},
+ {	52	,	20.52524998	,	7.349292258	}
+ #else
+ {	0	,	1	,	1	},
+ {	1	,	1.163271732	,	1.065459386	},
+ {	2	,	1.326450802	,	1.152370031	},
+ {	3	,	1.488810095	,	1.24329113	},
+ {	4	,	1.650068787	,	1.353627355	},
+ {	5	,	1.80753684	,	1.468675067	},
+ {	6	,	1.967211766	,	1.584900326	},
+ {	7	,	2.125857007	,	1.733380748	},
+ {	8	,	2.280853438	,	1.860046486	},
+ {	9	,	2.437647326	,	2.042786943	},
+ {	10	,	2.591623527	,	2.253330233	},
+ {	11	,	3.080682296	,	3.09230493	}
+ #endif
+ };
+ 
+ control_state_t speed_controller_states[] = {
+ {	0	,	1	,	0	},
+ #if 1
+ {	1	,	1.077	,	0.11	},
+ {	2	,	1.0797	,	0.1175	},
+ {	3	,	1.1032	,	0.14	},
+ {	4	,	1.1902	,	0.16	},
+ {	5	,	1.2182	,	0.21	},
+ {	6	,	1.2187	,	0.23	},
+ {	7	,	1.2415	,	0.2425	},
+ {	8	,	1.3105	,	0.2775	},
+ {	9	,	1.333	,	0.3025	},
+ {	10	,	1.404	,	0.4325	},
+ {	11	,	1.4055	,	0.4325	},
+ {	12	,	1.4257	,	0.4725	},
+ {	13	,	1.52	,	0.535	},
+ {	14	,	1.5405	,	0.6475	},
+ {	15	,	1.5407	,	0.6475	},
+ {	16	,	1.556	,	0.7475	},
+ {	17	,	1.6357	,	0.8425	},
+ {	18	,	1.653	,	0.905	},
+ {	19	,	1.674	,	0.9575	},
+ {	20	,	1.676	,	0.9575	},
+ {	21	,	1.8322	,	1.14	},
+ {	22	,	1.8402	,	1.1475	},
+ {	23	,	1.915	,	1.32	},
+ {	24	,	1.936	,	1.33	},
+ {	25	,	1.9557	,	1.38	},
+ {	26	,	1.9565	,	1.38	},
+ {	27	,	2.0372	,	1.595	},
+ {	28	,	2.0842	,	2.13	},
+ //{	29	,	2.1747	,	2.4025	},
+ //{	30	,	2.192	,	2.435	},
+ {	31	,	2.25 /*2.2545*/	,	2.485	},
+ {	32	,	2.2665	,	2.4975	},
+ {	33	,	2.3835	,	2.68	},
+ {	34	,	2.416	,	2.6875	},
+ {	35	,	2.4507	,	2.7375	},
+ {	36	,	2.5765	,	2.9575	},
+ {	37	,	2.589	,	3.0125	},
+ {	38	,	2.6955	,	3.5325	},
+ {	39	,	2.701	,	3.545	},
+ {	40	,	2.7665	,	4.82	},
+ {	41	,	2.827	,	4.845	},
+ {	42	,	2.8807	,	4.85	},
+ {	43	,	3.1925	,	5.18	},
+ {	44	,	3.2432	,	5.2775	},
+ {	45	,	3.3797	,	5.4325	},
+ {	46	,	3.3822	,	5.5775	},
+ {	47	,	3.4307	,	5.6225	},
+ {	48	,	3.457	,	5.705	},
+ {	49	,	3.7525	,	5.7325	},
+ {	50	,	3.7615	,	5.7325	},
+ {	51	,	4.1185	,	6.2425	},
+ {	52	,	4.2537	,	6.255	},
+ #endif
+ {	53	,	7/*4.2615*/	,	6.295	}
+ };
+ 
+ speed_state_t speed_states[] = {
+ {	0	,	5,16,7	},
+ #if 1
+ {	1	,	5,15,7	},
+ {	2	,	5,14,7	},
+ {	3	,	5,12,7	},
+ {	4	,	5,10,7	},
+ {	5	,	4,15,7	},
+ {	6	,	4,14,7	},
+ {	7	,	4,12,7	},
+ {	8	,	4,11,7	},
+ {	9	,	4,10,7	},
+ {	10	,	3,15,7	},
+ {	11	,	3,14,7	},
+ {	12	,	3,12,7	},
+ {	13	,	3,10,7	},
+ {	14	,	3,9,7	},
+ {	15	,	3,8,7	},
+ {	16	,	2,12,7	},
+ {	17	,	3,6,7	},
+ {	18	,	2,10,7	},
+ {	19	,	2,9,7	},
+ {	20	,	2,8,7	},
+ {	21	,	1,13,7	},
+ {	22	,	1,12,7	},
+ {	23	,	1,11,7	},
+ {	24	,	1,10,7	},
+ {	25	,	1,9,7	},
+ {	26	,	1,8,7	},
+ {	27	,	1,6,7	},
+ {	28	,	1,4,7	},
+ //{	29	,	2,7,6	},
+ //{	30	,	2,6,6	},
+ {	31	,	1,13,6	},
+ {	32	,	1,12,6	},
+ {	33	,	1,11,6	},
+ {	34	,	1,10,6	},
+ {	35	,	1,9,6	},
+ {	36	,	1,7,6	},
+ {	37	,	1,6,6	},
+ {	38	,	1,5,6	},
+ {	39	,	1,4,6	},
+ {	40	,	3,11,1	},
+ {	41	,	3,10,1	},
+ {	42	,	3,9,1	},
+ {	43	,	3,7,1	},
+ {	44	,	3,6,1	},
+ {	45	,	3,5,1	},
+ {	46	,	3,4,1	},
+ {	47	,	1,12,1	},
+ {	48	,	2,7,1	},
+ {	49	,	1,9,1	},
+ {	50	,	1,8,1	},
+ {	51	,	1,6,1	},
+ {	52	,	1,5,1	},
+ #endif
+ {	53	,	1,4,1	}
+ };
+ 
+ power_state_t power_states[] = {
+ #if NSYSSTATES == 53
+ {	0	,	1.2	,	1	},
+ {	1	,	1.4	,	1	},
+ {	2	,	1.6	,	1	},
+ {	3	,	1.2	,	2	},
+ {	4	,	1.4	,	2	},
+ {	5	,	1.2	,	3	},
+ {	6	,	1.4	,	3	},
+ {	7	,	1.2	,	4	},
+ {	8	,	1.6	,	3	},
+ {	9	,	1.2	,	5	},
+ {	10	,	1.2	,	6	},
+ {	11	,	1.2	,	7	},
+ {	12	,	1.2	,	8	},
+ {	13	,	1.2	,	9	},
+ {	14	,	1.2	,	10	},
+ {	15	,	1.2	,	11	},
+ {	16	,	1.2	,	12	},
+ {	17	,	1.4	,	8	},
+ {	18	,	1.4	,	9	},
+ {	19	,	1.4	,	10	},
+ {	20	,	1.4	,	11	},
+ {	21	,	1.4	,	12	},
+ {	22	,	1.6	,	8	},
+ {	23	,	1.6	,	9	},
+ {	24	,	1.6	,	10	},
+ {	25	,	1.6	,	11	},
+ {	26	,	1.6	,	12	},
+ {	27	,	1.8	,	9	},
+ {	28	,	1.8	,	10	},
+ {	29	,	1.8	,	11	},
+ {	30	,	1.8	,	12	},
+ {	31	,	2	,	9	},
+ {	32	,	2	,	10	},
+ {	33	,	2	,	11	},
+ {	34	,	2	,	12	},
+ {	35	,	2.2	,	10	},
+ {	36	,	2.2	,	12	},
+ {	37	,	2.4	,	10	},
+ {	38	,	2.4	,	11	},
+ {	39	,	2.4	,	12	},
+ {	40	,	2.6	,	10	},
+ {	41	,	2.6	,	11	},
+ {	42	,	2.6	,	12	},
+ {	43	,	2.8	,	10	},
+ {	44	,	2.8	,	11	},
+ {	45	,	2.8	,	12	},
+ {	46	,	3	,	11	},
+ {	47	,	3	,	12	},
+ {	48	,	3.2	,	11	},
+ {	49	,	3.2	,	12	},
+ {	50	,	3.201	,	10	},
+ {	51	,	3.201	,	11	},
+ {	52	,	3.201	,	12	}
+ #else
+ {	0	,	1.2	,	1	},
+ {	1	,	1.4	,	1	},
+ {	2	,	1.6	,	1	},
+ {	3	,	1.8	,	1	},
+ {	4	,	2.0	,	1	},
+ {	5	,	2.2	,	1	},
+ {	6	,	2.4	,	1	},
+ {	7	,	2.6	,	1	},
+ {	8	,	2.8	,	1	},
+ {	9	,	3.0	,	1	},
+ {	10	,	3.2	,	1	},
+ {	11	,	3.201	,	1	}
+ #endif
+ };
+ 
+ double x_hat_minus = 0.0;
+ double x_hat = .2;
+ double Q = .00001;
+ double P = 1.0;
+ double P_minus = 0.0;
+ double H = 0.0;
+ double R = .01;
+ double K = 0.0; 
+ 
+ typedef struct {  
+   double x_hat_minus;
+   double x_hat;
+   double Q;
+   double P;
+   double P_minus;
+   double H;
+   double R;
+   double K;
+ } kalman_filter_t;
+ 
+ kalman_filter_t filter_init = {0.0, 0.3125, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ 
+ #define HEURISTIC_W 0
+ 
+ int adaptation_level = 1;
+ 
+ kalman_filter_t power_filter = {0.0, 0.2, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ kalman_filter_t speed_filter = {0.0, 0.3125, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ 
+ double get_base_value(kalman_filter_t* k,
+ 		      double current_measurement, 
+ 		      double last_coeff) {
+   
+   k->x_hat_minus = k->x_hat;
+   k->P_minus = k->P + k->Q;
+   
+   k->H = last_coeff;
+   k->K = k->P_minus * k->H /( k->H * k->P_minus* k->H + k->R);
+   k->x_hat = k->x_hat_minus + k->K * (current_measurement - k->H * k->x_hat_minus);
+   k->P = (1 - k->K * k->H) * k->P_minus;
+   
+   return 1.0/k->x_hat;
+ }
+ 
+ void get_power_signal(double current_power, 
+ 		      double desired_power,
+ 		      double base_power,
+ 		      double* e,
+ 		      double* eo,
+ 		      double* u,
+ 		      double* uo,
+ 		      double* uoo) {
+ 
+   if(current_power < desired_power) {
+     p1 = 0.1;
+     p2 = 0.8;
+     z1 = 0.2;
+     p1 = 0;
+     p2 = 0;
+     z1 = 0;
+   }
+   else {
+     p1 = 0;
+     p2 = 0;
+     z1 = 0;
+ 
+   }
+ 
+   
+   double A         = -(-p1*z1 - p2*z1 + mu*p1*p2 - mu*p2 + p2 - mu*p1 + p1 + mu);
+   double B         = -(-mu*p1*p2*z1 + p1*p2*z1 + mu*p2*z1 + mu*p1*z1 - mu*z1 - p1*p2);
+   double C         = ((mu - mu*p1)*p2 + mu*p1 - mu)*base_power;
+   double D         = ((mu*p1-mu)*p2 - mu*p1 + mu)*base_power*z1;
+   double F         = 1/(z1-1);
+   
+   double y = current_power;
+   *e = desired_power - y;
+   
+   //printf("u = %f, uo = %f, e = %f, A = %f, B= %f, C = %f, D= %f, F = %f\n",
+   // *u, *uo, *e, A, B, C, D, F);
+   
+   *u = F * (A*(*uo) + B*(*uoo) + C*(*e) + D*(*eo));
+ 
+   
+   
+   if (*u<1)  *u=1;        
+   if (*u>power_controller_states[NSYSSTATES-1].cost) *u=power_controller_states[NSYSSTATES-1].cost;  
+   *uoo = *uo;            // saving values
+   *uo  = *u;
+   *eo  = *e;
+ }
+ 
+ double max_speedup;
+ 
+ void get_speed_signal(double current_speed, 
+ 		      double desired_speed,
+ 		      double base_speed,
+ 		      double* e,
+ 		      double* eo,
+ 		      double* u,
+ 		      double* uo,
+ 		      double* uoo) {
+   //double p1 = 0.1;
+   //double p2 = 0.2;
+   //double z1 = 0.15; 
+ 
+   double A         = -(-p1*z1 - p2*z1 + mu*p1*p2 - mu*p2 + p2 - mu*p1 + p1 + mu);
+   double B         = -(-mu*p1*p2*z1 + p1*p2*z1 + mu*p2*z1 + mu*p1*z1 - mu*z1 - p1*p2);
+   double C         = ((mu - mu*p1)*p2 + mu*p1 - mu)*base_speed;
+   double D         = ((mu*p1-mu)*p2 - mu*p1 + mu)*base_speed*z1;
+   double F         = 1/(z1-1);
+   
+   double y = current_speed;
+   *e = desired_speed - y;
+   
+   
+   //*u = F * (A*(*uo) + B*(*uoo) + C*(*e) + D*(*eo));
+ 
+   *u = *uo + *e/base_speed;
+ 
+   //  printf("u = %f, uo = %f, e = %f, base_speed = %f\n",
+   // *u, *uo, *e, base_speed);
+ 
+ 
+   //double max_speedup = speed_controller_states[NAPPSTATES-1].speedup * 
+   //power_controller_states[NSYSSTATES-1].speedup;
+   if (*u<1)  *u=1;        
+   if (*u>max_speedup) *u=max_speedup;  
+   *uoo = *uo;            // saving values
+   *uo  = *u;
+   *eo  = *e;
+ }
+ 
+ 
+ int power_translate(double u, 
+ 		    const control_state_t* states, 
+ 		    int nstates) {
+   int i;
+ 
+   control_state_t cs = states[nstates-1];
+ 
+   double efficiency = cs.speedup/cs.cost;
+   int index = nstates-1;
+ 
+ 
+   for(i = 0; i < nstates; i++) {
+     if(states[i].cost >= u) {
+ 
+       double new_eff = states[i].speedup/states[i].cost;
+       if(new_eff > efficiency) {
+ 
+ 	cs = states[i];
+ 	efficiency = new_eff;
+ 	index = i;
+       }	
+     }
+   }
+ 
+   return index;
+ }
+ 
+ int power_translate2(double u, 
+ 		     const control_state_t* states, 
+ 		     int state1,
+ 		     const power_state_t* pstates,
+ 		     int nstates) {
+   int i;
+   
+   control_state_t cs = states[0];
+   
+   double efficiency = cs.speedup;///cs.cost;
+     int index = 0;
+     
+     for(i = 0; i < nstates; i++) {
+       if(states[i].cost < u && pstates[state1].cores == pstates[i].cores) {
+ 	
+ 	double new_eff = states[i].speedup;///states[i].cost;
+ 	  if(new_eff >= efficiency) {
+ 	    
+ 	    cs = states[i];
+ 	    efficiency = new_eff;
+ 	    index = i;
+ 	  }	
+       }
+     }
+     
+     return index;
+ }
+ 
+ int speed_translate(double u, 
+ 		    const control_state_t* states, 
+ 		    int nstates) {
+   int i;
+ 
+   control_state_t cs = states[nstates-1];
+ 
+   double efficiency = cs.speedup/(cs.cost+1);
+   int index = nstates-1;
+ 
+ 
+   for(i = 0; i < nstates; i++) {
+     if(states[i].speedup >= u) {
+ 
+       //index = i;
+       //break;
+       double new_eff = states[i].speedup/(states[i].cost+1);
+       if(new_eff > efficiency) {
+ 
+       	cs = states[i];
+ 	efficiency = new_eff;
+ 	index = i;
+       }	
+     }
+   }
+ 
+   return index;
+ }
+ 
+ int speed_translate2(double u, 
+ 		     const control_state_t* states, 
+ 		     int nstates) {
+   int i;
+   
+   control_state_t cs = states[0];
+   
+   double efficiency = cs.speedup/(cs.cost+1);
+     int index = 0;
+     
+     for(i = 0; i < nstates; i++) {
+       if(states[i].speedup < u) {
+ 	
+ 	double new_eff = states[i].speedup/(states[i].cost+1);
+ 	  if(new_eff >= efficiency) {
+ 	    
+ 	    cs = states[i];
+ 	    efficiency = new_eff;
+ 	    index = i;
+ 	  }	
+       }
+     }
+     
+     return index;
+ }
+ 
+ 
+ int last_speed_state = 0;	
+ int control_nref = 5;
+ int control_range = 16;
+ int control_refine = 7;
+ 
+ void speed_apply(int state,
+ 		 speed_state_t* ps,
+ 		 int nstates) {
+   
+   char command[4096];
+   int i;
+   
+   //printf("APPLYING SPPED STATE %d\n", state);
+ 
+   if(last_speed_state ==state)
+     return;
+   else 
+     last_speed_state = state;
+ 
+ #if 0
+   control_nref = ps[state].ref;
+   control_range = ps[state].range;
+   control_refine = ps[state].subme;
+ #endif
+   //sprintf(command,"echo \"%d\n%d\n%d\n\" >  x264_settings",
+   //	  ps[state].ref,ps[state].range,ps[state].subme);
+   //system(command);
+   
+ }
+ 
+ int last_power_state = 52;
+ int last_cores = 12;
+ int power_apply(int state_id,
+ 		pid_t* pid,
+ 		int npids,
+ 		const power_state_t* states,
+ 		int nstates) {
+   
+   int i;
+   
+   int rc = 0;
+   int retvalsyscall1 = 0;
+   int retvalsyscall2 = 0;
+   power_state_t state = states[0];
+   char command[4096];
+   
+   if(state_id == last_power_state)
+     return 0;
+   else
+     last_power_state = state_id;
+   
+   for(i = 0; i < nstates; i++) {
+     if( states[i].id == state_id) {
+       state = states[i];
+       break;
+     }
+   }
+ 
+ #if 0
+   sprintf(command,"taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; ",
+ 	  state.cores-1, getpid(), 
+ 	  state.cores-1, pid[1],
+ 	  state.cores-1, pid[2],
+ 	  state.cores-1, pid[3],
+ 	  state.cores-1, pid[4],
+ 	  state.cores-1, pid[5],
+ 	  state.cores-1, pid[6],
+ 	  state.cores-1, pid[7],
+ 	  state.cores-1, pid[8],
+ 	  state.cores-1, pid[9],
+ 	  state.cores-1, pid[10],
+ 	  state.cores-1, pid[11]);
+   retvalsyscall1 = system(command);
+ #endif
+ 
+ #if 1
+ 
+   if(last_cores != state.cores) {
+     sprintf(command,"taskset -p -c 0-%d  %d > /dev/null",state.cores-1, getpid());
+     retvalsyscall1 = system(command);
+     //printf("%s\n", command);
+     for( i = 1; i < npids; i++) {
+       sprintf(command,"taskset -p -c 0-%d  %d > /dev/null",state.cores-1, pid[i]);
+       //printf("%s\n", command);
+       retvalsyscall1 = system(command);
+     }
+     last_cores = state.cores;
+   }
+ #endif 
+ 
+ #if 1
+   for(i = 0; i < 12; i++) {
+     sprintf(command,
+ 	    "echo %d > /sys/devices/system/cpu/cpu%d/cpufreq/scaling_setspeed", 
+ 	    (int) (state.freq * 1000000), i);
+     
+     retvalsyscall2 = system(command);
+     if(retvalsyscall2 != 0)
+       fprintf(stderr, "ERROR setting clocks: %d\n", retvalsyscall2);
+   }
+ #endif
+   
+   if(retvalsyscall1 || retvalsyscall2) {
+     rc = -1;
+   }
+ 
+   return rc;
+ }
+ //int window_size;
+ 
+ //----------------------------------------------------
+ 
  #define DEFAULT_DEPTH	25
  #define MAXR	100
  #define IMAGE_DIM	14
***************
*** 392,397 ****
--- 1149,1259 ----
  		free(rank->name);
  		free(rank);
  
+ 		heartbeat(&heart, cnt_dequeue,1);
+ #if 0// Power and performance control
+ 	int PERIOD = window_size;
+ 	heartbeat_record_t hbr;
+ 	hb_get_current(&heart, &hbr);
+ 	
+ 	double power_goal = power_target;
+ 	double speed_goal = 1.4;
+ 	
+ 	//if(hbr.beat >= 100) {/*power_goal = 35.0;*/ speed_goal = 4.615;}
+ 	//if(hbr.beat >= 500) {speed_goal = 14.8;}
+ 	//if(hbr.beat >= 1000) {speed_goal = 10.6;}
+ 	
+ 	//	printf("power goal is 70\n");
+ 	
+ 	int old_action = __sync_fetch_and_add(&current_action,1);
+ 	if(old_action == PERIOD) {
+ 	  current_action = 0;
+ 	}
+ 	if( old_action == 0) {
+ 	  double act_power = hbr.window_power;
+ 	  double act_speed = hbr.window_rate;
+ 	  
+ 	  double base_power = get_base_value(&power_filter, act_power, last_powerup);
+ 	  
+ 	  get_power_signal(act_power,
+ 			   power_goal,
+ 			   base_power,
+ 			   &power_e,
+ 			   &power_eo,
+ 			   &power_u,
+ 			   &power_uo,
+ 			   &power_uoo);
+ 	  
+ 	  double act_power_up = last_powerup = power_u;
+ 	  
+ 	  power_tdo_state_1 = power_translate(power_u, 
+ 					      power_controller_states, 
+ 					      (int) NSYSSTATES);
+ 	  power_tdo_state_2 = power_translate2(power_u, 
+ 					       power_controller_states,
+ 					       power_tdo_state_1,
+ 					       power_states,
+ 					       (int) NSYSSTATES);
+ 	  
+ 	  //power_tdo_state_1 = power_tdo_state_2;
+ 
+ 	  if(power_controller_states[power_tdo_state_1].speedup 
+ 	     <= power_controller_states[power_tdo_state_2].speedup) {
+ 	    power_tdo_state_1 = power_tdo_state_2;
+ 	  }
+ 	  
+ 	  double power_time1;
+ 	  
+ 	  if(power_controller_states[power_tdo_state_1].cost == 
+ 	     power_controller_states[power_tdo_state_2].cost ||
+ 	     power_u == power_controller_states[power_tdo_state_1].cost) 
+ 	    power_time1 = 1.0;
+ 	  else
+ 	    power_time1 = (power_u - 
+ 		     power_controller_states[power_tdo_state_2].cost) /
+ 	      (power_controller_states[power_tdo_state_1].cost - 
+ 	       power_controller_states[power_tdo_state_2].cost);
+ 	  
+ 	  double power_time2 = 1.0 - power_time1;
+ 	  
+ 	  h1 = power_time1*PERIOD+0.5;
+ 	  h2 = PERIOD-h1;
+ 	  
+ #if 1
+ 	  printf("\nCONTROL beat=%lld, power=%f, des=%f, w=%f, u=%f, uo=%f, state=%d, state2=%d, %f, %f, %d, %d\n\n",
+ 		 hbr.beat,act_power,power_goal,1.0/base_power,power_u,last_powerup,power_controller_states[power_tdo_state_1].id, power_controller_states[power_tdo_state_2].id,  power_time1, power_time2, h1, h2); 
+ 	  
+ #endif
+ 	  
+ 	  if(npids == 0) {
+ 	    npids = get_all_subpids(getpid(), pids);
+ 	  }
+ 	  power_apply(power_tdo_state_1,
+ 		      pids,
+ 		      npids,
+ 		      power_states,
+ 		      NSYSSTATES);
+ 	  
+ 	  if(h1 == 0)
+ 	    power_apply(power_tdo_state_2,
+ 			pids,
+ 			npids,
+ 			power_states,
+ 			NSYSSTATES);
+ 	}
+ 	
+ 	if (old_action == h1) {
+ 	  if(npids == 0) {
+ 	    npids = get_all_subpids(getpid(), pids);
+ 	  }
+ 	  power_apply(power_tdo_state_2,
+ 		      pids,
+ 		      npids,
+ 		      power_states,
+ 		      NSYSSTATES);
+ 	  
+ 	}
+       
+ #endif
  		cnt_dequeue++;
  		
  		fprintf(stderr, "(%d,%d)\n", cnt_enqueue, cnt_dequeue);
***************
*** 430,435 ****
--- 1292,1336 ----
  	__parsec_bench_begin(__parsec_ferret);
  #endif
  
+ 	float min_heartrate;
+ 	float max_heartrate; 
+ 	//int window_size;
+ 	
+ 	if(getenv("FERRET_MIN_HEART_RATE") == NULL) {
+ 	  min_heartrate = 0.0;
+ 	}
+ 	else
+ 	  min_heartrate = atof(getenv("FERRET_MIN_HEART_RATE"));
+ 	
+ 	if(getenv("FERRET_MAX_HEART_RATE") == NULL) {
+ 	  max_heartrate = 100.0;
+ 	}
+ 	else
+ 	  max_heartrate = atof(getenv("FERRET_MAX_HEART_RATE"));
+ 	
+ 	if(getenv("FERRET_WINDOW_SIZE") == NULL) {
+ 	  window_size = 20;
+ 	}
+ 	else
+ 	  window_size = atoi(getenv("FERRET_WINDOW_SIZE"));
+ 	
+ 	if(getenv("FERRET_POWER_TARGET") == NULL) {
+ 	  power_target = 70;
+ 	}
+ 	else
+ 	  power_target = atof(getenv("FERRET_POWER_TARGET"));
+ 
+ 
+ 	printf("init heartbeat with %f %f %d\n", min_heartrate, max_heartrate, window_size);
+ 	
+ 	heartbeat_init(&heart, 
+ 		       min_heartrate, max_heartrate, 
+ 		       0, 1,
+ 		       0, 150,
+ 		       window_size, 100, "heartbeat.log");
+ 	
+ 	printf("heartbeat init'd\n");
+ 
  	if (argc < 8)
  	{
  		printf("%s <database> <table> <query dir> <top K> <depth> <n> <out>\n", argv[0]); 
***************
*** 563,568 ****
--- 1464,1471 ----
  	__parsec_roi_end();
  #endif
  
+ 	heartbeat_finish(&heart);
+ 
  	tpool_destroy(p_load);
  	tpool_destroy(p_seg);
  	tpool_destroy(p_extract);
Only in parsec-2.0-modified/pkgs/apps/ferret/src/benchmark: ferret-parallel.c~
Only in parsec-2.0-modified/pkgs/apps/ferret/src: #Makefile#
Only in parsec-2.0-modified/pkgs/apps/fluidanimate: inst
Only in parsec-2.0-modified/pkgs/apps/fluidanimate: obj
diff -crB parsec-2.0/pkgs/apps/fluidanimate/src/pthreads.cpp parsec-2.0-modified/pkgs/apps/fluidanimate/src/pthreads.cpp
*** parsec-2.0/pkgs/apps/fluidanimate/src/pthreads.cpp	2009-01-27 15:27:21.000000000 -0600
--- parsec-2.0-modified/pkgs/apps/fluidanimate/src/pthreads.cpp	2019-04-04 11:20:47.204290110 -0500
***************
*** 14,20 ****
  #ifdef ENABLE_PARSEC_HOOKS
  #include <hooks.h>
  #endif
! 
  static inline int isLittleEndian() {
    union {
      uint16_t word;
--- 14,23 ----
  #ifdef ENABLE_PARSEC_HOOKS
  #include <hooks.h>
  #endif
! #include <heartbeat-accuracy-power.h>
! heartbeat_t heart;
! int window_size;
! float power_target;
  static inline int isLittleEndian() {
    union {
      uint16_t word;
***************
*** 794,805 ****
  	pthread_barrier_wait(&barrier);
  }
  
  void *AdvanceFramesMT(void *args)
  {
  	thread_args *targs = (thread_args *)args;
  
! 	for(int i = 0; i < targs->frames; ++i)
! 		AdvanceFrameMT(targs->tid);
  
  	return NULL;
  }
--- 797,1674 ----
  	pthread_barrier_wait(&barrier);
  }
  
+ //---------------------------------------------------
+ // Control stuff
+ 
+ int current_action = -1;
+ int h1, h2, h3, h4;
+ int max_actions = 0;
+ 
+ typedef struct {
+   int beat;
+   double rate;
+   int state;
+ } controller_log_entry_t;
+ 
+ 
+ controller_log_entry_t controller_log[1000];
+ 
+ 
+ #define FAST 1
+ #define SLOW 1
+ 
+ #if FAST 
+ double p1 = 0.0;
+ double p2 = 0.0;
+ double z1 = 0.0;
+ #elif SLOW
+ const double p1 = 0.01;
+ const double p2 = 0.1;
+ const double z1 = 0.05;
+ #else
+ const double p1 = -0.5;
+ const double p2 =  0.0;
+ const double z1 =  0.0;
+ #endif
+ 
+ const double mu = 1.0;
+ //double last_speedup = 1.0;
+ #define STARTING_POWERUP 7.4
+ #define STARTING_SPEEDUP 3
+ double last_powerup = STARTING_POWERUP;
+ double last_speedup = STARTING_SPEEDUP;
+ 
+ double act_acc  = 0.0;                 // and the idled application
+ 
+ double power_u         = STARTING_POWERUP;                   // control variable
+ double power_uo        = STARTING_POWERUP;                   // old value for the control variable
+ double power_uoo       = STARTING_POWERUP;
+ double power_e         = 100000;
+ double power_eo        = 100000;
+ 
+ double speed_u         = STARTING_SPEEDUP;                   // control variable
+ double speed_uo        = STARTING_SPEEDUP;                   // old value for the control variable
+ double speed_uoo       = STARTING_SPEEDUP;
+ double speed_e         = 100000;
+ double speed_eo        = 100000;
+ 
+ int state_1 = 0;
+ int state_2 = 0;
+ int power_tdo_state_1 = 0;
+ int power_tdo_state_2 = 0;
+ int speed_tdo_state_1 = 0;
+ int speed_tdo_state_2 = 0;
+ int current_beat = 0;
+ int npids = 0;
+ pid_t pids[128]; 
+ int apps[1024];
+ 
+ 
+ int get_all_subpids(pid_t pid, pid_t* pids) {
+   int   n=0;
+   FILE  *cret;
+   int   stret;
+   char  pid_string[128];
+   char  cretpids[100];	
+   sprintf(cretpids,"ps -eLf | awk '(/%d/) && (!/awk/) {print $4}'",pid);
+   cret = popen(cretpids, "r");
+ 
+   if (cret == NULL) { 
+     printf("Error in popen\n"); 
+     exit(-1); 
+   }
+ 
+   while (fgets(pid_string, 128, cret) != NULL)  { 
+       pids[n] = atoi(pid_string); 
+       printf(" from ps - %d\n", pids[n]);
+       n++; 
+     }
+ 
+   stret = pclose(cret);
+ 
+   if (stret == -1) { 
+     printf("Error in pclose\n"); 
+     exit(-1); 
+   }
+ 
+   return n;
+ }
+ 
+ typedef int state_id_t;
+ 
+ //#define NSTATES 17
+ #define NSYSSTATES 53
+ //#define NSYSSTATES 12
+ #define NAPPSTATES 52
+ 
+ typedef struct {
+   int id;
+ 
+   double speedup;
+   double cost;
+ } control_state_t;
+ 
+ typedef struct {
+ 
+   int id;
+ 
+   double freq;
+   int cores; 
+ } power_state_t;
+ 
+ typedef struct {
+   int id;
+ 
+   int ref;
+   int range;
+   int subme;
+ } speed_state_t;
+ 
+ typedef struct {
+   int id;
+ 
+   int ref;
+   int range;
+   int subme;
+ } accuracy_state_t;
+ 
+ 
+ control_state_t power_controller_states[] = {
+ #if NSYSSTATES == 53
+ {	0	,	1	,	1	},
+ {	1	,	1.163271732	,	1.065459386	},
+ {	2	,	1.326450802	,	1.152370031	},
+ {	3	,	2.000779119	,	1.158258946	},
+ {	4	,	2.342362224	,	1.255978706	},
+ {	5	,	2.998628978	,	1.299315462	},
+ {	6	,	3.497754833	,	1.439517358	},
+ {	7	,	3.998042748	,	1.444595407	},
+ {	8	,	4.008467244	,	1.589721291	},
+ {	9	,	4.971273774	,	1.592954925	},
+ {	10	,	5.930045717	,	1.726970261	},
+ {	11	,	6.112010628	,	1.752157068	},
+ {	12	,	6.294323495	,	1.772866618	},
+ {	13	,	6.540468322	,	1.816738742	},
+ {	14	,	6.830129396	,	1.847993334	},
+ {	15	,	7.014754091	,	1.875424987	},
+ {	16	,	7.22679923	,	1.895050481	},
+ {	17	,	7.363138412	,	2.029663413	},
+ {	18	,	7.673919847	,	2.073628968	},
+ {	19	,	7.872333244	,	2.092926031	},
+ {	20	,	8.135646106	,	2.131456092	},
+ {	21	,	8.391979993	,	2.167973466	},
+ {	22	,	8.404035533	,	2.301570847	},
+ {	23	,	8.711506659	,	2.349388177	},
+ {	24	,	8.888993528	,	2.362690163	},
+ {	25	,	9.282032517	,	2.425433104	},
+ {	26	,	9.57516275	,	2.454561209	},
+ {	27	,	9.739863181	,	2.636924624	},
+ {	28	,	10.0788924	,	2.687586586	},
+ {	29	,	10.4058207	,	2.74523928	},
+ {	30	,	10.79348906	,	2.769645477	},
+ {	31	,	10.80531768	,	2.974609988	},
+ {	32	,	11.15136748	,	3.019535793	},
+ {	33	,	11.51035878	,	3.096745832	},
+ {	34	,	11.91013564	,	3.121659746	},
+ {	35	,	12.18132289	,	3.376517983	},
+ {	36	,	13.08318039	,	3.442629909	},
+ {	37	,	13.29497213	,	3.812376705	},
+ {	38	,	13.69964495	,	3.880726313	},
+ {	39	,	14.18314966	,	3.955659357	},
+ {	40	,	14.38812127	,	4.260517126	},
+ {	41	,	14.81921322	,	4.346649056	},
+ {	42	,	15.35247753	,	4.420098325	},
+ {	43	,	15.36429858	,	4.744361745	},
+ {	44	,	15.84191262	,	4.828515862	},
+ {	45	,	16.51979142	,	4.96835753	},
+ {	46	,	16.97220796	,	5.334766603	},
+ {	47	,	17.67476894	,	5.486239027	},
+ {	48	,	18.11240302	,	5.917762179	},
+ {	49	,	18.7258797	,	6.043033844	},
+ {	50	,	18.99855523	,	7.015605922	},
+ {	51	,	19.68798937	,	7.176472013	},
+ {	52	,	20.52524998	,	7.349292258	}
+ #else
+ {	0	,	1	,	1	},
+ {	1	,	1.163271732	,	1.065459386	},
+ {	2	,	1.326450802	,	1.152370031	},
+ {	3	,	1.488810095	,	1.24329113	},
+ {	4	,	1.650068787	,	1.353627355	},
+ {	5	,	1.80753684	,	1.468675067	},
+ {	6	,	1.967211766	,	1.584900326	},
+ {	7	,	2.125857007	,	1.733380748	},
+ {	8	,	2.280853438	,	1.860046486	},
+ {	9	,	2.437647326	,	2.042786943	},
+ {	10	,	2.591623527	,	2.253330233	},
+ {	11	,	3.080682296	,	3.09230493	}
+ #endif
+ };
+ 
+ control_state_t speed_controller_states[] = {
+ {	0	,	1	,	0	},
+ #if 1
+ {	1	,	1.077	,	0.11	},
+ {	2	,	1.0797	,	0.1175	},
+ {	3	,	1.1032	,	0.14	},
+ {	4	,	1.1902	,	0.16	},
+ {	5	,	1.2182	,	0.21	},
+ {	6	,	1.2187	,	0.23	},
+ {	7	,	1.2415	,	0.2425	},
+ {	8	,	1.3105	,	0.2775	},
+ {	9	,	1.333	,	0.3025	},
+ {	10	,	1.404	,	0.4325	},
+ {	11	,	1.4055	,	0.4325	},
+ {	12	,	1.4257	,	0.4725	},
+ {	13	,	1.52	,	0.535	},
+ {	14	,	1.5405	,	0.6475	},
+ {	15	,	1.5407	,	0.6475	},
+ {	16	,	1.556	,	0.7475	},
+ {	17	,	1.6357	,	0.8425	},
+ {	18	,	1.653	,	0.905	},
+ {	19	,	1.674	,	0.9575	},
+ {	20	,	1.676	,	0.9575	},
+ {	21	,	1.8322	,	1.14	},
+ {	22	,	1.8402	,	1.1475	},
+ {	23	,	1.915	,	1.32	},
+ {	24	,	1.936	,	1.33	},
+ {	25	,	1.9557	,	1.38	},
+ {	26	,	1.9565	,	1.38	},
+ {	27	,	2.0372	,	1.595	},
+ {	28	,	2.0842	,	2.13	},
+ //{	29	,	2.1747	,	2.4025	},
+ //{	30	,	2.192	,	2.435	},
+ {	31	,	2.25 /*2.2545*/	,	2.485	},
+ {	32	,	2.2665	,	2.4975	},
+ {	33	,	2.3835	,	2.68	},
+ {	34	,	2.416	,	2.6875	},
+ {	35	,	2.4507	,	2.7375	},
+ {	36	,	2.5765	,	2.9575	},
+ {	37	,	2.589	,	3.0125	},
+ {	38	,	2.6955	,	3.5325	},
+ {	39	,	2.701	,	3.545	},
+ {	40	,	2.7665	,	4.82	},
+ {	41	,	2.827	,	4.845	},
+ {	42	,	2.8807	,	4.85	},
+ {	43	,	3.1925	,	5.18	},
+ {	44	,	3.2432	,	5.2775	},
+ {	45	,	3.3797	,	5.4325	},
+ {	46	,	3.3822	,	5.5775	},
+ {	47	,	3.4307	,	5.6225	},
+ {	48	,	3.457	,	5.705	},
+ {	49	,	3.7525	,	5.7325	},
+ {	50	,	3.7615	,	5.7325	},
+ {	51	,	4.1185	,	6.2425	},
+ {	52	,	4.2537	,	6.255	},
+ #endif
+ {	53	,	7/*4.2615*/	,	6.295	}
+ };
+ 
+ speed_state_t speed_states[] = {
+ {	0	,	5,16,7	},
+ #if 1
+ {	1	,	5,15,7	},
+ {	2	,	5,14,7	},
+ {	3	,	5,12,7	},
+ {	4	,	5,10,7	},
+ {	5	,	4,15,7	},
+ {	6	,	4,14,7	},
+ {	7	,	4,12,7	},
+ {	8	,	4,11,7	},
+ {	9	,	4,10,7	},
+ {	10	,	3,15,7	},
+ {	11	,	3,14,7	},
+ {	12	,	3,12,7	},
+ {	13	,	3,10,7	},
+ {	14	,	3,9,7	},
+ {	15	,	3,8,7	},
+ {	16	,	2,12,7	},
+ {	17	,	3,6,7	},
+ {	18	,	2,10,7	},
+ {	19	,	2,9,7	},
+ {	20	,	2,8,7	},
+ {	21	,	1,13,7	},
+ {	22	,	1,12,7	},
+ {	23	,	1,11,7	},
+ {	24	,	1,10,7	},
+ {	25	,	1,9,7	},
+ {	26	,	1,8,7	},
+ {	27	,	1,6,7	},
+ {	28	,	1,4,7	},
+ //{	29	,	2,7,6	},
+ //{	30	,	2,6,6	},
+ {	31	,	1,13,6	},
+ {	32	,	1,12,6	},
+ {	33	,	1,11,6	},
+ {	34	,	1,10,6	},
+ {	35	,	1,9,6	},
+ {	36	,	1,7,6	},
+ {	37	,	1,6,6	},
+ {	38	,	1,5,6	},
+ {	39	,	1,4,6	},
+ {	40	,	3,11,1	},
+ {	41	,	3,10,1	},
+ {	42	,	3,9,1	},
+ {	43	,	3,7,1	},
+ {	44	,	3,6,1	},
+ {	45	,	3,5,1	},
+ {	46	,	3,4,1	},
+ {	47	,	1,12,1	},
+ {	48	,	2,7,1	},
+ {	49	,	1,9,1	},
+ {	50	,	1,8,1	},
+ {	51	,	1,6,1	},
+ {	52	,	1,5,1	},
+ #endif
+ {	53	,	1,4,1	}
+ };
+ 
+ power_state_t power_states[] = {
+ #if NSYSSTATES == 53
+ {	0	,	1.2	,	1	},
+ {	1	,	1.4	,	1	},
+ {	2	,	1.6	,	1	},
+ {	3	,	1.2	,	2	},
+ {	4	,	1.4	,	2	},
+ {	5	,	1.2	,	3	},
+ {	6	,	1.4	,	3	},
+ {	7	,	1.2	,	4	},
+ {	8	,	1.6	,	3	},
+ {	9	,	1.2	,	5	},
+ {	10	,	1.2	,	6	},
+ {	11	,	1.2	,	7	},
+ {	12	,	1.2	,	8	},
+ {	13	,	1.2	,	9	},
+ {	14	,	1.2	,	10	},
+ {	15	,	1.2	,	11	},
+ {	16	,	1.2	,	12	},
+ {	17	,	1.4	,	8	},
+ {	18	,	1.4	,	9	},
+ {	19	,	1.4	,	10	},
+ {	20	,	1.4	,	11	},
+ {	21	,	1.4	,	12	},
+ {	22	,	1.6	,	8	},
+ {	23	,	1.6	,	9	},
+ {	24	,	1.6	,	10	},
+ {	25	,	1.6	,	11	},
+ {	26	,	1.6	,	12	},
+ {	27	,	1.8	,	9	},
+ {	28	,	1.8	,	10	},
+ {	29	,	1.8	,	11	},
+ {	30	,	1.8	,	12	},
+ {	31	,	2	,	9	},
+ {	32	,	2	,	10	},
+ {	33	,	2	,	11	},
+ {	34	,	2	,	12	},
+ {	35	,	2.2	,	10	},
+ {	36	,	2.2	,	12	},
+ {	37	,	2.4	,	10	},
+ {	38	,	2.4	,	11	},
+ {	39	,	2.4	,	12	},
+ {	40	,	2.6	,	10	},
+ {	41	,	2.6	,	11	},
+ {	42	,	2.6	,	12	},
+ {	43	,	2.8	,	10	},
+ {	44	,	2.8	,	11	},
+ {	45	,	2.8	,	12	},
+ {	46	,	3	,	11	},
+ {	47	,	3	,	12	},
+ {	48	,	3.2	,	11	},
+ {	49	,	3.2	,	12	},
+ {	50	,	3.201	,	10	},
+ {	51	,	3.201	,	11	},
+ {	52	,	3.201	,	12	}
+ #else
+ {	0	,	1.2	,	1	},
+ {	1	,	1.4	,	1	},
+ {	2	,	1.6	,	1	},
+ {	3	,	1.8	,	1	},
+ {	4	,	2.0	,	1	},
+ {	5	,	2.2	,	1	},
+ {	6	,	2.4	,	1	},
+ {	7	,	2.6	,	1	},
+ {	8	,	2.8	,	1	},
+ {	9	,	3.0	,	1	},
+ {	10	,	3.2	,	1	},
+ {	11	,	3.201	,	1	}
+ #endif
+ };
+ 
+ double x_hat_minus = 0.0;
+ double x_hat = .2;
+ double Q = .00001;
+ double P = 1.0;
+ double P_minus = 0.0;
+ double H = 0.0;
+ double R = .01;
+ double K = 0.0; 
+ 
+ typedef struct {  
+   double x_hat_minus;
+   double x_hat;
+   double Q;
+   double P;
+   double P_minus;
+   double H;
+   double R;
+   double K;
+ } kalman_filter_t;
+ 
+ kalman_filter_t filter_init = {0.0, 0.3125, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ 
+ #define HEURISTIC_W 0
+ 
+ int adaptation_level = 1;
+ 
+ kalman_filter_t power_filter = {0.0, 0.2, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ kalman_filter_t speed_filter = {0.0, 0.3125, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ 
+ double get_base_value(kalman_filter_t* k,
+ 		      double current_measurement, 
+ 		      double last_coeff) {
+   
+   k->x_hat_minus = k->x_hat;
+   k->P_minus = k->P + k->Q;
+   
+   k->H = last_coeff;
+   k->K = k->P_minus * k->H /( k->H * k->P_minus* k->H + k->R);
+   k->x_hat = k->x_hat_minus + k->K * (current_measurement - k->H * k->x_hat_minus);
+   k->P = (1 - k->K * k->H) * k->P_minus;
+   
+   return 1.0/k->x_hat;
+ }
+ 
+ void get_power_signal(double current_power, 
+ 		      double desired_power,
+ 		      double base_power,
+ 		      double* e,
+ 		      double* eo,
+ 		      double* u,
+ 		      double* uo,
+ 		      double* uoo) {
+ 
+   if(current_power < desired_power) {
+     p1 = 0.1;
+     p2 = 0.8;
+     z1 = 0.2;
+     p1 = 0;
+     p2 = 0;
+     z1 = 0;
+   }
+   else {
+     p1 = 0;
+     p2 = 0;
+     z1 = 0;
+ 
+   }
+ 
+   
+   double A         = -(-p1*z1 - p2*z1 + mu*p1*p2 - mu*p2 + p2 - mu*p1 + p1 + mu);
+   double B         = -(-mu*p1*p2*z1 + p1*p2*z1 + mu*p2*z1 + mu*p1*z1 - mu*z1 - p1*p2);
+   double C         = ((mu - mu*p1)*p2 + mu*p1 - mu)*base_power;
+   double D         = ((mu*p1-mu)*p2 - mu*p1 + mu)*base_power*z1;
+   double F         = 1/(z1-1);
+   
+   double y = current_power;
+   *e = desired_power - y;
+   
+   //printf("u = %f, uo = %f, e = %f, A = %f, B= %f, C = %f, D= %f, F = %f\n",
+   // *u, *uo, *e, A, B, C, D, F);
+   
+   *u = F * (A*(*uo) + B*(*uoo) + C*(*e) + D*(*eo));
+ 
+   
+   
+   if (*u<1)  *u=1;        
+   if (*u>power_controller_states[NSYSSTATES-1].cost) *u=power_controller_states[NSYSSTATES-1].cost;  
+   *uoo = *uo;            // saving values
+   *uo  = *u;
+   *eo  = *e;
+ }
+ 
+ double max_speedup;
+ 
+ void get_speed_signal(double current_speed, 
+ 		      double desired_speed,
+ 		      double base_speed,
+ 		      double* e,
+ 		      double* eo,
+ 		      double* u,
+ 		      double* uo,
+ 		      double* uoo) {
+   //double p1 = 0.1;
+   //double p2 = 0.2;
+   //double z1 = 0.15; 
+ 
+   double A         = -(-p1*z1 - p2*z1 + mu*p1*p2 - mu*p2 + p2 - mu*p1 + p1 + mu);
+   double B         = -(-mu*p1*p2*z1 + p1*p2*z1 + mu*p2*z1 + mu*p1*z1 - mu*z1 - p1*p2);
+   double C         = ((mu - mu*p1)*p2 + mu*p1 - mu)*base_speed;
+   double D         = ((mu*p1-mu)*p2 - mu*p1 + mu)*base_speed*z1;
+   double F         = 1/(z1-1);
+   
+   double y = current_speed;
+   *e = desired_speed - y;
+   
+   
+   //*u = F * (A*(*uo) + B*(*uoo) + C*(*e) + D*(*eo));
+ 
+   *u = *uo + *e/base_speed;
+ 
+   //  printf("u = %f, uo = %f, e = %f, base_speed = %f\n",
+   // *u, *uo, *e, base_speed);
+ 
+ 
+   //double max_speedup = speed_controller_states[NAPPSTATES-1].speedup * 
+   //power_controller_states[NSYSSTATES-1].speedup;
+   if (*u<1)  *u=1;        
+   if (*u>max_speedup) *u=max_speedup;  
+   *uoo = *uo;            // saving values
+   *uo  = *u;
+   *eo  = *e;
+ }
+ 
+ 
+ int power_translate(double u, 
+ 		    const control_state_t* states, 
+ 		    int nstates) {
+   int i;
+ 
+   control_state_t cs = states[nstates-1];
+ 
+   double efficiency = cs.speedup/cs.cost;
+   int index = nstates-1;
+ 
+ 
+   for(i = 0; i < nstates; i++) {
+     if(states[i].cost >= u) {
+ 
+       double new_eff = states[i].speedup/states[i].cost;
+       if(new_eff > efficiency) {
+ 
+ 	cs = states[i];
+ 	efficiency = new_eff;
+ 	index = i;
+       }	
+     }
+   }
+ 
+   return index;
+ }
+ 
+ int power_translate2(double u, 
+ 		     const control_state_t* states, 
+ 		     int state1,
+ 		     const power_state_t* pstates,
+ 		     int nstates) {
+   int i;
+   
+   control_state_t cs = states[0];
+   
+   double efficiency = cs.speedup;///cs.cost;
+     int index = 0;
+     
+     for(i = 0; i < nstates; i++) {
+       if(states[i].cost < u && pstates[state1].cores == pstates[i].cores) {
+ 	
+ 	double new_eff = states[i].speedup;///states[i].cost;
+ 	  if(new_eff >= efficiency) {
+ 	    
+ 	    cs = states[i];
+ 	    efficiency = new_eff;
+ 	    index = i;
+ 	  }	
+       }
+     }
+     
+     return index;
+ }
+ 
+ int speed_translate(double u, 
+ 		    const control_state_t* states, 
+ 		    int nstates) {
+   int i;
+ 
+   control_state_t cs = states[nstates-1];
+ 
+   double efficiency = cs.speedup/(cs.cost+1);
+   int index = nstates-1;
+ 
+ 
+   for(i = 0; i < nstates; i++) {
+     if(states[i].speedup >= u) {
+ 
+       //index = i;
+       //break;
+       double new_eff = states[i].speedup/(states[i].cost+1);
+       if(new_eff > efficiency) {
+ 
+       	cs = states[i];
+ 	efficiency = new_eff;
+ 	index = i;
+       }	
+     }
+   }
+ 
+   return index;
+ }
+ 
+ int speed_translate2(double u, 
+ 		     const control_state_t* states, 
+ 		     int nstates) {
+   int i;
+   
+   control_state_t cs = states[0];
+   
+   double efficiency = cs.speedup/(cs.cost+1);
+     int index = 0;
+     
+     for(i = 0; i < nstates; i++) {
+       if(states[i].speedup < u) {
+ 	
+ 	double new_eff = states[i].speedup/(states[i].cost+1);
+ 	  if(new_eff >= efficiency) {
+ 	    
+ 	    cs = states[i];
+ 	    efficiency = new_eff;
+ 	    index = i;
+ 	  }	
+       }
+     }
+     
+     return index;
+ }
+ 
+ 
+ int last_speed_state = 0;	
+ int control_nref = 5;
+ int control_range = 16;
+ int control_refine = 7;
+ 
+ void speed_apply(int state,
+ 		 speed_state_t* ps,
+ 		 int nstates) {
+   
+   char command[4096];
+   int i;
+   
+   //printf("APPLYING SPPED STATE %d\n", state);
+ 
+   if(last_speed_state ==state)
+     return;
+   else 
+     last_speed_state = state;
+ 
+ #if 0
+   control_nref = ps[state].ref;
+   control_range = ps[state].range;
+   control_refine = ps[state].subme;
+ #endif
+   //sprintf(command,"echo \"%d\n%d\n%d\n\" >  x264_settings",
+   //	  ps[state].ref,ps[state].range,ps[state].subme);
+   //system(command);
+   
+ }
+ 
+ int last_power_state = 52;
+ int last_cores = 12;
+ int power_apply(int state_id,
+ 		pid_t* pid,
+ 		int npids,
+ 		const power_state_t* states,
+ 		int nstates) {
+   
+   int i;
+   
+   int rc = 0;
+   int retvalsyscall1 = 0;
+   int retvalsyscall2 = 0;
+   power_state_t state = states[0];
+   char command[4096];
+   
+   if(state_id == last_power_state)
+     return 0;
+   else
+     last_power_state = state_id;
+   
+   for(i = 0; i < nstates; i++) {
+     if( states[i].id == state_id) {
+       state = states[i];
+       break;
+     }
+   }
+ 
+ #if 0
+   sprintf(command,"taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; ",
+ 	  state.cores-1, getpid(), 
+ 	  state.cores-1, pid[1],
+ 	  state.cores-1, pid[2],
+ 	  state.cores-1, pid[3],
+ 	  state.cores-1, pid[4],
+ 	  state.cores-1, pid[5],
+ 	  state.cores-1, pid[6],
+ 	  state.cores-1, pid[7],
+ 	  state.cores-1, pid[8],
+ 	  state.cores-1, pid[9],
+ 	  state.cores-1, pid[10],
+ 	  state.cores-1, pid[11]);
+   retvalsyscall1 = system(command);
+ #endif
+ 
+ #if 1
+ 
+   if(last_cores != state.cores) {
+     sprintf(command,"taskset -p -c 0-%d  %d > /dev/null",state.cores-1, getpid());
+     retvalsyscall1 = system(command);
+     //printf("%s\n", command);
+     for( i = 1; i < npids; i++) {
+       sprintf(command,"taskset -p -c 0-%d  %d > /dev/null",state.cores-1, pid[i]);
+       //printf("%s\n", command);
+       retvalsyscall1 = system(command);
+     }
+     last_cores = state.cores;
+   }
+ #endif 
+ 
+ #if 1
+   for(i = 0; i < 12; i++) {
+     sprintf(command,
+ 	    "echo %d > /sys/devices/system/cpu/cpu%d/cpufreq/scaling_setspeed", 
+ 	    (int) (state.freq * 1000000), i);
+     
+     retvalsyscall2 = system(command);
+     if(retvalsyscall2 != 0)
+       fprintf(stderr, "ERROR setting clocks: %d\n", retvalsyscall2);
+   }
+ #endif
+   
+   if(retvalsyscall1 || retvalsyscall2) {
+     rc = -1;
+   }
+ 
+   return rc;
+ }
+ //int window_size;
+ 
+ //----------------------------------------------------
+ 
  void *AdvanceFramesMT(void *args)
  {
  	thread_args *targs = (thread_args *)args;
  
! 	for(int i = 0; i < targs->frames; ++i) {
! 
! 	  if(targs->tid == 0){
! 	    heartbeat(&heart, i, 1);
! 
! 
! #if 0// Power and performance control
! 	int PERIOD = window_size;
! 	heartbeat_record_t hbr;
! 	hb_get_current(&heart, &hbr);
! 	
! 	double power_goal = power_target;
! 	double speed_goal = 1.4;
! 	
! 	//if(hbr.beat >= 100) {/*power_goal = 35.0;*/ speed_goal = 4.615;}
! 	//if(hbr.beat >= 500) {speed_goal = 14.8;}
! 	//if(hbr.beat >= 1000) {speed_goal = 10.6;}
! 	
! 	//	printf("power goal is 70\n");
! 	
! 	int old_action = __sync_fetch_and_add(&current_action,1);
! 	if(old_action == PERIOD) {
! 	  current_action = 0;
! 	}
! 	if( old_action == 0) {
! 	  double act_power = hbr.window_power;
! 	  double act_speed = hbr.window_rate;
! 	  
! 	  double base_power = get_base_value(&power_filter, act_power, last_powerup);
! 	  
! 	  get_power_signal(act_power,
! 			   power_goal,
! 			   base_power,
! 			   &power_e,
! 			   &power_eo,
! 			   &power_u,
! 			   &power_uo,
! 			   &power_uoo);
! 	  
! 	  double act_power_up = last_powerup = power_u;
! 	  
! 	  power_tdo_state_1 = power_translate(power_u, 
! 					      power_controller_states, 
! 					      (int) NSYSSTATES);
! 	  power_tdo_state_2 = power_translate2(power_u, 
! 					       power_controller_states,
! 					       power_tdo_state_1,
! 					       power_states,
! 					       (int) NSYSSTATES);
! 	  
! 	  //power_tdo_state_1 = power_tdo_state_2;
! 
! 	  if(power_controller_states[power_tdo_state_1].speedup 
! 	     <= power_controller_states[power_tdo_state_2].speedup) {
! 	    power_tdo_state_1 = power_tdo_state_2;
! 	  }
! 	  
! 	  double power_time1;
! 	  
! 	  if(power_controller_states[power_tdo_state_1].cost == 
! 	     power_controller_states[power_tdo_state_2].cost ||
! 	     power_u == power_controller_states[power_tdo_state_1].cost) 
! 	    power_time1 = 1.0;
! 	  else
! 	    power_time1 = (power_u - 
! 		     power_controller_states[power_tdo_state_2].cost) /
! 	      (power_controller_states[power_tdo_state_1].cost - 
! 	       power_controller_states[power_tdo_state_2].cost);
! 	  
! 	  double power_time2 = 1.0 - power_time1;
! 	  
! 	  h1 = power_time1*PERIOD+0.5;
! 	  h2 = PERIOD-h1;
! 	  
! #if 1
! 	  printf("\nCONTROL beat=%lld, power=%f, des=%f, w=%f, u=%f, uo=%f, state=%d, state2=%d, %f, %f, %d, %d\n\n",
! 		 hbr.beat,act_power,power_goal,1.0/base_power,power_u,last_powerup,power_controller_states[power_tdo_state_1].id, power_controller_states[power_tdo_state_2].id,  power_time1, power_time2, h1, h2); 
! 	  
! #endif
! 	  
! 	  if(npids == 0) {
! 	    npids = get_all_subpids(getpid(), pids);
! 	  }
! 	  power_apply(power_tdo_state_1,
! 		      pids,
! 		      npids,
! 		      power_states,
! 		      NSYSSTATES);
! 	  
! 	  if(h1 == 0)
! 	    power_apply(power_tdo_state_2,
! 			pids,
! 			npids,
! 			power_states,
! 			NSYSSTATES);
! 	}
! 	
! 	if (old_action == h1) {
! 	  if(npids == 0) {
! 	    npids = get_all_subpids(getpid(), pids);
! 	  }
! 	  power_apply(power_tdo_state_2,
! 		      pids,
! 		      npids,
! 		      power_states,
! 		      NSYSSTATES);
! 	  
! 	}
!       
! #endif
! 
! 
! 	  }
! 	  AdvanceFrameMT(targs->tid);
! 	}
  
  	return NULL;
  }
***************
*** 819,824 ****
--- 1688,1732 ----
  	__parsec_bench_begin(__parsec_fluidanimate);
  #endif
  
+ 	float min_heartrate;
+ 	float max_heartrate; 
+ 	
+ 	if(getenv("FLUIDANIMATE_MIN_HEART_RATE") == NULL) {
+ 	  min_heartrate = 0.0;
+ 	}
+ 	else
+ 	  min_heartrate = atof(getenv("FLUIDANIMATE_MIN_HEART_RATE"));
+ 
+ 	if(getenv("FLUIDANIMATE_MAX_HEART_RATE") == NULL) {
+ 	  max_heartrate = 100.0;
+ 	}
+ 	else
+ 	  max_heartrate = atof(getenv("FLUIDANIMATE_MAX_HEART_RATE"));
+ 	
+ 	if(getenv("FLUIDANIMATE_WINDOW_SIZE") == NULL) {
+ 	  window_size = 1;
+ 	}
+ 	else
+ 	  window_size = atoi(getenv("FLUIDANIMATE_WINDOW_SIZE"));
+ 
+ 	if(getenv("FLUIDANIMATE_POWER_TARGET") == NULL) {
+ 	  power_target = 70;
+ 	}
+ 	else
+ 	  power_target = atof(getenv("FLUIDANIMATE_POWER_TARGET"));
+ 
+ 
+ 	
+ 	printf("init heartbeat with %f %f %d\n", min_heartrate, max_heartrate, window_size);
+ 	
+ 	heartbeat_init(&heart, 
+ 		       min_heartrate, max_heartrate, 
+ 		       0, 1,
+ 		       0, 150,
+ 		       window_size, 1, "fluidanimate_heartbeat.log");
+ 	
+ 	printf("heartbeat init'd\n");
+ 
  	if(argc < 4 || argc >= 6)
  	{
  		std::cout << "Usage: " << argv[0] << " <threadnum> <framenum> <.fluid input file> [.fluid output file]" << std::endl;
***************
*** 865,870 ****
--- 1773,1779 ----
  #ifdef ENABLE_PARSEC_HOOKS
  	__parsec_bench_end();
  #endif
+ 	heartbeat_finish(&heart);
  
  	return 0;
  }
Only in parsec-2.0-modified/pkgs/apps/fluidanimate/src: pthreads.cpp~
Only in parsec-2.0/pkgs/apps/freqmine: inputs
Only in parsec-2.0-modified/pkgs/apps/freqmine: inst
Only in parsec-2.0-modified/pkgs/apps/freqmine: obj
diff -crB parsec-2.0/pkgs/apps/freqmine/src/fpmax.cpp parsec-2.0-modified/pkgs/apps/freqmine/src/fpmax.cpp
*** parsec-2.0/pkgs/apps/freqmine/src/fpmax.cpp	2009-01-27 14:17:29.000000000 -0600
--- parsec-2.0-modified/pkgs/apps/freqmine/src/fpmax.cpp	2019-04-04 11:21:07.576766525 -0500
***************
*** 54,59 ****
--- 54,62 ----
  
  #include "buffer.h"
  
+ #include <heartbeat-accuracy-power.h>
+ heartbeat_t heart;
+ 
  #ifdef _OPENMP
  #include <omp.h>
  #else
***************
*** 100,106 ****
  	for(j=0; j<=i; j++) 
  		printf("%d\n", ITlen[0][j]);
  }
! 
  int main(int argc, char **argv)
  {
  	double tstart, tdatap, tend;
--- 103,110 ----
  	for(j=0; j<=i; j++) 
  		printf("%d\n", ITlen[0][j]);
  }
! int window_size;
! float power_target;
  int main(int argc, char **argv)
  {
  	double tstart, tdatap, tend;
***************
*** 108,113 ****
--- 112,156 ----
  	int i;
  	FP_tree* fptree;
  
+   float min_heartrate;
+   float max_heartrate; 
+   //int window_size;
+   
+   if(getenv("FREQMINE_MIN_HEART_RATE") == NULL) {
+     min_heartrate = 0.0;
+   }
+   else
+     min_heartrate = atof(getenv("FREQMINE_MIN_HEART_RATE"));
+   
+   if(getenv("FREQMINE_MAX_HEART_RATE") == NULL) {
+     max_heartrate = 100.0;
+   }
+   else
+     max_heartrate = atof(getenv("FREQMINE_MAX_HEART_RATE"));
+   
+   if(getenv("FREQMINE_WINDOW_SIZE") == NULL) {
+     window_size = 20;
+   }
+   else
+     window_size = atoi(getenv("FREQMINE_WINDOW_SIZE"));
+   
+   if(getenv("FREQMINE_POWER_TARGET") == NULL) {
+     power_target = 70;
+   }
+   else
+     power_target = atof(getenv("FREQMINE_POWER_TARGET"));
+ 
+ 
+   printf("init heartbeat with %f %f %d\n", min_heartrate, max_heartrate, window_size);
+   
+   heartbeat_init(&heart, 
+ 		 min_heartrate, max_heartrate, 
+ 		 0, 1,
+ 		 0, 150,
+ 		 window_size, 1, "heartbeat.log");
+   
+   printf("heartbeat init'd\n");
+ 
  #ifdef PARSEC_VERSION
  #define __PARSEC_STRING(x) #x
  #define __PARSEC_XSTRING(x) __PARSEC_STRING(x)
***************
*** 201,206 ****
--- 244,250 ----
  	wtime(&tend);
  	printf ("the data preparation cost %f seconds, the FPgrowth cost %f seconds\n", tdatap - tstart, tend - tdatap);
  
+     heartbeat_finish(&heart);
  #ifdef ENABLE_PARSEC_HOOKS
  	__parsec_bench_end();
  #endif
Only in parsec-2.0-modified/pkgs/apps/freqmine/src: fpmax.cpp~
diff -crB parsec-2.0/pkgs/apps/freqmine/src/fp_tree.cpp parsec-2.0-modified/pkgs/apps/freqmine/src/fp_tree.cpp
*** parsec-2.0/pkgs/apps/freqmine/src/fp_tree.cpp	2009-01-21 10:09:15.000000000 -0600
--- parsec-2.0-modified/pkgs/apps/freqmine/src/fp_tree.cpp	2019-04-04 11:21:07.564766244 -0500
***************
*** 1286,1291 ****
--- 1286,2051 ----
  }
  
  }
+ #include <heartbeat-accuracy-power.h>
+ 
+ extern heartbeat_t heart;
+ //---------------------------------------------------
+ // Control stuff
+ 
+ int current_action = -1;
+ int h1, h2, h3, h4;
+ int max_actions = 0;
+ 
+ typedef struct {
+   int beat;
+   double rate;
+   int state;
+ } controller_log_entry_t;
+ 
+ 
+ controller_log_entry_t controller_log[1000];
+ 
+ 
+ #define FAST 1
+ #define SLOW 1
+ 
+ #if FAST 
+ double p1 = 0.0;
+ double p2 = 0.0;
+ double z1 = 0.0;
+ #elif SLOW
+ const double p1 = 0.01;
+ const double p2 = 0.1;
+ const double z1 = 0.05;
+ #else
+ const double p1 = -0.5;
+ const double p2 =  0.0;
+ const double z1 =  0.0;
+ #endif
+ 
+ const double mu = 1.0;
+ //double last_speedup = 1.0;
+ #define STARTING_POWERUP 7.4
+ #define STARTING_SPEEDUP 3
+ double last_powerup = STARTING_POWERUP;
+ double last_speedup = STARTING_SPEEDUP;
+ 
+ double act_acc  = 0.0;                 // and the idled application
+ 
+ double power_u         = STARTING_POWERUP;                   // control variable
+ double power_uo        = STARTING_POWERUP;                   // old value for the control variable
+ double power_uoo       = STARTING_POWERUP;
+ double power_e         = 100000;
+ double power_eo        = 100000;
+ 
+ double speed_u         = STARTING_SPEEDUP;                   // control variable
+ double speed_uo        = STARTING_SPEEDUP;                   // old value for the control variable
+ double speed_uoo       = STARTING_SPEEDUP;
+ double speed_e         = 100000;
+ double speed_eo        = 100000;
+ 
+ int state_1 = 0;
+ int state_2 = 0;
+ int power_tdo_state_1 = 0;
+ int power_tdo_state_2 = 0;
+ int speed_tdo_state_1 = 0;
+ int speed_tdo_state_2 = 0;
+ int current_beat = 0;
+ int npids = 0;
+ pid_t pids[128]; 
+ int apps[1024];
+ 
+ 
+ int get_all_subpids(pid_t pid, pid_t* pids) {
+   int   n=0;
+   FILE  *cret;
+   int   stret;
+   char  pid_string[128];
+   char  cretpids[100];	
+   sprintf(cretpids,"ps -eLf | awk '(/%d/) && (!/awk/) {print $4}'",pid);
+   cret = popen(cretpids, "r");
+ 
+   if (cret == NULL) { 
+     printf("Error in popen\n"); 
+     exit(-1); 
+   }
+ 
+   while (fgets(pid_string, 128, cret) != NULL)  { 
+       pids[n] = atoi(pid_string); 
+       printf(" from ps - %d\n", pids[n]);
+       n++; 
+     }
+ 
+   stret = pclose(cret);
+ 
+   if (stret == -1) { 
+     printf("Error in pclose\n"); 
+     exit(-1); 
+   }
+ 
+   return n;
+ }
+ 
+ typedef int state_id_t;
+ 
+ //#define NSTATES 17
+ #define NSYSSTATES 53
+ //#define NSYSSTATES 12
+ #define NAPPSTATES 52
+ 
+ typedef struct {
+   int id;
+ 
+   double speedup;
+   double cost;
+ } control_state_t;
+ 
+ typedef struct {
+ 
+   int id;
+ 
+   double freq;
+   int cores; 
+ } power_state_t;
+ 
+ typedef struct {
+   int id;
+ 
+   int ref;
+   int range;
+   int subme;
+ } speed_state_t;
+ 
+ typedef struct {
+   int id;
+ 
+   int ref;
+   int range;
+   int subme;
+ } accuracy_state_t;
+ 
+ 
+ control_state_t power_controller_states[] = {
+ #if NSYSSTATES == 53
+ {	0	,	1	,	1	},
+ {	1	,	1.163271732	,	1.065459386	},
+ {	2	,	1.326450802	,	1.152370031	},
+ {	3	,	2.000779119	,	1.158258946	},
+ {	4	,	2.342362224	,	1.255978706	},
+ {	5	,	2.998628978	,	1.299315462	},
+ {	6	,	3.497754833	,	1.439517358	},
+ {	7	,	3.998042748	,	1.444595407	},
+ {	8	,	4.008467244	,	1.589721291	},
+ {	9	,	4.971273774	,	1.592954925	},
+ {	10	,	5.930045717	,	1.726970261	},
+ {	11	,	6.112010628	,	1.752157068	},
+ {	12	,	6.294323495	,	1.772866618	},
+ {	13	,	6.540468322	,	1.816738742	},
+ {	14	,	6.830129396	,	1.847993334	},
+ {	15	,	7.014754091	,	1.875424987	},
+ {	16	,	7.22679923	,	1.895050481	},
+ {	17	,	7.363138412	,	2.029663413	},
+ {	18	,	7.673919847	,	2.073628968	},
+ {	19	,	7.872333244	,	2.092926031	},
+ {	20	,	8.135646106	,	2.131456092	},
+ {	21	,	8.391979993	,	2.167973466	},
+ {	22	,	8.404035533	,	2.301570847	},
+ {	23	,	8.711506659	,	2.349388177	},
+ {	24	,	8.888993528	,	2.362690163	},
+ {	25	,	9.282032517	,	2.425433104	},
+ {	26	,	9.57516275	,	2.454561209	},
+ {	27	,	9.739863181	,	2.636924624	},
+ {	28	,	10.0788924	,	2.687586586	},
+ {	29	,	10.4058207	,	2.74523928	},
+ {	30	,	10.79348906	,	2.769645477	},
+ {	31	,	10.80531768	,	2.974609988	},
+ {	32	,	11.15136748	,	3.019535793	},
+ {	33	,	11.51035878	,	3.096745832	},
+ {	34	,	11.91013564	,	3.121659746	},
+ {	35	,	12.18132289	,	3.376517983	},
+ {	36	,	13.08318039	,	3.442629909	},
+ {	37	,	13.29497213	,	3.812376705	},
+ {	38	,	13.69964495	,	3.880726313	},
+ {	39	,	14.18314966	,	3.955659357	},
+ {	40	,	14.38812127	,	4.260517126	},
+ {	41	,	14.81921322	,	4.346649056	},
+ {	42	,	15.35247753	,	4.420098325	},
+ {	43	,	15.36429858	,	4.744361745	},
+ {	44	,	15.84191262	,	4.828515862	},
+ {	45	,	16.51979142	,	4.96835753	},
+ {	46	,	16.97220796	,	5.334766603	},
+ {	47	,	17.67476894	,	5.486239027	},
+ {	48	,	18.11240302	,	5.917762179	},
+ {	49	,	18.7258797	,	6.043033844	},
+ {	50	,	18.99855523	,	7.015605922	},
+ {	51	,	19.68798937	,	7.176472013	},
+ {	52	,	20.52524998	,	7.349292258	}
+ #else
+ {	0	,	1	,	1	},
+ {	1	,	1.163271732	,	1.065459386	},
+ {	2	,	1.326450802	,	1.152370031	},
+ {	3	,	1.488810095	,	1.24329113	},
+ {	4	,	1.650068787	,	1.353627355	},
+ {	5	,	1.80753684	,	1.468675067	},
+ {	6	,	1.967211766	,	1.584900326	},
+ {	7	,	2.125857007	,	1.733380748	},
+ {	8	,	2.280853438	,	1.860046486	},
+ {	9	,	2.437647326	,	2.042786943	},
+ {	10	,	2.591623527	,	2.253330233	},
+ {	11	,	3.080682296	,	3.09230493	}
+ #endif
+ };
+ 
+ control_state_t speed_controller_states[] = {
+ {	0	,	1	,	0	},
+ #if 1
+ {	1	,	1.077	,	0.11	},
+ {	2	,	1.0797	,	0.1175	},
+ {	3	,	1.1032	,	0.14	},
+ {	4	,	1.1902	,	0.16	},
+ {	5	,	1.2182	,	0.21	},
+ {	6	,	1.2187	,	0.23	},
+ {	7	,	1.2415	,	0.2425	},
+ {	8	,	1.3105	,	0.2775	},
+ {	9	,	1.333	,	0.3025	},
+ {	10	,	1.404	,	0.4325	},
+ {	11	,	1.4055	,	0.4325	},
+ {	12	,	1.4257	,	0.4725	},
+ {	13	,	1.52	,	0.535	},
+ {	14	,	1.5405	,	0.6475	},
+ {	15	,	1.5407	,	0.6475	},
+ {	16	,	1.556	,	0.7475	},
+ {	17	,	1.6357	,	0.8425	},
+ {	18	,	1.653	,	0.905	},
+ {	19	,	1.674	,	0.9575	},
+ {	20	,	1.676	,	0.9575	},
+ {	21	,	1.8322	,	1.14	},
+ {	22	,	1.8402	,	1.1475	},
+ {	23	,	1.915	,	1.32	},
+ {	24	,	1.936	,	1.33	},
+ {	25	,	1.9557	,	1.38	},
+ {	26	,	1.9565	,	1.38	},
+ {	27	,	2.0372	,	1.595	},
+ {	28	,	2.0842	,	2.13	},
+ //{	29	,	2.1747	,	2.4025	},
+ //{	30	,	2.192	,	2.435	},
+ {	31	,	2.25 /*2.2545*/	,	2.485	},
+ {	32	,	2.2665	,	2.4975	},
+ {	33	,	2.3835	,	2.68	},
+ {	34	,	2.416	,	2.6875	},
+ {	35	,	2.4507	,	2.7375	},
+ {	36	,	2.5765	,	2.9575	},
+ {	37	,	2.589	,	3.0125	},
+ {	38	,	2.6955	,	3.5325	},
+ {	39	,	2.701	,	3.545	},
+ {	40	,	2.7665	,	4.82	},
+ {	41	,	2.827	,	4.845	},
+ {	42	,	2.8807	,	4.85	},
+ {	43	,	3.1925	,	5.18	},
+ {	44	,	3.2432	,	5.2775	},
+ {	45	,	3.3797	,	5.4325	},
+ {	46	,	3.3822	,	5.5775	},
+ {	47	,	3.4307	,	5.6225	},
+ {	48	,	3.457	,	5.705	},
+ {	49	,	3.7525	,	5.7325	},
+ {	50	,	3.7615	,	5.7325	},
+ {	51	,	4.1185	,	6.2425	},
+ {	52	,	4.2537	,	6.255	},
+ #endif
+ {	53	,	7/*4.2615*/	,	6.295	}
+ };
+ 
+ speed_state_t speed_states[] = {
+ {	0	,	5,16,7	},
+ #if 1
+ {	1	,	5,15,7	},
+ {	2	,	5,14,7	},
+ {	3	,	5,12,7	},
+ {	4	,	5,10,7	},
+ {	5	,	4,15,7	},
+ {	6	,	4,14,7	},
+ {	7	,	4,12,7	},
+ {	8	,	4,11,7	},
+ {	9	,	4,10,7	},
+ {	10	,	3,15,7	},
+ {	11	,	3,14,7	},
+ {	12	,	3,12,7	},
+ {	13	,	3,10,7	},
+ {	14	,	3,9,7	},
+ {	15	,	3,8,7	},
+ {	16	,	2,12,7	},
+ {	17	,	3,6,7	},
+ {	18	,	2,10,7	},
+ {	19	,	2,9,7	},
+ {	20	,	2,8,7	},
+ {	21	,	1,13,7	},
+ {	22	,	1,12,7	},
+ {	23	,	1,11,7	},
+ {	24	,	1,10,7	},
+ {	25	,	1,9,7	},
+ {	26	,	1,8,7	},
+ {	27	,	1,6,7	},
+ {	28	,	1,4,7	},
+ //{	29	,	2,7,6	},
+ //{	30	,	2,6,6	},
+ {	31	,	1,13,6	},
+ {	32	,	1,12,6	},
+ {	33	,	1,11,6	},
+ {	34	,	1,10,6	},
+ {	35	,	1,9,6	},
+ {	36	,	1,7,6	},
+ {	37	,	1,6,6	},
+ {	38	,	1,5,6	},
+ {	39	,	1,4,6	},
+ {	40	,	3,11,1	},
+ {	41	,	3,10,1	},
+ {	42	,	3,9,1	},
+ {	43	,	3,7,1	},
+ {	44	,	3,6,1	},
+ {	45	,	3,5,1	},
+ {	46	,	3,4,1	},
+ {	47	,	1,12,1	},
+ {	48	,	2,7,1	},
+ {	49	,	1,9,1	},
+ {	50	,	1,8,1	},
+ {	51	,	1,6,1	},
+ {	52	,	1,5,1	},
+ #endif
+ {	53	,	1,4,1	}
+ };
+ 
+ power_state_t power_states[] = {
+ #if NSYSSTATES == 53
+ {	0	,	1.2	,	1	},
+ {	1	,	1.4	,	1	},
+ {	2	,	1.6	,	1	},
+ {	3	,	1.2	,	2	},
+ {	4	,	1.4	,	2	},
+ {	5	,	1.2	,	3	},
+ {	6	,	1.4	,	3	},
+ {	7	,	1.2	,	4	},
+ {	8	,	1.6	,	3	},
+ {	9	,	1.2	,	5	},
+ {	10	,	1.2	,	6	},
+ {	11	,	1.2	,	7	},
+ {	12	,	1.2	,	8	},
+ {	13	,	1.2	,	9	},
+ {	14	,	1.2	,	10	},
+ {	15	,	1.2	,	11	},
+ {	16	,	1.2	,	12	},
+ {	17	,	1.4	,	8	},
+ {	18	,	1.4	,	9	},
+ {	19	,	1.4	,	10	},
+ {	20	,	1.4	,	11	},
+ {	21	,	1.4	,	12	},
+ {	22	,	1.6	,	8	},
+ {	23	,	1.6	,	9	},
+ {	24	,	1.6	,	10	},
+ {	25	,	1.6	,	11	},
+ {	26	,	1.6	,	12	},
+ {	27	,	1.8	,	9	},
+ {	28	,	1.8	,	10	},
+ {	29	,	1.8	,	11	},
+ {	30	,	1.8	,	12	},
+ {	31	,	2	,	9	},
+ {	32	,	2	,	10	},
+ {	33	,	2	,	11	},
+ {	34	,	2	,	12	},
+ {	35	,	2.2	,	10	},
+ {	36	,	2.2	,	12	},
+ {	37	,	2.4	,	10	},
+ {	38	,	2.4	,	11	},
+ {	39	,	2.4	,	12	},
+ {	40	,	2.6	,	10	},
+ {	41	,	2.6	,	11	},
+ {	42	,	2.6	,	12	},
+ {	43	,	2.8	,	10	},
+ {	44	,	2.8	,	11	},
+ {	45	,	2.8	,	12	},
+ {	46	,	3	,	11	},
+ {	47	,	3	,	12	},
+ {	48	,	3.2	,	11	},
+ {	49	,	3.2	,	12	},
+ {	50	,	3.201	,	10	},
+ {	51	,	3.201	,	11	},
+ {	52	,	3.201	,	12	}
+ #else
+ {	0	,	1.2	,	1	},
+ {	1	,	1.4	,	1	},
+ {	2	,	1.6	,	1	},
+ {	3	,	1.8	,	1	},
+ {	4	,	2.0	,	1	},
+ {	5	,	2.2	,	1	},
+ {	6	,	2.4	,	1	},
+ {	7	,	2.6	,	1	},
+ {	8	,	2.8	,	1	},
+ {	9	,	3.0	,	1	},
+ {	10	,	3.2	,	1	},
+ {	11	,	3.201	,	1	}
+ #endif
+ };
+ 
+ double x_hat_minus = 0.0;
+ double x_hat = .2;
+ double Q = .00001;
+ double P = 1.0;
+ double P_minus = 0.0;
+ double H = 0.0;
+ double R = .01;
+ double K = 0.0; 
+ 
+ typedef struct {  
+   double x_hat_minus;
+   double x_hat;
+   double Q;
+   double P;
+   double P_minus;
+   double H;
+   double R;
+   double K;
+ } kalman_filter_t;
+ 
+ kalman_filter_t filter_init = {0.0, 0.3125, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ 
+ #define HEURISTIC_W 0
+ 
+ int adaptation_level = 1;
+ 
+ kalman_filter_t power_filter = {0.0, 0.2, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ kalman_filter_t speed_filter = {0.0, 0.3125, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ 
+ double get_base_value(kalman_filter_t* k,
+ 		      double current_measurement, 
+ 		      double last_coeff) {
+   
+   k->x_hat_minus = k->x_hat;
+   k->P_minus = k->P + k->Q;
+   
+   k->H = last_coeff;
+   k->K = k->P_minus * k->H /( k->H * k->P_minus* k->H + k->R);
+   k->x_hat = k->x_hat_minus + k->K * (current_measurement - k->H * k->x_hat_minus);
+   k->P = (1 - k->K * k->H) * k->P_minus;
+   
+   return 1.0/k->x_hat;
+ }
+ 
+ void get_power_signal(double current_power, 
+ 		      double desired_power,
+ 		      double base_power,
+ 		      double* e,
+ 		      double* eo,
+ 		      double* u,
+ 		      double* uo,
+ 		      double* uoo) {
+ 
+   if(current_power < desired_power) {
+     p1 = 0.1;
+     p2 = 0.8;
+     z1 = 0.2;
+     p1 = 0;
+     p2 = 0;
+     z1 = 0;
+   }
+   else {
+     p1 = 0;
+     p2 = 0;
+     z1 = 0;
+ 
+   }
+ 
+   
+   double A         = -(-p1*z1 - p2*z1 + mu*p1*p2 - mu*p2 + p2 - mu*p1 + p1 + mu);
+   double B         = -(-mu*p1*p2*z1 + p1*p2*z1 + mu*p2*z1 + mu*p1*z1 - mu*z1 - p1*p2);
+   double C         = ((mu - mu*p1)*p2 + mu*p1 - mu)*base_power;
+   double D         = ((mu*p1-mu)*p2 - mu*p1 + mu)*base_power*z1;
+   double F         = 1/(z1-1);
+   
+   double y = current_power;
+   *e = desired_power - y;
+   
+   //printf("u = %f, uo = %f, e = %f, A = %f, B= %f, C = %f, D= %f, F = %f\n",
+   // *u, *uo, *e, A, B, C, D, F);
+   
+   *u = F * (A*(*uo) + B*(*uoo) + C*(*e) + D*(*eo));
+ 
+   
+   
+   if (*u<1)  *u=1;        
+   if (*u>power_controller_states[NSYSSTATES-1].cost) *u=power_controller_states[NSYSSTATES-1].cost;  
+   *uoo = *uo;            // saving values
+   *uo  = *u;
+   *eo  = *e;
+ }
+ 
+ double max_speedup;
+ 
+ void get_speed_signal(double current_speed, 
+ 		      double desired_speed,
+ 		      double base_speed,
+ 		      double* e,
+ 		      double* eo,
+ 		      double* u,
+ 		      double* uo,
+ 		      double* uoo) {
+   //double p1 = 0.1;
+   //double p2 = 0.2;
+   //double z1 = 0.15; 
+ 
+   double A         = -(-p1*z1 - p2*z1 + mu*p1*p2 - mu*p2 + p2 - mu*p1 + p1 + mu);
+   double B         = -(-mu*p1*p2*z1 + p1*p2*z1 + mu*p2*z1 + mu*p1*z1 - mu*z1 - p1*p2);
+   double C         = ((mu - mu*p1)*p2 + mu*p1 - mu)*base_speed;
+   double D         = ((mu*p1-mu)*p2 - mu*p1 + mu)*base_speed*z1;
+   double F         = 1/(z1-1);
+   
+   double y = current_speed;
+   *e = desired_speed - y;
+   
+   
+   //*u = F * (A*(*uo) + B*(*uoo) + C*(*e) + D*(*eo));
+ 
+   *u = *uo + *e/base_speed;
+ 
+   //  printf("u = %f, uo = %f, e = %f, base_speed = %f\n",
+   // *u, *uo, *e, base_speed);
+ 
+ 
+   //double max_speedup = speed_controller_states[NAPPSTATES-1].speedup * 
+   //power_controller_states[NSYSSTATES-1].speedup;
+   if (*u<1)  *u=1;        
+   if (*u>max_speedup) *u=max_speedup;  
+   *uoo = *uo;            // saving values
+   *uo  = *u;
+   *eo  = *e;
+ }
+ 
+ 
+ int power_translate(double u, 
+ 		    const control_state_t* states, 
+ 		    int nstates) {
+   int i;
+ 
+   control_state_t cs = states[nstates-1];
+ 
+   double efficiency = cs.speedup/cs.cost;
+   int index = nstates-1;
+ 
+ 
+   for(i = 0; i < nstates; i++) {
+     if(states[i].cost >= u) {
+ 
+       double new_eff = states[i].speedup/states[i].cost;
+       if(new_eff > efficiency) {
+ 
+ 	cs = states[i];
+ 	efficiency = new_eff;
+ 	index = i;
+       }	
+     }
+   }
+ 
+   return index;
+ }
+ 
+ int power_translate2(double u, 
+ 		     const control_state_t* states, 
+ 		     int state1,
+ 		     const power_state_t* pstates,
+ 		     int nstates) {
+   int i;
+   
+   control_state_t cs = states[0];
+   
+   double efficiency = cs.speedup;///cs.cost;
+     int index = 0;
+     
+     for(i = 0; i < nstates; i++) {
+       if(states[i].cost < u && pstates[state1].cores == pstates[i].cores) {
+ 	
+ 	double new_eff = states[i].speedup;///states[i].cost;
+ 	  if(new_eff >= efficiency) {
+ 	    
+ 	    cs = states[i];
+ 	    efficiency = new_eff;
+ 	    index = i;
+ 	  }	
+       }
+     }
+     
+     return index;
+ }
+ 
+ int speed_translate(double u, 
+ 		    const control_state_t* states, 
+ 		    int nstates) {
+   int i;
+ 
+   control_state_t cs = states[nstates-1];
+ 
+   double efficiency = cs.speedup/(cs.cost+1);
+   int index = nstates-1;
+ 
+ 
+   for(i = 0; i < nstates; i++) {
+     if(states[i].speedup >= u) {
+ 
+       //index = i;
+       //break;
+       double new_eff = states[i].speedup/(states[i].cost+1);
+       if(new_eff > efficiency) {
+ 
+       	cs = states[i];
+ 	efficiency = new_eff;
+ 	index = i;
+       }	
+     }
+   }
+ 
+   return index;
+ }
+ 
+ int speed_translate2(double u, 
+ 		     const control_state_t* states, 
+ 		     int nstates) {
+   int i;
+   
+   control_state_t cs = states[0];
+   
+   double efficiency = cs.speedup/(cs.cost+1);
+     int index = 0;
+     
+     for(i = 0; i < nstates; i++) {
+       if(states[i].speedup < u) {
+ 	
+ 	double new_eff = states[i].speedup/(states[i].cost+1);
+ 	  if(new_eff >= efficiency) {
+ 	    
+ 	    cs = states[i];
+ 	    efficiency = new_eff;
+ 	    index = i;
+ 	  }	
+       }
+     }
+     
+     return index;
+ }
+ 
+ 
+ int last_speed_state = 0;	
+ int control_nref = 5;
+ int control_range = 16;
+ int control_refine = 7;
+ 
+ void speed_apply(int state,
+ 		 speed_state_t* ps,
+ 		 int nstates) {
+   
+   char command[4096];
+   int i;
+   
+   //printf("APPLYING SPPED STATE %d\n", state);
+ 
+   if(last_speed_state ==state)
+     return;
+   else 
+     last_speed_state = state;
+ 
+ #if 0
+   control_nref = ps[state].ref;
+   control_range = ps[state].range;
+   control_refine = ps[state].subme;
+ #endif
+   //sprintf(command,"echo \"%d\n%d\n%d\n\" >  x264_settings",
+   //	  ps[state].ref,ps[state].range,ps[state].subme);
+   //system(command);
+   
+ }
+ 
+ int last_power_state = 52;
+ int last_cores = 32;
+ int power_apply(int state_id,
+ 		pid_t* pid,
+ 		int npids,
+ 		const power_state_t* states,
+ 		int nstates) {
+   
+   int i;
+   
+   int rc = 0;
+   int retvalsyscall1 = 0;
+   int retvalsyscall2 = 0;
+   power_state_t state = states[0];
+   char command[4096];
+   
+   if(state_id == last_power_state)
+     return 0;
+   else
+     last_power_state = state_id;
+   
+   for(i = 0; i < nstates; i++) {
+     if( states[i].id == state_id) {
+       state = states[i];
+       break;
+     }
+   }
+ 
+ #if 0
+   sprintf(command,"taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; ",
+ 	  state.cores-1, getpid(), 
+ 	  state.cores-1, pid[1],
+ 	  state.cores-1, pid[2],
+ 	  state.cores-1, pid[3],
+ 	  state.cores-1, pid[4],
+ 	  state.cores-1, pid[5],
+ 	  state.cores-1, pid[6],
+ 	  state.cores-1, pid[7],
+ 	  state.cores-1, pid[8],
+ 	  state.cores-1, pid[9],
+ 	  state.cores-1, pid[10],
+ 	  state.cores-1, pid[11]);
+   retvalsyscall1 = system(command);
+ #endif
+ 
+ #if 1
+ 
+   if(last_cores != state.cores) {
+     sprintf(command,"taskset -p -c 0-%d  %d > /dev/null",state.cores-1, getpid());
+     retvalsyscall1 = system(command);
+     //printf("%s\n", command);
+     for( i = 1; i < npids; i++) {
+       sprintf(command,"taskset -p -c 0-%d  %d > /dev/null",state.cores-1, pid[i]);
+       //printf("%s\n", command);
+       retvalsyscall1 = system(command);
+     }
+     last_cores = state.cores;
+   }
+ #endif 
+ 
+ #if 1
+   for(i = 0; i < 32; i++) {
+     sprintf(command,
+ 	    "echo %d > /sys/devices/system/cpu/cpu%d/cpufreq/scaling_setspeed", 
+ 	    (int) (state.freq * 1000000), i);
+     
+     retvalsyscall2 = system(command);
+     if(retvalsyscall2 != 0)
+       fprintf(stderr, "ERROR setting clocks: %d\n", retvalsyscall2);
+   }
+ #endif
+   
+   if(retvalsyscall1 || retvalsyscall2) {
+     rc = -1;
+   }
+ 
+   return rc;
+ }
+ extern int window_size;
+ extern float power_target;
+ //----------------------------------------------------
+ 
+ int depth = 0;
+ int maxdepth = 0;
+ int num_created = 0;
+ int counter = 0;
  
  int FP_tree::FP_growth_first(FSout* fout)
  {
***************
*** 1417,1430 ****
  				local_list->top--;
  				local_fp_tree_buf->freebuf(fptree->MR_tree, fptree->MC_tree, fptree->MB_tree);
  			}else{             
  				fptree->FP_growth(thread, fout);
  				local_list->top = listlen-1;
  			}
  			release_node_array_after_mining(sequence, thread, workingthread);
  		}
  	}
  	 wtime(&tend);
! //	 printf("the major FP_growth cost %f vs %f seconds\n", tend - tstart, temp_time - tstart);
  	return 0;
  }
  
--- 2178,2306 ----
  				local_list->top--;
  				local_fp_tree_buf->freebuf(fptree->MR_tree, fptree->MC_tree, fptree->MB_tree);
  			}else{             
+ 			        depth = 0;
+ 				num_created = 0;
  				fptree->FP_growth(thread, fout);
+ 				if(depth > maxdepth)
+ 				  maxdepth = depth;
+ 				int old_counter = __sync_fetch_and_add(&counter, 1);
+ 				if(old_counter % 4 == 0) {
+ 				  heartbeat(&heart, old_counter/*num_created*/, 1);
+ #if 0// Power and performance control
+ 				  int PERIOD = window_size;
+ 				  heartbeat_record_t hbr;
+ 				  hb_get_current(&heart, &hbr);
+ 				  
+ 				  double power_goal = power_target;
+ 				  double speed_goal = 1.4;
+ 				  
+ 				  //if(hbr.beat >= 100) {/*power_goal = 35.0;*/ speed_goal = 4.615;}
+ 				  //if(hbr.beat >= 500) {speed_goal = 14.8;}
+ 				  //if(hbr.beat >= 1000) {speed_goal = 10.6;}
+ 				  
+ 				  //	printf("power goal is 70\n");
+ 				  
+ 				  int old_action = __sync_fetch_and_add(&current_action,1);
+ 				  if(old_action == PERIOD - 1) {
+ 				    current_action = 0;
+ 				  }
+ 				  if( old_action == 0) {
+ 				    double act_power = hbr.window_power;
+ 				    double act_speed = hbr.window_rate;
+ 				    
+ 				    double base_power = get_base_value(&power_filter, act_power, last_powerup);
+ 				    
+ 				    get_power_signal(act_power,
+ 						     power_goal,
+ 						     base_power,
+ 						     &power_e,
+ 						     &power_eo,
+ 						     &power_u,
+ 						     &power_uo,
+ 						     &power_uoo);
+ 				    
+ 				    double act_power_up = last_powerup = power_u;
+ 				    
+ 				    power_tdo_state_1 = power_translate(power_u, 
+ 									power_controller_states, 
+ 									(int) NSYSSTATES);
+ 				    power_tdo_state_2 = power_translate2(power_u, 
+ 									 power_controller_states,
+ 									 power_tdo_state_1,
+ 									 power_states,
+ 									 (int) NSYSSTATES);
+ 				    
+ 				    //power_tdo_state_1 = power_tdo_state_2;
+ 				    
+ 				    if(power_controller_states[power_tdo_state_1].speedup 
+ 				       <= power_controller_states[power_tdo_state_2].speedup) {
+ 				      power_tdo_state_1 = power_tdo_state_2;
+ 				    }
+ 				    
+ 				    double power_time1;
+ 				    
+ 				    if(power_controller_states[power_tdo_state_1].cost == 
+ 				       power_controller_states[power_tdo_state_2].cost ||
+ 				       power_u == power_controller_states[power_tdo_state_1].cost) 
+ 				      power_time1 = 1.0;
+ 				    else
+ 				      power_time1 = (power_u - 
+ 						     power_controller_states[power_tdo_state_2].cost) /
+ 					(power_controller_states[power_tdo_state_1].cost - 
+ 					 power_controller_states[power_tdo_state_2].cost);
+ 				    
+ 				    double power_time2 = 1.0 - power_time1;
+ 				    
+ 				    h1 = power_time1*PERIOD+0.5;
+ 				    h2 = PERIOD-h1;
+ 				    
+ #if 1
+ 				    printf("\nCONTROL beat=%lld, power=%f, des=%f, w=%f, u=%f, uo=%f, state=%d, state2=%d, %f, %f, %d, %d\n\n",
+ 					   hbr.beat,act_power,power_goal,1.0/base_power,power_u,last_powerup,power_controller_states[power_tdo_state_1].id, power_controller_states[power_tdo_state_2].id,  power_time1, power_time2, h1, h2); 
+ 				    
+ #endif
+ 				    
+ 				    if(npids == 0) {
+ 				      npids = get_all_subpids(getpid(), pids);
+ 				    }
+ 				    power_apply(power_tdo_state_1,
+ 						pids,
+ 						npids,
+ 						power_states,
+ 						NSYSSTATES);
+ 				    
+ 				    if(h1 == 0)
+ 				      power_apply(power_tdo_state_2,
+ 						  pids,
+ 						  npids,
+ 						  power_states,
+ 						  NSYSSTATES);
+ 				  }
+ 				  
+ 				  if (old_action == h1) {
+ 				    if(npids == 0) {
+ 				      npids = get_all_subpids(getpid(), pids);
+ 				    }
+ 				    power_apply(power_tdo_state_2,
+ 						pids,
+ 						npids,
+ 						power_states,
+ 						NSYSSTATES);
+ 				    
+ 				  }
+ 				  
+ #endif
+ 				}
+ 
+ 				  //__sync_fetch_and_add(&counter, 1);
  				local_list->top = listlen-1;
  			}
  			release_node_array_after_mining(sequence, thread, workingthread);
  		}
  	}
  	 wtime(&tend);
! 	 printf("the major FP_growth cost %f vs %f seconds\n", tend - tstart, temp_time - tstart);
! 	 printf("Max depth = %d\n", maxdepth);
  	return 0;
  }
  
***************
*** 1441,1446 ****
--- 2318,2327 ----
  	int *local_ITlen = ITlen[thread];
  	int *local_global_table_array = global_table_array[thread];
  	int *local_global_count_array = global_count_array[thread];
+ 
+ 
+ 	depth++;
+ 
  	if (itemno <= 0x100) {
  		function_type = 0;
  		transform_FPTree_into_FPArray(this, thread, (unsigned char) 0xff);
***************
*** 1486,1491 ****
--- 2367,2375 ----
  			continue;
  		}
  
+ 
+ 		num_created += new_item_no;
+ 
  		FP_tree *fptree;
  		fptree = (FP_tree*)local_fp_buf->newbuf(1, sizeof(FP_tree));
  		fptree->init(this->itemno, new_item_no, thread);
***************
*** 1504,1510 ****
  		local_list->top=listlen;							
  		if(fptree->Single_path(thread))
  		{
!                         Fnode* node;
                          for(node=fptree->Root->leftchild; node!=NULL; node=node->leftchild)
                                  local_list->FS[local_list->top++] = fptree->table[node->itemname];
                          local_list->top = listlen;
--- 2388,2394 ----
  		local_list->top=listlen;							
  		if(fptree->Single_path(thread))
  		{
!                        Fnode* node;
                          for(node=fptree->Root->leftchild; node!=NULL; node=node->leftchild)
                                  local_list->FS[local_list->top++] = fptree->table[node->itemname];
                          local_list->top = listlen;
***************
*** 1518,1529 ****
--- 2402,2429 ----
  				fptree->generate_all(new_item_no, thread, fout);
  			local_list->top--;
  			local_fp_tree_buf->freebuf(fptree->MR_tree, fptree->MC_tree, fptree->MB_tree);
+ 			//if(thread == 0) {
+ 			//if(counter % 100000 == 0)
+ 			//heartbeat(&heart, new_item_no);
+ 			    //counter++;
+ 			//}
+ 
+ 
  		}else{             
  			fptree->FP_growth(thread, fout);
+ 			//if(thread == 0) {
+ 			//if(counter % 100000 == 0)
+ 			//heartbeat(&heart, 100);
+ 			    //counter++;
+ 			//}
  			local_list->top = listlen-1;
  		}
  		local_fp_buf->freebuf(MR_nodes[sequence], MC_nodes[sequence], MB_nodes[sequence]);
  	}
+ 
+ 
+ 	//heartbeat(&heart, itemno);
+ 
  	return 0;
  }
  
Only in parsec-2.0-modified/pkgs/apps/freqmine/src: fp_tree.cpp~
Only in parsec-2.0/pkgs/apps/raytrace: inputs
Only in parsec-2.0-modified/pkgs/apps/raytrace: inst
Only in parsec-2.0-modified/pkgs/apps/raytrace: obj
diff -crB parsec-2.0/pkgs/apps/raytrace/src/MiniView/rtview.cxx parsec-2.0-modified/pkgs/apps/raytrace/src/MiniView/rtview.cxx
*** parsec-2.0/pkgs/apps/raytrace/src/MiniView/rtview.cxx	2009-02-06 19:21:01.000000000 -0600
--- parsec-2.0-modified/pkgs/apps/raytrace/src/MiniView/rtview.cxx	2019-04-04 11:20:55.048473364 -0500
***************
*** 15,20 ****
--- 15,776 ----
  #include <hooks.h>
  #endif
  
+ #include <heartbeat-accuracy-power.h>
+ heartbeat_t heart;
+ int window_size;
+ float power_target;
+ //---------------------------------------------------
+ // Control stuff
+ 
+ int current_action = -1;
+ int h1, h2, h3, h4;
+ int max_actions = 0;
+ 
+ typedef struct {
+   int beat;
+   double rate;
+   int state;
+ } controller_log_entry_t;
+ 
+ 
+ controller_log_entry_t controller_log[1000];
+ 
+ 
+ #define FAST 1
+ #define SLOW 1
+ 
+ #if FAST 
+ double p1 = 0.0;
+ double p2 = 0.0;
+ double z1 = 0.0;
+ #elif SLOW
+ const double p1 = 0.01;
+ const double p2 = 0.1;
+ const double z1 = 0.05;
+ #else
+ const double p1 = -0.5;
+ const double p2 =  0.0;
+ const double z1 =  0.0;
+ #endif
+ 
+ const double mu = 1.0;
+ //double last_speedup = 1.0;
+ #define STARTING_POWERUP 7.4
+ #define STARTING_SPEEDUP 3
+ double last_powerup = STARTING_POWERUP;
+ double last_speedup = STARTING_SPEEDUP;
+ 
+ double act_acc  = 0.0;                 // and the idled application
+ 
+ double power_u         = STARTING_POWERUP;                   // control variable
+ double power_uo        = STARTING_POWERUP;                   // old value for the control variable
+ double power_uoo       = STARTING_POWERUP;
+ double power_e         = 100000;
+ double power_eo        = 100000;
+ 
+ double speed_u         = STARTING_SPEEDUP;                   // control variable
+ double speed_uo        = STARTING_SPEEDUP;                   // old value for the control variable
+ double speed_uoo       = STARTING_SPEEDUP;
+ double speed_e         = 100000;
+ double speed_eo        = 100000;
+ 
+ int state_1 = 0;
+ int state_2 = 0;
+ int power_tdo_state_1 = 0;
+ int power_tdo_state_2 = 0;
+ int speed_tdo_state_1 = 0;
+ int speed_tdo_state_2 = 0;
+ int current_beat = 0;
+ int npids = 0;
+ pid_t pids[128]; 
+ int apps[1024];
+ 
+ 
+ int get_all_subpids(pid_t pid, pid_t* pids) {
+   int   n=0;
+   FILE  *cret;
+   int   stret;
+   char  pid_string[128];
+   char  cretpids[100];	
+   sprintf(cretpids,"ps -eLf | awk '(/%d/) && (!/awk/) {print $4}'",pid);
+   cret = popen(cretpids, "r");
+ 
+   if (cret == NULL) { 
+     printf("Error in popen\n"); 
+     exit(-1); 
+   }
+ 
+   while (fgets(pid_string, 128, cret) != NULL)  { 
+       pids[n] = atoi(pid_string); 
+       printf(" from ps - %d\n", pids[n]);
+       n++; 
+     }
+ 
+   stret = pclose(cret);
+ 
+   if (stret == -1) { 
+     printf("Error in pclose\n"); 
+     exit(-1); 
+   }
+ 
+   return n;
+ }
+ 
+ typedef int state_id_t;
+ 
+ //#define NSTATES 17
+ #define NSYSSTATES 53
+ //#define NSYSSTATES 12
+ #define NAPPSTATES 52
+ 
+ typedef struct {
+   int id;
+ 
+   double speedup;
+   double cost;
+ } control_state_t;
+ 
+ typedef struct {
+ 
+   int id;
+ 
+   double freq;
+   int cores; 
+ } power_state_t;
+ 
+ typedef struct {
+   int id;
+ 
+   int ref;
+   int range;
+   int subme;
+ } speed_state_t;
+ 
+ typedef struct {
+   int id;
+ 
+   int ref;
+   int range;
+   int subme;
+ } accuracy_state_t;
+ 
+ 
+ control_state_t power_controller_states[] = {
+ #if NSYSSTATES == 53
+ {	0	,	1	,	1	},
+ {	1	,	1.163271732	,	1.065459386	},
+ {	2	,	1.326450802	,	1.152370031	},
+ {	3	,	2.000779119	,	1.158258946	},
+ {	4	,	2.342362224	,	1.255978706	},
+ {	5	,	2.998628978	,	1.299315462	},
+ {	6	,	3.497754833	,	1.439517358	},
+ {	7	,	3.998042748	,	1.444595407	},
+ {	8	,	4.008467244	,	1.589721291	},
+ {	9	,	4.971273774	,	1.592954925	},
+ {	10	,	5.930045717	,	1.726970261	},
+ {	11	,	6.112010628	,	1.752157068	},
+ {	12	,	6.294323495	,	1.772866618	},
+ {	13	,	6.540468322	,	1.816738742	},
+ {	14	,	6.830129396	,	1.847993334	},
+ {	15	,	7.014754091	,	1.875424987	},
+ {	16	,	7.22679923	,	1.895050481	},
+ {	17	,	7.363138412	,	2.029663413	},
+ {	18	,	7.673919847	,	2.073628968	},
+ {	19	,	7.872333244	,	2.092926031	},
+ {	20	,	8.135646106	,	2.131456092	},
+ {	21	,	8.391979993	,	2.167973466	},
+ {	22	,	8.404035533	,	2.301570847	},
+ {	23	,	8.711506659	,	2.349388177	},
+ {	24	,	8.888993528	,	2.362690163	},
+ {	25	,	9.282032517	,	2.425433104	},
+ {	26	,	9.57516275	,	2.454561209	},
+ {	27	,	9.739863181	,	2.636924624	},
+ {	28	,	10.0788924	,	2.687586586	},
+ {	29	,	10.4058207	,	2.74523928	},
+ {	30	,	10.79348906	,	2.769645477	},
+ {	31	,	10.80531768	,	2.974609988	},
+ {	32	,	11.15136748	,	3.019535793	},
+ {	33	,	11.51035878	,	3.096745832	},
+ {	34	,	11.91013564	,	3.121659746	},
+ {	35	,	12.18132289	,	3.376517983	},
+ {	36	,	13.08318039	,	3.442629909	},
+ {	37	,	13.29497213	,	3.812376705	},
+ {	38	,	13.69964495	,	3.880726313	},
+ {	39	,	14.18314966	,	3.955659357	},
+ {	40	,	14.38812127	,	4.260517126	},
+ {	41	,	14.81921322	,	4.346649056	},
+ {	42	,	15.35247753	,	4.420098325	},
+ {	43	,	15.36429858	,	4.744361745	},
+ {	44	,	15.84191262	,	4.828515862	},
+ {	45	,	16.51979142	,	4.96835753	},
+ {	46	,	16.97220796	,	5.334766603	},
+ {	47	,	17.67476894	,	5.486239027	},
+ {	48	,	18.11240302	,	5.917762179	},
+ {	49	,	18.7258797	,	6.043033844	},
+ {	50	,	18.99855523	,	7.015605922	},
+ {	51	,	19.68798937	,	7.176472013	},
+ {	52	,	20.52524998	,	7.349292258	}
+ #else
+ {	0	,	1	,	1	},
+ {	1	,	1.163271732	,	1.065459386	},
+ {	2	,	1.326450802	,	1.152370031	},
+ {	3	,	1.488810095	,	1.24329113	},
+ {	4	,	1.650068787	,	1.353627355	},
+ {	5	,	1.80753684	,	1.468675067	},
+ {	6	,	1.967211766	,	1.584900326	},
+ {	7	,	2.125857007	,	1.733380748	},
+ {	8	,	2.280853438	,	1.860046486	},
+ {	9	,	2.437647326	,	2.042786943	},
+ {	10	,	2.591623527	,	2.253330233	},
+ {	11	,	3.080682296	,	3.09230493	}
+ #endif
+ };
+ 
+ control_state_t speed_controller_states[] = {
+ {	0	,	1	,	0	},
+ #if 1
+ {	1	,	1.077	,	0.11	},
+ {	2	,	1.0797	,	0.1175	},
+ {	3	,	1.1032	,	0.14	},
+ {	4	,	1.1902	,	0.16	},
+ {	5	,	1.2182	,	0.21	},
+ {	6	,	1.2187	,	0.23	},
+ {	7	,	1.2415	,	0.2425	},
+ {	8	,	1.3105	,	0.2775	},
+ {	9	,	1.333	,	0.3025	},
+ {	10	,	1.404	,	0.4325	},
+ {	11	,	1.4055	,	0.4325	},
+ {	12	,	1.4257	,	0.4725	},
+ {	13	,	1.52	,	0.535	},
+ {	14	,	1.5405	,	0.6475	},
+ {	15	,	1.5407	,	0.6475	},
+ {	16	,	1.556	,	0.7475	},
+ {	17	,	1.6357	,	0.8425	},
+ {	18	,	1.653	,	0.905	},
+ {	19	,	1.674	,	0.9575	},
+ {	20	,	1.676	,	0.9575	},
+ {	21	,	1.8322	,	1.14	},
+ {	22	,	1.8402	,	1.1475	},
+ {	23	,	1.915	,	1.32	},
+ {	24	,	1.936	,	1.33	},
+ {	25	,	1.9557	,	1.38	},
+ {	26	,	1.9565	,	1.38	},
+ {	27	,	2.0372	,	1.595	},
+ {	28	,	2.0842	,	2.13	},
+ //{	29	,	2.1747	,	2.4025	},
+ //{	30	,	2.192	,	2.435	},
+ {	31	,	2.25 /*2.2545*/	,	2.485	},
+ {	32	,	2.2665	,	2.4975	},
+ {	33	,	2.3835	,	2.68	},
+ {	34	,	2.416	,	2.6875	},
+ {	35	,	2.4507	,	2.7375	},
+ {	36	,	2.5765	,	2.9575	},
+ {	37	,	2.589	,	3.0125	},
+ {	38	,	2.6955	,	3.5325	},
+ {	39	,	2.701	,	3.545	},
+ {	40	,	2.7665	,	4.82	},
+ {	41	,	2.827	,	4.845	},
+ {	42	,	2.8807	,	4.85	},
+ {	43	,	3.1925	,	5.18	},
+ {	44	,	3.2432	,	5.2775	},
+ {	45	,	3.3797	,	5.4325	},
+ {	46	,	3.3822	,	5.5775	},
+ {	47	,	3.4307	,	5.6225	},
+ {	48	,	3.457	,	5.705	},
+ {	49	,	3.7525	,	5.7325	},
+ {	50	,	3.7615	,	5.7325	},
+ {	51	,	4.1185	,	6.2425	},
+ {	52	,	4.2537	,	6.255	},
+ #endif
+ {	53	,	7/*4.2615*/	,	6.295	}
+ };
+ 
+ speed_state_t speed_states[] = {
+ {	0	,	5,16,7	},
+ #if 1
+ {	1	,	5,15,7	},
+ {	2	,	5,14,7	},
+ {	3	,	5,12,7	},
+ {	4	,	5,10,7	},
+ {	5	,	4,15,7	},
+ {	6	,	4,14,7	},
+ {	7	,	4,12,7	},
+ {	8	,	4,11,7	},
+ {	9	,	4,10,7	},
+ {	10	,	3,15,7	},
+ {	11	,	3,14,7	},
+ {	12	,	3,12,7	},
+ {	13	,	3,10,7	},
+ {	14	,	3,9,7	},
+ {	15	,	3,8,7	},
+ {	16	,	2,12,7	},
+ {	17	,	3,6,7	},
+ {	18	,	2,10,7	},
+ {	19	,	2,9,7	},
+ {	20	,	2,8,7	},
+ {	21	,	1,13,7	},
+ {	22	,	1,12,7	},
+ {	23	,	1,11,7	},
+ {	24	,	1,10,7	},
+ {	25	,	1,9,7	},
+ {	26	,	1,8,7	},
+ {	27	,	1,6,7	},
+ {	28	,	1,4,7	},
+ //{	29	,	2,7,6	},
+ //{	30	,	2,6,6	},
+ {	31	,	1,13,6	},
+ {	32	,	1,12,6	},
+ {	33	,	1,11,6	},
+ {	34	,	1,10,6	},
+ {	35	,	1,9,6	},
+ {	36	,	1,7,6	},
+ {	37	,	1,6,6	},
+ {	38	,	1,5,6	},
+ {	39	,	1,4,6	},
+ {	40	,	3,11,1	},
+ {	41	,	3,10,1	},
+ {	42	,	3,9,1	},
+ {	43	,	3,7,1	},
+ {	44	,	3,6,1	},
+ {	45	,	3,5,1	},
+ {	46	,	3,4,1	},
+ {	47	,	1,12,1	},
+ {	48	,	2,7,1	},
+ {	49	,	1,9,1	},
+ {	50	,	1,8,1	},
+ {	51	,	1,6,1	},
+ {	52	,	1,5,1	},
+ #endif
+ {	53	,	1,4,1	}
+ };
+ 
+ power_state_t power_states[] = {
+ #if NSYSSTATES == 53
+ {	0	,	1.2	,	1	},
+ {	1	,	1.4	,	1	},
+ {	2	,	1.6	,	1	},
+ {	3	,	1.2	,	2	},
+ {	4	,	1.4	,	2	},
+ {	5	,	1.2	,	3	},
+ {	6	,	1.4	,	3	},
+ {	7	,	1.2	,	4	},
+ {	8	,	1.6	,	3	},
+ {	9	,	1.2	,	5	},
+ {	10	,	1.2	,	6	},
+ {	11	,	1.2	,	7	},
+ {	12	,	1.2	,	8	},
+ {	13	,	1.2	,	9	},
+ {	14	,	1.2	,	10	},
+ {	15	,	1.2	,	11	},
+ {	16	,	1.2	,	12	},
+ {	17	,	1.4	,	8	},
+ {	18	,	1.4	,	9	},
+ {	19	,	1.4	,	10	},
+ {	20	,	1.4	,	11	},
+ {	21	,	1.4	,	12	},
+ {	22	,	1.6	,	8	},
+ {	23	,	1.6	,	9	},
+ {	24	,	1.6	,	10	},
+ {	25	,	1.6	,	11	},
+ {	26	,	1.6	,	12	},
+ {	27	,	1.8	,	9	},
+ {	28	,	1.8	,	10	},
+ {	29	,	1.8	,	11	},
+ {	30	,	1.8	,	12	},
+ {	31	,	2	,	9	},
+ {	32	,	2	,	10	},
+ {	33	,	2	,	11	},
+ {	34	,	2	,	12	},
+ {	35	,	2.2	,	10	},
+ {	36	,	2.2	,	12	},
+ {	37	,	2.4	,	10	},
+ {	38	,	2.4	,	11	},
+ {	39	,	2.4	,	12	},
+ {	40	,	2.6	,	10	},
+ {	41	,	2.6	,	11	},
+ {	42	,	2.6	,	12	},
+ {	43	,	2.8	,	10	},
+ {	44	,	2.8	,	11	},
+ {	45	,	2.8	,	12	},
+ {	46	,	3	,	11	},
+ {	47	,	3	,	12	},
+ {	48	,	3.2	,	11	},
+ {	49	,	3.2	,	12	},
+ {	50	,	3.201	,	10	},
+ {	51	,	3.201	,	11	},
+ {	52	,	3.201	,	12	}
+ #else
+ {	0	,	1.2	,	1	},
+ {	1	,	1.4	,	1	},
+ {	2	,	1.6	,	1	},
+ {	3	,	1.8	,	1	},
+ {	4	,	2.0	,	1	},
+ {	5	,	2.2	,	1	},
+ {	6	,	2.4	,	1	},
+ {	7	,	2.6	,	1	},
+ {	8	,	2.8	,	1	},
+ {	9	,	3.0	,	1	},
+ {	10	,	3.2	,	1	},
+ {	11	,	3.201	,	1	}
+ #endif
+ };
+ 
+ double x_hat_minus = 0.0;
+ double x_hat = .2;
+ double Q = .00001;
+ double P = 1.0;
+ double P_minus = 0.0;
+ double H = 0.0;
+ double R = .01;
+ double K = 0.0; 
+ 
+ typedef struct {  
+   double x_hat_minus;
+   double x_hat;
+   double Q;
+   double P;
+   double P_minus;
+   double H;
+   double R;
+   double K;
+ } kalman_filter_t;
+ 
+ kalman_filter_t filter_init = {0.0, 0.3125, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ 
+ #define HEURISTIC_W 0
+ 
+ int adaptation_level = 1;
+ 
+ kalman_filter_t power_filter = {0.0, 0.2, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ kalman_filter_t speed_filter = {0.0, 0.3125, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ 
+ double get_base_value(kalman_filter_t* k,
+ 		      double current_measurement, 
+ 		      double last_coeff) {
+   
+   k->x_hat_minus = k->x_hat;
+   k->P_minus = k->P + k->Q;
+   
+   k->H = last_coeff;
+   k->K = k->P_minus * k->H /( k->H * k->P_minus* k->H + k->R);
+   k->x_hat = k->x_hat_minus + k->K * (current_measurement - k->H * k->x_hat_minus);
+   k->P = (1 - k->K * k->H) * k->P_minus;
+   
+   return 1.0/k->x_hat;
+ }
+ 
+ void get_power_signal(double current_power, 
+ 		      double desired_power,
+ 		      double base_power,
+ 		      double* e,
+ 		      double* eo,
+ 		      double* u,
+ 		      double* uo,
+ 		      double* uoo) {
+ 
+   if(current_power < desired_power) {
+     p1 = 0.1;
+     p2 = 0.8;
+     z1 = 0.2;
+     p1 = 0;
+     p2 = 0;
+     z1 = 0;
+   }
+   else {
+     p1 = 0;
+     p2 = 0;
+     z1 = 0;
+ 
+   }
+ 
+   
+   double A         = -(-p1*z1 - p2*z1 + mu*p1*p2 - mu*p2 + p2 - mu*p1 + p1 + mu);
+   double B         = -(-mu*p1*p2*z1 + p1*p2*z1 + mu*p2*z1 + mu*p1*z1 - mu*z1 - p1*p2);
+   double C         = ((mu - mu*p1)*p2 + mu*p1 - mu)*base_power;
+   double D         = ((mu*p1-mu)*p2 - mu*p1 + mu)*base_power*z1;
+   double F         = 1/(z1-1);
+   
+   double y = current_power;
+   *e = desired_power - y;
+   
+   //printf("u = %f, uo = %f, e = %f, A = %f, B= %f, C = %f, D= %f, F = %f\n",
+   // *u, *uo, *e, A, B, C, D, F);
+   
+   *u = F * (A*(*uo) + B*(*uoo) + C*(*e) + D*(*eo));
+ 
+   
+   
+   if (*u<1)  *u=1;        
+   if (*u>power_controller_states[NSYSSTATES-1].cost) *u=power_controller_states[NSYSSTATES-1].cost;  
+   *uoo = *uo;            // saving values
+   *uo  = *u;
+   *eo  = *e;
+ }
+ 
+ double max_speedup;
+ 
+ void get_speed_signal(double current_speed, 
+ 		      double desired_speed,
+ 		      double base_speed,
+ 		      double* e,
+ 		      double* eo,
+ 		      double* u,
+ 		      double* uo,
+ 		      double* uoo) {
+   //double p1 = 0.1;
+   //double p2 = 0.2;
+   //double z1 = 0.15; 
+ 
+   double A         = -(-p1*z1 - p2*z1 + mu*p1*p2 - mu*p2 + p2 - mu*p1 + p1 + mu);
+   double B         = -(-mu*p1*p2*z1 + p1*p2*z1 + mu*p2*z1 + mu*p1*z1 - mu*z1 - p1*p2);
+   double C         = ((mu - mu*p1)*p2 + mu*p1 - mu)*base_speed;
+   double D         = ((mu*p1-mu)*p2 - mu*p1 + mu)*base_speed*z1;
+   double F         = 1/(z1-1);
+   
+   double y = current_speed;
+   *e = desired_speed - y;
+   
+   
+   //*u = F * (A*(*uo) + B*(*uoo) + C*(*e) + D*(*eo));
+ 
+   *u = *uo + *e/base_speed;
+ 
+   //  printf("u = %f, uo = %f, e = %f, base_speed = %f\n",
+   // *u, *uo, *e, base_speed);
+ 
+ 
+   //double max_speedup = speed_controller_states[NAPPSTATES-1].speedup * 
+   //power_controller_states[NSYSSTATES-1].speedup;
+   if (*u<1)  *u=1;        
+   if (*u>max_speedup) *u=max_speedup;  
+   *uoo = *uo;            // saving values
+   *uo  = *u;
+   *eo  = *e;
+ }
+ 
+ 
+ int power_translate(double u, 
+ 		    const control_state_t* states, 
+ 		    int nstates) {
+   int i;
+ 
+   control_state_t cs = states[nstates-1];
+ 
+   double efficiency = cs.speedup/cs.cost;
+   int index = nstates-1;
+ 
+ 
+   for(i = 0; i < nstates; i++) {
+     if(states[i].cost >= u) {
+ 
+       double new_eff = states[i].speedup/states[i].cost;
+       if(new_eff > efficiency) {
+ 
+ 	cs = states[i];
+ 	efficiency = new_eff;
+ 	index = i;
+       }	
+     }
+   }
+ 
+   return index;
+ }
+ 
+ int power_translate2(double u, 
+ 		     const control_state_t* states, 
+ 		     int state1,
+ 		     const power_state_t* pstates,
+ 		     int nstates) {
+   int i;
+   
+   control_state_t cs = states[0];
+   
+   double efficiency = cs.speedup;///cs.cost;
+     int index = 0;
+     
+     for(i = 0; i < nstates; i++) {
+       if(states[i].cost < u && pstates[state1].cores == pstates[i].cores) {
+ 	
+ 	double new_eff = states[i].speedup;///states[i].cost;
+ 	  if(new_eff >= efficiency) {
+ 	    
+ 	    cs = states[i];
+ 	    efficiency = new_eff;
+ 	    index = i;
+ 	  }	
+       }
+     }
+     
+     return index;
+ }
+ 
+ int speed_translate(double u, 
+ 		    const control_state_t* states, 
+ 		    int nstates) {
+   int i;
+ 
+   control_state_t cs = states[nstates-1];
+ 
+   double efficiency = cs.speedup/(cs.cost+1);
+   int index = nstates-1;
+ 
+ 
+   for(i = 0; i < nstates; i++) {
+     if(states[i].speedup >= u) {
+ 
+       //index = i;
+       //break;
+       double new_eff = states[i].speedup/(states[i].cost+1);
+       if(new_eff > efficiency) {
+ 
+       	cs = states[i];
+ 	efficiency = new_eff;
+ 	index = i;
+       }	
+     }
+   }
+ 
+   return index;
+ }
+ 
+ int speed_translate2(double u, 
+ 		     const control_state_t* states, 
+ 		     int nstates) {
+   int i;
+   
+   control_state_t cs = states[0];
+   
+   double efficiency = cs.speedup/(cs.cost+1);
+     int index = 0;
+     
+     for(i = 0; i < nstates; i++) {
+       if(states[i].speedup < u) {
+ 	
+ 	double new_eff = states[i].speedup/(states[i].cost+1);
+ 	  if(new_eff >= efficiency) {
+ 	    
+ 	    cs = states[i];
+ 	    efficiency = new_eff;
+ 	    index = i;
+ 	  }	
+       }
+     }
+     
+     return index;
+ }
+ 
+ 
+ int last_speed_state = 0;	
+ int control_nref = 5;
+ int control_range = 16;
+ int control_refine = 7;
+ 
+ void speed_apply(int state,
+ 		 speed_state_t* ps,
+ 		 int nstates) {
+   
+   char command[4096];
+   int i;
+   
+   //printf("APPLYING SPPED STATE %d\n", state);
+ 
+   if(last_speed_state ==state)
+     return;
+   else 
+     last_speed_state = state;
+ 
+ #if 0
+   control_nref = ps[state].ref;
+   control_range = ps[state].range;
+   control_refine = ps[state].subme;
+ #endif
+   //sprintf(command,"echo \"%d\n%d\n%d\n\" >  x264_settings",
+   //	  ps[state].ref,ps[state].range,ps[state].subme);
+   //system(command);
+   
+ }
+ 
+ int last_power_state = 52;
+ int last_cores = 12;
+ int power_apply(int state_id,
+ 		pid_t* pid,
+ 		int npids,
+ 		const power_state_t* states,
+ 		int nstates) {
+   
+   int i;
+   
+   int rc = 0;
+   int retvalsyscall1 = 0;
+   int retvalsyscall2 = 0;
+   power_state_t state = states[0];
+   char command[4096];
+   
+   if(state_id == last_power_state)
+     return 0;
+   else
+     last_power_state = state_id;
+   
+   for(i = 0; i < nstates; i++) {
+     if( states[i].id == state_id) {
+       state = states[i];
+       break;
+     }
+   }
+ 
+ #if 0
+   sprintf(command,"taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; ",
+ 	  state.cores-1, getpid(), 
+ 	  state.cores-1, pid[1],
+ 	  state.cores-1, pid[2],
+ 	  state.cores-1, pid[3],
+ 	  state.cores-1, pid[4],
+ 	  state.cores-1, pid[5],
+ 	  state.cores-1, pid[6],
+ 	  state.cores-1, pid[7],
+ 	  state.cores-1, pid[8],
+ 	  state.cores-1, pid[9],
+ 	  state.cores-1, pid[10],
+ 	  state.cores-1, pid[11]);
+   retvalsyscall1 = system(command);
+ #endif
+ 
+ #if 1
+ 
+   if(last_cores != state.cores) {
+     sprintf(command,"taskset -p -c 0-%d  %d > /dev/null",state.cores-1, getpid());
+     retvalsyscall1 = system(command);
+     //printf("%s\n", command);
+     for( i = 1; i < npids; i++) {
+       sprintf(command,"taskset -p -c 0-%d  %d > /dev/null",state.cores-1, pid[i]);
+       //printf("%s\n", command);
+       retvalsyscall1 = system(command);
+     }
+     last_cores = state.cores;
+   }
+ #endif 
+ 
+ #if 1
+   for(i = 0; i < 12; i++) {
+     sprintf(command,
+ 	    "echo %d > /sys/devices/system/cpu/cpu%d/cpufreq/scaling_setspeed", 
+ 	    (int) (state.freq * 1000000), i);
+     
+     retvalsyscall2 = system(command);
+     if(retvalsyscall2 != 0)
+       fprintf(stderr, "ERROR setting clocks: %d\n", retvalsyscall2);
+   }
+ #endif
+   
+   if(retvalsyscall1 || retvalsyscall2) {
+     rc = -1;
+   }
+ 
+   return rc;
+ }
+ //extern int window_size;
+ 
+ //----------------------------------------------------
  using namespace RTTL;
  using namespace LRT;
  
***************
*** 365,370 ****
--- 1121,1166 ----
  
    parseCommandLine(argc, argv);
  
+   float min_heartrate;
+   float max_heartrate; 
+   //int window_size;
+   
+   if(getenv("RAYTRACE_MIN_HEART_RATE") == NULL) {
+     min_heartrate = 0.0;
+   }
+   else
+     min_heartrate = atof(getenv("RAYTRACE_MIN_HEART_RATE"));
+   
+   if(getenv("RAYTRACE_MAX_HEART_RATE") == NULL) {
+     max_heartrate = 100.0;
+   }
+   else
+     max_heartrate = atof(getenv("RAYTRACE_MAX_HEART_RATE"));
+   
+   if(getenv("RAYTRACE_WINDOW_SIZE") == NULL) {
+     window_size = 20;
+   }
+   else
+     window_size = atoi(getenv("RAYTRACE_WINDOW_SIZE"));
+  
+   if(getenv("RAYTRACE_POWER_TARGET") == NULL) {
+     power_target = 70;
+   }
+   else
+     power_target = atof(getenv("RAYTRACE_POWER_TARGET"));
+   
+  
+   printf("init heartbeat with %f %f %d\n", min_heartrate, max_heartrate, window_size);
+   
+   heartbeat_init(&heart, 
+ 		 min_heartrate, max_heartrate,
+ 		 0, 1,
+ 		 0, 150,
+ 		 window_size, 100, "heartbeat.log");
+   
+   printf("heartbeat init'd\n");
+ 
+ 
    if (glDisplay) {
      /* initialize glut */
      glutInit(&argc, argv);
***************
*** 485,495 ****
--- 1281,1402 ----
      int frame = 0;
      do {
        render();
+       heartbeat(&heart, frame, 1);
+  
+ 
+ #if 0// Power and performance control
+ 	int PERIOD = window_size;
+ 	heartbeat_record_t hbr;
+ 	hb_get_current(&heart, &hbr);
+ 	
+ 	double power_goal = power_target;
+ 	double speed_goal = 1.4;
+ 	
+ 	//if(hbr.beat >= 100) {/*power_goal = 35.0;*/ speed_goal = 4.615;}
+ 	//if(hbr.beat >= 500) {speed_goal = 14.8;}
+ 	//if(hbr.beat >= 1000) {speed_goal = 10.6;}
+ 	
+ 	//	printf("power goal is 70\n");
+ 	
+ 	int old_action = __sync_fetch_and_add(&current_action,1);
+ 	if(old_action == PERIOD-1) {
+ 	  current_action = 0;
+ 	}
+ 	if( old_action == 0) {
+ 	  double act_power = hbr.window_power;
+ 	  double act_speed = hbr.window_rate;
+ 	  
+ 	  double base_power = get_base_value(&power_filter, act_power, last_powerup);
+ 	  
+ 	  get_power_signal(act_power,
+ 			   power_goal,
+ 			   base_power,
+ 			   &power_e,
+ 			   &power_eo,
+ 			   &power_u,
+ 			   &power_uo,
+ 			   &power_uoo);
+ 	  
+ 	  double act_power_up = last_powerup = power_u;
+ 	  
+ 	  power_tdo_state_1 = power_translate(power_u, 
+ 					      power_controller_states, 
+ 					      (int) NSYSSTATES);
+ 	  power_tdo_state_2 = power_translate2(power_u, 
+ 					       power_controller_states,
+ 					       power_tdo_state_1,
+ 					       power_states,
+ 					       (int) NSYSSTATES);
+ 	  
+ 	  //power_tdo_state_1 = power_tdo_state_2;
+ 
+ 	  if(power_controller_states[power_tdo_state_1].speedup 
+ 	     <= power_controller_states[power_tdo_state_2].speedup) {
+ 	    power_tdo_state_1 = power_tdo_state_2;
+ 	  }
+ 	  
+ 	  double power_time1;
+ 	  
+ 	  if(power_controller_states[power_tdo_state_1].cost == 
+ 	     power_controller_states[power_tdo_state_2].cost ||
+ 	     power_u == power_controller_states[power_tdo_state_1].cost) 
+ 	    power_time1 = 1.0;
+ 	  else
+ 	    power_time1 = (power_u - 
+ 		     power_controller_states[power_tdo_state_2].cost) /
+ 	      (power_controller_states[power_tdo_state_1].cost - 
+ 	       power_controller_states[power_tdo_state_2].cost);
+ 	  
+ 	  double power_time2 = 1.0 - power_time1;
+ 	  
+ 	  h1 = power_time1*PERIOD+0.5;
+ 	  h2 = PERIOD-h1;
+ 	  
+ #if 1
+ 	  printf("\nCONTROL beat=%lld, power=%f, des=%f, w=%f, u=%f, uo=%f, state=%d, state2=%d, %f, %f, %d, %d\n\n",
+ 		 hbr.beat,act_power,power_goal,1.0/base_power,power_u,last_powerup,power_controller_states[power_tdo_state_1].id, power_controller_states[power_tdo_state_2].id,  power_time1, power_time2, h1, h2); 
+ 	  
+ #endif
+ 	  
+ 	  if(npids == 0) {
+ 	    npids = get_all_subpids(getpid(), pids);
+ 	  }
+ 	  power_apply(power_tdo_state_1,
+ 		      pids,
+ 		      npids,
+ 		      power_states,
+ 		      NSYSSTATES);
+ 	  
+ 	  if(h1 == 0)
+ 	    power_apply(power_tdo_state_2,
+ 			pids,
+ 			npids,
+ 			power_states,
+ 			NSYSSTATES);
+ 	}
+ 	
+ 	if (old_action == h1) {
+ 	  if(npids == 0) {
+ 	    npids = get_all_subpids(getpid(), pids);
+ 	  }
+ 	  power_apply(power_tdo_state_2,
+ 		      pids,
+ 		      npids,
+ 		      power_states,
+ 		      NSYSSTATES);
+ 	  
+ 	}
+       
+ #endif
+ 
+ 
+      
        frame++;
      } while(!(__builtin_expect(framesToRender > 0,0) && frame >= framesToRender));
  #ifdef ENABLE_PARSEC_HOOKS
      __parsec_roi_end();
  #endif
+     heartbeat_finish(&heart);
      cout << "Done" << endl << flush;
    }
  
Only in parsec-2.0-modified/pkgs/apps/raytrace/src/MiniView: rtview.cxx~
Only in parsec-2.0-modified/pkgs/apps/swaptions: inst
Only in parsec-2.0-modified/pkgs/apps/swaptions: obj
Only in parsec-2.0-modified/pkgs/apps/swaptions/parsec: native.runconf~
Only in parsec-2.0-modified/pkgs/apps/swaptions/src: barrier.h
diff -crB parsec-2.0/pkgs/apps/swaptions/src/HJM.h parsec-2.0-modified/pkgs/apps/swaptions/src/HJM.h
*** parsec-2.0/pkgs/apps/swaptions/src/HJM.h	2008-09-26 18:44:49.000000000 -0500
--- parsec-2.0-modified/pkgs/apps/swaptions/src/HJM.h	2019-04-04 11:20:54.968471492 -0500
***************
*** 64,69 ****
--- 64,73 ----
  			      //Simulation Parameters
  			      long iRndSeed, 
  			      long lTrials, int blocksize, int tid);
+ 
+ void* HJM_Swaption_Blocking_sdp(void* a);
+ 
+ 
  /*
  extern "C" FTYPE *dvector( long nl, long nh );
  extern "C" FTYPE **dmatrix( long nrl, long nrh, long ncl, long nch );
Only in parsec-2.0-modified/pkgs/apps/swaptions/src: HJM.h~
diff -crB parsec-2.0/pkgs/apps/swaptions/src/HJM_Securities.cpp parsec-2.0-modified/pkgs/apps/swaptions/src/HJM_Securities.cpp
*** parsec-2.0/pkgs/apps/swaptions/src/HJM_Securities.cpp	2008-11-11 14:28:17.000000000 -0600
--- parsec-2.0-modified/pkgs/apps/swaptions/src/HJM_Securities.cpp	2019-04-04 11:20:54.972471585 -0500
***************
*** 7,12 ****
--- 7,13 ----
  #include <stdlib.h>
  #include <math.h>
  #include <iostream>
+ #include <heartbeat-accuracy-power.h>
  
  #include "nr_routines.h"
  #include "HJM.h"
***************
*** 28,33 ****
--- 29,36 ----
  #endif // TBB_VERSION
  #endif //ENABLE_THREADS
  
+ volatile heartbeat_t heart;
+ 
  
  #ifdef ENABLE_PARSEC_HOOKS
  #include <hooks.h>
***************
*** 40,45 ****
--- 43,50 ----
  FTYPE dYears = 5.5; 
  int iFactors = 3; 
  parm *swaptions;
+ int window_size;
+ float power_target;
  
  // =================================================
  FTYPE *dSumSimSwaptionPrice_global_ptr;
***************
*** 74,79 ****
--- 79,811 ----
  };
  
  #endif //TBB_VERSION
+ //---------------------------------------------------
+ // Control stuff
+ 
+ int current_action = 0;
+ int h1, h2, h3, h4;
+ int max_actions = 0;
+ 
+ typedef struct {
+   int beat;
+   double rate;
+   int state;
+ } controller_log_entry_t;
+ 
+ 
+ controller_log_entry_t controller_log[1000];
+ 
+ 
+ #define FAST 1
+ #define SLOW 1
+ 
+ #if FAST 
+ double p1 = 0.0;
+ double p2 = 0.0;
+ double z1 = 0.0;
+ #elif SLOW
+ const double p1 = 0.01;
+ const double p2 = 0.1;
+ const double z1 = 0.05;
+ #else
+ const double p1 = -0.5;
+ const double p2 =  0.0;
+ const double z1 =  0.0;
+ #endif
+ 
+ const double mu = 1.0;
+ //double last_speedup = 1.0;
+ #define STARTING_POWERUP 7.4
+ #define STARTING_SPEEDUP 3
+ double last_powerup = STARTING_POWERUP;
+ double last_speedup = STARTING_SPEEDUP;
+ 
+ double act_acc  = 0.0;                 // and the idled application
+ 
+ double power_u         = STARTING_POWERUP;                   // control variable
+ double power_uo        = STARTING_POWERUP;                   // old value for the control variable
+ double power_uoo       = STARTING_POWERUP;
+ double power_e         = 100000;
+ double power_eo        = 100000;
+ 
+ double speed_u         = STARTING_SPEEDUP;                   // control variable
+ double speed_uo        = STARTING_SPEEDUP;                   // old value for the control variable
+ double speed_uoo       = STARTING_SPEEDUP;
+ double speed_e         = 100000;
+ double speed_eo        = 100000;
+ 
+ int state_1 = 0;
+ int state_2 = 0;
+ int power_tdo_state_1 = 52;
+ int power_tdo_state_2 = 52;
+ int speed_tdo_state_1 = 0;
+ int speed_tdo_state_2 = 0;
+ int current_beat = 0;
+ int npids = 0;
+ pid_t pids[128]; 
+ int apps[1024];
+ 
+ 
+ int get_all_subpids(pid_t pid, pid_t* pids) {
+   int   n=0;
+   FILE  *cret;
+   int   stret;
+   char  pid_string[128];
+   char  cretpids[100];	
+   sprintf(cretpids,"ps -eLf | awk '(/%d/) && (!/awk/) {print $4}'",pid);
+   cret = popen(cretpids, "r");
+ 
+   if (cret == NULL) { 
+     printf("Error in popen\n"); 
+     exit(-1); 
+   }
+ 
+   while (fgets(pid_string, 128, cret) != NULL)  { 
+       pids[n] = atoi(pid_string); 
+       printf(" from ps - %d\n", pids[n]);
+       n++; 
+     }
+ 
+   stret = pclose(cret);
+ 
+   if (stret == -1) { 
+     printf("Error in pclose\n"); 
+     exit(-1); 
+   }
+ 
+   return n;
+ }
+ 
+ typedef int state_id_t;
+ 
+ //#define NSTATES 17
+ #define NSYSSTATES 53
+ //#define NSYSSTATES 12
+ #define NAPPSTATES 52
+ 
+ typedef struct {
+   int id;
+ 
+   double speedup;
+   double cost;
+ } control_state_t;
+ 
+ typedef struct {
+ 
+   int id;
+ 
+   double freq;
+   int cores; 
+ } power_state_t;
+ 
+ typedef struct {
+   int id;
+ 
+   int ref;
+   int range;
+   int subme;
+ } speed_state_t;
+ 
+ typedef struct {
+   int id;
+ 
+   int ref;
+   int range;
+   int subme;
+ } accuracy_state_t;
+ 
+ 
+ control_state_t power_controller_states[] = {
+ #if NSYSSTATES == 53
+ {	0	,	1	,	1	},
+ {	1	,	1.163271732	,	1.065459386	},
+ {	2	,	1.326450802	,	1.152370031	},
+ {	3	,	2.000779119	,	1.158258946	},
+ {	4	,	2.342362224	,	1.255978706	},
+ {	5	,	2.998628978	,	1.299315462	},
+ {	6	,	3.497754833	,	1.439517358	},
+ {	7	,	3.998042748	,	1.444595407	},
+ {	8	,	4.008467244	,	1.589721291	},
+ {	9	,	4.971273774	,	1.592954925	},
+ {	10	,	5.930045717	,	1.726970261	},
+ {	11	,	6.112010628	,	1.752157068	},
+ {	12	,	6.294323495	,	1.772866618	},
+ {	13	,	6.540468322	,	1.816738742	},
+ {	14	,	6.830129396	,	1.847993334	},
+ {	15	,	7.014754091	,	1.875424987	},
+ {	16	,	7.22679923	,	1.895050481	},
+ {	17	,	7.363138412	,	2.029663413	},
+ {	18	,	7.673919847	,	2.073628968	},
+ {	19	,	7.872333244	,	2.092926031	},
+ {	20	,	8.135646106	,	2.131456092	},
+ {	21	,	8.391979993	,	2.167973466	},
+ {	22	,	8.404035533	,	2.301570847	},
+ {	23	,	8.711506659	,	2.349388177	},
+ {	24	,	8.888993528	,	2.362690163	},
+ {	25	,	9.282032517	,	2.425433104	},
+ {	26	,	9.57516275	,	2.454561209	},
+ {	27	,	9.739863181	,	2.636924624	},
+ {	28	,	10.0788924	,	2.687586586	},
+ {	29	,	10.4058207	,	2.74523928	},
+ {	30	,	10.79348906	,	2.769645477	},
+ {	31	,	10.80531768	,	2.974609988	},
+ {	32	,	11.15136748	,	3.019535793	},
+ {	33	,	11.51035878	,	3.096745832	},
+ {	34	,	11.91013564	,	3.121659746	},
+ {	35	,	12.18132289	,	3.376517983	},
+ {	36	,	13.08318039	,	3.442629909	},
+ {	37	,	13.29497213	,	3.812376705	},
+ {	38	,	13.69964495	,	3.880726313	},
+ {	39	,	14.18314966	,	3.955659357	},
+ {	40	,	14.38812127	,	4.260517126	},
+ {	41	,	14.81921322	,	4.346649056	},
+ {	42	,	15.35247753	,	4.420098325	},
+ {	43	,	15.36429858	,	4.744361745	},
+ {	44	,	15.84191262	,	4.828515862	},
+ {	45	,	16.51979142	,	4.96835753	},
+ {	46	,	16.97220796	,	5.334766603	},
+ {	47	,	17.67476894	,	5.486239027	},
+ {	48	,	18.11240302	,	5.917762179	},
+ {	49	,	18.7258797	,	6.043033844	},
+ {	50	,	18.99855523	,	7.015605922	},
+ {	51	,	19.68798937	,	7.176472013	},
+ {	52	,	20.52524998	,	7.349292258	}
+ #else
+ {	0	,	1	,	1	},
+ {	1	,	1.163271732	,	1.065459386	},
+ {	2	,	1.326450802	,	1.152370031	},
+ {	3	,	1.488810095	,	1.24329113	},
+ {	4	,	1.650068787	,	1.353627355	},
+ {	5	,	1.80753684	,	1.468675067	},
+ {	6	,	1.967211766	,	1.584900326	},
+ {	7	,	2.125857007	,	1.733380748	},
+ {	8	,	2.280853438	,	1.860046486	},
+ {	9	,	2.437647326	,	2.042786943	},
+ {	10	,	2.591623527	,	2.253330233	},
+ {	11	,	3.080682296	,	3.09230493	}
+ #endif
+ };
+ 
+ control_state_t speed_controller_states[] = {
+ {	0	,	1	,	0	},
+ #if 1
+ {	1	,	1.077	,	0.11	},
+ {	2	,	1.0797	,	0.1175	},
+ {	3	,	1.1032	,	0.14	},
+ {	4	,	1.1902	,	0.16	},
+ {	5	,	1.2182	,	0.21	},
+ {	6	,	1.2187	,	0.23	},
+ {	7	,	1.2415	,	0.2425	},
+ {	8	,	1.3105	,	0.2775	},
+ {	9	,	1.333	,	0.3025	},
+ {	10	,	1.404	,	0.4325	},
+ {	11	,	1.4055	,	0.4325	},
+ {	12	,	1.4257	,	0.4725	},
+ {	13	,	1.52	,	0.535	},
+ {	14	,	1.5405	,	0.6475	},
+ {	15	,	1.5407	,	0.6475	},
+ {	16	,	1.556	,	0.7475	},
+ {	17	,	1.6357	,	0.8425	},
+ {	18	,	1.653	,	0.905	},
+ {	19	,	1.674	,	0.9575	},
+ {	20	,	1.676	,	0.9575	},
+ {	21	,	1.8322	,	1.14	},
+ {	22	,	1.8402	,	1.1475	},
+ {	23	,	1.915	,	1.32	},
+ {	24	,	1.936	,	1.33	},
+ {	25	,	1.9557	,	1.38	},
+ {	26	,	1.9565	,	1.38	},
+ {	27	,	2.0372	,	1.595	},
+ {	28	,	2.0842	,	2.13	},
+ //{	29	,	2.1747	,	2.4025	},
+ //{	30	,	2.192	,	2.435	},
+ {	31	,	2.25 /*2.2545*/	,	2.485	},
+ {	32	,	2.2665	,	2.4975	},
+ {	33	,	2.3835	,	2.68	},
+ {	34	,	2.416	,	2.6875	},
+ {	35	,	2.4507	,	2.7375	},
+ {	36	,	2.5765	,	2.9575	},
+ {	37	,	2.589	,	3.0125	},
+ {	38	,	2.6955	,	3.5325	},
+ {	39	,	2.701	,	3.545	},
+ {	40	,	2.7665	,	4.82	},
+ {	41	,	2.827	,	4.845	},
+ {	42	,	2.8807	,	4.85	},
+ {	43	,	3.1925	,	5.18	},
+ {	44	,	3.2432	,	5.2775	},
+ {	45	,	3.3797	,	5.4325	},
+ {	46	,	3.3822	,	5.5775	},
+ {	47	,	3.4307	,	5.6225	},
+ {	48	,	3.457	,	5.705	},
+ {	49	,	3.7525	,	5.7325	},
+ {	50	,	3.7615	,	5.7325	},
+ {	51	,	4.1185	,	6.2425	},
+ {	52	,	4.2537	,	6.255	},
+ #endif
+ {	53	,	7/*4.2615*/	,	6.295	}
+ };
+ 
+ speed_state_t speed_states[] = {
+ {	0	,	5,16,7	},
+ #if 1
+ {	1	,	5,15,7	},
+ {	2	,	5,14,7	},
+ {	3	,	5,12,7	},
+ {	4	,	5,10,7	},
+ {	5	,	4,15,7	},
+ {	6	,	4,14,7	},
+ {	7	,	4,12,7	},
+ {	8	,	4,11,7	},
+ {	9	,	4,10,7	},
+ {	10	,	3,15,7	},
+ {	11	,	3,14,7	},
+ {	12	,	3,12,7	},
+ {	13	,	3,10,7	},
+ {	14	,	3,9,7	},
+ {	15	,	3,8,7	},
+ {	16	,	2,12,7	},
+ {	17	,	3,6,7	},
+ {	18	,	2,10,7	},
+ {	19	,	2,9,7	},
+ {	20	,	2,8,7	},
+ {	21	,	1,13,7	},
+ {	22	,	1,12,7	},
+ {	23	,	1,11,7	},
+ {	24	,	1,10,7	},
+ {	25	,	1,9,7	},
+ {	26	,	1,8,7	},
+ {	27	,	1,6,7	},
+ {	28	,	1,4,7	},
+ //{	29	,	2,7,6	},
+ //{	30	,	2,6,6	},
+ {	31	,	1,13,6	},
+ {	32	,	1,12,6	},
+ {	33	,	1,11,6	},
+ {	34	,	1,10,6	},
+ {	35	,	1,9,6	},
+ {	36	,	1,7,6	},
+ {	37	,	1,6,6	},
+ {	38	,	1,5,6	},
+ {	39	,	1,4,6	},
+ {	40	,	3,11,1	},
+ {	41	,	3,10,1	},
+ {	42	,	3,9,1	},
+ {	43	,	3,7,1	},
+ {	44	,	3,6,1	},
+ {	45	,	3,5,1	},
+ {	46	,	3,4,1	},
+ {	47	,	1,12,1	},
+ {	48	,	2,7,1	},
+ {	49	,	1,9,1	},
+ {	50	,	1,8,1	},
+ {	51	,	1,6,1	},
+ {	52	,	1,5,1	},
+ #endif
+ {	53	,	1,4,1	}
+ };
+ 
+ power_state_t power_states[] = {
+ #if NSYSSTATES == 53
+ {	0	,	1.2	,	1	},
+ {	1	,	1.4	,	1	},
+ {	2	,	1.6	,	1	},
+ {	3	,	1.2	,	2	},
+ {	4	,	1.4	,	2	},
+ {	5	,	1.2	,	3	},
+ {	6	,	1.4	,	3	},
+ {	7	,	1.2	,	4	},
+ {	8	,	1.6	,	3	},
+ {	9	,	1.2	,	5	},
+ {	10	,	1.2	,	6	},
+ {	11	,	1.2	,	7	},
+ {	12	,	1.2	,	8	},
+ {	13	,	1.2	,	9	},
+ {	14	,	1.2	,	10	},
+ {	15	,	1.2	,	11	},
+ {	16	,	1.2	,	12	},
+ {	17	,	1.4	,	8	},
+ {	18	,	1.4	,	9	},
+ {	19	,	1.4	,	10	},
+ {	20	,	1.4	,	11	},
+ {	21	,	1.4	,	12	},
+ {	22	,	1.6	,	8	},
+ {	23	,	1.6	,	9	},
+ {	24	,	1.6	,	10	},
+ {	25	,	1.6	,	11	},
+ {	26	,	1.6	,	12	},
+ {	27	,	1.8	,	9	},
+ {	28	,	1.8	,	10	},
+ {	29	,	1.8	,	11	},
+ {	30	,	1.8	,	12	},
+ {	31	,	2	,	9	},
+ {	32	,	2	,	10	},
+ {	33	,	2	,	11	},
+ {	34	,	2	,	12	},
+ {	35	,	2.2	,	10	},
+ {	36	,	2.2	,	12	},
+ {	37	,	2.4	,	10	},
+ {	38	,	2.4	,	11	},
+ {	39	,	2.4	,	12	},
+ {	40	,	2.6	,	10	},
+ {	41	,	2.6	,	11	},
+ {	42	,	2.6	,	12	},
+ {	43	,	2.8	,	10	},
+ {	44	,	2.8	,	11	},
+ {	45	,	2.8	,	12	},
+ {	46	,	3	,	11	},
+ {	47	,	3	,	12	},
+ {	48	,	3.2	,	11	},
+ {	49	,	3.2	,	12	},
+ {	50	,	3.201	,	10	},
+ {	51	,	3.201	,	11	},
+ {	52	,	3.201	,	12	}
+ #else
+ {	0	,	1.2	,	1	},
+ {	1	,	1.4	,	1	},
+ {	2	,	1.6	,	1	},
+ {	3	,	1.8	,	1	},
+ {	4	,	2.0	,	1	},
+ {	5	,	2.2	,	1	},
+ {	6	,	2.4	,	1	},
+ {	7	,	2.6	,	1	},
+ {	8	,	2.8	,	1	},
+ {	9	,	3.0	,	1	},
+ {	10	,	3.2	,	1	},
+ {	11	,	3.201	,	1	}
+ #endif
+ };
+ 
+ double x_hat_minus = 0.0;
+ double x_hat = .2;
+ double Q = .00001;
+ double P = 1.0;
+ double P_minus = 0.0;
+ double H = 0.0;
+ double R = .01;
+ double K = 0.0; 
+ 
+ typedef struct {  
+   double x_hat_minus;
+   double x_hat;
+   double Q;
+   double P;
+   double P_minus;
+   double H;
+   double R;
+   double K;
+ } kalman_filter_t;
+ 
+ kalman_filter_t filter_init = {0.0, 0.3125, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ 
+ #define HEURISTIC_W 0
+ 
+ int adaptation_level = 1;
+ 
+ kalman_filter_t power_filter = {0.0, 0.2, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ kalman_filter_t speed_filter = {0.0, 0.3125, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ 
+ double get_base_value(kalman_filter_t* k,
+ 		      double current_measurement, 
+ 		      double last_coeff) {
+   
+   k->x_hat_minus = k->x_hat;
+   k->P_minus = k->P + k->Q;
+   
+   k->H = last_coeff;
+   k->K = k->P_minus * k->H /( k->H * k->P_minus* k->H + k->R);
+   k->x_hat = k->x_hat_minus + k->K * (current_measurement - k->H * k->x_hat_minus);
+   k->P = (1 - k->K * k->H) * k->P_minus;
+   
+   return 1.0/k->x_hat;
+ }
+ 
+ void get_power_signal(double current_power, 
+ 		      double desired_power,
+ 		      double base_power,
+ 		      double* e,
+ 		      double* eo,
+ 		      double* u,
+ 		      double* uo,
+ 		      double* uoo) {
+ 
+   if(current_power < desired_power) {
+     p1 = 0.1;
+     p2 = 0.8;
+     z1 = 0.2;
+     p1 = 0;
+     p2 = 0;
+     z1 = 0;
+   }
+   else {
+     p1 = 0;
+     p2 = 0;
+     z1 = 0;
+ 
+   }
+ 
+   
+   double A         = -(-p1*z1 - p2*z1 + mu*p1*p2 - mu*p2 + p2 - mu*p1 + p1 + mu);
+   double B         = -(-mu*p1*p2*z1 + p1*p2*z1 + mu*p2*z1 + mu*p1*z1 - mu*z1 - p1*p2);
+   double C         = ((mu - mu*p1)*p2 + mu*p1 - mu)*base_power;
+   double D         = ((mu*p1-mu)*p2 - mu*p1 + mu)*base_power*z1;
+   double F         = 1/(z1-1);
+   
+   double y = current_power;
+   *e = desired_power - y;
+   
+   //printf("u = %f, uo = %f, e = %f, A = %f, B= %f, C = %f, D= %f, F = %f\n",
+   // *u, *uo, *e, A, B, C, D, F);
+   
+   *u = F * (A*(*uo) + B*(*uoo) + C*(*e) + D*(*eo));
+ 
+   
+   
+   if (*u<1)  *u=1;        
+   if (*u>power_controller_states[NSYSSTATES-1].cost) *u=power_controller_states[NSYSSTATES-1].cost;  
+   *uoo = *uo;            // saving values
+   *uo  = *u;
+   *eo  = *e;
+ }
+ 
+ double max_speedup;
+ 
+ void get_speed_signal(double current_speed, 
+ 		      double desired_speed,
+ 		      double base_speed,
+ 		      double* e,
+ 		      double* eo,
+ 		      double* u,
+ 		      double* uo,
+ 		      double* uoo) {
+   //double p1 = 0.1;
+   //double p2 = 0.2;
+   //double z1 = 0.15; 
+ 
+   double A         = -(-p1*z1 - p2*z1 + mu*p1*p2 - mu*p2 + p2 - mu*p1 + p1 + mu);
+   double B         = -(-mu*p1*p2*z1 + p1*p2*z1 + mu*p2*z1 + mu*p1*z1 - mu*z1 - p1*p2);
+   double C         = ((mu - mu*p1)*p2 + mu*p1 - mu)*base_speed;
+   double D         = ((mu*p1-mu)*p2 - mu*p1 + mu)*base_speed*z1;
+   double F         = 1/(z1-1);
+   
+   double y = current_speed;
+   *e = desired_speed - y;
+   
+   
+   //*u = F * (A*(*uo) + B*(*uoo) + C*(*e) + D*(*eo));
+ 
+   *u = *uo + *e/base_speed;
+ 
+   //  printf("u = %f, uo = %f, e = %f, base_speed = %f\n",
+   // *u, *uo, *e, base_speed);
+ 
+ 
+   //double max_speedup = speed_controller_states[NAPPSTATES-1].speedup * 
+   //power_controller_states[NSYSSTATES-1].speedup;
+   if (*u<1)  *u=1;        
+   if (*u>max_speedup) *u=max_speedup;  
+   *uoo = *uo;            // saving values
+   *uo  = *u;
+   *eo  = *e;
+ }
+ 
+ 
+ int power_translate(double u, 
+ 		    const control_state_t* states, 
+ 		    int nstates) {
+   int i;
+ 
+   control_state_t cs = states[nstates-1];
+ 
+   double efficiency = cs.speedup/cs.cost;
+   int index = nstates-1;
+ 
+ 
+   for(i = 0; i < nstates; i++) {
+     if(states[i].cost >= u) {
+ 
+       double new_eff = states[i].speedup/states[i].cost;
+       if(new_eff > efficiency) {
+ 
+ 	cs = states[i];
+ 	efficiency = new_eff;
+ 	index = i;
+       }	
+     }
+   }
+ 
+   return index;
+ }
+ 
+ int power_translate2(double u, 
+ 		     const control_state_t* states, 
+ 		     int state1,
+ 		     const power_state_t* pstates,
+ 		     int nstates) {
+   int i;
+   
+   control_state_t cs = states[0];
+   
+   double efficiency = cs.speedup;///cs.cost;
+     int index = 0;
+     
+     for(i = 0; i < nstates; i++) {
+       if(states[i].cost < u && pstates[state1].cores == pstates[i].cores) {
+ 	
+ 	double new_eff = states[i].speedup;///states[i].cost;
+ 	  if(new_eff >= efficiency) {
+ 	    
+ 	    cs = states[i];
+ 	    efficiency = new_eff;
+ 	    index = i;
+ 	  }	
+       }
+     }
+     
+     return index;
+ }
+ 
+ int speed_translate(double u, 
+ 		    const control_state_t* states, 
+ 		    int nstates) {
+   int i;
+ 
+   control_state_t cs = states[nstates-1];
+ 
+   double efficiency = cs.speedup/(cs.cost+1);
+   int index = nstates-1;
+ 
+ 
+   for(i = 0; i < nstates; i++) {
+     if(states[i].speedup >= u) {
+ 
+       //index = i;
+       //break;
+       double new_eff = states[i].speedup/(states[i].cost+1);
+       if(new_eff > efficiency) {
+ 
+       	cs = states[i];
+ 	efficiency = new_eff;
+ 	index = i;
+       }	
+     }
+   }
+ 
+   return index;
+ }
+ 
+ int speed_translate2(double u, 
+ 		     const control_state_t* states, 
+ 		     int nstates) {
+   int i;
+   
+   control_state_t cs = states[0];
+   
+   double efficiency = cs.speedup/(cs.cost+1);
+     int index = 0;
+     
+     for(i = 0; i < nstates; i++) {
+       if(states[i].speedup < u) {
+ 	
+ 	double new_eff = states[i].speedup/(states[i].cost+1);
+ 	  if(new_eff >= efficiency) {
+ 	    
+ 	    cs = states[i];
+ 	    efficiency = new_eff;
+ 	    index = i;
+ 	  }	
+       }
+     }
+     
+     return index;
+ }
+ 
+ 
+ int last_speed_state = 0;	
+ int control_nref = 5;
+ int control_range = 16;
+ int control_refine = 7;
+ 
+ void speed_apply(int state,
+ 		 speed_state_t* ps,
+ 		 int nstates) {
+   
+   char command[4096];
+   int i;
+   
+   //printf("APPLYING SPPED STATE %d\n", state);
+ 
+   if(last_speed_state ==state)
+     return;
+   else 
+     last_speed_state = state;
+ 
+ #if 0
+   control_nref = ps[state].ref;
+   control_range = ps[state].range;
+   control_refine = ps[state].subme;
+ #endif
+   //sprintf(command,"echo \"%d\n%d\n%d\n\" >  x264_settings",
+   //	  ps[state].ref,ps[state].range,ps[state].subme);
+   //system(command);
+   
+ }
+ 
+ int last_power_state = 52;
+ int power_apply(int state_id,
+ 		pid_t* pid,
+ 		int npids,
+ 		const power_state_t* states,
+ 		int nstates) {
+   
+   int i;
+   
+   int rc = 0;
+   int retvalsyscall1 = 0;
+   int retvalsyscall2 = 0;
+   power_state_t state = states[0];
+   char command[4096];
+   
+   if(state_id == last_power_state)
+     return 0;
+   else
+     last_power_state = state_id;
+   
+   for(i = 0; i < nstates; i++) {
+     if( states[i].id == state_id) {
+       state = states[i];
+       break;
+     }
+   }
+ 
+   //sprintf(command,"taskset -p -c 0-%d  %d > /dev/null",state.cores-1, getpid());
+   retvalsyscall1 = system(command);
+   //printf("%s\n", command);
+   for( i = 1; i < 12; i++) {
+     sprintf(command,"taskset -p -c 0-%d  %d > /dev/null",state.cores-1, pid[i]);
+     //printf("%s\n", command);
+     retvalsyscall1 = system(command);
+   }
+   
+ #if 1
+   for(i = 0; i < 12; i++) {
+     sprintf(command,
+ 	    "echo %d > /sys/devices/system/cpu/cpu%d/cpufreq/scaling_setspeed", 
+ 	    (int) (state.freq * 1000000), i);
+ 
+     retvalsyscall2 = system(command);
+     if(retvalsyscall2 != 0)
+       fprintf(stderr, "ERROR setting clocks: %d\n", retvalsyscall2);
+   }
+ #endif
+ 
+   if(retvalsyscall1 || retvalsyscall2) {
+     rc = -1;
+   }
+ 
+   return rc;
+ }
+ 
+ //----------------------------------------------------
  
  
  void * worker(void *arg){
***************
*** 96,101 ****
--- 828,1063 ----
       assert(iSuccess == 1);
       swaptions[i].dSimSwaptionMeanPrice = pdSwaptionPrice[0];
       swaptions[i].dSimSwaptionStdError = pdSwaptionPrice[1];
+      heartbeat(&heart, i, swaptions[i].dSimSwaptionStdError);
+ 
+      heartbeat_record_t record;
+      hb_get_current(&heart, &record);
+      //printf("Current hb = %ld\n", record.beat);
+ #if 0// Power and performance control
+      if(tid == 0) {
+ 	int PERIOD = window_size/12;
+ 	heartbeat_record_t hbr;
+ 	hb_get_current(&heart, &hbr);
+ 
+ 	double power_goal = power_target;
+ 	double speed_goal = 1.4;
+ 
+ 	//if(hbr.beat >= 100) {/*power_goal = 35.0;*/ speed_goal = 4.615;}
+ 	if(hbr.beat >= 500) {speed_goal = 14.8;}
+ 	if(hbr.beat >= 1000) {speed_goal = 10.6;}
+ 
+ 	//	printf("power goal is 70\n");
+ 	
+ 	if( current_action == 0 && hbr.window_rate != 0.0) {
+ 	  double act_power = hbr.window_power;
+ 	  double act_speed = hbr.window_rate;
+ 	  
+ 	  double base_power = get_base_value(&power_filter, act_power, last_powerup);
+ 	
+ 	  double base_speed = get_base_value(&speed_filter, act_speed, last_speedup);
+ 
+ 	  //double app_state = acc_translate();
+   
+ 	  get_power_signal(act_power,
+ 			   power_goal,
+ 			   base_power,
+ 			   &power_e,
+ 			   &power_eo,
+ 			   &power_u,
+ 			   &power_uo,
+ 			   &power_uoo);
+ 
+ 	  get_speed_signal(act_speed,
+ 			   speed_goal,
+ 			   1.0/base_speed,
+ 			   &speed_e,
+ 			   &speed_eo,
+ 			   &speed_u,
+ 			   &speed_uo,
+ 			   &speed_uoo);
+ 
+ 	  
+ 	  double act_power_up = last_powerup = power_u;
+ 	  
+ 	  double act_speed_up = last_speedup = speed_u;//*power_u;
+ 
+ 	  power_tdo_state_1 = power_translate(power_u, 
+ 					      power_controller_states, 
+ 					      (int) NSYSSTATES);
+ 	  power_tdo_state_2 = power_translate2(power_u, 
+ 					       power_controller_states,
+ 					       power_tdo_state_1,
+ 					       power_states,
+ 					       (int) NSYSSTATES);
+ 
+ 	  //power_tdo_state_1 = 11;
+ 	  //power_tdo_state_2 = 11;
+ 
+ 	  if(power_controller_states[power_tdo_state_1].speedup 
+ 	     <= power_controller_states[power_tdo_state_2].speedup) {
+ 	    power_tdo_state_1 = power_tdo_state_2;
+ 	  }
+ 	  
+ 	  double power_time1;
+ 	  
+ 	  if(power_controller_states[power_tdo_state_1].cost == 
+ 	     power_controller_states[power_tdo_state_2].cost ||
+ 	     power_u == power_controller_states[power_tdo_state_1].cost) 
+ 	    power_time1 = 1.0;
+ 	  else
+ 	    power_time1 = (power_u - 
+ 		     power_controller_states[power_tdo_state_2].cost) /
+ 	      (power_controller_states[power_tdo_state_1].cost - 
+ 	       power_controller_states[power_tdo_state_2].cost);
+ 	  
+ 	  double power_time2 = 1.0 - power_time1;
+ 	  
+ 	  h1 = power_time1*PERIOD+0.5;
+ 	  h2 = PERIOD-h1;
+ 	  //h1 = PERIOD;
+ 
+ 	  double sys_speedup = (power_controller_states[power_tdo_state_1].speedup 
+ 				* power_time1 
+ 				+
+ 				power_controller_states[power_tdo_state_2].speedup
+ 				* power_time2);
+ 
+ 	  double sub_speedup = speed_u;//sys_speedup;
+ 
+ 	  
+ 
+ 	  speed_tdo_state_1 = speed_translate(sub_speedup,
+ 					      speed_controller_states,
+ 					      (int) NAPPSTATES);
+ 	  //speed_tdo_state_1 = 17;
+ 	  speed_tdo_state_2 = speed_translate2(sub_speedup,
+ 					       speed_controller_states,
+ 					       (int) NAPPSTATES);
+ 	  //	   speed_tdo_state_2 = 20;
+ 	  double speed_time1;
+ 
+ 
+ 
+ 	  if (hbr.beat >=1000) speed_tdo_state_1 = speed_tdo_state_2 = 51; 
+ 	  //else  speed_tdo_state_1 = speed_tdo_state_2 = 0; 
+ 	  
+ 	  if(speed_controller_states[speed_tdo_state_1].speedup == 
+ 	     speed_controller_states[speed_tdo_state_2].speedup ||
+ 	     sub_speedup == speed_controller_states[speed_tdo_state_1].speedup) 
+ 	    speed_time1 = 1.0;
+ 	  else
+ 	    speed_time1 = (sub_speedup - 
+ 			   speed_controller_states[speed_tdo_state_2].speedup) /
+ 	      (speed_controller_states[speed_tdo_state_1].speedup - 
+ 	       speed_controller_states[speed_tdo_state_2].speedup);
+ 
+ 
+ 	  double window_time = ((double) PERIOD)/(sub_speedup*base_speed);
+ 
+ 	  speed_time1 = (window_time - ((double) PERIOD)/(base_speed*speed_controller_states[speed_tdo_state_2].speedup))
+ 	    /
+ 	    (1.0/(base_speed*speed_controller_states[speed_tdo_state_1].speedup) 
+ 	     - 1.0/(base_speed*speed_controller_states[speed_tdo_state_2].speedup));
+ 
+ 	  if(speed_time1 < 0.0) speed_time1 = 0.0;
+ 
+ 	  //if(hbr.beat <  500) {speed_tdo_state_1 = 0; speed_time1 = 1.0;}
+ 	  //if(hbr.beat >= 500) {speed_tdo_state_1 = NAPPSTATES-1; speed_time1 = 1.0;}
+ 	  //speed_tdo_state_1 = 27;
+ 	  //speed_time1 = 1.0;
+ 	  
+ 	  double speed_time2 = ((double) PERIOD) - speed_time1;
+ 
+ 	  h3 = ((int)(speed_time1+0.5));
+ 	  h4 = PERIOD - h3;
+ 	  
+ 
+ 	  // h3 = speed_time1*PERIOD+0.5;
+ 	  //h4 = PERIOD-h3;
+ 	  
+ 	  
+ #if 1
+ 	  printf("\nbeat=%lld, power=%f, des=%f, w=%f, u=%f, uo=%f, state=%d, state2=%d, %f, %f, %d, %d\n\n",
+ 	   hbr.beat,act_power,power_goal,1.0/base_power,power_u,last_powerup,power_controller_states[power_tdo_state_1].id, power_tdo_state_2, power_time1, power_time2, h1, h2); 
+ 
+ #endif
+  
+ 	  if(npids == 0) {
+ 	  npids = get_all_subpids(getpid(), pids);
+ 	  }
+ 	  //power_tdo_state_1 = power_tdo_state_2 = 42;
+ 	  power_apply(power_tdo_state_1,
+ 		      pids,
+ 		      npids,
+ 		      power_states,
+ 		      NSYSSTATES);
+ 
+ 	  speed_apply(speed_tdo_state_1,
+ 		      speed_states,
+ 		      NAPPSTATES);
+ 
+ 	  if(h1 == 0)
+ 	    power_apply(power_tdo_state_2,
+ 			pids,
+ 			npids,
+ 			power_states,
+ 			NSYSSTATES);
+ 	  if(h3 == 0)
+ 	  speed_apply(speed_tdo_state_2,
+ 	  		speed_states,
+ 	  		NAPPSTATES);
+ 	}
+ 	
+ 	if (current_action == h1) {
+ 	  // if(npids == 0) {
+ 	  //npids = get_all_subpids(getpid(), pids);
+ 	    //}
+ 	  //printf("APPLYING 2\n");
+ 	  power_apply(power_tdo_state_2,
+ 		      pids,
+ 		      npids,
+ 		      power_states,
+ 		      NSYSSTATES);
+ 	  
+ 	}
+ 	if (current_action == h3) {
+ 	  speed_apply(speed_tdo_state_2,
+ 	  	      speed_states,
+ 	  	      NAPPSTATES);
+ 	}
+ 	
+ 	//	else if (current_action == PERIOD) {
+ 	  // if(npids == 0) {
+ 	  //npids = get_all_subpids(getpid(), pids);
+ 	    //}
+ 	//power_apply(power_tdo_state_1,
+ 	//      pids,
+ 	//      npids,
+ 	//      power_states,
+ 	//      NSYSSTATES);
+ 	  
+ 	//}
+ 	//else if (current_action == h1+PERIOD) {
+ 	  // if(npids == 0) {
+ 	  //npids = get_all_subpids(getpid(), pids);
+ 	    //}
+ 	//power_apply(power_tdo_state_2,
+ 	//      pids,
+ 	//      npids,
+ 	//      power_states,
+ 	//      NSYSSTATES);
+ 	  
+ 	//}
+ 
+ 
+ 	current_action++;
+ 	if(current_action == PERIOD) {
+ 	  current_action = 0;
+ 	}
+      }	
+ #endif
+ 
+ 
     }
  
     return NULL;    
***************
*** 149,154 ****
--- 1111,1157 ----
  
          printf("Number of Simulations: %d,  Number of threads: %d Number of swaptions: %d\n", NUM_TRIALS, nThreads, nSwaptions);
  
+ 	float min_heartrate;
+ 	float max_heartrate; 
+ 	
+ 	if(getenv("SWAPTIONS_MIN_HEART_RATE") == NULL) {
+ 	  min_heartrate = 0.0;
+ 	}
+ 	else
+ 	  min_heartrate = atof(getenv("SWAPTIONS_MIN_HEART_RATE"));
+ 
+ 	if(getenv("SWAPTIONS_MAX_HEART_RATE") == NULL) {
+ 	  max_heartrate = 100.0;
+ 	}
+ 	else
+ 	  max_heartrate = atof(getenv("SWAPTIONS_MAX_HEART_RATE"));
+ 	
+ 	if(getenv("SWAPTIONS_WINDOW_SIZE") == NULL) {
+ 	  window_size = 20;
+ 	}
+ 	else
+ 	  window_size = atoi(getenv("SWAPTIONS_WINDOW_SIZE"));
+ 
+ 	if(getenv("SWAPTIONS_POWER_TARGET") == NULL) {
+ 	  power_target = 70;
+ 	}
+ 	else
+ 	  power_target = atof(getenv("SWAPTIONS_POWER_TARGET"));
+ 
+ 
+ 	
+ 	printf("init heartbeat with %f %f %d\n", min_heartrate, max_heartrate, window_size);
+ 	
+ 	heartbeat_init(&heart, 
+ 		       min_heartrate, max_heartrate, 
+ 		       0, 1, 
+ 		       0, 150,
+ 		       window_size, 1, "swaptions_heartbeat.log");
+ 	
+ 	printf("heartbeat init'd\n");
+ 
+ 
+ 
  #ifdef ENABLE_THREADS
  
  #ifdef TBB_VERSION
***************
*** 267,272 ****
--- 1270,1277 ----
            threadIDs[i] = i;
            pthread_create(&threads[i], &pthread_custom_attr, worker, &threadIDs[i]);
          }
+ 	
+ 
          for (i = 0; i < nThreads; i++) {
            pthread_join(threads[i], NULL);
          }
***************
*** 295,300 ****
--- 1300,1306 ----
  	  free_dmatrix(swaptions[i].ppdFactors, 0, swaptions[i].iFactors-1, 0, swaptions[i].iN-2);
          }
  
+ 	heartbeat_finish(&heart);
  
  #ifdef TBB_VERSION
  	memory_parm.deallocate(swaptions, sizeof(parm));
Only in parsec-2.0-modified/pkgs/apps/swaptions/src: HJM_Securities.cpp~
Only in parsec-2.0-modified/pkgs/apps/swaptions/src: HJM_Securities-no-adapt.cpp
diff -crB parsec-2.0/pkgs/apps/swaptions/src/HJM_Swaption_Blocking.cpp parsec-2.0-modified/pkgs/apps/swaptions/src/HJM_Swaption_Blocking.cpp
*** parsec-2.0/pkgs/apps/swaptions/src/HJM_Swaption_Blocking.cpp	2008-11-11 14:40:58.000000000 -0600
--- parsec-2.0-modified/pkgs/apps/swaptions/src/HJM_Swaption_Blocking.cpp	2019-04-04 11:20:54.972471585 -0500
***************
*** 6,16 ****
--- 6,22 ----
  #include <stdio.h>
  #include <stdlib.h>
  #include <math.h>
+ #include <iostream>
  #include "nr_routines.h"
  #include "HJM_Securities.h"
  #include "HJM.h"
  #include "HJM_type.h"
  
+ #include "sdp.h"
+ 
+ using namespace std;
+ 
+ 
  int HJM_Swaption_Blocking(FTYPE *pdSwaptionPrice, //Output vector that will store simulation results in the form:
  			  //Swaption Price
  			  //Swaption Standard Error
***************
*** 209,211 ****
--- 215,438 ----
    return iSuccess;
  }
  
+ 
+ FTYPE localResult[100];
+ FTYPE localError[100];
+ 
+ void*  HJM_Swaption_Blocking_sdp(void* args) {
+   sdp_args_t* arg = (sdp_args_t*) args;
+ 
+   FTYPE *pdSwaptionPrice = arg->pdSwaptionPrice;
+   FTYPE dStrike= arg->dStrike;				  
+   FTYPE dCompounding= arg->dCompounding;     
+   FTYPE dMaturity= arg->dMaturity;	
+   FTYPE dTenor= arg->dTenor;	     
+   FTYPE dPaymentInterval= arg->dPaymentInterval;
+   int iN= arg->iN;
+   int iFactors= arg->iFactors;
+   FTYPE dYears= arg->dYears; 
+   FTYPE *pdYield= arg->pdYield;
+   FTYPE **ppdFactors= arg->ppdFactors;
+   long iRndSeed= arg->iRndSeed;
+   long lTrials= arg->lTrials;
+   int BLOCKSIZE= arg->BLOCKSIZE;
+   int tid= arg->tid;
+   int nThreads= arg->nThreads;
+ 
+   int startTrial =  tid      * lTrials / nThreads;
+   int stopTrial  = (tid + 1) * lTrials / nThreads;
+ 
+   int iSuccess = 0;
+   int i; 
+   int b; //block looping variable
+   long l; //looping variables
+   
+   FTYPE ddelt = (FTYPE)(dYears/iN);				//ddelt = HJM matrix time-step width. e.g. if dYears = 5yrs and
+                                                                 //iN = no. of time points = 10, then ddelt = step length = 0.5yrs
+   int iFreqRatio = (int)(dPaymentInterval/ddelt + 0.5);		// = ratio of time gap between swap payments and HJM step-width.
+                                                                 //e.g. dPaymentInterval = 1 year. ddelt = 0.5year. This implies that a swap
+                                                                 //payment will be made after every 2 HJM time steps.
+   
+   FTYPE dStrikeCont;				//Strike quoted in continuous compounding convention. 
+                                                 //As HJM rates are continuous, the K in max(R-K,0) will be dStrikeCont and not dStrike.
+   if(dCompounding==0) {
+     dStrikeCont = dStrike;		//by convention, dCompounding = 0 means that the strike entered by user has been quoted
+                                         //using continuous compounding convention
+   } else {
+     //converting quoted strike to continuously compounded strike
+     dStrikeCont = (1/dCompounding)*log(1+dStrike*dCompounding);  
+   }
+                                          //e.g., let k be strike quoted in semi-annual convention. Therefore, 1$ at the end of
+                                          //half a year would earn = (1+k/2). For converting to continuous compounding, 
+                                          //(1+0.5*k) = exp(K*0.5)
+                                          // => K = (1/0.5)*ln(1+0.5*k)
+   
+   //HJM Framework vectors and matrices
+   int iSwapVectorLength;  // Length of the HJM rate path at the time index corresponding to swaption maturity.
+ 
+   FTYPE **ppdHJMPath;    // **** per Trial data **** //
+ 
+   FTYPE *pdForward;
+   FTYPE **ppdDrifts; 
+   FTYPE *pdTotalDrift;
+   
+   // *******************************
+   // ppdHJMPath = dmatrix(0,iN-1,0,iN-1);
+   ppdHJMPath = dmatrix(0,iN-1,0,iN*BLOCKSIZE-1);    // **** per Trial data **** //
+   pdForward = dvector(0, iN-1);
+   ppdDrifts = dmatrix(0, iFactors-1, 0, iN-2);
+   pdTotalDrift = dvector(0, iN-2);
+ 	
+   //cout << "Done first block" << endl;
+ 
+   //==================================
+   // **** per Trial data **** //
+   FTYPE *pdDiscountingRatePath;	  //vector to store rate path along which the swaption payoff will be discounted
+   FTYPE *pdPayoffDiscountFactors;  //vector to store discount factors for the rate path along which the swaption 
+   //payoff will be discounted
+   FTYPE *pdSwapRatePath;			  //vector to store the rate path along which the swap payments made will be discounted	
+   FTYPE *pdSwapDiscountFactors;	  //vector to store discount factors for the rate path along which the swap
+   //payments made will be discounted	
+   FTYPE *pdSwapPayoffs;			  //vector to store swap payoffs
+ 
+   
+   int iSwapStartTimeIndex;
+   int iSwapTimePoints;
+   FTYPE dSwapVectorYears;
+ 
+   FTYPE dSwaptionPayoff;
+   FTYPE dDiscSwaptionPayoff;
+   FTYPE dFixedLegValue;
+ 
+   // Accumulators
+   FTYPE dSumSimSwaptionPrice; 
+   FTYPE dSumSquareSimSwaptionPrice;
+ 
+   // Final returned results
+   FTYPE dSimSwaptionMeanPrice;
+   FTYPE dSimSwaptionStdError;
+   
+   // *******************************
+   pdPayoffDiscountFactors = dvector(0, iN*BLOCKSIZE-1);
+   pdDiscountingRatePath = dvector(0, iN*BLOCKSIZE-1);
+   // *******************************
+   //cout << "Done second block" << endl;
+  
+   iSwapVectorLength = (int) (iN - dMaturity/ddelt + 0.5);	//This is the length of the HJM rate path at the time index
+   //corresponding to swaption maturity.
+   // *******************************
+   pdSwapRatePath = dvector(0, iSwapVectorLength*BLOCKSIZE - 1);
+   //cout << "  Done SwapRatePath block" << endl;
+   pdSwapDiscountFactors  = dvector(0, iSwapVectorLength*BLOCKSIZE - 1);
+   // *******************************
+   //cout << "  Done SwapDiscountFactors block" << endl;
+   //cout << "  About to allocate swap payoffs of length " << iSwapVectorLength << endl;
+   //cout << "  iN = " << iN << " dMaturity = " << dMaturity << " ddelt = " << ddelt << endl;
+   pdSwapPayoffs = dvector(0, iSwapVectorLength - 1);
+ 
+   //cout << "Done third block" << endl;
+ 
+   iSwapStartTimeIndex = (int) (dMaturity/ddelt + 0.5);	//Swap starts at swaption maturity
+   iSwapTimePoints = (int) (dTenor/ddelt + 0.5);			//Total HJM time points corresponding to the swap's tenor
+   dSwapVectorYears = (FTYPE) (iSwapVectorLength*ddelt);
+ 
+   //cout << "Done fourth block" << endl;
+ 
+ 
+   //now we store the swap payoffs in the swap payoff vector
+   for (i=0;i<=iSwapVectorLength-1;++i)
+     pdSwapPayoffs[i] = 0.0; //initializing to zero
+   for (i=iFreqRatio;i<=iSwapTimePoints;i+=iFreqRatio)
+     {
+       if(i != iSwapTimePoints)
+ 	pdSwapPayoffs[i] = exp(dStrikeCont*dPaymentInterval) - 1; //the bond pays coupon equal to this amount
+       if(i == iSwapTimePoints)
+ 	pdSwapPayoffs[i] = exp(dStrikeCont*dPaymentInterval); //at terminal time point, bond pays coupon plus par amount
+     }
+ 
+   //generating forward curve at t=0 from supplied yield curve
+   iSuccess = HJM_Yield_to_Forward(pdForward, iN, pdYield);
+   if (iSuccess!=1)
+     return iSuccess;
+   
+   //computation of drifts from factor volatilities
+   iSuccess = HJM_Drifts(pdTotalDrift, ppdDrifts, iN, iFactors, dYears, ppdFactors);
+   if (iSuccess!=1)
+     return iSuccess;
+   
+   dSumSimSwaptionPrice = 0.0;
+   dSumSquareSimSwaptionPrice = 0.0;
+ 
+   //Simulations begin:
+   for (l=startTrial;l<=stopTrial-1;l+=BLOCKSIZE) {
+       //For each trial a new HJM Path is generated
+       iSuccess = HJM_SimPath_Forward_Blocking(ppdHJMPath, iN, iFactors, dYears, pdForward, pdTotalDrift,ppdFactors, &iRndSeed, BLOCKSIZE); /* GC: 51% of the time goes here */
+        if (iSuccess!=1)
+ 	return iSuccess;
+       
+       //now we compute the discount factor vector
+ 
+       for(i=0;i<=iN-1;++i){
+ 	for(b=0;b<=BLOCKSIZE-1;b++){
+ 	  pdDiscountingRatePath[BLOCKSIZE*i + b] = ppdHJMPath[i][0 + b];
+ 	}
+       }
+       iSuccess = Discount_Factors_Blocking(pdPayoffDiscountFactors, iN, dYears, pdDiscountingRatePath, BLOCKSIZE); /* 15% of the time goes here */
+ 
+      if (iSuccess!=1)
+ 	return iSuccess;
+         
+       //now we compute discount factors along the swap path
+       for (i=0;i<=iSwapVectorLength-1;++i){
+ 	for(b=0;b<BLOCKSIZE;b++){
+ 	  pdSwapRatePath[i*BLOCKSIZE + b] = 
+ 	    ppdHJMPath[iSwapStartTimeIndex][i*BLOCKSIZE + b];
+ 	}
+       }
+       iSuccess = Discount_Factors_Blocking(pdSwapDiscountFactors, iSwapVectorLength, dSwapVectorYears, pdSwapRatePath, BLOCKSIZE);
+       if (iSuccess!=1)
+ 	return iSuccess;
+ 
+       
+       // ========================
+       // Simulation
+       for (b=0;b<BLOCKSIZE;b++){
+ 	dFixedLegValue = 0.0;
+ 	for (i=0;i<=iSwapVectorLength-1;++i){
+ 	  dFixedLegValue += pdSwapPayoffs[i]*pdSwapDiscountFactors[i*BLOCKSIZE + b];
+ 	}
+ 	dSwaptionPayoff = dMax(dFixedLegValue - 1.0, 0);
+ 
+ 	dDiscSwaptionPayoff = dSwaptionPayoff*pdPayoffDiscountFactors[iSwapStartTimeIndex*BLOCKSIZE + b];
+ 
+ 	// ========= end simulation ======================================
+ 	
+ 	// accumulate into the aggregating variables =====================
+ 	dSumSimSwaptionPrice += dDiscSwaptionPayoff;
+ 	dSumSquareSimSwaptionPrice += dDiscSwaptionPayoff*dDiscSwaptionPayoff;
+       } // END BLOCK simulation
+     }
+   
+   
+   localResult[tid] = dSumSimSwaptionPrice;
+   localError[tid] = dSumSquareSimSwaptionPrice;
+   user_barrier(arg->ubarrier, tid);
+   // Simulation Results Stored
+   if(tid == 0) {
+     for(int k = 1; k < arg->nThreads; k++) {
+       dSumSimSwaptionPrice += localResult[k];
+       dSumSquareSimSwaptionPrice  += localError[k];
+     }
+     dSimSwaptionMeanPrice = dSumSimSwaptionPrice/lTrials;
+     dSimSwaptionStdError = sqrt((dSumSquareSimSwaptionPrice-dSumSimSwaptionPrice*dSumSimSwaptionPrice/lTrials)/
+ 				(lTrials-1.0))/sqrt((FTYPE)lTrials);
+ 
+   //results returned
+     pdSwaptionPrice[0] = dSimSwaptionMeanPrice;
+     pdSwaptionPrice[1] = dSimSwaptionStdError;
+   }
+   iSuccess = 1;
+   return iSuccess;
+ }
+ 
+ 
Only in parsec-2.0-modified/pkgs/apps/swaptions/src: HJM_Swaption_Blocking.cpp~
diff -crB parsec-2.0/pkgs/apps/swaptions/src/HJM_type.h parsec-2.0-modified/pkgs/apps/swaptions/src/HJM_type.h
*** parsec-2.0/pkgs/apps/swaptions/src/HJM_type.h	2007-08-29 12:37:36.000000000 -0500
--- parsec-2.0-modified/pkgs/apps/swaptions/src/HJM_type.h	2019-04-04 11:20:54.976471679 -0500
***************
*** 7,13 ****
  #endif
  
  #define FTYPE double
! #define BLOCK_SIZE 16 // Blocking to allow better caching
  
  #define RANDSEEDVAL 100
  #define DEFAULT_NUM_TRIALS  102400
--- 7,13 ----
  #endif
  
  #define FTYPE double
! #define BLOCK_SIZE 32 // Blocking to allow better caching
  
  #define RANDSEEDVAL 100
  #define DEFAULT_NUM_TRIALS  102400
Only in parsec-2.0-modified/pkgs/apps/swaptions/src: HJM_type.h~
Only in parsec-2.0-modified/pkgs/apps/swaptions/src: sdp.h
Only in parsec-2.0-modified/pkgs/apps/swaptions/src: sdp.h~
Only in parsec-2.0-modified/pkgs/apps/swaptions/src: src-orig
Only in parsec-2.0-modified/pkgs/apps/swaptions: src-orig
Only in parsec-2.0-modified/pkgs/apps/swaptions: src-sdp
Only in parsec-2.0/pkgs/apps/vips: inputs
Only in parsec-2.0-modified/pkgs/apps/vips: inst
Only in parsec-2.0-modified/pkgs/apps/vips: obj
diff -crB parsec-2.0/pkgs/apps/vips/parsec/native.runconf parsec-2.0-modified/pkgs/apps/vips/parsec/native.runconf
*** parsec-2.0/pkgs/apps/vips/parsec/native.runconf	2008-10-05 17:02:31.000000000 -0500
--- parsec-2.0-modified/pkgs/apps/vips/parsec/native.runconf	2019-04-04 11:21:04.648698009 -0500
***************
*** 19,23 ****
  export IM_CONCURRENCY=${NTHREADS}
  
  # Arguments to use
! run_args="im_benchmark orion_18000x18000.v output.v"
  
--- 19,23 ----
  export IM_CONCURRENCY=${NTHREADS}
  
  # Arguments to use
! run_args="im_benchmarkn orion_18000x18000.v output.v 100"
  
Only in parsec-2.0-modified/pkgs/apps/vips/parsec: native.runconf~
Only in parsec-2.0-modified/pkgs/apps/vips/src: autom4te.cache
diff -crB parsec-2.0/pkgs/apps/vips/src/config.h.in parsec-2.0-modified/pkgs/apps/vips/src/config.h.in
*** parsec-2.0/pkgs/apps/vips/src/config.h.in	2008-09-15 11:47:21.000000000 -0500
--- parsec-2.0-modified/pkgs/apps/vips/src/config.h.in	2019-04-04 11:20:56.620510150 -0500
***************
*** 255,260 ****
--- 255,263 ----
  /* Define to the one symbol short name of this package. */
  #undef PACKAGE_TARNAME
  
+ /* Define to the home page for this package. */
+ #undef PACKAGE_URL
+ 
  /* Define to the version of this package. */
  #undef PACKAGE_VERSION
  
Only in parsec-2.0-modified/pkgs/apps/vips/src: config.h.in~
diff -crB parsec-2.0/pkgs/apps/vips/src/configure parsec-2.0-modified/pkgs/apps/vips/src/configure
*** parsec-2.0/pkgs/apps/vips/src/configure	2008-09-15 11:47:20.000000000 -0500
--- parsec-2.0-modified/pkgs/apps/vips/src/configure	2019-04-04 11:20:56.364504160 -0500
***************
*** 1,29 ****
  #! /bin/sh
  # Guess values for system-dependent variables and create Makefiles.
! # Generated by GNU Autoconf 2.61.
  #
  # Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
! # 2002, 2003, 2004, 2005, 2006 Free Software Foundation, Inc.
  # This configure script is free software; the Free Software Foundation
  # gives unlimited permission to copy, distribute and modify it.
! ## --------------------- ##
! ## M4sh Initialization.  ##
! ## --------------------- ##
  
  # Be more Bourne compatible
  DUALCASE=1; export DUALCASE # for MKS sh
! if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
    emulate sh
    NULLCMD=:
!   # Zsh 3.x and 4.x performs word splitting on ${1+"$@"}, which
    # is contrary to our usage.  Disable this feature.
    alias -g '${1+"$@"}'='"$@"'
    setopt NO_GLOB_SUBST
  else
!   case `(set -o) 2>/dev/null` in
!   *posix*) set -o posix ;;
  esac
- 
  fi
  
  
--- 1,35 ----
  #! /bin/sh
  # Guess values for system-dependent variables and create Makefiles.
! # Generated by GNU Autoconf 2.68.
! #
  #
  # Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
! # 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010 Free Software
! # Foundation, Inc.
! #
! #
  # This configure script is free software; the Free Software Foundation
  # gives unlimited permission to copy, distribute and modify it.
! ## -------------------- ##
! ## M4sh Initialization. ##
! ## -------------------- ##
  
  # Be more Bourne compatible
  DUALCASE=1; export DUALCASE # for MKS sh
! if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then :
    emulate sh
    NULLCMD=:
!   # Pre-4.2 versions of Zsh do word splitting on ${1+"$@"}, which
    # is contrary to our usage.  Disable this feature.
    alias -g '${1+"$@"}'='"$@"'
    setopt NO_GLOB_SUBST
  else
!   case `(set -o) 2>/dev/null` in #(
!   *posix*) :
!     set -o posix ;; #(
!   *) :
!      ;;
  esac
  fi
  
  
***************
*** 27,60 ****
  fi
  
  
! 
! 
! # PATH needs CR
! # Avoid depending upon Character Ranges.
! as_cr_letters='abcdefghijklmnopqrstuvwxyz'
! as_cr_LETTERS='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
! as_cr_Letters=$as_cr_letters$as_cr_LETTERS
! as_cr_digits='0123456789'
! as_cr_alnum=$as_cr_Letters$as_cr_digits
! 
! # The user is always right.
! if test "${PATH_SEPARATOR+set}" != set; then
!   echo "#! /bin/sh" >conf$$.sh
!   echo  "exit 0"   >>conf$$.sh
!   chmod +x conf$$.sh
!   if (PATH="/nonexistent;."; conf$$.sh) >/dev/null 2>&1; then
!     PATH_SEPARATOR=';'
!   else
!     PATH_SEPARATOR=:
    fi
!   rm -f conf$$.sh
  fi
  
! # Support unset when possible.
! if ( (MAIL=60; unset MAIL) || exit) >/dev/null 2>&1; then
!   as_unset=unset
! else
!   as_unset=false
  fi
  
  
--- 33,83 ----
  fi
  
  
! as_nl='
! '
! export as_nl
! # Printing a long string crashes Solaris 7 /usr/bin/printf.
! as_echo='\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\'
! as_echo=$as_echo$as_echo$as_echo$as_echo$as_echo
! as_echo=$as_echo$as_echo$as_echo$as_echo$as_echo$as_echo
! # Prefer a ksh shell builtin over an external printf program on Solaris,
! # but without wasting forks for bash or zsh.
! if test -z "$BASH_VERSION$ZSH_VERSION" \
!     && (test "X`print -r -- $as_echo`" = "X$as_echo") 2>/dev/null; then
!   as_echo='print -r --'
!   as_echo_n='print -rn --'
! elif (test "X`printf %s $as_echo`" = "X$as_echo") 2>/dev/null; then
!   as_echo='printf %s\n'
!   as_echo_n='printf %s'
! else
!   if test "X`(/usr/ucb/echo -n -n $as_echo) 2>/dev/null`" = "X-n $as_echo"; then
!     as_echo_body='eval /usr/ucb/echo -n "$1$as_nl"'
!     as_echo_n='/usr/ucb/echo -n'
!   else
!     as_echo_body='eval expr "X$1" : "X\\(.*\\)"'
!     as_echo_n_body='eval
!       arg=$1;
!       case $arg in #(
!       *"$as_nl"*)
! 	expr "X$arg" : "X\\(.*\\)$as_nl";
! 	arg=`expr "X$arg" : ".*$as_nl\\(.*\\)"`;;
!       esac;
!       expr "X$arg" : "X\\(.*\\)" | tr -d "$as_nl"
!     '
!     export as_echo_n_body
!     as_echo_n='sh -c $as_echo_n_body as_echo'
    fi
!   export as_echo_body
!   as_echo='sh -c $as_echo_body as_echo'
  fi
  
! # The user is always right.
! if test "${PATH_SEPARATOR+set}" != set; then
!   PATH_SEPARATOR=:
!   (PATH='/bin;/bin'; FPATH=$PATH; sh -c :) >/dev/null 2>&1 && {
!     (PATH='/bin:/bin'; FPATH=$PATH; sh -c :) >/dev/null 2>&1 ||
!       PATH_SEPARATOR=';'
!   }
  fi
  
  
***************
*** 63,82 ****
  # there to prevent editors from complaining about space-tab.
  # (If _AS_PATH_WALK were called with IFS unset, it would disable word
  # splitting by setting IFS to empty value.)
- as_nl='
- '
  IFS=" ""	$as_nl"
  
  # Find who we are.  Look in the path if we contain no directory separator.
! case $0 in
    *[\\/]* ) as_myself=$0 ;;
    *) as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
  for as_dir in $PATH
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   test -r "$as_dir/$0" && as_myself=$as_dir/$0 && break
! done
  IFS=$as_save_IFS
  
       ;;
--- 86,104 ----
  # there to prevent editors from complaining about space-tab.
  # (If _AS_PATH_WALK were called with IFS unset, it would disable word
  # splitting by setting IFS to empty value.)
  IFS=" ""	$as_nl"
  
  # Find who we are.  Look in the path if we contain no directory separator.
! as_myself=
! case $0 in #((
    *[\\/]* ) as_myself=$0 ;;
    *) as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
  for as_dir in $PATH
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     test -r "$as_dir/$0" && as_myself=$as_dir/$0 && break
!   done
  IFS=$as_save_IFS
  
       ;;
***************
*** 87,118 ****
    as_myself=$0
  fi
  if test ! -f "$as_myself"; then
!   echo "$as_myself: error: cannot find myself; rerun with an absolute file name" >&2
!   { (exit 1); exit 1; }
  fi
  
! # Work around bugs in pre-3.0 UWIN ksh.
! for as_var in ENV MAIL MAILPATH
! do ($as_unset $as_var) >/dev/null 2>&1 && $as_unset $as_var
  done
  PS1='$ '
  PS2='> '
  PS4='+ '
  
  # NLS nuisances.
! for as_var in \
!   LANG LANGUAGE LC_ADDRESS LC_ALL LC_COLLATE LC_CTYPE LC_IDENTIFICATION \
!   LC_MEASUREMENT LC_MESSAGES LC_MONETARY LC_NAME LC_NUMERIC LC_PAPER \
!   LC_TELEPHONE LC_TIME
  do
!   if (set +x; test -z "`(eval $as_var=C; export $as_var) 2>&1`"); then
!     eval $as_var=C; export $as_var
!   else
!     ($as_unset $as_var) >/dev/null 2>&1 && $as_unset $as_var
!   fi
  done
  
- # Required to use basename.
  if expr a : '\(a\)' >/dev/null 2>&1 &&
     test "X`expr 00001 : '.*\(...\)'`" = X001; then
    as_expr=expr
--- 109,385 ----
    as_myself=$0
  fi
  if test ! -f "$as_myself"; then
!   $as_echo "$as_myself: error: cannot find myself; rerun with an absolute file name" >&2
!   exit 1
  fi
  
! # Unset variables that we do not need and which cause bugs (e.g. in
! # pre-3.0 UWIN ksh).  But do not cause bugs in bash 2.01; the "|| exit 1"
! # suppresses any "Segmentation fault" message there.  '((' could
! # trigger a bug in pdksh 5.2.14.
! for as_var in BASH_ENV ENV MAIL MAILPATH
! do eval test x\${$as_var+set} = xset \
!   && ( (unset $as_var) || exit 1) >/dev/null 2>&1 && unset $as_var || :
  done
  PS1='$ '
  PS2='> '
  PS4='+ '
  
  # NLS nuisances.
! LC_ALL=C
! export LC_ALL
! LANGUAGE=C
! export LANGUAGE
! 
! # CDPATH.
! (unset CDPATH) >/dev/null 2>&1 && unset CDPATH
! 
! if test "x$CONFIG_SHELL" = x; then
!   as_bourne_compatible="if test -n \"\${ZSH_VERSION+set}\" && (emulate sh) >/dev/null 2>&1; then :
!   emulate sh
!   NULLCMD=:
!   # Pre-4.2 versions of Zsh do word splitting on \${1+\"\$@\"}, which
!   # is contrary to our usage.  Disable this feature.
!   alias -g '\${1+\"\$@\"}'='\"\$@\"'
!   setopt NO_GLOB_SUBST
! else
!   case \`(set -o) 2>/dev/null\` in #(
!   *posix*) :
!     set -o posix ;; #(
!   *) :
!      ;;
! esac
! fi
! "
!   as_required="as_fn_return () { (exit \$1); }
! as_fn_success () { as_fn_return 0; }
! as_fn_failure () { as_fn_return 1; }
! as_fn_ret_success () { return 0; }
! as_fn_ret_failure () { return 1; }
! 
! exitcode=0
! as_fn_success || { exitcode=1; echo as_fn_success failed.; }
! as_fn_failure && { exitcode=1; echo as_fn_failure succeeded.; }
! as_fn_ret_success || { exitcode=1; echo as_fn_ret_success failed.; }
! as_fn_ret_failure && { exitcode=1; echo as_fn_ret_failure succeeded.; }
! if ( set x; as_fn_ret_success y && test x = \"\$1\" ); then :
! 
! else
!   exitcode=1; echo positional parameters were not saved.
! fi
! test x\$exitcode = x0 || exit 1"
!   as_suggested="  as_lineno_1=";as_suggested=$as_suggested$LINENO;as_suggested=$as_suggested" as_lineno_1a=\$LINENO
!   as_lineno_2=";as_suggested=$as_suggested$LINENO;as_suggested=$as_suggested" as_lineno_2a=\$LINENO
!   eval 'test \"x\$as_lineno_1'\$as_run'\" != \"x\$as_lineno_2'\$as_run'\" &&
!   test \"x\`expr \$as_lineno_1'\$as_run' + 1\`\" = \"x\$as_lineno_2'\$as_run'\"' || exit 1
! test \$(( 1 + 1 )) = 2 || exit 1"
!   if (eval "$as_required") 2>/dev/null; then :
!   as_have_required=yes
! else
!   as_have_required=no
! fi
!   if test x$as_have_required = xyes && (eval "$as_suggested") 2>/dev/null; then :
! 
! else
!   as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
! as_found=false
! for as_dir in /bin$PATH_SEPARATOR/usr/bin$PATH_SEPARATOR$PATH
  do
!   IFS=$as_save_IFS
!   test -z "$as_dir" && as_dir=.
!   as_found=:
!   case $as_dir in #(
! 	 /*)
! 	   for as_base in sh bash ksh sh5; do
! 	     # Try only shells that exist, to save several forks.
! 	     as_shell=$as_dir/$as_base
! 	     if { test -f "$as_shell" || test -f "$as_shell.exe"; } &&
! 		    { $as_echo "$as_bourne_compatible""$as_required" | as_run=a "$as_shell"; } 2>/dev/null; then :
!   CONFIG_SHELL=$as_shell as_have_required=yes
! 		   if { $as_echo "$as_bourne_compatible""$as_suggested" | as_run=a "$as_shell"; } 2>/dev/null; then :
!   break 2
! fi
! fi
! 	   done;;
!        esac
!   as_found=false
  done
+ $as_found || { if { test -f "$SHELL" || test -f "$SHELL.exe"; } &&
+ 	      { $as_echo "$as_bourne_compatible""$as_required" | as_run=a "$SHELL"; } 2>/dev/null; then :
+   CONFIG_SHELL=$SHELL as_have_required=yes
+ fi; }
+ IFS=$as_save_IFS
+ 
+ 
+       if test "x$CONFIG_SHELL" != x; then :
+   # We cannot yet assume a decent shell, so we have to provide a
+ 	# neutralization value for shells without unset; and this also
+ 	# works around shells that cannot unset nonexistent variables.
+ 	# Preserve -v and -x to the replacement shell.
+ 	BASH_ENV=/dev/null
+ 	ENV=/dev/null
+ 	(unset BASH_ENV) >/dev/null 2>&1 && unset BASH_ENV ENV
+ 	export CONFIG_SHELL
+ 	case $- in # ((((
+ 	  *v*x* | *x*v* ) as_opts=-vx ;;
+ 	  *v* ) as_opts=-v ;;
+ 	  *x* ) as_opts=-x ;;
+ 	  * ) as_opts= ;;
+ 	esac
+ 	exec "$CONFIG_SHELL" $as_opts "$as_myself" ${1+"$@"}
+ fi
+ 
+     if test x$as_have_required = xno; then :
+   $as_echo "$0: This script requires a shell more modern than all"
+   $as_echo "$0: the shells that I found on your system."
+   if test x${ZSH_VERSION+set} = xset ; then
+     $as_echo "$0: In particular, zsh $ZSH_VERSION has bugs and should"
+     $as_echo "$0: be upgraded to zsh 4.3.4 or later."
+   else
+     $as_echo "$0: Please tell bug-autoconf@gnu.org about your system,
+ $0: including any error possibly output before this
+ $0: message. Then install a modern shell, or manually run
+ $0: the script under such a shell if you do have one."
+   fi
+   exit 1
+ fi
+ fi
+ fi
+ SHELL=${CONFIG_SHELL-/bin/sh}
+ export SHELL
+ # Unset more variables known to interfere with behavior of common tools.
+ CLICOLOR_FORCE= GREP_OPTIONS=
+ unset CLICOLOR_FORCE GREP_OPTIONS
+ 
+ ## --------------------- ##
+ ## M4sh Shell Functions. ##
+ ## --------------------- ##
+ # as_fn_unset VAR
+ # ---------------
+ # Portably unset VAR.
+ as_fn_unset ()
+ {
+   { eval $1=; unset $1;}
+ }
+ as_unset=as_fn_unset
+ 
+ # as_fn_set_status STATUS
+ # -----------------------
+ # Set $? to STATUS, without forking.
+ as_fn_set_status ()
+ {
+   return $1
+ } # as_fn_set_status
+ 
+ # as_fn_exit STATUS
+ # -----------------
+ # Exit the shell with STATUS, even in a "trap 0" or "set -e" context.
+ as_fn_exit ()
+ {
+   set +e
+   as_fn_set_status $1
+   exit $1
+ } # as_fn_exit
+ 
+ # as_fn_mkdir_p
+ # -------------
+ # Create "$as_dir" as a directory, including parents if necessary.
+ as_fn_mkdir_p ()
+ {
+ 
+   case $as_dir in #(
+   -*) as_dir=./$as_dir;;
+   esac
+   test -d "$as_dir" || eval $as_mkdir_p || {
+     as_dirs=
+     while :; do
+       case $as_dir in #(
+       *\'*) as_qdir=`$as_echo "$as_dir" | sed "s/'/'\\\\\\\\''/g"`;; #'(
+       *) as_qdir=$as_dir;;
+       esac
+       as_dirs="'$as_qdir' $as_dirs"
+       as_dir=`$as_dirname -- "$as_dir" ||
+ $as_expr X"$as_dir" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
+ 	 X"$as_dir" : 'X\(//\)[^/]' \| \
+ 	 X"$as_dir" : 'X\(//\)$' \| \
+ 	 X"$as_dir" : 'X\(/\)' \| . 2>/dev/null ||
+ $as_echo X"$as_dir" |
+     sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
+ 	    s//\1/
+ 	    q
+ 	  }
+ 	  /^X\(\/\/\)[^/].*/{
+ 	    s//\1/
+ 	    q
+ 	  }
+ 	  /^X\(\/\/\)$/{
+ 	    s//\1/
+ 	    q
+ 	  }
+ 	  /^X\(\/\).*/{
+ 	    s//\1/
+ 	    q
+ 	  }
+ 	  s/.*/./; q'`
+       test -d "$as_dir" && break
+     done
+     test -z "$as_dirs" || eval "mkdir $as_dirs"
+   } || test -d "$as_dir" || as_fn_error $? "cannot create directory $as_dir"
+ 
+ 
+ } # as_fn_mkdir_p
+ # as_fn_append VAR VALUE
+ # ----------------------
+ # Append the text in VALUE to the end of the definition contained in VAR. Take
+ # advantage of any shell optimizations that allow amortized linear growth over
+ # repeated appends, instead of the typical quadratic growth present in naive
+ # implementations.
+ if (eval "as_var=1; as_var+=2; test x\$as_var = x12") 2>/dev/null; then :
+   eval 'as_fn_append ()
+   {
+     eval $1+=\$2
+   }'
+ else
+   as_fn_append ()
+   {
+     eval $1=\$$1\$2
+   }
+ fi # as_fn_append
+ 
+ # as_fn_arith ARG...
+ # ------------------
+ # Perform arithmetic evaluation on the ARGs, and store the result in the
+ # global $as_val. Take advantage of shells that can avoid forks. The arguments
+ # must be portable across $(()) and expr.
+ if (eval "test \$(( 1 + 1 )) = 2") 2>/dev/null; then :
+   eval 'as_fn_arith ()
+   {
+     as_val=$(( $* ))
+   }'
+ else
+   as_fn_arith ()
+   {
+     as_val=`expr "$@" || test $? -eq 1`
+   }
+ fi # as_fn_arith
+ 
+ 
+ # as_fn_error STATUS ERROR [LINENO LOG_FD]
+ # ----------------------------------------
+ # Output "`basename $0`: error: ERROR" to stderr. If LINENO and LOG_FD are
+ # provided, also output the error to LOG_FD, referencing LINENO. Then exit the
+ # script with STATUS, using 1 if that was 0.
+ as_fn_error ()
+ {
+   as_status=$1; test $as_status -eq 0 && as_status=1
+   if test "$4"; then
+     as_lineno=${as_lineno-"$3"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
+     $as_echo "$as_me:${as_lineno-$LINENO}: error: $2" >&$4
+   fi
+   $as_echo "$as_me: error: $2" >&2
+   as_fn_exit $as_status
+ } # as_fn_error
  
  if expr a : '\(a\)' >/dev/null 2>&1 &&
     test "X`expr 00001 : '.*\(...\)'`" = X001; then
    as_expr=expr
***************
*** 126,138 ****
    as_basename=false
  fi
  
  
- # Name of the executable.
  as_me=`$as_basename -- "$0" ||
  $as_expr X/"$0" : '.*/\([^/][^/]*\)/*$' \| \
  	 X"$0" : 'X\(//\)$' \| \
  	 X"$0" : 'X\(/\)' \| . 2>/dev/null ||
! echo X/"$0" |
      sed '/^.*\/\([^/][^/]*\)\/*$/{
  	    s//\1/
  	    q
--- 393,409 ----
    as_basename=false
  fi
  
+ if (as_dir=`dirname -- /` && test "X$as_dir" = X/) >/dev/null 2>&1; then
+   as_dirname=dirname
+ else
+   as_dirname=false
+ fi
  
  as_me=`$as_basename -- "$0" ||
  $as_expr X/"$0" : '.*/\([^/][^/]*\)/*$' \| \
  	 X"$0" : 'X\(//\)$' \| \
  	 X"$0" : 'X\(/\)' \| . 2>/dev/null ||
! $as_echo X/"$0" |
      sed '/^.*\/\([^/][^/]*\)\/*$/{
  	    s//\1/
  	    q
***************
*** 147,563 ****
  	  }
  	  s/.*/./; q'`
  
! # CDPATH.
! $as_unset CDPATH
  
  
! if test "x$CONFIG_SHELL" = x; then
!   if (eval ":") 2>/dev/null; then
!   as_have_required=yes
! else
!   as_have_required=no
! fi
  
!   if test $as_have_required = yes && 	 (eval ":
! (as_func_return () {
!   (exit \$1)
! }
! as_func_success () {
!   as_func_return 0
! }
! as_func_failure () {
!   as_func_return 1
! }
! as_func_ret_success () {
!   return 0
! }
! as_func_ret_failure () {
!   return 1
  }
  
! exitcode=0
! if as_func_success; then
!   :
! else
!   exitcode=1
!   echo as_func_success failed.
! fi
  
! if as_func_failure; then
!   exitcode=1
!   echo as_func_failure succeeded.
  fi
! 
! if as_func_ret_success; then
!   :
  else
!   exitcode=1
!   echo as_func_ret_success failed.
  fi
  
! if as_func_ret_failure; then
!   exitcode=1
!   echo as_func_ret_failure succeeded.
  fi
  
! if ( set x; as_func_ret_success y && test x = \"\$1\" ); then
!   :
  else
!   exitcode=1
!   echo positional parameters were not saved.
  fi
  
! test \$exitcode = 0) || { (exit 1); exit 1; }
! 
! (
!   as_lineno_1=\$LINENO
!   as_lineno_2=\$LINENO
!   test \"x\$as_lineno_1\" != \"x\$as_lineno_2\" &&
!   test \"x\`expr \$as_lineno_1 + 1\`\" = \"x\$as_lineno_2\") || { (exit 1); exit 1; }
! ") 2> /dev/null; then
!   :
! else
!   as_candidate_shells=
!     as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
! for as_dir in /bin$PATH_SEPARATOR/usr/bin$PATH_SEPARATOR$PATH
! do
!   IFS=$as_save_IFS
!   test -z "$as_dir" && as_dir=.
!   case $as_dir in
! 	 /*)
! 	   for as_base in sh bash ksh sh5; do
! 	     as_candidate_shells="$as_candidate_shells $as_dir/$as_base"
! 	   done;;
!        esac
! done
! IFS=$as_save_IFS
  
  
-       for as_shell in $as_candidate_shells $SHELL; do
- 	 # Try only shells that exist, to save several forks.
- 	 if { test -f "$as_shell" || test -f "$as_shell.exe"; } &&
- 		{ ("$as_shell") 2> /dev/null <<\_ASEOF
- if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
-   emulate sh
-   NULLCMD=:
-   # Zsh 3.x and 4.x performs word splitting on ${1+"$@"}, which
-   # is contrary to our usage.  Disable this feature.
-   alias -g '${1+"$@"}'='"$@"'
-   setopt NO_GLOB_SUBST
- else
-   case `(set -o) 2>/dev/null` in
-   *posix*) set -o posix ;;
- esac
  
- fi
  
  
! :
! _ASEOF
! }; then
!   CONFIG_SHELL=$as_shell
! 	       as_have_required=yes
! 	       if { "$as_shell" 2> /dev/null <<\_ASEOF
! if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
!   emulate sh
!   NULLCMD=:
!   # Zsh 3.x and 4.x performs word splitting on ${1+"$@"}, which
!   # is contrary to our usage.  Disable this feature.
!   alias -g '${1+"$@"}'='"$@"'
!   setopt NO_GLOB_SUBST
! else
!   case `(set -o) 2>/dev/null` in
!   *posix*) set -o posix ;;
! esac
! 
! fi
! 
! 
! :
! (as_func_return () {
!   (exit $1)
! }
! as_func_success () {
!   as_func_return 0
! }
! as_func_failure () {
!   as_func_return 1
! }
! as_func_ret_success () {
!   return 0
! }
! as_func_ret_failure () {
!   return 1
! }
! 
! exitcode=0
! if as_func_success; then
!   :
! else
!   exitcode=1
!   echo as_func_success failed.
! fi
! 
! if as_func_failure; then
!   exitcode=1
!   echo as_func_failure succeeded.
! fi
! 
! if as_func_ret_success; then
!   :
! else
!   exitcode=1
!   echo as_func_ret_success failed.
! fi
! 
! if as_func_ret_failure; then
!   exitcode=1
!   echo as_func_ret_failure succeeded.
! fi
! 
! if ( set x; as_func_ret_success y && test x = "$1" ); then
!   :
! else
!   exitcode=1
!   echo positional parameters were not saved.
! fi
! 
! test $exitcode = 0) || { (exit 1); exit 1; }
! 
! (
!   as_lineno_1=$LINENO
!   as_lineno_2=$LINENO
!   test "x$as_lineno_1" != "x$as_lineno_2" &&
!   test "x`expr $as_lineno_1 + 1`" = "x$as_lineno_2") || { (exit 1); exit 1; }
! 
! _ASEOF
! }; then
!   break
! fi
! 
! fi
! 
!       done
! 
!       if test "x$CONFIG_SHELL" != x; then
!   for as_var in BASH_ENV ENV
!         do ($as_unset $as_var) >/dev/null 2>&1 && $as_unset $as_var
!         done
!         export CONFIG_SHELL
!         exec "$CONFIG_SHELL" "$as_myself" ${1+"$@"}
! fi
! 
! 
!     if test $as_have_required = no; then
!   echo This script requires a shell more modern than all the
!       echo shells that I found on your system.  Please install a
!       echo modern shell, or manually run the script under such a
!       echo shell if you do have one.
!       { (exit 1); exit 1; }
! fi
! 
! 
! fi
! 
! fi
! 
! 
! 
! (eval "as_func_return () {
!   (exit \$1)
! }
! as_func_success () {
!   as_func_return 0
! }
! as_func_failure () {
!   as_func_return 1
! }
! as_func_ret_success () {
!   return 0
! }
! as_func_ret_failure () {
!   return 1
! }
! 
! exitcode=0
! if as_func_success; then
!   :
! else
!   exitcode=1
!   echo as_func_success failed.
! fi
! 
! if as_func_failure; then
!   exitcode=1
!   echo as_func_failure succeeded.
! fi
! 
! if as_func_ret_success; then
!   :
! else
!   exitcode=1
!   echo as_func_ret_success failed.
! fi
! 
! if as_func_ret_failure; then
!   exitcode=1
!   echo as_func_ret_failure succeeded.
! fi
! 
! if ( set x; as_func_ret_success y && test x = \"\$1\" ); then
!   :
! else
!   exitcode=1
!   echo positional parameters were not saved.
! fi
! 
! test \$exitcode = 0") || {
!   echo No shell found that supports shell functions.
!   echo Please tell autoconf@gnu.org about your system,
!   echo including any error possibly output before this
!   echo message
! }
! 
! 
! 
!   as_lineno_1=$LINENO
!   as_lineno_2=$LINENO
!   test "x$as_lineno_1" != "x$as_lineno_2" &&
!   test "x`expr $as_lineno_1 + 1`" = "x$as_lineno_2" || {
! 
!   # Create $as_me.lineno as a copy of $as_myself, but with $LINENO
!   # uniformly replaced by the line number.  The first 'sed' inserts a
!   # line-number line after each line using $LINENO; the second 'sed'
!   # does the real work.  The second script uses 'N' to pair each
!   # line-number line with the line containing $LINENO, and appends
!   # trailing '-' during substitution so that $LINENO is not a special
!   # case at line end.
!   # (Raja R Harinath suggested sed '=', and Paul Eggert wrote the
!   # scripts with optimization help from Paolo Bonzini.  Blame Lee
!   # E. McMahon (1931-1989) for sed's syntax.  :-)
!   sed -n '
!     p
!     /[$]LINENO/=
!   ' <$as_myself |
!     sed '
!       s/[$]LINENO.*/&-/
!       t lineno
!       b
!       :lineno
!       N
!       :loop
!       s/[$]LINENO\([^'$as_cr_alnum'_].*\n\)\(.*\)/\2\1\2/
!       t loop
!       s/-\n.*//
!     ' >$as_me.lineno &&
!   chmod +x "$as_me.lineno" ||
!     { echo "$as_me: error: cannot create $as_me.lineno; rerun with a POSIX shell" >&2
!    { (exit 1); exit 1; }; }
! 
!   # Don't try to exec as it changes $[0], causing all sort of problems
!   # (the dirname of $[0] is not the place where we might find the
!   # original and so on.  Autoconf is especially sensitive to this).
!   . "./$as_me.lineno"
!   # Exit status is that of the last command.
!   exit
! }
! 
! 
! if (as_dir=`dirname -- /` && test "X$as_dir" = X/) >/dev/null 2>&1; then
!   as_dirname=dirname
! else
!   as_dirname=false
! fi
! 
! ECHO_C= ECHO_N= ECHO_T=
! case `echo -n x` in
! -n*)
!   case `echo 'x\c'` in
!   *c*) ECHO_T='	';;	# ECHO_T is single tab character.
!   *)   ECHO_C='\c';;
!   esac;;
! *)
!   ECHO_N='-n';;
! esac
! 
! if expr a : '\(a\)' >/dev/null 2>&1 &&
!    test "X`expr 00001 : '.*\(...\)'`" = X001; then
!   as_expr=expr
! else
!   as_expr=false
! fi
! 
! rm -f conf$$ conf$$.exe conf$$.file
! if test -d conf$$.dir; then
!   rm -f conf$$.dir/conf$$.file
! else
!   rm -f conf$$.dir
!   mkdir conf$$.dir
! fi
! echo >conf$$.file
! if ln -s conf$$.file conf$$ 2>/dev/null; then
!   as_ln_s='ln -s'
!   # ... but there are two gotchas:
!   # 1) On MSYS, both `ln -s file dir' and `ln file dir' fail.
!   # 2) DJGPP < 2.04 has no symlinks; `ln -s' creates a wrapper executable.
!   # In both cases, we have to default to `cp -p'.
!   ln -s conf$$.file conf$$.dir 2>/dev/null && test ! -f conf$$.exe ||
!     as_ln_s='cp -p'
! elif ln conf$$.file conf$$ 2>/dev/null; then
!   as_ln_s=ln
! else
!   as_ln_s='cp -p'
! fi
! rm -f conf$$ conf$$.exe conf$$.dir/conf$$.file conf$$.file
! rmdir conf$$.dir 2>/dev/null
! 
! if mkdir -p . 2>/dev/null; then
!   as_mkdir_p=:
! else
!   test -d ./-p && rmdir ./-p
!   as_mkdir_p=false
! fi
! 
! if test -x / >/dev/null 2>&1; then
!   as_test_x='test -x'
! else
!   if ls -dL / >/dev/null 2>&1; then
!     as_ls_L_option=L
!   else
!     as_ls_L_option=
!   fi
!   as_test_x='
!     eval sh -c '\''
!       if test -d "$1"; then
!         test -d "$1/.";
!       else
! 	case $1 in
!         -*)set "./$1";;
! 	esac;
! 	case `ls -ld'$as_ls_L_option' "$1" 2>/dev/null` in
! 	???[sx]*):;;*)false;;esac;fi
!     '\'' sh
!   '
! fi
! as_executable_p=$as_test_x
! 
! # Sed expression to map a string onto a valid CPP name.
! as_tr_cpp="eval sed 'y%*$as_cr_letters%P$as_cr_LETTERS%;s%[^_$as_cr_alnum]%_%g'"
! 
! # Sed expression to map a string onto a valid variable name.
! as_tr_sh="eval sed 'y%*+%pp%;s%[^_$as_cr_alnum]%_%g'"
! 
! 
! 
! 
! # Check that we are running under the correct shell.
! SHELL=${CONFIG_SHELL-/bin/sh}
! 
! case X$ECHO in
! X*--fallback-echo)
!   # Remove one level of quotation (which was required for Make).
!   ECHO=`echo "$ECHO" | sed 's,\\\\\$\\$0,'$0','`
!   ;;
  esac
  
  echo=${ECHO-echo}
--- 418,548 ----
  	  }
  	  s/.*/./; q'`
  
! # Avoid depending upon Character Ranges.
! as_cr_letters='abcdefghijklmnopqrstuvwxyz'
! as_cr_LETTERS='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
! as_cr_Letters=$as_cr_letters$as_cr_LETTERS
! as_cr_digits='0123456789'
! as_cr_alnum=$as_cr_Letters$as_cr_digits
  
  
!   as_lineno_1=$LINENO as_lineno_1a=$LINENO
!   as_lineno_2=$LINENO as_lineno_2a=$LINENO
!   eval 'test "x$as_lineno_1'$as_run'" != "x$as_lineno_2'$as_run'" &&
!   test "x`expr $as_lineno_1'$as_run' + 1`" = "x$as_lineno_2'$as_run'"' || {
!   # Blame Lee E. McMahon (1931-1989) for sed's syntax.  :-)
!   sed -n '
!     p
!     /[$]LINENO/=
!   ' <$as_myself |
!     sed '
!       s/[$]LINENO.*/&-/
!       t lineno
!       b
!       :lineno
!       N
!       :loop
!       s/[$]LINENO\([^'$as_cr_alnum'_].*\n\)\(.*\)/\2\1\2/
!       t loop
!       s/-\n.*//
!     ' >$as_me.lineno &&
!   chmod +x "$as_me.lineno" ||
!     { $as_echo "$as_me: error: cannot create $as_me.lineno; rerun with a POSIX shell" >&2; as_fn_exit 1; }
  
!   # Don't try to exec as it changes $[0], causing all sort of problems
!   # (the dirname of $[0] is not the place where we might find the
!   # original and so on.  Autoconf is especially sensitive to this).
!   . "./$as_me.lineno"
!   # Exit status is that of the last command.
!   exit
  }
  
! ECHO_C= ECHO_N= ECHO_T=
! case `echo -n x` in #(((((
! -n*)
!   case `echo 'xy\c'` in
!   *c*) ECHO_T='	';;	# ECHO_T is single tab character.
!   xy)  ECHO_C='\c';;
!   *)   echo `echo ksh88 bug on AIX 6.1` > /dev/null
!        ECHO_T='	';;
!   esac;;
! *)
!   ECHO_N='-n';;
! esac
  
! rm -f conf$$ conf$$.exe conf$$.file
! if test -d conf$$.dir; then
!   rm -f conf$$.dir/conf$$.file
! else
!   rm -f conf$$.dir
!   mkdir conf$$.dir 2>/dev/null
  fi
! if (echo >conf$$.file) 2>/dev/null; then
!   if ln -s conf$$.file conf$$ 2>/dev/null; then
!     as_ln_s='ln -s'
!     # ... but there are two gotchas:
!     # 1) On MSYS, both `ln -s file dir' and `ln file dir' fail.
!     # 2) DJGPP < 2.04 has no symlinks; `ln -s' creates a wrapper executable.
!     # In both cases, we have to default to `cp -p'.
!     ln -s conf$$.file conf$$.dir 2>/dev/null && test ! -f conf$$.exe ||
!       as_ln_s='cp -p'
!   elif ln conf$$.file conf$$ 2>/dev/null; then
!     as_ln_s=ln
!   else
!     as_ln_s='cp -p'
!   fi
  else
!   as_ln_s='cp -p'
  fi
+ rm -f conf$$ conf$$.exe conf$$.dir/conf$$.file conf$$.file
+ rmdir conf$$.dir 2>/dev/null
  
! if mkdir -p . 2>/dev/null; then
!   as_mkdir_p='mkdir -p "$as_dir"'
! else
!   test -d ./-p && rmdir ./-p
!   as_mkdir_p=false
  fi
  
! if test -x / >/dev/null 2>&1; then
!   as_test_x='test -x'
  else
!   if ls -dL / >/dev/null 2>&1; then
!     as_ls_L_option=L
!   else
!     as_ls_L_option=
!   fi
!   as_test_x='
!     eval sh -c '\''
!       if test -d "$1"; then
! 	test -d "$1/.";
!       else
! 	case $1 in #(
! 	-*)set "./$1";;
! 	esac;
! 	case `ls -ld'$as_ls_L_option' "$1" 2>/dev/null` in #((
! 	???[sx]*):;;*)false;;esac;fi
!     '\'' sh
!   '
  fi
+ as_executable_p=$as_test_x
  
! # Sed expression to map a string onto a valid CPP name.
! as_tr_cpp="eval sed 'y%*$as_cr_letters%P$as_cr_LETTERS%;s%[^_$as_cr_alnum]%_%g'"
  
+ # Sed expression to map a string onto a valid variable name.
+ as_tr_sh="eval sed 'y%*+%pp%;s%[^_$as_cr_alnum]%_%g'"
  
  
  
+ # Check that we are running under the correct shell.
+ SHELL=${CONFIG_SHELL-/bin/sh}
  
! case X$ECHO in
! X*--fallback-echo)
!   # Remove one level of quotation (which was required for Make).
!   ECHO=`echo "$ECHO" | sed 's,\\\\\$\\$0,'$0','`
!   ;;
  esac
  
  echo=${ECHO-echo}
***************
*** 703,712 ****
  
  tagnames=${tagnames+${tagnames},}F77
  
! exec 7<&0 </dev/null 6>&1
  
  # Name of the host.
! # hostname on some systems (SVR3.2, Linux) returns a bogus exit status,
  # so uname gets run too.
  ac_hostname=`(hostname || uname -n) 2>/dev/null | sed 1q`
  
--- 688,698 ----
  
  tagnames=${tagnames+${tagnames},}F77
  
! test -n "$DJDIR" || exec 7<&0 </dev/null
! exec 6>&1
  
  # Name of the host.
! # hostname on some systems (SVR3.2, old GNU/Linux) returns a bogus exit status,
  # so uname gets run too.
  ac_hostname=`(hostname || uname -n) 2>/dev/null | sed 1q`
  
***************
*** 721,727 ****
  subdirs=
  MFLAGS=
  MAKEFLAGS=
- SHELL=${CONFIG_SHELL-/bin/sh}
  
  # Identity of this package.
  PACKAGE_NAME=
--- 707,712 ----
***************
*** 729,734 ****
--- 714,720 ----
  PACKAGE_VERSION=
  PACKAGE_STRING=
  PACKAGE_BUGREPORT=
+ PACKAGE_URL=
  
  ac_unique_file="include/vips/colour.h"
  # Factoring default headers for most tests.
***************
*** 767,968 ****
  # include <unistd.h>
  #endif"
  
! ac_subst_vars='SHELL
! PATH_SEPARATOR
! PACKAGE_NAME
! PACKAGE_TARNAME
! PACKAGE_VERSION
! PACKAGE_STRING
! PACKAGE_BUGREPORT
! exec_prefix
! prefix
! program_transform_name
! bindir
! sbindir
! libexecdir
! datarootdir
! datadir
! sysconfdir
! sharedstatedir
! localstatedir
! includedir
! oldincludedir
! docdir
! infodir
! htmldir
! dvidir
! pdfdir
! psdir
! libdir
! localedir
! mandir
! DEFS
! ECHO_C
! ECHO_N
! ECHO_T
! LIBS
! build_alias
! host_alias
! target_alias
! INSTALL_PROGRAM
! INSTALL_SCRIPT
! INSTALL_DATA
! am__isrc
! CYGPATH_W
! PACKAGE
! VERSION
! ACLOCAL
! AUTOCONF
! AUTOMAKE
! AUTOHEADER
! MAKEINFO
! install_sh
! STRIP
! INSTALL_STRIP_PROGRAM
! mkdir_p
! AWK
! SET_MAKE
! am__leading_dot
! AMTAR
! am__tar
! am__untar
! IM_VERSION
! IM_VERSION_STRING
! IM_MAJOR_VERSION
! IM_MINOR_VERSION
! IM_MICRO_VERSION
! LIBRARY_CURRENT
! LIBRARY_REVISION
! LIBRARY_AGE
! build
! build_cpu
! build_vendor
! build_os
! host
! host_cpu
! host_vendor
! host_os
! OS_WIN32_TRUE
! OS_WIN32_FALSE
! CC
! CFLAGS
! LDFLAGS
! CPPFLAGS
! ac_ct_CC
! EXEEXT
! OBJEXT
! DEPDIR
! am__include
! am__quote
! AMDEP_TRUE
! AMDEP_FALSE
! AMDEPBACKSLASH
! CCDEPMODE
! am__fastdepCC_TRUE
! am__fastdepCC_FALSE
! RANLIB
! LN_S
! CXX
! CXXFLAGS
! ac_ct_CXX
! CXXDEPMODE
! am__fastdepCXX_TRUE
! am__fastdepCXX_FALSE
! GETTEXT_PACKAGE
! CPP
! GREP
! EGREP
! USE_NLS
! MSGFMT
! MSGFMT_OPTS
! GMSGFMT
! XGETTEXT
! CATALOGS
! CATOBJEXT
! DATADIRNAME
! GMOFILES
! INSTOBJEXT
! INTLLIBS
! PO_IN_DATADIR_TRUE
! PO_IN_DATADIR_FALSE
! POFILES
! POSUB
! MKINSTALLDIRS
! DLLWRAP
! DLLTOOL
! OBJDUMP
! AR
! AS
! LD
! SED
! ECHO
! DSYMUTIL
! NMEDIT
! CXXCPP
! F77
! FFLAGS
! ac_ct_F77
! LIBTOOL
! LIBOBJS
! PKG_CONFIG
! REQUIRED_CFLAGS
! REQUIRED_LIBS
! ENABLE_LINKS_TRUE
! ENABLE_LINKS_FALSE
! GTHREAD_CFLAGS
! GTHREAD_LIBS
! FFTW3_CFLAGS
! FFTW3_LIBS
! MAGICK_WAND_CFLAGS
! MAGICK_WAND_LIBS
! IMAGE_MAGICK_CFLAGS
! IMAGE_MAGICK_LIBS
! MAGICK_CFLAGS
! MAGICK_LIBS
! LIBOIL_CFLAGS
! LIBOIL_LIBS
! LCMS_CFLAGS
! LCMS_LIBS
! OPENEXR_CFLAGS
! OPENEXR_LIBS
! PANGOFT2_CFLAGS
! PANGOFT2_LIBS
! XMKMF
! X_CFLAGS
! X_PRE_LIBS
! X_LIBS
! X_EXTRA_LIBS
! TIFF_LIBS
! TIFF_INCLUDES
! ZIP_LIBS
! ZIP_INCLUDES
! JPEG_LIBS
! JPEG_INCLUDES
! PNG_CFLAGS
! PNG_LIBS
! PNG_INCLUDES
! EXIF_CFLAGS
! EXIF_LIBS
! PYTHON
! PYTHON_VERSION
! PYTHON_PREFIX
! PYTHON_EXEC_PREFIX
! PYTHON_PLATFORM
! pythondir
! pkgpythondir
! pyexecdir
! pkgpyexecdir
! PYTHON_INCLUDES
! HAVE_PYTHON_TRUE
! HAVE_PYTHON_FALSE
! WITH_CIMG_TRUE
! WITH_CIMG_FALSE
! VIPS_CFLAGS
! VIPS_INCLUDES
! VIPS_LIBS
  PACKAGES_USED
! LTLIBOBJS'
  ac_subst_files=''
        ac_precious_vars='build_alias
  host_alias
  target_alias
--- 753,996 ----
  # include <unistd.h>
  #endif"
  
! ac_header_list=
! ac_subst_vars='LTLIBOBJS
  PACKAGES_USED
! VIPS_LIBS
! VIPS_INCLUDES
! VIPS_CFLAGS
! WITH_CIMG_FALSE
! WITH_CIMG_TRUE
! HAVE_PYTHON_FALSE
! HAVE_PYTHON_TRUE
! PYTHON_INCLUDES
! pkgpyexecdir
! pyexecdir
! pkgpythondir
! pythondir
! PYTHON_PLATFORM
! PYTHON_EXEC_PREFIX
! PYTHON_PREFIX
! PYTHON_VERSION
! PYTHON
! EXIF_LIBS
! EXIF_CFLAGS
! PNG_INCLUDES
! PNG_LIBS
! PNG_CFLAGS
! JPEG_INCLUDES
! JPEG_LIBS
! ZIP_INCLUDES
! ZIP_LIBS
! TIFF_INCLUDES
! TIFF_LIBS
! X_EXTRA_LIBS
! X_LIBS
! X_PRE_LIBS
! X_CFLAGS
! XMKMF
! PANGOFT2_LIBS
! PANGOFT2_CFLAGS
! OPENEXR_LIBS
! OPENEXR_CFLAGS
! LCMS_LIBS
! LCMS_CFLAGS
! LIBOIL_LIBS
! LIBOIL_CFLAGS
! MAGICK_LIBS
! MAGICK_CFLAGS
! IMAGE_MAGICK_LIBS
! IMAGE_MAGICK_CFLAGS
! MAGICK_WAND_LIBS
! MAGICK_WAND_CFLAGS
! FFTW3_LIBS
! FFTW3_CFLAGS
! GTHREAD_LIBS
! GTHREAD_CFLAGS
! ENABLE_LINKS_FALSE
! ENABLE_LINKS_TRUE
! REQUIRED_LIBS
! REQUIRED_CFLAGS
! PKG_CONFIG
! LIBOBJS
! LIBTOOL
! ac_ct_F77
! FFLAGS
! F77
! CXXCPP
! NMEDIT
! DSYMUTIL
! ECHO
! SED
! LD
! AS
! AR
! OBJDUMP
! DLLTOOL
! DLLWRAP
! MKINSTALLDIRS
! POSUB
! POFILES
! PO_IN_DATADIR_FALSE
! PO_IN_DATADIR_TRUE
! INTLLIBS
! INSTOBJEXT
! GMOFILES
! DATADIRNAME
! CATOBJEXT
! CATALOGS
! XGETTEXT
! GMSGFMT
! MSGFMT_OPTS
! MSGFMT
! USE_NLS
! EGREP
! GREP
! CPP
! GETTEXT_PACKAGE
! am__fastdepCXX_FALSE
! am__fastdepCXX_TRUE
! CXXDEPMODE
! ac_ct_CXX
! CXXFLAGS
! CXX
! LN_S
! RANLIB
! am__fastdepCC_FALSE
! am__fastdepCC_TRUE
! CCDEPMODE
! AMDEPBACKSLASH
! AMDEP_FALSE
! AMDEP_TRUE
! am__quote
! am__include
! DEPDIR
! OBJEXT
! EXEEXT
! ac_ct_CC
! CPPFLAGS
! LDFLAGS
! CFLAGS
! CC
! OS_WIN32_FALSE
! OS_WIN32_TRUE
! host_os
! host_vendor
! host_cpu
! host
! build_os
! build_vendor
! build_cpu
! build
! LIBRARY_AGE
! LIBRARY_REVISION
! LIBRARY_CURRENT
! IM_MICRO_VERSION
! IM_MINOR_VERSION
! IM_MAJOR_VERSION
! IM_VERSION_STRING
! IM_VERSION
! am__untar
! am__tar
! AMTAR
! am__leading_dot
! SET_MAKE
! AWK
! mkdir_p
! MKDIR_P
! INSTALL_STRIP_PROGRAM
! STRIP
! install_sh
! MAKEINFO
! AUTOHEADER
! AUTOMAKE
! AUTOCONF
! ACLOCAL
! VERSION
! PACKAGE
! CYGPATH_W
! am__isrc
! INSTALL_DATA
! INSTALL_SCRIPT
! INSTALL_PROGRAM
! target_alias
! host_alias
! build_alias
! LIBS
! ECHO_T
! ECHO_N
! ECHO_C
! DEFS
! mandir
! localedir
! libdir
! psdir
! pdfdir
! dvidir
! htmldir
! infodir
! docdir
! oldincludedir
! includedir
! localstatedir
! sharedstatedir
! sysconfdir
! datadir
! datarootdir
! libexecdir
! sbindir
! bindir
! program_transform_name
! prefix
! exec_prefix
! PACKAGE_URL
! PACKAGE_BUGREPORT
! PACKAGE_STRING
! PACKAGE_VERSION
! PACKAGE_TARNAME
! PACKAGE_NAME
! PATH_SEPARATOR
! SHELL'
  ac_subst_files=''
+ ac_user_opts='
+ enable_option_checking
+ enable_largefile
+ enable_dependency_tracking
+ with_dmalloc
+ enable_shared
+ enable_static
+ enable_fast_install
+ with_gnu_ld
+ enable_libtool_lock
+ with_pic
+ with_tags
+ enable_links
+ enable_threads
+ with_fftw3
+ with_magick
+ with_magickpackage
+ with_liboil
+ with_lcms
+ with_OpenEXR
+ with_pangoft2
+ with_x
+ with_tiff
+ with_tiff_includes
+ with_tiff_libraries
+ with_zip
+ with_zip_includes
+ with_zip_libraries
+ with_jpeg
+ with_jpeg_includes
+ with_jpeg_libraries
+ with_png
+ with_png_includes
+ with_png_libraries
+ with_libexif
+ with_v4l
+ with_python
+ with_cimg
+ '
        ac_precious_vars='build_alias
  host_alias
  target_alias
***************
*** 1009,1014 ****
--- 1037,1044 ----
  # Initialize some variables set by options.
  ac_init_help=
  ac_init_version=false
+ ac_unrecognized_opts=
+ ac_unrecognized_sep=
  # The variables have the same names as the options, with
  # dashes changed to underlines.
  cache_file=/dev/null
***************
*** 1064,1071 ****
    fi
  
    case $ac_option in
!   *=*)	ac_optarg=`expr "X$ac_option" : '[^=]*=\(.*\)'` ;;
!   *)	ac_optarg=yes ;;
    esac
  
    # Accept the important Cygnus configure options, so we can diagnose typos.
--- 1094,1102 ----
    fi
  
    case $ac_option in
!   *=?*) ac_optarg=`expr "X$ac_option" : '[^=]*=\(.*\)'` ;;
!   *=)   ac_optarg= ;;
!   *)    ac_optarg=yes ;;
    esac
  
    # Accept the important Cygnus configure options, so we can diagnose typos.
***************
*** 1107,1119 ****
      datarootdir=$ac_optarg ;;
  
    -disable-* | --disable-*)
!     ac_feature=`expr "x$ac_option" : 'x-*disable-\(.*\)'`
      # Reject names that are not valid shell variable names.
!     expr "x$ac_feature" : ".*[^-._$as_cr_alnum]" >/dev/null &&
!       { echo "$as_me: error: invalid feature name: $ac_feature" >&2
!    { (exit 1); exit 1; }; }
!     ac_feature=`echo $ac_feature | sed 's/[-.]/_/g'`
!     eval enable_$ac_feature=no ;;
  
    -docdir | --docdir | --docdi | --doc | --do)
      ac_prev=docdir ;;
--- 1138,1157 ----
      datarootdir=$ac_optarg ;;
  
    -disable-* | --disable-*)
!     ac_useropt=`expr "x$ac_option" : 'x-*disable-\(.*\)'`
      # Reject names that are not valid shell variable names.
!     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
!       as_fn_error $? "invalid feature name: $ac_useropt"
!     ac_useropt_orig=$ac_useropt
!     ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
!     case $ac_user_opts in
!       *"
! "enable_$ac_useropt"
! "*) ;;
!       *) ac_unrecognized_opts="$ac_unrecognized_opts$ac_unrecognized_sep--disable-$ac_useropt_orig"
! 	 ac_unrecognized_sep=', ';;
!     esac
!     eval enable_$ac_useropt=no ;;
  
    -docdir | --docdir | --docdi | --doc | --do)
      ac_prev=docdir ;;
***************
*** 1126,1138 ****
      dvidir=$ac_optarg ;;
  
    -enable-* | --enable-*)
!     ac_feature=`expr "x$ac_option" : 'x-*enable-\([^=]*\)'`
      # Reject names that are not valid shell variable names.
!     expr "x$ac_feature" : ".*[^-._$as_cr_alnum]" >/dev/null &&
!       { echo "$as_me: error: invalid feature name: $ac_feature" >&2
!    { (exit 1); exit 1; }; }
!     ac_feature=`echo $ac_feature | sed 's/[-.]/_/g'`
!     eval enable_$ac_feature=\$ac_optarg ;;
  
    -exec-prefix | --exec_prefix | --exec-prefix | --exec-prefi \
    | --exec-pref | --exec-pre | --exec-pr | --exec-p | --exec- \
--- 1164,1183 ----
      dvidir=$ac_optarg ;;
  
    -enable-* | --enable-*)
!     ac_useropt=`expr "x$ac_option" : 'x-*enable-\([^=]*\)'`
      # Reject names that are not valid shell variable names.
!     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
!       as_fn_error $? "invalid feature name: $ac_useropt"
!     ac_useropt_orig=$ac_useropt
!     ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
!     case $ac_user_opts in
!       *"
! "enable_$ac_useropt"
! "*) ;;
!       *) ac_unrecognized_opts="$ac_unrecognized_opts$ac_unrecognized_sep--enable-$ac_useropt_orig"
! 	 ac_unrecognized_sep=', ';;
!     esac
!     eval enable_$ac_useropt=\$ac_optarg ;;
  
    -exec-prefix | --exec_prefix | --exec-prefix | --exec-prefi \
    | --exec-pref | --exec-pre | --exec-pr | --exec-p | --exec- \
***************
*** 1323,1344 ****
      ac_init_version=: ;;
  
    -with-* | --with-*)
!     ac_package=`expr "x$ac_option" : 'x-*with-\([^=]*\)'`
      # Reject names that are not valid shell variable names.
!     expr "x$ac_package" : ".*[^-._$as_cr_alnum]" >/dev/null &&
!       { echo "$as_me: error: invalid package name: $ac_package" >&2
!    { (exit 1); exit 1; }; }
!     ac_package=`echo $ac_package | sed 's/[-.]/_/g'`
!     eval with_$ac_package=\$ac_optarg ;;
  
    -without-* | --without-*)
!     ac_package=`expr "x$ac_option" : 'x-*without-\(.*\)'`
      # Reject names that are not valid shell variable names.
!     expr "x$ac_package" : ".*[^-._$as_cr_alnum]" >/dev/null &&
!       { echo "$as_me: error: invalid package name: $ac_package" >&2
!    { (exit 1); exit 1; }; }
!     ac_package=`echo $ac_package | sed 's/[-.]/_/g'`
!     eval with_$ac_package=no ;;
  
    --x)
      # Obsolete; use --with-x.
--- 1368,1403 ----
      ac_init_version=: ;;
  
    -with-* | --with-*)
!     ac_useropt=`expr "x$ac_option" : 'x-*with-\([^=]*\)'`
      # Reject names that are not valid shell variable names.
!     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
!       as_fn_error $? "invalid package name: $ac_useropt"
!     ac_useropt_orig=$ac_useropt
!     ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
!     case $ac_user_opts in
!       *"
! "with_$ac_useropt"
! "*) ;;
!       *) ac_unrecognized_opts="$ac_unrecognized_opts$ac_unrecognized_sep--with-$ac_useropt_orig"
! 	 ac_unrecognized_sep=', ';;
!     esac
!     eval with_$ac_useropt=\$ac_optarg ;;
  
    -without-* | --without-*)
!     ac_useropt=`expr "x$ac_option" : 'x-*without-\(.*\)'`
      # Reject names that are not valid shell variable names.
!     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
!       as_fn_error $? "invalid package name: $ac_useropt"
!     ac_useropt_orig=$ac_useropt
!     ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
!     case $ac_user_opts in
!       *"
! "with_$ac_useropt"
! "*) ;;
!       *) ac_unrecognized_opts="$ac_unrecognized_opts$ac_unrecognized_sep--without-$ac_useropt_orig"
! 	 ac_unrecognized_sep=', ';;
!     esac
!     eval with_$ac_useropt=no ;;
  
    --x)
      # Obsolete; use --with-x.
***************
*** 1358,1383 ****
    | --x-librar=* | --x-libra=* | --x-libr=* | --x-lib=* | --x-li=* | --x-l=*)
      x_libraries=$ac_optarg ;;
  
!   -*) { echo "$as_me: error: unrecognized option: $ac_option
! Try \`$0 --help' for more information." >&2
!    { (exit 1); exit 1; }; }
      ;;
  
    *=*)
      ac_envvar=`expr "x$ac_option" : 'x\([^=]*\)='`
      # Reject names that are not valid shell variable names.
!     expr "x$ac_envvar" : ".*[^_$as_cr_alnum]" >/dev/null &&
!       { echo "$as_me: error: invalid variable name: $ac_envvar" >&2
!    { (exit 1); exit 1; }; }
      eval $ac_envvar=\$ac_optarg
      export $ac_envvar ;;
  
    *)
      # FIXME: should be removed in autoconf 3.0.
!     echo "$as_me: WARNING: you should use --build, --host, --target" >&2
      expr "x$ac_option" : ".*[^-._$as_cr_alnum]" >/dev/null &&
!       echo "$as_me: WARNING: invalid host type: $ac_option" >&2
!     : ${build_alias=$ac_option} ${host_alias=$ac_option} ${target_alias=$ac_option}
      ;;
  
    esac
--- 1417,1442 ----
    | --x-librar=* | --x-libra=* | --x-libr=* | --x-lib=* | --x-li=* | --x-l=*)
      x_libraries=$ac_optarg ;;
  
!   -*) as_fn_error $? "unrecognized option: \`$ac_option'
! Try \`$0 --help' for more information"
      ;;
  
    *=*)
      ac_envvar=`expr "x$ac_option" : 'x\([^=]*\)='`
      # Reject names that are not valid shell variable names.
!     case $ac_envvar in #(
!       '' | [0-9]* | *[!_$as_cr_alnum]* )
!       as_fn_error $? "invalid variable name: \`$ac_envvar'" ;;
!     esac
      eval $ac_envvar=\$ac_optarg
      export $ac_envvar ;;
  
    *)
      # FIXME: should be removed in autoconf 3.0.
!     $as_echo "$as_me: WARNING: you should use --build, --host, --target" >&2
      expr "x$ac_option" : ".*[^-._$as_cr_alnum]" >/dev/null &&
!       $as_echo "$as_me: WARNING: invalid host type: $ac_option" >&2
!     : "${build_alias=$ac_option} ${host_alias=$ac_option} ${target_alias=$ac_option}"
      ;;
  
    esac
***************
*** 1385,1407 ****
  
  if test -n "$ac_prev"; then
    ac_option=--`echo $ac_prev | sed 's/_/-/g'`
!   { echo "$as_me: error: missing argument to $ac_option" >&2
!    { (exit 1); exit 1; }; }
  fi
  
! # Be sure to have absolute directory names.
  for ac_var in	exec_prefix prefix bindir sbindir libexecdir datarootdir \
  		datadir sysconfdir sharedstatedir localstatedir includedir \
  		oldincludedir docdir infodir htmldir dvidir pdfdir psdir \
  		libdir localedir mandir
  do
    eval ac_val=\$$ac_var
    case $ac_val in
      [\\/$]* | ?:[\\/]* )  continue;;
      NONE | '' ) case $ac_var in *prefix ) continue;; esac;;
    esac
!   { echo "$as_me: error: expected an absolute directory name for --$ac_var: $ac_val" >&2
!    { (exit 1); exit 1; }; }
  done
  
  # There might be people who depend on the old broken behavior: `$host'
--- 1444,1479 ----
  
  if test -n "$ac_prev"; then
    ac_option=--`echo $ac_prev | sed 's/_/-/g'`
!   as_fn_error $? "missing argument to $ac_option"
! fi
! 
! if test -n "$ac_unrecognized_opts"; then
!   case $enable_option_checking in
!     no) ;;
!     fatal) as_fn_error $? "unrecognized options: $ac_unrecognized_opts" ;;
!     *)     $as_echo "$as_me: WARNING: unrecognized options: $ac_unrecognized_opts" >&2 ;;
!   esac
  fi
  
! # Check all directory arguments for consistency.
  for ac_var in	exec_prefix prefix bindir sbindir libexecdir datarootdir \
  		datadir sysconfdir sharedstatedir localstatedir includedir \
  		oldincludedir docdir infodir htmldir dvidir pdfdir psdir \
  		libdir localedir mandir
  do
    eval ac_val=\$$ac_var
+   # Remove trailing slashes.
+   case $ac_val in
+     */ )
+       ac_val=`expr "X$ac_val" : 'X\(.*[^/]\)' \| "X$ac_val" : 'X\(.*\)'`
+       eval $ac_var=\$ac_val;;
+   esac
+   # Be sure to have absolute directory names.
    case $ac_val in
      [\\/$]* | ?:[\\/]* )  continue;;
      NONE | '' ) case $ac_var in *prefix ) continue;; esac;;
    esac
!   as_fn_error $? "expected an absolute directory name for --$ac_var: $ac_val"
  done
  
  # There might be people who depend on the old broken behavior: `$host'
***************
*** 1415,1422 ****
  if test "x$host_alias" != x; then
    if test "x$build_alias" = x; then
      cross_compiling=maybe
!     echo "$as_me: WARNING: If you wanted to set the --build type, don't use --host.
!     If a cross compiler is detected then cross compile mode will be used." >&2
    elif test "x$build_alias" != "x$host_alias"; then
      cross_compiling=yes
    fi
--- 1487,1494 ----
  if test "x$host_alias" != x; then
    if test "x$build_alias" = x; then
      cross_compiling=maybe
!     $as_echo "$as_me: WARNING: if you wanted to set the --build type, don't use --host.
!     If a cross compiler is detected then cross compile mode will be used" >&2
    elif test "x$build_alias" != "x$host_alias"; then
      cross_compiling=yes
    fi
***************
*** 1431,1453 ****
  ac_pwd=`pwd` && test -n "$ac_pwd" &&
  ac_ls_di=`ls -di .` &&
  ac_pwd_ls_di=`cd "$ac_pwd" && ls -di .` ||
!   { echo "$as_me: error: Working directory cannot be determined" >&2
!    { (exit 1); exit 1; }; }
  test "X$ac_ls_di" = "X$ac_pwd_ls_di" ||
!   { echo "$as_me: error: pwd does not report name of working directory" >&2
!    { (exit 1); exit 1; }; }
  
  
  # Find the source files, if location was not specified.
  if test -z "$srcdir"; then
    ac_srcdir_defaulted=yes
    # Try the directory containing this script, then the parent directory.
!   ac_confdir=`$as_dirname -- "$0" ||
! $as_expr X"$0" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
! 	 X"$0" : 'X\(//\)[^/]' \| \
! 	 X"$0" : 'X\(//\)$' \| \
! 	 X"$0" : 'X\(/\)' \| . 2>/dev/null ||
! echo X"$0" |
      sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
  	    s//\1/
  	    q
--- 1503,1523 ----
  ac_pwd=`pwd` && test -n "$ac_pwd" &&
  ac_ls_di=`ls -di .` &&
  ac_pwd_ls_di=`cd "$ac_pwd" && ls -di .` ||
!   as_fn_error $? "working directory cannot be determined"
  test "X$ac_ls_di" = "X$ac_pwd_ls_di" ||
!   as_fn_error $? "pwd does not report name of working directory"
  
  
  # Find the source files, if location was not specified.
  if test -z "$srcdir"; then
    ac_srcdir_defaulted=yes
    # Try the directory containing this script, then the parent directory.
!   ac_confdir=`$as_dirname -- "$as_myself" ||
! $as_expr X"$as_myself" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
! 	 X"$as_myself" : 'X\(//\)[^/]' \| \
! 	 X"$as_myself" : 'X\(//\)$' \| \
! 	 X"$as_myself" : 'X\(/\)' \| . 2>/dev/null ||
! $as_echo X"$as_myself" |
      sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
  	    s//\1/
  	    q
***************
*** 1474,1486 ****
  fi
  if test ! -r "$srcdir/$ac_unique_file"; then
    test "$ac_srcdir_defaulted" = yes && srcdir="$ac_confdir or .."
!   { echo "$as_me: error: cannot find sources ($ac_unique_file) in $srcdir" >&2
!    { (exit 1); exit 1; }; }
  fi
  ac_msg="sources are in $srcdir, but \`cd $srcdir' does not work"
  ac_abs_confdir=`(
! 	cd "$srcdir" && test -r "./$ac_unique_file" || { echo "$as_me: error: $ac_msg" >&2
!    { (exit 1); exit 1; }; }
  	pwd)`
  # When building in place, set srcdir=.
  if test "$ac_abs_confdir" = "$ac_pwd"; then
--- 1544,1554 ----
  fi
  if test ! -r "$srcdir/$ac_unique_file"; then
    test "$ac_srcdir_defaulted" = yes && srcdir="$ac_confdir or .."
!   as_fn_error $? "cannot find sources ($ac_unique_file) in $srcdir"
  fi
  ac_msg="sources are in $srcdir, but \`cd $srcdir' does not work"
  ac_abs_confdir=`(
! 	cd "$srcdir" && test -r "./$ac_unique_file" || as_fn_error $? "$ac_msg"
  	pwd)`
  # When building in place, set srcdir=.
  if test "$ac_abs_confdir" = "$ac_pwd"; then
***************
*** 1520,1526 ****
        --help=short        display options specific to this package
        --help=recursive    display the short help of all the included packages
    -V, --version           display version information and exit
!   -q, --quiet, --silent   do not print \`checking...' messages
        --cache-file=FILE   cache test results in FILE [disabled]
    -C, --config-cache      alias for \`--cache-file=config.cache'
    -n, --no-create         do not create output files
--- 1588,1594 ----
        --help=short        display options specific to this package
        --help=recursive    display the short help of all the included packages
    -V, --version           display version information and exit
!   -q, --quiet, --silent   do not print \`checking ...' messages
        --cache-file=FILE   cache test results in FILE [disabled]
    -C, --config-cache      alias for \`--cache-file=config.cache'
    -n, --no-create         do not create output files
***************
*** 1528,1536 ****
  
  Installation directories:
    --prefix=PREFIX         install architecture-independent files in PREFIX
! 			  [$ac_default_prefix]
    --exec-prefix=EPREFIX   install architecture-dependent files in EPREFIX
! 			  [PREFIX]
  
  By default, \`make install' will install all the files in
  \`$ac_default_prefix/bin', \`$ac_default_prefix/lib' etc.  You can specify
--- 1596,1604 ----
  
  Installation directories:
    --prefix=PREFIX         install architecture-independent files in PREFIX
!                           [$ac_default_prefix]
    --exec-prefix=EPREFIX   install architecture-dependent files in EPREFIX
!                           [PREFIX]
  
  By default, \`make install' will install all the files in
  \`$ac_default_prefix/bin', \`$ac_default_prefix/lib' etc.  You can specify
***************
*** 1540,1564 ****
  For better control, use the options below.
  
  Fine tuning of the installation directories:
!   --bindir=DIR           user executables [EPREFIX/bin]
!   --sbindir=DIR          system admin executables [EPREFIX/sbin]
!   --libexecdir=DIR       program executables [EPREFIX/libexec]
!   --sysconfdir=DIR       read-only single-machine data [PREFIX/etc]
!   --sharedstatedir=DIR   modifiable architecture-independent data [PREFIX/com]
!   --localstatedir=DIR    modifiable single-machine data [PREFIX/var]
!   --libdir=DIR           object code libraries [EPREFIX/lib]
!   --includedir=DIR       C header files [PREFIX/include]
!   --oldincludedir=DIR    C header files for non-gcc [/usr/include]
!   --datarootdir=DIR      read-only arch.-independent data root [PREFIX/share]
!   --datadir=DIR          read-only architecture-independent data [DATAROOTDIR]
!   --infodir=DIR          info documentation [DATAROOTDIR/info]
!   --localedir=DIR        locale-dependent data [DATAROOTDIR/locale]
!   --mandir=DIR           man documentation [DATAROOTDIR/man]
!   --docdir=DIR           documentation root [DATAROOTDIR/doc/PACKAGE]
!   --htmldir=DIR          html documentation [DOCDIR]
!   --dvidir=DIR           dvi documentation [DOCDIR]
!   --pdfdir=DIR           pdf documentation [DOCDIR]
!   --psdir=DIR            ps documentation [DOCDIR]
  _ACEOF
  
    cat <<\_ACEOF
--- 1608,1632 ----
  For better control, use the options below.
  
  Fine tuning of the installation directories:
!   --bindir=DIR            user executables [EPREFIX/bin]
!   --sbindir=DIR           system admin executables [EPREFIX/sbin]
!   --libexecdir=DIR        program executables [EPREFIX/libexec]
!   --sysconfdir=DIR        read-only single-machine data [PREFIX/etc]
!   --sharedstatedir=DIR    modifiable architecture-independent data [PREFIX/com]
!   --localstatedir=DIR     modifiable single-machine data [PREFIX/var]
!   --libdir=DIR            object code libraries [EPREFIX/lib]
!   --includedir=DIR        C header files [PREFIX/include]
!   --oldincludedir=DIR     C header files for non-gcc [/usr/include]
!   --datarootdir=DIR       read-only arch.-independent data root [PREFIX/share]
!   --datadir=DIR           read-only architecture-independent data [DATAROOTDIR]
!   --infodir=DIR           info documentation [DATAROOTDIR/info]
!   --localedir=DIR         locale-dependent data [DATAROOTDIR/locale]
!   --mandir=DIR            man documentation [DATAROOTDIR/man]
!   --docdir=DIR            documentation root [DATAROOTDIR/doc/PACKAGE]
!   --htmldir=DIR           html documentation [DOCDIR]
!   --dvidir=DIR            dvi documentation [DOCDIR]
!   --pdfdir=DIR            pdf documentation [DOCDIR]
!   --psdir=DIR             ps documentation [DOCDIR]
  _ACEOF
  
    cat <<\_ACEOF
***************
*** 1583,1588 ****
--- 1651,1657 ----
    cat <<\_ACEOF
  
  Optional Features:
+   --disable-option-checking  ignore unrecognized --enable/--with options
    --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
    --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
    --disable-largefile     omit support for large files
***************
*** 1643,1649 ****
    LDFLAGS     linker flags, e.g. -L<lib dir> if you have libraries in a
                nonstandard directory <lib dir>
    LIBS        libraries to pass to the linker, e.g. -l<library>
!   CPPFLAGS    C/C++/Objective C preprocessor flags, e.g. -I<include dir> if
                you have headers in a nonstandard directory <include dir>
    CXX         C++ compiler command
    CXXFLAGS    C++ compiler flags
--- 1712,1718 ----
    LDFLAGS     linker flags, e.g. -L<lib dir> if you have libraries in a
                nonstandard directory <lib dir>
    LIBS        libraries to pass to the linker, e.g. -l<library>
!   CPPFLAGS    (Objective) C/C++ preprocessor flags, e.g. -I<include dir> if
                you have headers in a nonstandard directory <include dir>
    CXX         C++ compiler command
    CXXFLAGS    C++ compiler flags
***************
*** 1696,1701 ****
--- 1765,1771 ----
  Use these variables to override the choices made by `configure' or to help
  it to find libraries and programs with nonstandard names/locations.
  
+ Report bugs to the package provider.
  _ACEOF
  ac_status=$?
  fi
***************
*** 1703,1717 ****
  if test "$ac_init_help" = "recursive"; then
    # If there are subdirs, report their specific --help.
    for ac_dir in : $ac_subdirs_all; do test "x$ac_dir" = x: && continue
!     test -d "$ac_dir" || continue
      ac_builddir=.
  
  case "$ac_dir" in
  .) ac_dir_suffix= ac_top_builddir_sub=. ac_top_build_prefix= ;;
  *)
!   ac_dir_suffix=/`echo "$ac_dir" | sed 's,^\.[\\/],,'`
    # A ".." for each directory in $ac_dir_suffix.
!   ac_top_builddir_sub=`echo "$ac_dir_suffix" | sed 's,/[^\\/]*,/..,g;s,/,,'`
    case $ac_top_builddir_sub in
    "") ac_top_builddir_sub=. ac_top_build_prefix= ;;
    *)  ac_top_build_prefix=$ac_top_builddir_sub/ ;;
--- 1773,1789 ----
  if test "$ac_init_help" = "recursive"; then
    # If there are subdirs, report their specific --help.
    for ac_dir in : $ac_subdirs_all; do test "x$ac_dir" = x: && continue
!     test -d "$ac_dir" ||
!       { cd "$srcdir" && ac_pwd=`pwd` && srcdir=. && test -d "$ac_dir"; } ||
!       continue
      ac_builddir=.
  
  case "$ac_dir" in
  .) ac_dir_suffix= ac_top_builddir_sub=. ac_top_build_prefix= ;;
  *)
!   ac_dir_suffix=/`$as_echo "$ac_dir" | sed 's|^\.[\\/]||'`
    # A ".." for each directory in $ac_dir_suffix.
!   ac_top_builddir_sub=`$as_echo "$ac_dir_suffix" | sed 's|/[^\\/]*|/..|g;s|/||'`
    case $ac_top_builddir_sub in
    "") ac_top_builddir_sub=. ac_top_build_prefix= ;;
    *)  ac_top_build_prefix=$ac_top_builddir_sub/ ;;
***************
*** 1722,1777 ****
  # for backward compatibility:
  ac_top_builddir=$ac_top_build_prefix
  
! case $srcdir in
!   .)  # We are building in place.
!     ac_srcdir=.
!     ac_top_srcdir=$ac_top_builddir_sub
!     ac_abs_top_srcdir=$ac_pwd ;;
!   [\\/]* | ?:[\\/]* )  # Absolute name.
!     ac_srcdir=$srcdir$ac_dir_suffix;
!     ac_top_srcdir=$srcdir
!     ac_abs_top_srcdir=$srcdir ;;
!   *) # Relative name.
!     ac_srcdir=$ac_top_build_prefix$srcdir$ac_dir_suffix
!     ac_top_srcdir=$ac_top_build_prefix$srcdir
!     ac_abs_top_srcdir=$ac_pwd/$srcdir ;;
  esac
! ac_abs_srcdir=$ac_abs_top_srcdir$ac_dir_suffix
  
!     cd "$ac_dir" || { ac_status=$?; continue; }
!     # Check for guested configure.
!     if test -f "$ac_srcdir/configure.gnu"; then
!       echo &&
!       $SHELL "$ac_srcdir/configure.gnu" --help=recursive
!     elif test -f "$ac_srcdir/configure"; then
!       echo &&
!       $SHELL "$ac_srcdir/configure" --help=recursive
!     else
!       echo "$as_me: WARNING: no configuration information is in $ac_dir" >&2
!     fi || ac_status=$?
!     cd "$ac_pwd" || { ac_status=$?; break; }
!   done
  fi
  
! test -n "$ac_init_help" && exit $ac_status
! if $ac_init_version; then
!   cat <<\_ACEOF
! configure
! generated by GNU Autoconf 2.61
  
! Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
! 2002, 2003, 2004, 2005, 2006 Free Software Foundation, Inc.
! This configure script is free software; the Free Software Foundation
! gives unlimited permission to copy, distribute and modify it.
  _ACEOF
!   exit
  fi
  cat >config.log <<_ACEOF
  This file contains any messages produced by compilers while
  running configure, to aid debugging if configure makes a mistake.
  
  It was created by $as_me, which was
! generated by GNU Autoconf 2.61.  Invocation command line was
  
    $ $0 $@
  
--- 1794,2459 ----
  # for backward compatibility:
  ac_top_builddir=$ac_top_build_prefix
  
! case $srcdir in
!   .)  # We are building in place.
!     ac_srcdir=.
!     ac_top_srcdir=$ac_top_builddir_sub
!     ac_abs_top_srcdir=$ac_pwd ;;
!   [\\/]* | ?:[\\/]* )  # Absolute name.
!     ac_srcdir=$srcdir$ac_dir_suffix;
!     ac_top_srcdir=$srcdir
!     ac_abs_top_srcdir=$srcdir ;;
!   *) # Relative name.
!     ac_srcdir=$ac_top_build_prefix$srcdir$ac_dir_suffix
!     ac_top_srcdir=$ac_top_build_prefix$srcdir
!     ac_abs_top_srcdir=$ac_pwd/$srcdir ;;
! esac
! ac_abs_srcdir=$ac_abs_top_srcdir$ac_dir_suffix
! 
!     cd "$ac_dir" || { ac_status=$?; continue; }
!     # Check for guested configure.
!     if test -f "$ac_srcdir/configure.gnu"; then
!       echo &&
!       $SHELL "$ac_srcdir/configure.gnu" --help=recursive
!     elif test -f "$ac_srcdir/configure"; then
!       echo &&
!       $SHELL "$ac_srcdir/configure" --help=recursive
!     else
!       $as_echo "$as_me: WARNING: no configuration information is in $ac_dir" >&2
!     fi || ac_status=$?
!     cd "$ac_pwd" || { ac_status=$?; break; }
!   done
! fi
! 
! test -n "$ac_init_help" && exit $ac_status
! if $ac_init_version; then
!   cat <<\_ACEOF
! configure
! generated by GNU Autoconf 2.68
! 
! Copyright (C) 2010 Free Software Foundation, Inc.
! This configure script is free software; the Free Software Foundation
! gives unlimited permission to copy, distribute and modify it.
! _ACEOF
!   exit
! fi
! 
! ## ------------------------ ##
! ## Autoconf initialization. ##
! ## ------------------------ ##
! 
! # ac_fn_c_try_compile LINENO
! # --------------------------
! # Try to compile conftest.$ac_ext, and return whether this succeeded.
! ac_fn_c_try_compile ()
! {
!   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
!   rm -f conftest.$ac_objext
!   if { { ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
! $as_echo "$ac_try_echo"; } >&5
!   (eval "$ac_compile") 2>conftest.err
!   ac_status=$?
!   if test -s conftest.err; then
!     grep -v '^ *+' conftest.err >conftest.er1
!     cat conftest.er1 >&5
!     mv -f conftest.er1 conftest.err
!   fi
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then :
!   ac_retval=0
! else
!   $as_echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_retval=1
! fi
!   eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
!   as_fn_set_status $ac_retval
! 
! } # ac_fn_c_try_compile
! 
! # ac_fn_cxx_try_compile LINENO
! # ----------------------------
! # Try to compile conftest.$ac_ext, and return whether this succeeded.
! ac_fn_cxx_try_compile ()
! {
!   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
!   rm -f conftest.$ac_objext
!   if { { ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
! $as_echo "$ac_try_echo"; } >&5
!   (eval "$ac_compile") 2>conftest.err
!   ac_status=$?
!   if test -s conftest.err; then
!     grep -v '^ *+' conftest.err >conftest.er1
!     cat conftest.er1 >&5
!     mv -f conftest.er1 conftest.err
!   fi
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; } && {
! 	 test -z "$ac_cxx_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then :
!   ac_retval=0
! else
!   $as_echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_retval=1
! fi
!   eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
!   as_fn_set_status $ac_retval
! 
! } # ac_fn_cxx_try_compile
! 
! # ac_fn_c_try_cpp LINENO
! # ----------------------
! # Try to preprocess conftest.$ac_ext, and return whether this succeeded.
! ac_fn_c_try_cpp ()
! {
!   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
!   if { { ac_try="$ac_cpp conftest.$ac_ext"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
! $as_echo "$ac_try_echo"; } >&5
!   (eval "$ac_cpp conftest.$ac_ext") 2>conftest.err
!   ac_status=$?
!   if test -s conftest.err; then
!     grep -v '^ *+' conftest.err >conftest.er1
!     cat conftest.er1 >&5
!     mv -f conftest.er1 conftest.err
!   fi
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; } > conftest.i && {
! 	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        }; then :
!   ac_retval=0
! else
!   $as_echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
!     ac_retval=1
! fi
!   eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
!   as_fn_set_status $ac_retval
! 
! } # ac_fn_c_try_cpp
! 
! # ac_fn_c_try_run LINENO
! # ----------------------
! # Try to link conftest.$ac_ext, and return whether this succeeded. Assumes
! # that executables *can* be run.
! ac_fn_c_try_run ()
! {
!   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
!   if { { ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
! $as_echo "$ac_try_echo"; } >&5
!   (eval "$ac_link") 2>&5
!   ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; } && { ac_try='./conftest$ac_exeext'
!   { { case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
! $as_echo "$ac_try_echo"; } >&5
!   (eval "$ac_try") 2>&5
!   ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; }; then :
!   ac_retval=0
! else
!   $as_echo "$as_me: program exited with status $ac_status" >&5
!        $as_echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
!        ac_retval=$ac_status
! fi
!   rm -rf conftest.dSYM conftest_ipa8_conftest.oo
!   eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
!   as_fn_set_status $ac_retval
! 
! } # ac_fn_c_try_run
! 
! # ac_fn_c_check_header_mongrel LINENO HEADER VAR INCLUDES
! # -------------------------------------------------------
! # Tests whether HEADER exists, giving a warning if it cannot be compiled using
! # the include files in INCLUDES and setting the cache variable VAR
! # accordingly.
! ac_fn_c_check_header_mongrel ()
! {
!   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
!   if eval \${$3+:} false; then :
!   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
! $as_echo_n "checking for $2... " >&6; }
! if eval \${$3+:} false; then :
!   $as_echo_n "(cached) " >&6
! fi
! eval ac_res=\$$3
! 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
! $as_echo "$ac_res" >&6; }
! else
!   # Is the header compilable?
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking $2 usability" >&5
! $as_echo_n "checking $2 usability... " >&6; }
! cat confdefs.h - <<_ACEOF >conftest.$ac_ext
! /* end confdefs.h.  */
! $4
! #include <$2>
! _ACEOF
! if ac_fn_c_try_compile "$LINENO"; then :
!   ac_header_compiler=yes
! else
!   ac_header_compiler=no
! fi
! rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_header_compiler" >&5
! $as_echo "$ac_header_compiler" >&6; }
! 
! # Is the header present?
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking $2 presence" >&5
! $as_echo_n "checking $2 presence... " >&6; }
! cat confdefs.h - <<_ACEOF >conftest.$ac_ext
! /* end confdefs.h.  */
! #include <$2>
! _ACEOF
! if ac_fn_c_try_cpp "$LINENO"; then :
!   ac_header_preproc=yes
! else
!   ac_header_preproc=no
! fi
! rm -f conftest.err conftest.i conftest.$ac_ext
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_header_preproc" >&5
! $as_echo "$ac_header_preproc" >&6; }
! 
! # So?  What about this header?
! case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in #((
!   yes:no: )
!     { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2: accepted by the compiler, rejected by the preprocessor!" >&5
! $as_echo "$as_me: WARNING: $2: accepted by the compiler, rejected by the preprocessor!" >&2;}
!     { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2: proceeding with the compiler's result" >&5
! $as_echo "$as_me: WARNING: $2: proceeding with the compiler's result" >&2;}
!     ;;
!   no:yes:* )
!     { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2: present but cannot be compiled" >&5
! $as_echo "$as_me: WARNING: $2: present but cannot be compiled" >&2;}
!     { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2:     check for missing prerequisite headers?" >&5
! $as_echo "$as_me: WARNING: $2:     check for missing prerequisite headers?" >&2;}
!     { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2: see the Autoconf documentation" >&5
! $as_echo "$as_me: WARNING: $2: see the Autoconf documentation" >&2;}
!     { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2:     section \"Present But Cannot Be Compiled\"" >&5
! $as_echo "$as_me: WARNING: $2:     section \"Present But Cannot Be Compiled\"" >&2;}
!     { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2: proceeding with the compiler's result" >&5
! $as_echo "$as_me: WARNING: $2: proceeding with the compiler's result" >&2;}
!     ;;
! esac
!   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
! $as_echo_n "checking for $2... " >&6; }
! if eval \${$3+:} false; then :
!   $as_echo_n "(cached) " >&6
! else
!   eval "$3=\$ac_header_compiler"
! fi
! eval ac_res=\$$3
! 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
! $as_echo "$ac_res" >&6; }
! fi
!   eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
! 
! } # ac_fn_c_check_header_mongrel
! 
! # ac_fn_c_check_header_compile LINENO HEADER VAR INCLUDES
! # -------------------------------------------------------
! # Tests whether HEADER exists and can be compiled using the include files in
! # INCLUDES, setting the cache variable VAR accordingly.
! ac_fn_c_check_header_compile ()
! {
!   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
!   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
! $as_echo_n "checking for $2... " >&6; }
! if eval \${$3+:} false; then :
!   $as_echo_n "(cached) " >&6
! else
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
! /* end confdefs.h.  */
! $4
! #include <$2>
! _ACEOF
! if ac_fn_c_try_compile "$LINENO"; then :
!   eval "$3=yes"
! else
!   eval "$3=no"
! fi
! rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
! fi
! eval ac_res=\$$3
! 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
! $as_echo "$ac_res" >&6; }
!   eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
! 
! } # ac_fn_c_check_header_compile
! 
! # ac_fn_c_try_link LINENO
! # -----------------------
! # Try to link conftest.$ac_ext, and return whether this succeeded.
! ac_fn_c_try_link ()
! {
!   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
!   rm -f conftest.$ac_objext conftest$ac_exeext
!   if { { ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
! $as_echo "$ac_try_echo"; } >&5
!   (eval "$ac_link") 2>conftest.err
!   ac_status=$?
!   if test -s conftest.err; then
!     grep -v '^ *+' conftest.err >conftest.er1
!     cat conftest.er1 >&5
!     mv -f conftest.er1 conftest.err
!   fi
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext && {
! 	 test "$cross_compiling" = yes ||
! 	 $as_test_x conftest$ac_exeext
!        }; then :
!   ac_retval=0
! else
!   $as_echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_retval=1
! fi
!   # Delete the IPA/IPO (Inter Procedural Analysis/Optimization) information
!   # created by the PGI compiler (conftest_ipa8_conftest.oo), as it would
!   # interfere with the next link command; also delete a directory that is
!   # left behind by Apple's compiler.  We do this before executing the actions.
!   rm -rf conftest.dSYM conftest_ipa8_conftest.oo
!   eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
!   as_fn_set_status $ac_retval
! 
! } # ac_fn_c_try_link
! 
! # ac_fn_c_check_func LINENO FUNC VAR
! # ----------------------------------
! # Tests whether FUNC exists, setting the cache variable VAR accordingly
! ac_fn_c_check_func ()
! {
!   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
!   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
! $as_echo_n "checking for $2... " >&6; }
! if eval \${$3+:} false; then :
!   $as_echo_n "(cached) " >&6
! else
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
! /* end confdefs.h.  */
! /* Define $2 to an innocuous variant, in case <limits.h> declares $2.
!    For example, HP-UX 11i <limits.h> declares gettimeofday.  */
! #define $2 innocuous_$2
! 
! /* System header to define __stub macros and hopefully few prototypes,
!     which can conflict with char $2 (); below.
!     Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
!     <limits.h> exists even on freestanding compilers.  */
! 
! #ifdef __STDC__
! # include <limits.h>
! #else
! # include <assert.h>
! #endif
! 
! #undef $2
! 
! /* Override any GCC internal prototype to avoid an error.
!    Use char because int might match the return type of a GCC
!    builtin and then its argument prototype would still apply.  */
! #ifdef __cplusplus
! extern "C"
! #endif
! char $2 ();
! /* The GNU C library defines this for functions which it implements
!     to always fail with ENOSYS.  Some functions are actually named
!     something starting with __ and the normal name is an alias.  */
! #if defined __stub_$2 || defined __stub___$2
! choke me
! #endif
! 
! int
! main ()
! {
! return $2 ();
!   ;
!   return 0;
! }
! _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
!   eval "$3=yes"
! else
!   eval "$3=no"
! fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
! fi
! eval ac_res=\$$3
! 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
! $as_echo "$ac_res" >&6; }
!   eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
! 
! } # ac_fn_c_check_func
! 
! # ac_fn_cxx_try_cpp LINENO
! # ------------------------
! # Try to preprocess conftest.$ac_ext, and return whether this succeeded.
! ac_fn_cxx_try_cpp ()
! {
!   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
!   if { { ac_try="$ac_cpp conftest.$ac_ext"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
! $as_echo "$ac_try_echo"; } >&5
!   (eval "$ac_cpp conftest.$ac_ext") 2>conftest.err
!   ac_status=$?
!   if test -s conftest.err; then
!     grep -v '^ *+' conftest.err >conftest.er1
!     cat conftest.er1 >&5
!     mv -f conftest.er1 conftest.err
!   fi
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; } > conftest.i && {
! 	 test -z "$ac_cxx_preproc_warn_flag$ac_cxx_werror_flag" ||
! 	 test ! -s conftest.err
!        }; then :
!   ac_retval=0
! else
!   $as_echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
!     ac_retval=1
! fi
!   eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
!   as_fn_set_status $ac_retval
! 
! } # ac_fn_cxx_try_cpp
! 
! # ac_fn_cxx_try_link LINENO
! # -------------------------
! # Try to link conftest.$ac_ext, and return whether this succeeded.
! ac_fn_cxx_try_link ()
! {
!   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
!   rm -f conftest.$ac_objext conftest$ac_exeext
!   if { { ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
! $as_echo "$ac_try_echo"; } >&5
!   (eval "$ac_link") 2>conftest.err
!   ac_status=$?
!   if test -s conftest.err; then
!     grep -v '^ *+' conftest.err >conftest.er1
!     cat conftest.er1 >&5
!     mv -f conftest.er1 conftest.err
!   fi
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; } && {
! 	 test -z "$ac_cxx_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext && {
! 	 test "$cross_compiling" = yes ||
! 	 $as_test_x conftest$ac_exeext
!        }; then :
!   ac_retval=0
! else
!   $as_echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_retval=1
! fi
!   # Delete the IPA/IPO (Inter Procedural Analysis/Optimization) information
!   # created by the PGI compiler (conftest_ipa8_conftest.oo), as it would
!   # interfere with the next link command; also delete a directory that is
!   # left behind by Apple's compiler.  We do this before executing the actions.
!   rm -rf conftest.dSYM conftest_ipa8_conftest.oo
!   eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
!   as_fn_set_status $ac_retval
! 
! } # ac_fn_cxx_try_link
! 
! # ac_fn_f77_try_compile LINENO
! # ----------------------------
! # Try to compile conftest.$ac_ext, and return whether this succeeded.
! ac_fn_f77_try_compile ()
! {
!   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
!   rm -f conftest.$ac_objext
!   if { { ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
! $as_echo "$ac_try_echo"; } >&5
!   (eval "$ac_compile") 2>conftest.err
!   ac_status=$?
!   if test -s conftest.err; then
!     grep -v '^ *+' conftest.err >conftest.er1
!     cat conftest.er1 >&5
!     mv -f conftest.er1 conftest.err
!   fi
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; } && {
! 	 test -z "$ac_f77_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then :
!   ac_retval=0
! else
!   $as_echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_retval=1
! fi
!   eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
!   as_fn_set_status $ac_retval
! 
! } # ac_fn_f77_try_compile
! 
! # ac_fn_f77_try_link LINENO
! # -------------------------
! # Try to link conftest.$ac_ext, and return whether this succeeded.
! ac_fn_f77_try_link ()
! {
!   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
!   rm -f conftest.$ac_objext conftest$ac_exeext
!   if { { ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
  esac
! eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
! $as_echo "$ac_try_echo"; } >&5
!   (eval "$ac_link") 2>conftest.err
!   ac_status=$?
!   if test -s conftest.err; then
!     grep -v '^ *+' conftest.err >conftest.er1
!     cat conftest.er1 >&5
!     mv -f conftest.er1 conftest.err
!   fi
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; } && {
! 	 test -z "$ac_f77_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext && {
! 	 test "$cross_compiling" = yes ||
! 	 $as_test_x conftest$ac_exeext
!        }; then :
!   ac_retval=0
! else
!   $as_echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
  
! 	ac_retval=1
  fi
+   # Delete the IPA/IPO (Inter Procedural Analysis/Optimization) information
+   # created by the PGI compiler (conftest_ipa8_conftest.oo), as it would
+   # interfere with the next link command; also delete a directory that is
+   # left behind by Apple's compiler.  We do this before executing the actions.
+   rm -rf conftest.dSYM conftest_ipa8_conftest.oo
+   eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
+   as_fn_set_status $ac_retval
  
! } # ac_fn_f77_try_link
  
! # ac_fn_c_check_type LINENO TYPE VAR INCLUDES
! # -------------------------------------------
! # Tests whether TYPE exists after having included INCLUDES, setting cache
! # variable VAR accordingly.
! ac_fn_c_check_type ()
! {
!   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
!   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
! $as_echo_n "checking for $2... " >&6; }
! if eval \${$3+:} false; then :
!   $as_echo_n "(cached) " >&6
! else
!   eval "$3=no"
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
! /* end confdefs.h.  */
! $4
! int
! main ()
! {
! if (sizeof ($2))
! 	 return 0;
!   ;
!   return 0;
! }
  _ACEOF
! if ac_fn_c_try_compile "$LINENO"; then :
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
! /* end confdefs.h.  */
! $4
! int
! main ()
! {
! if (sizeof (($2)))
! 	    return 0;
!   ;
!   return 0;
! }
! _ACEOF
! if ac_fn_c_try_compile "$LINENO"; then :
! 
! else
!   eval "$3=yes"
! fi
! rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
! fi
! rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  fi
+ eval ac_res=\$$3
+ 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+ $as_echo "$ac_res" >&6; }
+   eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
+ 
+ } # ac_fn_c_check_type
  cat >config.log <<_ACEOF
  This file contains any messages produced by compilers while
  running configure, to aid debugging if configure makes a mistake.
  
  It was created by $as_me, which was
! generated by GNU Autoconf 2.68.  Invocation command line was
  
    $ $0 $@
  
***************
*** 1807,1814 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   echo "PATH: $as_dir"
! done
  IFS=$as_save_IFS
  
  } >&5
--- 2489,2496 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     $as_echo "PATH: $as_dir"
!   done
  IFS=$as_save_IFS
  
  } >&5
***************
*** 1842,1853 ****
      | -silent | --silent | --silen | --sile | --sil)
        continue ;;
      *\'*)
!       ac_arg=`echo "$ac_arg" | sed "s/'/'\\\\\\\\''/g"` ;;
      esac
      case $ac_pass in
!     1) ac_configure_args0="$ac_configure_args0 '$ac_arg'" ;;
      2)
!       ac_configure_args1="$ac_configure_args1 '$ac_arg'"
        if test $ac_must_keep_next = true; then
  	ac_must_keep_next=false # Got value, back to normal.
        else
--- 2524,2535 ----
      | -silent | --silent | --silen | --sile | --sil)
        continue ;;
      *\'*)
!       ac_arg=`$as_echo "$ac_arg" | sed "s/'/'\\\\\\\\''/g"` ;;
      esac
      case $ac_pass in
!     1) as_fn_append ac_configure_args0 " '$ac_arg'" ;;
      2)
!       as_fn_append ac_configure_args1 " '$ac_arg'"
        if test $ac_must_keep_next = true; then
  	ac_must_keep_next=false # Got value, back to normal.
        else
***************
*** 1863,1875 ****
  	  -* ) ac_must_keep_next=true ;;
  	esac
        fi
!       ac_configure_args="$ac_configure_args '$ac_arg'"
        ;;
      esac
    done
  done
! $as_unset ac_configure_args0 || test "${ac_configure_args0+set}" != set || { ac_configure_args0=; export ac_configure_args0; }
! $as_unset ac_configure_args1 || test "${ac_configure_args1+set}" != set || { ac_configure_args1=; export ac_configure_args1; }
  
  # When interrupted or exit'd, cleanup temporary files, and complete
  # config.log.  We remove comments because anyway the quotes in there
--- 2545,2557 ----
  	  -* ) ac_must_keep_next=true ;;
  	esac
        fi
!       as_fn_append ac_configure_args " '$ac_arg'"
        ;;
      esac
    done
  done
! { ac_configure_args0=; unset ac_configure_args0;}
! { ac_configure_args1=; unset ac_configure_args1;}
  
  # When interrupted or exit'd, cleanup temporary files, and complete
  # config.log.  We remove comments because anyway the quotes in there
***************
*** 1881,1891 ****
    {
      echo
  
!     cat <<\_ASBOX
! ## ---------------- ##
  ## Cache variables. ##
! ## ---------------- ##
! _ASBOX
      echo
      # The following way of writing the cache mishandles newlines in values,
  (
--- 2563,2571 ----
    {
      echo
  
!     $as_echo "## ---------------- ##
  ## Cache variables. ##
! ## ---------------- ##"
      echo
      # The following way of writing the cache mishandles newlines in values,
  (
***************
*** 1894,1905 ****
      case $ac_val in #(
      *${as_nl}*)
        case $ac_var in #(
!       *_cv_*) { echo "$as_me:$LINENO: WARNING: Cache variable $ac_var contains a newline." >&5
! echo "$as_me: WARNING: Cache variable $ac_var contains a newline." >&2;} ;;
        esac
        case $ac_var in #(
        _ | IFS | as_nl) ;; #(
!       *) $as_unset $ac_var ;;
        esac ;;
      esac
    done
--- 2574,2586 ----
      case $ac_val in #(
      *${as_nl}*)
        case $ac_var in #(
!       *_cv_*) { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: cache variable $ac_var contains a newline" >&5
! $as_echo "$as_me: WARNING: cache variable $ac_var contains a newline" >&2;} ;;
        esac
        case $ac_var in #(
        _ | IFS | as_nl) ;; #(
!       BASH_ARGV | BASH_SOURCE) eval $ac_var= ;; #(
!       *) { eval $ac_var=; unset $ac_var;} ;;
        esac ;;
      esac
    done
***************
*** 1918,1983 ****
  )
      echo
  
!     cat <<\_ASBOX
! ## ----------------- ##
  ## Output variables. ##
! ## ----------------- ##
! _ASBOX
      echo
      for ac_var in $ac_subst_vars
      do
        eval ac_val=\$$ac_var
        case $ac_val in
!       *\'\''*) ac_val=`echo "$ac_val" | sed "s/'\''/'\''\\\\\\\\'\'''\''/g"`;;
        esac
!       echo "$ac_var='\''$ac_val'\''"
      done | sort
      echo
  
      if test -n "$ac_subst_files"; then
!       cat <<\_ASBOX
! ## ------------------- ##
  ## File substitutions. ##
! ## ------------------- ##
! _ASBOX
        echo
        for ac_var in $ac_subst_files
        do
  	eval ac_val=\$$ac_var
  	case $ac_val in
! 	*\'\''*) ac_val=`echo "$ac_val" | sed "s/'\''/'\''\\\\\\\\'\'''\''/g"`;;
  	esac
! 	echo "$ac_var='\''$ac_val'\''"
        done | sort
        echo
      fi
  
      if test -s confdefs.h; then
!       cat <<\_ASBOX
! ## ----------- ##
  ## confdefs.h. ##
! ## ----------- ##
! _ASBOX
        echo
        cat confdefs.h
        echo
      fi
      test "$ac_signal" != 0 &&
!       echo "$as_me: caught signal $ac_signal"
!     echo "$as_me: exit $exit_status"
    } >&5
    rm -f core *.core core.conftest.* &&
      rm -f -r conftest* confdefs* conf$$* $ac_clean_files &&
      exit $exit_status
  ' 0
  for ac_signal in 1 2 13 15; do
!   trap 'ac_signal='$ac_signal'; { (exit 1); exit 1; }' $ac_signal
  done
  ac_signal=0
  
  # confdefs.h avoids OS command line length limits that DEFS can exceed.
  rm -f -r conftest* confdefs.h
  
  # Predefined preprocessor variables.
  
  cat >>confdefs.h <<_ACEOF
--- 2599,2660 ----
  )
      echo
  
!     $as_echo "## ----------------- ##
  ## Output variables. ##
! ## ----------------- ##"
      echo
      for ac_var in $ac_subst_vars
      do
        eval ac_val=\$$ac_var
        case $ac_val in
!       *\'\''*) ac_val=`$as_echo "$ac_val" | sed "s/'\''/'\''\\\\\\\\'\'''\''/g"`;;
        esac
!       $as_echo "$ac_var='\''$ac_val'\''"
      done | sort
      echo
  
      if test -n "$ac_subst_files"; then
!       $as_echo "## ------------------- ##
  ## File substitutions. ##
! ## ------------------- ##"
        echo
        for ac_var in $ac_subst_files
        do
  	eval ac_val=\$$ac_var
  	case $ac_val in
! 	*\'\''*) ac_val=`$as_echo "$ac_val" | sed "s/'\''/'\''\\\\\\\\'\'''\''/g"`;;
  	esac
! 	$as_echo "$ac_var='\''$ac_val'\''"
        done | sort
        echo
      fi
  
      if test -s confdefs.h; then
!       $as_echo "## ----------- ##
  ## confdefs.h. ##
! ## ----------- ##"
        echo
        cat confdefs.h
        echo
      fi
      test "$ac_signal" != 0 &&
!       $as_echo "$as_me: caught signal $ac_signal"
!     $as_echo "$as_me: exit $exit_status"
    } >&5
    rm -f core *.core core.conftest.* &&
      rm -f -r conftest* confdefs* conf$$* $ac_clean_files &&
      exit $exit_status
  ' 0
  for ac_signal in 1 2 13 15; do
!   trap 'ac_signal='$ac_signal'; as_fn_exit 1' $ac_signal
  done
  ac_signal=0
  
  # confdefs.h avoids OS command line length limits that DEFS can exceed.
  rm -f -r conftest* confdefs.h
  
+ $as_echo "/* confdefs.h */" > confdefs.h
+ 
  # Predefined preprocessor variables.
  
  cat >>confdefs.h <<_ACEOF
***************
*** 2004,2048 ****
  #define PACKAGE_BUGREPORT "$PACKAGE_BUGREPORT"
  _ACEOF
  
  
  # Let the site file select an alternate cache file if it wants to.
! # Prefer explicitly selected file to automatically selected ones.
  if test -n "$CONFIG_SITE"; then
!   set x "$CONFIG_SITE"
  elif test "x$prefix" != xNONE; then
!   set x "$prefix/share/config.site" "$prefix/etc/config.site"
  else
!   set x "$ac_default_prefix/share/config.site" \
! 	"$ac_default_prefix/etc/config.site"
  fi
! shift
! for ac_site_file
  do
!   if test -r "$ac_site_file"; then
!     { echo "$as_me:$LINENO: loading site script $ac_site_file" >&5
! echo "$as_me: loading site script $ac_site_file" >&6;}
      sed 's/^/| /' "$ac_site_file" >&5
!     . "$ac_site_file"
    fi
  done
  
  if test -r "$cache_file"; then
!   # Some versions of bash will fail to source /dev/null (special
!   # files actually), so we avoid doing that.
!   if test -f "$cache_file"; then
!     { echo "$as_me:$LINENO: loading cache $cache_file" >&5
! echo "$as_me: loading cache $cache_file" >&6;}
      case $cache_file in
        [\\/]* | ?:[\\/]* ) . "$cache_file";;
        *)                      . "./$cache_file";;
      esac
    fi
  else
!   { echo "$as_me:$LINENO: creating cache $cache_file" >&5
! echo "$as_me: creating cache $cache_file" >&6;}
    >$cache_file
  fi
  
  # Check that the precious variables saved in the cache have kept the same
  # value.
  ac_cache_corrupted=false
--- 2677,2740 ----
  #define PACKAGE_BUGREPORT "$PACKAGE_BUGREPORT"
  _ACEOF
  
+ cat >>confdefs.h <<_ACEOF
+ #define PACKAGE_URL "$PACKAGE_URL"
+ _ACEOF
+ 
  
  # Let the site file select an alternate cache file if it wants to.
! # Prefer an explicitly selected file to automatically selected ones.
! ac_site_file1=NONE
! ac_site_file2=NONE
  if test -n "$CONFIG_SITE"; then
!   # We do not want a PATH search for config.site.
!   case $CONFIG_SITE in #((
!     -*)  ac_site_file1=./$CONFIG_SITE;;
!     */*) ac_site_file1=$CONFIG_SITE;;
!     *)   ac_site_file1=./$CONFIG_SITE;;
!   esac
  elif test "x$prefix" != xNONE; then
!   ac_site_file1=$prefix/share/config.site
!   ac_site_file2=$prefix/etc/config.site
  else
!   ac_site_file1=$ac_default_prefix/share/config.site
!   ac_site_file2=$ac_default_prefix/etc/config.site
  fi
! for ac_site_file in "$ac_site_file1" "$ac_site_file2"
  do
!   test "x$ac_site_file" = xNONE && continue
!   if test /dev/null != "$ac_site_file" && test -r "$ac_site_file"; then
!     { $as_echo "$as_me:${as_lineno-$LINENO}: loading site script $ac_site_file" >&5
! $as_echo "$as_me: loading site script $ac_site_file" >&6;}
      sed 's/^/| /' "$ac_site_file" >&5
!     . "$ac_site_file" \
!       || { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
! $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
! as_fn_error $? "failed to load site script $ac_site_file
! See \`config.log' for more details" "$LINENO" 5; }
    fi
  done
  
  if test -r "$cache_file"; then
!   # Some versions of bash will fail to source /dev/null (special files
!   # actually), so we avoid doing that.  DJGPP emulates it as a regular file.
!   if test /dev/null != "$cache_file" && test -f "$cache_file"; then
!     { $as_echo "$as_me:${as_lineno-$LINENO}: loading cache $cache_file" >&5
! $as_echo "$as_me: loading cache $cache_file" >&6;}
      case $cache_file in
        [\\/]* | ?:[\\/]* ) . "$cache_file";;
        *)                      . "./$cache_file";;
      esac
    fi
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: creating cache $cache_file" >&5
! $as_echo "$as_me: creating cache $cache_file" >&6;}
    >$cache_file
  fi
  
+ as_fn_append ac_header_list " stdlib.h"
+ as_fn_append ac_header_list " unistd.h"
+ as_fn_append ac_header_list " sys/param.h"
  # Check that the precious variables saved in the cache have kept the same
  # value.
  ac_cache_corrupted=false
***************
*** 2053,2112 ****
    eval ac_new_val=\$ac_env_${ac_var}_value
    case $ac_old_set,$ac_new_set in
      set,)
!       { echo "$as_me:$LINENO: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&5
! echo "$as_me: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&2;}
        ac_cache_corrupted=: ;;
      ,set)
!       { echo "$as_me:$LINENO: error: \`$ac_var' was not set in the previous run" >&5
! echo "$as_me: error: \`$ac_var' was not set in the previous run" >&2;}
        ac_cache_corrupted=: ;;
      ,);;
      *)
        if test "x$ac_old_val" != "x$ac_new_val"; then
! 	{ echo "$as_me:$LINENO: error: \`$ac_var' has changed since the previous run:" >&5
! echo "$as_me: error: \`$ac_var' has changed since the previous run:" >&2;}
! 	{ echo "$as_me:$LINENO:   former value:  $ac_old_val" >&5
! echo "$as_me:   former value:  $ac_old_val" >&2;}
! 	{ echo "$as_me:$LINENO:   current value: $ac_new_val" >&5
! echo "$as_me:   current value: $ac_new_val" >&2;}
! 	ac_cache_corrupted=:
        fi;;
    esac
    # Pass precious variables to config.status.
    if test "$ac_new_set" = set; then
      case $ac_new_val in
!     *\'*) ac_arg=$ac_var=`echo "$ac_new_val" | sed "s/'/'\\\\\\\\''/g"` ;;
      *) ac_arg=$ac_var=$ac_new_val ;;
      esac
      case " $ac_configure_args " in
        *" '$ac_arg' "*) ;; # Avoid dups.  Use of quotes ensures accuracy.
!       *) ac_configure_args="$ac_configure_args '$ac_arg'" ;;
      esac
    fi
  done
  if $ac_cache_corrupted; then
!   { echo "$as_me:$LINENO: error: changes in the environment can compromise the build" >&5
! echo "$as_me: error: changes in the environment can compromise the build" >&2;}
!   { { echo "$as_me:$LINENO: error: run \`make distclean' and/or \`rm $cache_file' and start over" >&5
! echo "$as_me: error: run \`make distclean' and/or \`rm $cache_file' and start over" >&2;}
!    { (exit 1); exit 1; }; }
! fi
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
  
  ac_ext=c
  ac_cpp='$CPP $CPPFLAGS'
--- 2745,2800 ----
    eval ac_new_val=\$ac_env_${ac_var}_value
    case $ac_old_set,$ac_new_set in
      set,)
!       { $as_echo "$as_me:${as_lineno-$LINENO}: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&5
! $as_echo "$as_me: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&2;}
        ac_cache_corrupted=: ;;
      ,set)
!       { $as_echo "$as_me:${as_lineno-$LINENO}: error: \`$ac_var' was not set in the previous run" >&5
! $as_echo "$as_me: error: \`$ac_var' was not set in the previous run" >&2;}
        ac_cache_corrupted=: ;;
      ,);;
      *)
        if test "x$ac_old_val" != "x$ac_new_val"; then
! 	# differences in whitespace do not lead to failure.
! 	ac_old_val_w=`echo x $ac_old_val`
! 	ac_new_val_w=`echo x $ac_new_val`
! 	if test "$ac_old_val_w" != "$ac_new_val_w"; then
! 	  { $as_echo "$as_me:${as_lineno-$LINENO}: error: \`$ac_var' has changed since the previous run:" >&5
! $as_echo "$as_me: error: \`$ac_var' has changed since the previous run:" >&2;}
! 	  ac_cache_corrupted=:
! 	else
! 	  { $as_echo "$as_me:${as_lineno-$LINENO}: warning: ignoring whitespace changes in \`$ac_var' since the previous run:" >&5
! $as_echo "$as_me: warning: ignoring whitespace changes in \`$ac_var' since the previous run:" >&2;}
! 	  eval $ac_var=\$ac_old_val
! 	fi
! 	{ $as_echo "$as_me:${as_lineno-$LINENO}:   former value:  \`$ac_old_val'" >&5
! $as_echo "$as_me:   former value:  \`$ac_old_val'" >&2;}
! 	{ $as_echo "$as_me:${as_lineno-$LINENO}:   current value: \`$ac_new_val'" >&5
! $as_echo "$as_me:   current value: \`$ac_new_val'" >&2;}
        fi;;
    esac
    # Pass precious variables to config.status.
    if test "$ac_new_set" = set; then
      case $ac_new_val in
!     *\'*) ac_arg=$ac_var=`$as_echo "$ac_new_val" | sed "s/'/'\\\\\\\\''/g"` ;;
      *) ac_arg=$ac_var=$ac_new_val ;;
      esac
      case " $ac_configure_args " in
        *" '$ac_arg' "*) ;; # Avoid dups.  Use of quotes ensures accuracy.
!       *) as_fn_append ac_configure_args " '$ac_arg'" ;;
      esac
    fi
  done
  if $ac_cache_corrupted; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
! $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
!   { $as_echo "$as_me:${as_lineno-$LINENO}: error: changes in the environment can compromise the build" >&5
! $as_echo "$as_me: error: changes in the environment can compromise the build" >&2;}
!   as_fn_error $? "run \`make distclean' and/or \`rm $cache_file' and start over" "$LINENO" 5
! fi
! ## -------------------- ##
! ## Main body of script. ##
! ## -------------------- ##
  
  ac_ext=c
  ac_cpp='$CPP $CPPFLAGS'
***************
*** 2160,2168 ****
    fi
  done
  if test -z "$ac_aux_dir"; then
!   { { echo "$as_me:$LINENO: error: cannot find install-sh or install.sh in \"$srcdir\" \"$srcdir/..\" \"$srcdir/../..\"" >&5
! echo "$as_me: error: cannot find install-sh or install.sh in \"$srcdir\" \"$srcdir/..\" \"$srcdir/../..\"" >&2;}
!    { (exit 1); exit 1; }; }
  fi
  
  # These three variables are undocumented and unsupported,
--- 2848,2854 ----
    fi
  done
  if test -z "$ac_aux_dir"; then
!   as_fn_error $? "cannot find install-sh, install.sh, or shtool in \"$srcdir\" \"$srcdir/..\" \"$srcdir/../..\"" "$LINENO" 5
  fi
  
  # These three variables are undocumented and unsupported,
***************
*** 2187,2208 ****
  # SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"
  # OS/2's system install, which has a completely different semantic
  # ./install, which can be erroneously created by make from ./install.sh.
! { echo "$as_me:$LINENO: checking for a BSD-compatible install" >&5
! echo $ECHO_N "checking for a BSD-compatible install... $ECHO_C" >&6; }
  if test -z "$INSTALL"; then
! if test "${ac_cv_path_install+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
  for as_dir in $PATH
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   # Account for people who put trailing slashes in PATH elements.
! case $as_dir/ in
!   ./ | .// | /cC/* | \
    /etc/* | /usr/sbin/* | /usr/etc/* | /sbin/* | /usr/afsws/bin/* | \
!   ?:\\/os2\\/install\\/* | ?:\\/OS2\\/INSTALL\\/* | \
    /usr/ucb/* ) ;;
    *)
      # OSF1 and SCO ODT 3.0 have their own names for install.
--- 2873,2895 ----
  # SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"
  # OS/2's system install, which has a completely different semantic
  # ./install, which can be erroneously created by make from ./install.sh.
! # Reject install programs that cannot install multiple files.
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for a BSD-compatible install" >&5
! $as_echo_n "checking for a BSD-compatible install... " >&6; }
  if test -z "$INSTALL"; then
! if ${ac_cv_path_install+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
  for as_dir in $PATH
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     # Account for people who put trailing slashes in PATH elements.
! case $as_dir/ in #((
!   ./ | .// | /[cC]/* | \
    /etc/* | /usr/sbin/* | /usr/etc/* | /sbin/* | /usr/afsws/bin/* | \
!   ?:[\\/]os2[\\/]install[\\/]* | ?:[\\/]OS2[\\/]INSTALL[\\/]* | \
    /usr/ucb/* ) ;;
    *)
      # OSF1 and SCO ODT 3.0 have their own names for install.
***************
*** 2220,2236 ****
  	    # program-specific install script used by HP pwplus--don't use.
  	    :
  	  else
! 	    ac_cv_path_install="$as_dir/$ac_prog$ac_exec_ext -c"
! 	    break 3
  	  fi
  	fi
        done
      done
      ;;
  esac
! done
  IFS=$as_save_IFS
  
  
  fi
    if test "${ac_cv_path_install+set}" = set; then
--- 2907,2935 ----
  	    # program-specific install script used by HP pwplus--don't use.
  	    :
  	  else
! 	    rm -rf conftest.one conftest.two conftest.dir
! 	    echo one > conftest.one
! 	    echo two > conftest.two
! 	    mkdir conftest.dir
! 	    if "$as_dir/$ac_prog$ac_exec_ext" -c conftest.one conftest.two "`pwd`/conftest.dir" &&
! 	      test -s conftest.one && test -s conftest.two &&
! 	      test -s conftest.dir/conftest.one &&
! 	      test -s conftest.dir/conftest.two
! 	    then
! 	      ac_cv_path_install="$as_dir/$ac_prog$ac_exec_ext -c"
! 	      break 3
! 	    fi
  	  fi
  	fi
        done
      done
      ;;
  esac
! 
!   done
  IFS=$as_save_IFS
  
+ rm -rf conftest.one conftest.two conftest.dir
  
  fi
    if test "${ac_cv_path_install+set}" = set; then
***************
*** 2243,2250 ****
      INSTALL=$ac_install_sh
    fi
  fi
! { echo "$as_me:$LINENO: result: $INSTALL" >&5
! echo "${ECHO_T}$INSTALL" >&6; }
  
  # Use test -z because SunOS4 sh mishandles braces in ${var-val}.
  # It thinks the first close brace ends the variable substitution.
--- 2942,2949 ----
      INSTALL=$ac_install_sh
    fi
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $INSTALL" >&5
! $as_echo "$INSTALL" >&6; }
  
  # Use test -z because SunOS4 sh mishandles braces in ${var-val}.
  # It thinks the first close brace ends the variable substitution.
***************
*** 2254,2261 ****
  
  test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'
  
! { echo "$as_me:$LINENO: checking whether build environment is sane" >&5
! echo $ECHO_N "checking whether build environment is sane... $ECHO_C" >&6; }
  # Just in case
  sleep 1
  echo timestamp > conftest.file
--- 2953,2960 ----
  
  test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether build environment is sane" >&5
! $as_echo_n "checking whether build environment is sane... " >&6; }
  # Just in case
  sleep 1
  echo timestamp > conftest.file
***************
*** 2278,2288 ****
        # if, for instance, CONFIG_SHELL is bash and it inherits a
        # broken ls alias from the environment.  This has actually
        # happened.  Such a system could not be considered "sane".
!       { { echo "$as_me:$LINENO: error: ls -t appears to fail.  Make sure there is not a broken
! alias in your environment" >&5
! echo "$as_me: error: ls -t appears to fail.  Make sure there is not a broken
! alias in your environment" >&2;}
!    { (exit 1); exit 1; }; }
     fi
  
     test "$2" = conftest.file
--- 2977,2984 ----
        # if, for instance, CONFIG_SHELL is bash and it inherits a
        # broken ls alias from the environment.  This has actually
        # happened.  Such a system could not be considered "sane".
!       as_fn_error $? "ls -t appears to fail.  Make sure there is not a broken
! alias in your environment" "$LINENO" 5
     fi
  
     test "$2" = conftest.file
***************
*** 2291,2316 ****
     # Ok.
     :
  else
!    { { echo "$as_me:$LINENO: error: newly created file is older than distributed files!
! Check your system clock" >&5
! echo "$as_me: error: newly created file is older than distributed files!
! Check your system clock" >&2;}
!    { (exit 1); exit 1; }; }
  fi
! { echo "$as_me:$LINENO: result: yes" >&5
! echo "${ECHO_T}yes" >&6; }
  test "$program_prefix" != NONE &&
    program_transform_name="s&^&$program_prefix&;$program_transform_name"
  # Use a double $ so make ignores it.
  test "$program_suffix" != NONE &&
    program_transform_name="s&\$&$program_suffix&;$program_transform_name"
! # Double any \ or $.  echo might interpret backslashes.
  # By default was `s,x,x', remove it if useless.
! cat <<\_ACEOF >conftest.sed
! s/[\\$]/&&/g;s/;s,x,x,$//
! _ACEOF
! program_transform_name=`echo $program_transform_name | sed -f conftest.sed`
! rm -f conftest.sed
  
  # expand $ac_aux_dir to an absolute path
  am_aux_dir=`cd $ac_aux_dir && pwd`
--- 2987,3006 ----
     # Ok.
     :
  else
!    as_fn_error $? "newly created file is older than distributed files!
! Check your system clock" "$LINENO" 5
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
! $as_echo "yes" >&6; }
  test "$program_prefix" != NONE &&
    program_transform_name="s&^&$program_prefix&;$program_transform_name"
  # Use a double $ so make ignores it.
  test "$program_suffix" != NONE &&
    program_transform_name="s&\$&$program_suffix&;$program_transform_name"
! # Double any \ or $.
  # By default was `s,x,x', remove it if useless.
! ac_script='s/[\\$]/&&/g;s/;s,x,x,$//'
! program_transform_name=`$as_echo "$program_transform_name" | sed "$ac_script"`
  
  # expand $ac_aux_dir to an absolute path
  am_aux_dir=`cd $ac_aux_dir && pwd`
***************
*** 2321,2342 ****
    am_missing_run="$MISSING --run "
  else
    am_missing_run=
!   { echo "$as_me:$LINENO: WARNING: \`missing' script is too old or missing" >&5
! echo "$as_me: WARNING: \`missing' script is too old or missing" >&2;}
  fi
  
! { echo "$as_me:$LINENO: checking for a thread-safe mkdir -p" >&5
! echo $ECHO_N "checking for a thread-safe mkdir -p... $ECHO_C" >&6; }
  if test -z "$MKDIR_P"; then
!   if test "${ac_cv_path_mkdir+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
  for as_dir in $PATH$PATH_SEPARATOR/opt/sfw/bin
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_prog in mkdir gmkdir; do
  	 for ac_exec_ext in '' $ac_executable_extensions; do
  	   { test -f "$as_dir/$ac_prog$ac_exec_ext" && $as_test_x "$as_dir/$ac_prog$ac_exec_ext"; } || continue
  	   case `"$as_dir/$ac_prog$ac_exec_ext" --version 2>&1` in #(
--- 3011,3032 ----
    am_missing_run="$MISSING --run "
  else
    am_missing_run=
!   { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: \`missing' script is too old or missing" >&5
! $as_echo "$as_me: WARNING: \`missing' script is too old or missing" >&2;}
  fi
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for a thread-safe mkdir -p" >&5
! $as_echo_n "checking for a thread-safe mkdir -p... " >&6; }
  if test -z "$MKDIR_P"; then
!   if ${ac_cv_path_mkdir+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
  for as_dir in $PATH$PATH_SEPARATOR/opt/sfw/bin
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_prog in mkdir gmkdir; do
  	 for ac_exec_ext in '' $ac_executable_extensions; do
  	   { test -f "$as_dir/$ac_prog$ac_exec_ext" && $as_test_x "$as_dir/$ac_prog$ac_exec_ext"; } || continue
  	   case `"$as_dir/$ac_prog$ac_exec_ext" --version 2>&1` in #(
***************
*** 2348,2358 ****
  	   esac
  	 done
         done
! done
  IFS=$as_save_IFS
  
  fi
  
    if test "${ac_cv_path_mkdir+set}" = set; then
      MKDIR_P="$ac_cv_path_mkdir -p"
    else
--- 3038,3049 ----
  	   esac
  	 done
         done
!   done
  IFS=$as_save_IFS
  
  fi
  
+   test -d ./--version && rmdir ./--version
    if test "${ac_cv_path_mkdir+set}" = set; then
      MKDIR_P="$ac_cv_path_mkdir -p"
    else
***************
*** 2360,2371 ****
      # value for MKDIR_P within a source directory, because that will
      # break other packages using the cache if that directory is
      # removed, or if the value is a relative name.
-     test -d ./--version && rmdir ./--version
      MKDIR_P="$ac_install_sh -d"
    fi
  fi
! { echo "$as_me:$LINENO: result: $MKDIR_P" >&5
! echo "${ECHO_T}$MKDIR_P" >&6; }
  
  mkdir_p="$MKDIR_P"
  case $mkdir_p in
--- 3051,3061 ----
      # value for MKDIR_P within a source directory, because that will
      # break other packages using the cache if that directory is
      # removed, or if the value is a relative name.
      MKDIR_P="$ac_install_sh -d"
    fi
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $MKDIR_P" >&5
! $as_echo "$MKDIR_P" >&6; }
  
  mkdir_p="$MKDIR_P"
  case $mkdir_p in
***************
*** 2377,2386 ****
  do
    # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_AWK+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$AWK"; then
    ac_cv_prog_AWK="$AWK" # Let the user override the test.
--- 3067,3076 ----
  do
    # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_AWK+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$AWK"; then
    ac_cv_prog_AWK="$AWK" # Let the user override the test.
***************
*** 2390,2432 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_AWK="$ac_prog"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  AWK=$ac_cv_prog_AWK
  if test -n "$AWK"; then
!   { echo "$as_me:$LINENO: result: $AWK" >&5
! echo "${ECHO_T}$AWK" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
    test -n "$AWK" && break
  done
  
! { echo "$as_me:$LINENO: checking whether ${MAKE-make} sets \$(MAKE)" >&5
! echo $ECHO_N "checking whether ${MAKE-make} sets \$(MAKE)... $ECHO_C" >&6; }
! set x ${MAKE-make}; ac_make=`echo "$2" | sed 's/+/p/g; s/[^a-zA-Z0-9_]/_/g'`
! if { as_var=ac_cv_prog_make_${ac_make}_set; eval "test \"\${$as_var+set}\" = set"; }; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    cat >conftest.make <<\_ACEOF
  SHELL = /bin/sh
  all:
  	@echo '@@@%%%=$(MAKE)=@@@%%%'
  _ACEOF
! # GNU make sometimes prints "make[1]: Entering...", which would confuse us.
  case `${MAKE-make} -f conftest.make 2>/dev/null` in
    *@@@%%%=?*=@@@%%%*)
      eval ac_cv_prog_make_${ac_make}_set=yes;;
--- 3080,3123 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_AWK="$ac_prog"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  AWK=$ac_cv_prog_AWK
  if test -n "$AWK"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $AWK" >&5
! $as_echo "$AWK" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
    test -n "$AWK" && break
  done
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether ${MAKE-make} sets \$(MAKE)" >&5
! $as_echo_n "checking whether ${MAKE-make} sets \$(MAKE)... " >&6; }
! set x ${MAKE-make}
! ac_make=`$as_echo "$2" | sed 's/+/p/g; s/[^a-zA-Z0-9_]/_/g'`
! if eval \${ac_cv_prog_make_${ac_make}_set+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    cat >conftest.make <<\_ACEOF
  SHELL = /bin/sh
  all:
  	@echo '@@@%%%=$(MAKE)=@@@%%%'
  _ACEOF
! # GNU make sometimes prints "make[1]: Entering ...", which would confuse us.
  case `${MAKE-make} -f conftest.make 2>/dev/null` in
    *@@@%%%=?*=@@@%%%*)
      eval ac_cv_prog_make_${ac_make}_set=yes;;
***************
*** 2436,2447 ****
  rm -f conftest.make
  fi
  if eval test \$ac_cv_prog_make_${ac_make}_set = yes; then
!   { echo "$as_me:$LINENO: result: yes" >&5
! echo "${ECHO_T}yes" >&6; }
    SET_MAKE=
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
    SET_MAKE="MAKE=${MAKE-make}"
  fi
  
--- 3127,3138 ----
  rm -f conftest.make
  fi
  if eval test \$ac_cv_prog_make_${ac_make}_set = yes; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
! $as_echo "yes" >&6; }
    SET_MAKE=
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
    SET_MAKE="MAKE=${MAKE-make}"
  fi
  
***************
*** 2460,2468 ****
    am__isrc=' -I$(srcdir)'
    # test to see if srcdir already configured
    if test -f $srcdir/config.status; then
!     { { echo "$as_me:$LINENO: error: source directory already configured; run \"make distclean\" there first" >&5
! echo "$as_me: error: source directory already configured; run \"make distclean\" there first" >&2;}
!    { (exit 1); exit 1; }; }
    fi
  fi
  
--- 3151,3157 ----
    am__isrc=' -I$(srcdir)'
    # test to see if srcdir already configured
    if test -f $srcdir/config.status; then
!     as_fn_error $? "source directory already configured; run \"make distclean\" there first" "$LINENO" 5
    fi
  fi
  
***************
*** 2516,2525 ****
    if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}strip", so it can be a program name with args.
  set dummy ${ac_tool_prefix}strip; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_STRIP+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$STRIP"; then
    ac_cv_prog_STRIP="$STRIP" # Let the user override the test.
--- 3205,3214 ----
    if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}strip", so it can be a program name with args.
  set dummy ${ac_tool_prefix}strip; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_STRIP+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$STRIP"; then
    ac_cv_prog_STRIP="$STRIP" # Let the user override the test.
***************
*** 2529,2553 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_STRIP="${ac_tool_prefix}strip"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  STRIP=$ac_cv_prog_STRIP
  if test -n "$STRIP"; then
!   { echo "$as_me:$LINENO: result: $STRIP" >&5
! echo "${ECHO_T}$STRIP" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 3218,3242 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_STRIP="${ac_tool_prefix}strip"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  STRIP=$ac_cv_prog_STRIP
  if test -n "$STRIP"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $STRIP" >&5
! $as_echo "$STRIP" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 2556,2565 ****
    ac_ct_STRIP=$STRIP
    # Extract the first word of "strip", so it can be a program name with args.
  set dummy strip; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_ac_ct_STRIP+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$ac_ct_STRIP"; then
    ac_cv_prog_ac_ct_STRIP="$ac_ct_STRIP" # Let the user override the test.
--- 3245,3254 ----
    ac_ct_STRIP=$STRIP
    # Extract the first word of "strip", so it can be a program name with args.
  set dummy strip; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_ac_ct_STRIP+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$ac_ct_STRIP"; then
    ac_cv_prog_ac_ct_STRIP="$ac_ct_STRIP" # Let the user override the test.
***************
*** 2569,2593 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_STRIP="strip"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_STRIP=$ac_cv_prog_ac_ct_STRIP
  if test -n "$ac_ct_STRIP"; then
!   { echo "$as_me:$LINENO: result: $ac_ct_STRIP" >&5
! echo "${ECHO_T}$ac_ct_STRIP" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
    if test "x$ac_ct_STRIP" = x; then
--- 3258,3282 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_STRIP="strip"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_STRIP=$ac_cv_prog_ac_ct_STRIP
  if test -n "$ac_ct_STRIP"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_STRIP" >&5
! $as_echo "$ac_ct_STRIP" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
    if test "x$ac_ct_STRIP" = x; then
***************
*** 2595,2606 ****
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&5
! echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&2;}
  ac_tool_warned=yes ;;
  esac
      STRIP=$ac_ct_STRIP
--- 3284,3291 ----
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
! $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
  ac_tool_warned=yes ;;
  esac
      STRIP=$ac_ct_STRIP
***************
*** 2639,2673 ****
  
  # Make sure we can run config.sub.
  $SHELL "$ac_aux_dir/config.sub" sun4 >/dev/null 2>&1 ||
!   { { echo "$as_me:$LINENO: error: cannot run $SHELL $ac_aux_dir/config.sub" >&5
! echo "$as_me: error: cannot run $SHELL $ac_aux_dir/config.sub" >&2;}
!    { (exit 1); exit 1; }; }
! 
! { echo "$as_me:$LINENO: checking build system type" >&5
! echo $ECHO_N "checking build system type... $ECHO_C" >&6; }
! if test "${ac_cv_build+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    ac_build_alias=$build_alias
  test "x$ac_build_alias" = x &&
    ac_build_alias=`$SHELL "$ac_aux_dir/config.guess"`
  test "x$ac_build_alias" = x &&
!   { { echo "$as_me:$LINENO: error: cannot guess build type; you must specify one" >&5
! echo "$as_me: error: cannot guess build type; you must specify one" >&2;}
!    { (exit 1); exit 1; }; }
  ac_cv_build=`$SHELL "$ac_aux_dir/config.sub" $ac_build_alias` ||
!   { { echo "$as_me:$LINENO: error: $SHELL $ac_aux_dir/config.sub $ac_build_alias failed" >&5
! echo "$as_me: error: $SHELL $ac_aux_dir/config.sub $ac_build_alias failed" >&2;}
!    { (exit 1); exit 1; }; }
  
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_build" >&5
! echo "${ECHO_T}$ac_cv_build" >&6; }
  case $ac_cv_build in
  *-*-*) ;;
! *) { { echo "$as_me:$LINENO: error: invalid value of canonical build" >&5
! echo "$as_me: error: invalid value of canonical build" >&2;}
!    { (exit 1); exit 1; }; };;
  esac
  build=$ac_cv_build
  ac_save_IFS=$IFS; IFS='-'
--- 3324,3350 ----
  
  # Make sure we can run config.sub.
  $SHELL "$ac_aux_dir/config.sub" sun4 >/dev/null 2>&1 ||
!   as_fn_error $? "cannot run $SHELL $ac_aux_dir/config.sub" "$LINENO" 5
! 
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking build system type" >&5
! $as_echo_n "checking build system type... " >&6; }
! if ${ac_cv_build+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    ac_build_alias=$build_alias
  test "x$ac_build_alias" = x &&
    ac_build_alias=`$SHELL "$ac_aux_dir/config.guess"`
  test "x$ac_build_alias" = x &&
!   as_fn_error $? "cannot guess build type; you must specify one" "$LINENO" 5
  ac_cv_build=`$SHELL "$ac_aux_dir/config.sub" $ac_build_alias` ||
!   as_fn_error $? "$SHELL $ac_aux_dir/config.sub $ac_build_alias failed" "$LINENO" 5
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_build" >&5
! $as_echo "$ac_cv_build" >&6; }
  case $ac_cv_build in
  *-*-*) ;;
! *) as_fn_error $? "invalid value of canonical build" "$LINENO" 5;;
  esac
  build=$ac_cv_build
  ac_save_IFS=$IFS; IFS='-'
***************
*** 2683,2710 ****
  case $build_os in *\ *) build_os=`echo "$build_os" | sed 's/ /-/g'`;; esac
  
  
! { echo "$as_me:$LINENO: checking host system type" >&5
! echo $ECHO_N "checking host system type... $ECHO_C" >&6; }
! if test "${ac_cv_host+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test "x$host_alias" = x; then
    ac_cv_host=$ac_cv_build
  else
    ac_cv_host=`$SHELL "$ac_aux_dir/config.sub" $host_alias` ||
!     { { echo "$as_me:$LINENO: error: $SHELL $ac_aux_dir/config.sub $host_alias failed" >&5
! echo "$as_me: error: $SHELL $ac_aux_dir/config.sub $host_alias failed" >&2;}
!    { (exit 1); exit 1; }; }
  fi
  
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_host" >&5
! echo "${ECHO_T}$ac_cv_host" >&6; }
  case $ac_cv_host in
  *-*-*) ;;
! *) { { echo "$as_me:$LINENO: error: invalid value of canonical host" >&5
! echo "$as_me: error: invalid value of canonical host" >&2;}
!    { (exit 1); exit 1; }; };;
  esac
  host=$ac_cv_host
  ac_save_IFS=$IFS; IFS='-'
--- 3360,3383 ----
  case $build_os in *\ *) build_os=`echo "$build_os" | sed 's/ /-/g'`;; esac
  
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking host system type" >&5
! $as_echo_n "checking host system type... " >&6; }
! if ${ac_cv_host+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test "x$host_alias" = x; then
    ac_cv_host=$ac_cv_build
  else
    ac_cv_host=`$SHELL "$ac_aux_dir/config.sub" $host_alias` ||
!     as_fn_error $? "$SHELL $ac_aux_dir/config.sub $host_alias failed" "$LINENO" 5
  fi
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_host" >&5
! $as_echo "$ac_cv_host" >&6; }
  case $ac_cv_host in
  *-*-*) ;;
! *) as_fn_error $? "invalid value of canonical host" "$LINENO" 5;;
  esac
  host=$ac_cv_host
  ac_save_IFS=$IFS; IFS='-'
***************
*** 2721,2728 ****
  
  
  
! { echo "$as_me:$LINENO: checking for native Win32" >&5
! echo $ECHO_N "checking for native Win32... $ECHO_C" >&6; }
  case "$host" in
    *-*-mingw*)
      vips_os_win32=yes
--- 3394,3401 ----
  
  
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for native Win32" >&5
! $as_echo_n "checking for native Win32... " >&6; }
  case "$host" in
    *-*-mingw*)
      vips_os_win32=yes
***************
*** 2731,2744 ****
      vips_os_win32=no
      ;;
  esac
! { echo "$as_me:$LINENO: result: $vips_os_win32" >&5
! echo "${ECHO_T}$vips_os_win32" >&6; }
  
  if test x"$vips_os_win32" = "xyes"; then
  
! cat >>confdefs.h <<\_ACEOF
! #define OS_WIN32 1
! _ACEOF
  
  
    # makes gcc use win native alignment
--- 3404,3415 ----
      vips_os_win32=no
      ;;
  esac
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $vips_os_win32" >&5
! $as_echo "$vips_os_win32" >&6; }
  
  if test x"$vips_os_win32" = "xyes"; then
  
! $as_echo "#define OS_WIN32 1" >>confdefs.h
  
  
    # makes gcc use win native alignment
***************
*** 2768,2775 ****
  
  # Cygwin/mingw need binary open to avoid CR/LF madness
  # ... should be a better way to test for this
! { echo "$as_me:$LINENO: checking for binary open needed" >&5
! echo $ECHO_N "checking for binary open needed... $ECHO_C" >&6; }
  case "$host_os" in
    cygwin* | mingw*)
      vips_binary_open=yes
--- 3439,3446 ----
  
  # Cygwin/mingw need binary open to avoid CR/LF madness
  # ... should be a better way to test for this
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for binary open needed" >&5
! $as_echo_n "checking for binary open needed... " >&6; }
  case "$host_os" in
    cygwin* | mingw*)
      vips_binary_open=yes
***************
*** 2778,2790 ****
      vips_binary_open=no
      ;;
  esac
! { echo "$as_me:$LINENO: result: $vips_binary_open" >&5
! echo "${ECHO_T}$vips_binary_open" >&6; }
  if test x"$vips_binary_open" = "xyes"; then
  
! cat >>confdefs.h <<\_ACEOF
! #define BINARY_OPEN 1
! _ACEOF
  
  fi
  
--- 3449,3459 ----
      vips_binary_open=no
      ;;
  esac
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $vips_binary_open" >&5
! $as_echo "$vips_binary_open" >&6; }
  if test x"$vips_binary_open" = "xyes"; then
  
! $as_echo "#define BINARY_OPEN 1" >>confdefs.h
  
  fi
  
***************
*** 2801,2808 ****
  .PHONY: am__doit
  END
  # If we don't find an include directive, just comment out the code.
! { echo "$as_me:$LINENO: checking for style of include used by $am_make" >&5
! echo $ECHO_N "checking for style of include used by $am_make... $ECHO_C" >&6; }
  am__include="#"
  am__quote=
  _am_result=none
--- 3470,3477 ----
  .PHONY: am__doit
  END
  # If we don't find an include directive, just comment out the code.
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for style of include used by $am_make" >&5
! $as_echo_n "checking for style of include used by $am_make... " >&6; }
  am__include="#"
  am__quote=
  _am_result=none
***************
*** 2829,2840 ****
  fi
  
  
! { echo "$as_me:$LINENO: result: $_am_result" >&5
! echo "${ECHO_T}$_am_result" >&6; }
  rm -f confinc confmf
  
  # Check whether --enable-dependency-tracking was given.
! if test "${enable_dependency_tracking+set}" = set; then
    enableval=$enable_dependency_tracking;
  fi
  
--- 3498,3509 ----
  fi
  
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $_am_result" >&5
! $as_echo "$_am_result" >&6; }
  rm -f confinc confmf
  
  # Check whether --enable-dependency-tracking was given.
! if test "${enable_dependency_tracking+set}" = set; then :
    enableval=$enable_dependency_tracking;
  fi
  
***************
*** 2859,2868 ****
  if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}gcc", so it can be a program name with args.
  set dummy ${ac_tool_prefix}gcc; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_CC+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$CC"; then
    ac_cv_prog_CC="$CC" # Let the user override the test.
--- 3528,3537 ----
  if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}gcc", so it can be a program name with args.
  set dummy ${ac_tool_prefix}gcc; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_CC+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$CC"; then
    ac_cv_prog_CC="$CC" # Let the user override the test.
***************
*** 2872,2896 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_CC="${ac_tool_prefix}gcc"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  CC=$ac_cv_prog_CC
  if test -n "$CC"; then
!   { echo "$as_me:$LINENO: result: $CC" >&5
! echo "${ECHO_T}$CC" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 3541,3565 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_CC="${ac_tool_prefix}gcc"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  CC=$ac_cv_prog_CC
  if test -n "$CC"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
! $as_echo "$CC" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 2899,2908 ****
    ac_ct_CC=$CC
    # Extract the first word of "gcc", so it can be a program name with args.
  set dummy gcc; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$ac_ct_CC"; then
    ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
--- 3568,3577 ----
    ac_ct_CC=$CC
    # Extract the first word of "gcc", so it can be a program name with args.
  set dummy gcc; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_ac_ct_CC+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$ac_ct_CC"; then
    ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
***************
*** 2912,2936 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_CC="gcc"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_CC=$ac_cv_prog_ac_ct_CC
  if test -n "$ac_ct_CC"; then
!   { echo "$as_me:$LINENO: result: $ac_ct_CC" >&5
! echo "${ECHO_T}$ac_ct_CC" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
    if test "x$ac_ct_CC" = x; then
--- 3581,3605 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_CC="gcc"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_CC=$ac_cv_prog_ac_ct_CC
  if test -n "$ac_ct_CC"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CC" >&5
! $as_echo "$ac_ct_CC" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
    if test "x$ac_ct_CC" = x; then
***************
*** 2938,2949 ****
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&5
! echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&2;}
  ac_tool_warned=yes ;;
  esac
      CC=$ac_ct_CC
--- 3607,3614 ----
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
! $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
  ac_tool_warned=yes ;;
  esac
      CC=$ac_ct_CC
***************
*** 2956,2965 ****
            if test -n "$ac_tool_prefix"; then
      # Extract the first word of "${ac_tool_prefix}cc", so it can be a program name with args.
  set dummy ${ac_tool_prefix}cc; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_CC+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$CC"; then
    ac_cv_prog_CC="$CC" # Let the user override the test.
--- 3621,3630 ----
            if test -n "$ac_tool_prefix"; then
      # Extract the first word of "${ac_tool_prefix}cc", so it can be a program name with args.
  set dummy ${ac_tool_prefix}cc; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_CC+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$CC"; then
    ac_cv_prog_CC="$CC" # Let the user override the test.
***************
*** 2969,2993 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_CC="${ac_tool_prefix}cc"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  CC=$ac_cv_prog_CC
  if test -n "$CC"; then
!   { echo "$as_me:$LINENO: result: $CC" >&5
! echo "${ECHO_T}$CC" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 3634,3658 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_CC="${ac_tool_prefix}cc"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  CC=$ac_cv_prog_CC
  if test -n "$CC"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
! $as_echo "$CC" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 2996,3005 ****
  if test -z "$CC"; then
    # Extract the first word of "cc", so it can be a program name with args.
  set dummy cc; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_CC+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$CC"; then
    ac_cv_prog_CC="$CC" # Let the user override the test.
--- 3661,3670 ----
  if test -z "$CC"; then
    # Extract the first word of "cc", so it can be a program name with args.
  set dummy cc; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_CC+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$CC"; then
    ac_cv_prog_CC="$CC" # Let the user override the test.
***************
*** 3010,3027 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      if test "$as_dir/$ac_word$ac_exec_ext" = "/usr/ucb/cc"; then
         ac_prog_rejected=yes
         continue
       fi
      ac_cv_prog_CC="cc"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  if test $ac_prog_rejected = yes; then
--- 3675,3692 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      if test "$as_dir/$ac_word$ac_exec_ext" = "/usr/ucb/cc"; then
         ac_prog_rejected=yes
         continue
       fi
      ac_cv_prog_CC="cc"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  if test $ac_prog_rejected = yes; then
***************
*** 3040,3050 ****
  fi
  CC=$ac_cv_prog_CC
  if test -n "$CC"; then
!   { echo "$as_me:$LINENO: result: $CC" >&5
! echo "${ECHO_T}$CC" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 3705,3715 ----
  fi
  CC=$ac_cv_prog_CC
  if test -n "$CC"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
! $as_echo "$CC" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 3055,3064 ****
    do
      # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
  set dummy $ac_tool_prefix$ac_prog; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_CC+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$CC"; then
    ac_cv_prog_CC="$CC" # Let the user override the test.
--- 3720,3729 ----
    do
      # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
  set dummy $ac_tool_prefix$ac_prog; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_CC+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$CC"; then
    ac_cv_prog_CC="$CC" # Let the user override the test.
***************
*** 3068,3092 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_CC="$ac_tool_prefix$ac_prog"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  CC=$ac_cv_prog_CC
  if test -n "$CC"; then
!   { echo "$as_me:$LINENO: result: $CC" >&5
! echo "${ECHO_T}$CC" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 3733,3757 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_CC="$ac_tool_prefix$ac_prog"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  CC=$ac_cv_prog_CC
  if test -n "$CC"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
! $as_echo "$CC" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 3099,3108 ****
  do
    # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$ac_ct_CC"; then
    ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
--- 3764,3773 ----
  do
    # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_ac_ct_CC+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$ac_ct_CC"; then
    ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
***************
*** 3112,3136 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_CC="$ac_prog"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_CC=$ac_cv_prog_ac_ct_CC
  if test -n "$ac_ct_CC"; then
!   { echo "$as_me:$LINENO: result: $ac_ct_CC" >&5
! echo "${ECHO_T}$ac_ct_CC" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 3777,3801 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_CC="$ac_prog"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_CC=$ac_cv_prog_ac_ct_CC
  if test -n "$ac_ct_CC"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CC" >&5
! $as_echo "$ac_ct_CC" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 3142,3153 ****
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&5
! echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&2;}
  ac_tool_warned=yes ;;
  esac
      CC=$ac_ct_CC
--- 3807,3814 ----
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
! $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
  ac_tool_warned=yes ;;
  esac
      CC=$ac_ct_CC
***************
*** 3157,3207 ****
  fi
  
  
! test -z "$CC" && { { echo "$as_me:$LINENO: error: no acceptable C compiler found in \$PATH
! See \`config.log' for more details." >&5
! echo "$as_me: error: no acceptable C compiler found in \$PATH
! See \`config.log' for more details." >&2;}
!    { (exit 1); exit 1; }; }
  
  # Provide some information about the compiler.
! echo "$as_me:$LINENO: checking for C compiler version" >&5
! ac_compiler=`set X $ac_compile; echo $2`
! { (ac_try="$ac_compiler --version >&5"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compiler --version >&5") 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }
! { (ac_try="$ac_compiler -v >&5"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compiler -v >&5") 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }
! { (ac_try="$ac_compiler -V >&5"
  case "(($ac_try" in
    *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
    *) ac_try_echo=$ac_try;;
  esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compiler -V >&5") 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }
  
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  int
--- 3818,3854 ----
  fi
  
  
! test -z "$CC" && { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
! $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
! as_fn_error $? "no acceptable C compiler found in \$PATH
! See \`config.log' for more details" "$LINENO" 5; }
  
  # Provide some information about the compiler.
! $as_echo "$as_me:${as_lineno-$LINENO}: checking for C compiler version" >&5
! set X $ac_compile
! ac_compiler=$2
! for ac_option in --version -v -V -qversion; do
!   { { ac_try="$ac_compiler $ac_option >&5"
  case "(($ac_try" in
    *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
    *) ac_try_echo=$ac_try;;
  esac
! eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
! $as_echo "$ac_try_echo"; } >&5
!   (eval "$ac_compiler $ac_option >&5") 2>conftest.err
    ac_status=$?
!   if test -s conftest.err; then
!     sed '10a\
! ... rest of stderr output deleted ...
!          10q' conftest.err >conftest.er1
!     cat conftest.er1 >&5
!   fi
!   rm -f conftest.er1 conftest.err
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }
! done
  
! cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  int
***************
*** 3213,3254 ****
  }
  _ACEOF
  ac_clean_files_save=$ac_clean_files
! ac_clean_files="$ac_clean_files a.out a.exe b.out"
  # Try to create an executable without -o first, disregard a.out.
  # It will help us diagnose broken compilers, and finding out an intuition
  # of exeext.
! { echo "$as_me:$LINENO: checking for C compiler default output file name" >&5
! echo $ECHO_N "checking for C compiler default output file name... $ECHO_C" >&6; }
! ac_link_default=`echo "$ac_link" | sed 's/ -o *conftest[^ ]*//'`
! #
! # List of possible output files, starting from the most likely.
! # The algorithm is not robust to junk in `.', hence go to wildcards (a.*)
! # only as a last resort.  b.out is created by i960 compilers.
! ac_files='a_out.exe a.exe conftest.exe a.out conftest a.* conftest.* b.out'
! #
! # The IRIX 6 linker writes into existing files which may not be
! # executable, retaining their permissions.  Remove them first so a
! # subsequent execution test works.
  ac_rmfiles=
  for ac_file in $ac_files
  do
    case $ac_file in
!     *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.o | *.obj ) ;;
      * ) ac_rmfiles="$ac_rmfiles $ac_file";;
    esac
  done
  rm -f $ac_rmfiles
  
! if { (ac_try="$ac_link_default"
  case "(($ac_try" in
    *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
    *) ac_try_echo=$ac_try;;
  esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
    (eval "$ac_link_default") 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
    # Autoconf-2.13 could set the ac_cv_exeext variable to `no'.
  # So ignore a value of `no', otherwise this would lead to `EXEEXT = no'
  # in a Makefile.  We should not override ac_cv_exeext if it was cached,
--- 3860,3897 ----
  }
  _ACEOF
  ac_clean_files_save=$ac_clean_files
! ac_clean_files="$ac_clean_files a.out a.out.dSYM a.exe b.out"
  # Try to create an executable without -o first, disregard a.out.
  # It will help us diagnose broken compilers, and finding out an intuition
  # of exeext.
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the C compiler works" >&5
! $as_echo_n "checking whether the C compiler works... " >&6; }
! ac_link_default=`$as_echo "$ac_link" | sed 's/ -o *conftest[^ ]*//'`
! 
! # The possible output files:
! ac_files="a.out conftest.exe conftest a.exe a_out.exe b.out conftest.*"
! 
  ac_rmfiles=
  for ac_file in $ac_files
  do
    case $ac_file in
!     *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.dSYM | *.o | *.obj ) ;;
      * ) ac_rmfiles="$ac_rmfiles $ac_file";;
    esac
  done
  rm -f $ac_rmfiles
  
! if { { ac_try="$ac_link_default"
  case "(($ac_try" in
    *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
    *) ac_try_echo=$ac_try;;
  esac
! eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
! $as_echo "$ac_try_echo"; } >&5
    (eval "$ac_link_default") 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then :
    # Autoconf-2.13 could set the ac_cv_exeext variable to `no'.
  # So ignore a value of `no', otherwise this would lead to `EXEEXT = no'
  # in a Makefile.  We should not override ac_cv_exeext if it was cached,
***************
*** 3258,3271 ****
  do
    test -f "$ac_file" || continue
    case $ac_file in
!     *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.o | *.obj )
  	;;
      [ab].out )
  	# We found the default executable, but exeext='' is most
  	# certainly right.
  	break;;
      *.* )
!         if test "${ac_cv_exeext+set}" = set && test "$ac_cv_exeext" != no;
  	then :; else
  	   ac_cv_exeext=`expr "$ac_file" : '[^.]*\(\..*\)'`
  	fi
--- 3901,3914 ----
  do
    test -f "$ac_file" || continue
    case $ac_file in
!     *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.dSYM | *.o | *.obj )
  	;;
      [ab].out )
  	# We found the default executable, but exeext='' is most
  	# certainly right.
  	break;;
      *.* )
! 	if test "${ac_cv_exeext+set}" = set && test "$ac_cv_exeext" != no;
  	then :; else
  	   ac_cv_exeext=`expr "$ac_file" : '[^.]*\(\..*\)'`
  	fi
***************
*** 3284,3361 ****
  else
    ac_file=''
  fi
! 
! { echo "$as_me:$LINENO: result: $ac_file" >&5
! echo "${ECHO_T}$ac_file" >&6; }
! if test -z "$ac_file"; then
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! { { echo "$as_me:$LINENO: error: C compiler cannot create executables
! See \`config.log' for more details." >&5
! echo "$as_me: error: C compiler cannot create executables
! See \`config.log' for more details." >&2;}
!    { (exit 77); exit 77; }; }
! fi
! 
  ac_exeext=$ac_cv_exeext
  
! # Check that the compiler produces executables we can run.  If not, either
! # the compiler is broken, or we cross compile.
! { echo "$as_me:$LINENO: checking whether the C compiler works" >&5
! echo $ECHO_N "checking whether the C compiler works... $ECHO_C" >&6; }
! # FIXME: These cross compiler hacks should be removed for Autoconf 3.0
! # If not cross compiling, check that we can run a simple program.
! if test "$cross_compiling" != yes; then
!   if { ac_try='./$ac_file'
!   { (case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_try") 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!     cross_compiling=no
!   else
!     if test "$cross_compiling" = maybe; then
! 	cross_compiling=yes
!     else
! 	{ { echo "$as_me:$LINENO: error: cannot run C compiled programs.
! If you meant to cross compile, use \`--host'.
! See \`config.log' for more details." >&5
! echo "$as_me: error: cannot run C compiled programs.
! If you meant to cross compile, use \`--host'.
! See \`config.log' for more details." >&2;}
!    { (exit 1); exit 1; }; }
!     fi
!   fi
! fi
! { echo "$as_me:$LINENO: result: yes" >&5
! echo "${ECHO_T}yes" >&6; }
! 
! rm -f a.out a.exe conftest$ac_cv_exeext b.out
  ac_clean_files=$ac_clean_files_save
! # Check that the compiler produces executables we can run.  If not, either
! # the compiler is broken, or we cross compile.
! { echo "$as_me:$LINENO: checking whether we are cross compiling" >&5
! echo $ECHO_N "checking whether we are cross compiling... $ECHO_C" >&6; }
! { echo "$as_me:$LINENO: result: $cross_compiling" >&5
! echo "${ECHO_T}$cross_compiling" >&6; }
! 
! { echo "$as_me:$LINENO: checking for suffix of executables" >&5
! echo $ECHO_N "checking for suffix of executables... $ECHO_C" >&6; }
! if { (ac_try="$ac_link"
  case "(($ac_try" in
    *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
    *) ac_try_echo=$ac_try;;
  esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
    (eval "$ac_link") 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
    # If both `conftest.exe' and `conftest' are `present' (well, observable)
  # catch `conftest.exe'.  For instance with Cygwin, `ls conftest' will
  # work properly (i.e., refer to `conftest.exe'), while it won't with
--- 3927,3967 ----
  else
    ac_file=''
  fi
! if test -z "$ac_file"; then :
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
! $as_echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
! $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
! as_fn_error 77 "C compiler cannot create executables
! See \`config.log' for more details" "$LINENO" 5; }
! else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
! $as_echo "yes" >&6; }
! fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for C compiler default output file name" >&5
! $as_echo_n "checking for C compiler default output file name... " >&6; }
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_file" >&5
! $as_echo "$ac_file" >&6; }
  ac_exeext=$ac_cv_exeext
  
! rm -f -r a.out a.out.dSYM a.exe conftest$ac_cv_exeext b.out
  ac_clean_files=$ac_clean_files_save
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for suffix of executables" >&5
! $as_echo_n "checking for suffix of executables... " >&6; }
! if { { ac_try="$ac_link"
  case "(($ac_try" in
    *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
    *) ac_try_echo=$ac_try;;
  esac
! eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
! $as_echo "$ac_try_echo"; } >&5
    (eval "$ac_link") 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then :
    # If both `conftest.exe' and `conftest' are `present' (well, observable)
  # catch `conftest.exe'.  For instance with Cygwin, `ls conftest' will
  # work properly (i.e., refer to `conftest.exe'), while it won't with
***************
*** 3363,3399 ****
  for ac_file in conftest.exe conftest conftest.*; do
    test -f "$ac_file" || continue
    case $ac_file in
!     *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.o | *.obj ) ;;
      *.* ) ac_cv_exeext=`expr "$ac_file" : '[^.]*\(\..*\)'`
  	  break;;
      * ) break;;
    esac
  done
  else
!   { { echo "$as_me:$LINENO: error: cannot compute suffix of executables: cannot compile and link
! See \`config.log' for more details." >&5
! echo "$as_me: error: cannot compute suffix of executables: cannot compile and link
! See \`config.log' for more details." >&2;}
!    { (exit 1); exit 1; }; }
! fi
! 
! rm -f conftest$ac_cv_exeext
! { echo "$as_me:$LINENO: result: $ac_cv_exeext" >&5
! echo "${ECHO_T}$ac_cv_exeext" >&6; }
  
  rm -f conftest.$ac_ext
  EXEEXT=$ac_cv_exeext
  ac_exeext=$EXEEXT
! { echo "$as_me:$LINENO: checking for suffix of object files" >&5
! echo $ECHO_N "checking for suffix of object files... $ECHO_C" >&6; }
! if test "${ac_cv_objext+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
  _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  int
--- 3969,4058 ----
  for ac_file in conftest.exe conftest conftest.*; do
    test -f "$ac_file" || continue
    case $ac_file in
!     *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.dSYM | *.o | *.obj ) ;;
      *.* ) ac_cv_exeext=`expr "$ac_file" : '[^.]*\(\..*\)'`
  	  break;;
      * ) break;;
    esac
  done
  else
!   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
! $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
! as_fn_error $? "cannot compute suffix of executables: cannot compile and link
! See \`config.log' for more details" "$LINENO" 5; }
! fi
! rm -f conftest conftest$ac_cv_exeext
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_exeext" >&5
! $as_echo "$ac_cv_exeext" >&6; }
  
  rm -f conftest.$ac_ext
  EXEEXT=$ac_cv_exeext
  ac_exeext=$EXEEXT
! cat confdefs.h - <<_ACEOF >conftest.$ac_ext
! /* end confdefs.h.  */
! #include <stdio.h>
! int
! main ()
! {
! FILE *f = fopen ("conftest.out", "w");
!  return ferror (f) || fclose (f) != 0;
! 
!   ;
!   return 0;
! }
  _ACEOF
! ac_clean_files="$ac_clean_files conftest.out"
! # Check that the compiler produces executables we can run.  If not, either
! # the compiler is broken, or we cross compile.
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether we are cross compiling" >&5
! $as_echo_n "checking whether we are cross compiling... " >&6; }
! if test "$cross_compiling" != yes; then
!   { { ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
! $as_echo "$ac_try_echo"; } >&5
!   (eval "$ac_link") 2>&5
!   ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }
!   if { ac_try='./conftest$ac_cv_exeext'
!   { { case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
! $as_echo "$ac_try_echo"; } >&5
!   (eval "$ac_try") 2>&5
!   ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; }; then
!     cross_compiling=no
!   else
!     if test "$cross_compiling" = maybe; then
! 	cross_compiling=yes
!     else
! 	{ { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
! $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
! as_fn_error $? "cannot run C compiled programs.
! If you meant to cross compile, use \`--host'.
! See \`config.log' for more details" "$LINENO" 5; }
!     fi
!   fi
! fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $cross_compiling" >&5
! $as_echo "$cross_compiling" >&6; }
! 
! rm -f conftest.$ac_ext conftest$ac_cv_exeext conftest.out
! ac_clean_files=$ac_clean_files_save
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for suffix of object files" >&5
! $as_echo_n "checking for suffix of object files... " >&6; }
! if ${ac_cv_objext+:} false; then :
!   $as_echo_n "(cached) " >&6
! else
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  int
***************
*** 3405,3455 ****
  }
  _ACEOF
  rm -f conftest.o conftest.obj
! if { (ac_try="$ac_compile"
  case "(($ac_try" in
    *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
    *) ac_try_echo=$ac_try;;
  esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
    (eval "$ac_compile") 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
    for ac_file in conftest.o conftest.obj conftest.*; do
    test -f "$ac_file" || continue;
    case $ac_file in
!     *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf ) ;;
      *) ac_cv_objext=`expr "$ac_file" : '.*\.\(.*\)'`
         break;;
    esac
  done
  else
!   echo "$as_me: failed program was:" >&5
  sed 's/^/| /' conftest.$ac_ext >&5
  
! { { echo "$as_me:$LINENO: error: cannot compute suffix of object files: cannot compile
! See \`config.log' for more details." >&5
! echo "$as_me: error: cannot compute suffix of object files: cannot compile
! See \`config.log' for more details." >&2;}
!    { (exit 1); exit 1; }; }
  fi
- 
  rm -f conftest.$ac_cv_objext conftest.$ac_ext
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_objext" >&5
! echo "${ECHO_T}$ac_cv_objext" >&6; }
  OBJEXT=$ac_cv_objext
  ac_objext=$OBJEXT
! { echo "$as_me:$LINENO: checking whether we are using the GNU C compiler" >&5
! echo $ECHO_N "checking whether we are using the GNU C compiler... $ECHO_C" >&6; }
! if test "${ac_cv_c_compiler_gnu+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  int
--- 4064,4109 ----
  }
  _ACEOF
  rm -f conftest.o conftest.obj
! if { { ac_try="$ac_compile"
  case "(($ac_try" in
    *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
    *) ac_try_echo=$ac_try;;
  esac
! eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
! $as_echo "$ac_try_echo"; } >&5
    (eval "$ac_compile") 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then :
    for ac_file in conftest.o conftest.obj conftest.*; do
    test -f "$ac_file" || continue;
    case $ac_file in
!     *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.map | *.inf | *.dSYM ) ;;
      *) ac_cv_objext=`expr "$ac_file" : '.*\.\(.*\)'`
         break;;
    esac
  done
  else
!   $as_echo "$as_me: failed program was:" >&5
  sed 's/^/| /' conftest.$ac_ext >&5
  
! { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
! $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
! as_fn_error $? "cannot compute suffix of object files: cannot compile
! See \`config.log' for more details" "$LINENO" 5; }
  fi
  rm -f conftest.$ac_cv_objext conftest.$ac_ext
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_objext" >&5
! $as_echo "$ac_cv_objext" >&6; }
  OBJEXT=$ac_cv_objext
  ac_objext=$OBJEXT
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether we are using the GNU C compiler" >&5
! $as_echo_n "checking whether we are using the GNU C compiler... " >&6; }
! if ${ac_cv_c_compiler_gnu+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  int
***************
*** 3463,3493 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
    ac_compiler_gnu=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_compiler_gnu=no
  fi
- 
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  ac_cv_c_compiler_gnu=$ac_compiler_gnu
  
--- 4117,4127 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_compile "$LINENO"; then :
    ac_compiler_gnu=yes
  else
!   ac_compiler_gnu=no
  fi
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  ac_cv_c_compiler_gnu=$ac_compiler_gnu
  
***************
*** 3492,3516 ****
  ac_cv_c_compiler_gnu=$ac_compiler_gnu
  
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_c_compiler_gnu" >&5
! echo "${ECHO_T}$ac_cv_c_compiler_gnu" >&6; }
! GCC=`test $ac_compiler_gnu = yes && echo yes`
  ac_test_CFLAGS=${CFLAGS+set}
  ac_save_CFLAGS=$CFLAGS
! { echo "$as_me:$LINENO: checking whether $CC accepts -g" >&5
! echo $ECHO_N "checking whether $CC accepts -g... $ECHO_C" >&6; }
! if test "${ac_cv_prog_cc_g+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    ac_save_c_werror_flag=$ac_c_werror_flag
     ac_c_werror_flag=yes
     ac_cv_prog_cc_g=no
     CFLAGS="-g"
!    cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  int
--- 4126,4150 ----
  ac_cv_c_compiler_gnu=$ac_compiler_gnu
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_compiler_gnu" >&5
! $as_echo "$ac_cv_c_compiler_gnu" >&6; }
! if test $ac_compiler_gnu = yes; then
!   GCC=yes
! else
!   GCC=
! fi
  ac_test_CFLAGS=${CFLAGS+set}
  ac_save_CFLAGS=$CFLAGS
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $CC accepts -g" >&5
! $as_echo_n "checking whether $CC accepts -g... " >&6; }
! if ${ac_cv_prog_cc_g+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    ac_save_c_werror_flag=$ac_c_werror_flag
     ac_c_werror_flag=yes
     ac_cv_prog_cc_g=no
     CFLAGS="-g"
!    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  int
***************
*** 3521,3554 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
    ac_cv_prog_cc_g=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	CFLAGS=""
!       cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  int
--- 4155,4165 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_compile "$LINENO"; then :
    ac_cv_prog_cc_g=yes
  else
!   CFLAGS=""
!       cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  int
***************
*** 3559,3593 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
!   :
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
  
! 	ac_c_werror_flag=$ac_save_c_werror_flag
  	 CFLAGS="-g"
! 	 cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  int
--- 4170,4181 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_compile "$LINENO"; then :
  
! else
!   ac_c_werror_flag=$ac_save_c_werror_flag
  	 CFLAGS="-g"
! 	 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  int
***************
*** 3598,3634 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
    ac_cv_prog_cc_g=yes
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
- 
  fi
- 
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  fi
- 
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  fi
- 
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
     ac_c_werror_flag=$ac_save_c_werror_flag
  fi
--- 4186,4198 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_compile "$LINENO"; then :
    ac_cv_prog_cc_g=yes
  fi
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  fi
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  fi
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
     ac_c_werror_flag=$ac_save_c_werror_flag
  fi
***************
*** 3632,3639 ****
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
     ac_c_werror_flag=$ac_save_c_werror_flag
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_prog_cc_g" >&5
! echo "${ECHO_T}$ac_cv_prog_cc_g" >&6; }
  if test "$ac_test_CFLAGS" = set; then
    CFLAGS=$ac_save_CFLAGS
  elif test $ac_cv_prog_cc_g = yes; then
--- 4196,4203 ----
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
     ac_c_werror_flag=$ac_save_c_werror_flag
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_g" >&5
! $as_echo "$ac_cv_prog_cc_g" >&6; }
  if test "$ac_test_CFLAGS" = set; then
    CFLAGS=$ac_save_CFLAGS
  elif test $ac_cv_prog_cc_g = yes; then
***************
*** 3649,3666 ****
      CFLAGS=
    fi
  fi
! { echo "$as_me:$LINENO: checking for $CC option to accept ISO C89" >&5
! echo $ECHO_N "checking for $CC option to accept ISO C89... $ECHO_C" >&6; }
! if test "${ac_cv_prog_cc_c89+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    ac_cv_prog_cc_c89=no
  ac_save_CC=$CC
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <stdarg.h>
  #include <stdio.h>
--- 4213,4226 ----
      CFLAGS=
    fi
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $CC option to accept ISO C89" >&5
! $as_echo_n "checking for $CC option to accept ISO C89... " >&6; }
! if ${ac_cv_prog_cc_c89+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    ac_cv_prog_cc_c89=no
  ac_save_CC=$CC
! cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <stdarg.h>
  #include <stdio.h>
***************
*** 3717,3747 ****
  	-Ae "-Aa -D_HPUX_SOURCE" "-Xc -D__EXTENSIONS__"
  do
    CC="$ac_save_CC $ac_arg"
!   rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
    ac_cv_prog_cc_c89=$ac_arg
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
- 
  fi
- 
  rm -f core conftest.err conftest.$ac_objext
    test "x$ac_cv_prog_cc_c89" != "xno" && break
  done
--- 4277,4285 ----
  	-Ae "-Aa -D_HPUX_SOURCE" "-Xc -D__EXTENSIONS__"
  do
    CC="$ac_save_CC $ac_arg"
!   if ac_fn_c_try_compile "$LINENO"; then :
    ac_cv_prog_cc_c89=$ac_arg
  fi
  rm -f core conftest.err conftest.$ac_objext
    test "x$ac_cv_prog_cc_c89" != "xno" && break
  done
***************
*** 3752,3768 ****
  # AC_CACHE_VAL
  case "x$ac_cv_prog_cc_c89" in
    x)
!     { echo "$as_me:$LINENO: result: none needed" >&5
! echo "${ECHO_T}none needed" >&6; } ;;
    xno)
!     { echo "$as_me:$LINENO: result: unsupported" >&5
! echo "${ECHO_T}unsupported" >&6; } ;;
    *)
      CC="$CC $ac_cv_prog_cc_c89"
!     { echo "$as_me:$LINENO: result: $ac_cv_prog_cc_c89" >&5
! echo "${ECHO_T}$ac_cv_prog_cc_c89" >&6; } ;;
  esac
  
  
  ac_ext=c
  ac_cpp='$CPP $CPPFLAGS'
--- 4290,4308 ----
  # AC_CACHE_VAL
  case "x$ac_cv_prog_cc_c89" in
    x)
!     { $as_echo "$as_me:${as_lineno-$LINENO}: result: none needed" >&5
! $as_echo "none needed" >&6; } ;;
    xno)
!     { $as_echo "$as_me:${as_lineno-$LINENO}: result: unsupported" >&5
! $as_echo "unsupported" >&6; } ;;
    *)
      CC="$CC $ac_cv_prog_cc_c89"
!     { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_c89" >&5
! $as_echo "$ac_cv_prog_cc_c89" >&6; } ;;
  esac
+ if test "x$ac_cv_prog_cc_c89" != xno; then :
  
+ fi
  
  ac_ext=c
  ac_cpp='$CPP $CPPFLAGS'
***************
*** 3772,3781 ****
  
  depcc="$CC"   am_compiler_list=
  
! { echo "$as_me:$LINENO: checking dependency style of $depcc" >&5
! echo $ECHO_N "checking dependency style of $depcc... $ECHO_C" >&6; }
! if test "${am_cv_CC_dependencies_compiler_type+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -z "$AMDEP_TRUE" && test -f "$am_depcomp"; then
    # We make a subdir and do the tests there.  Otherwise we can end up
--- 4312,4321 ----
  
  depcc="$CC"   am_compiler_list=
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking dependency style of $depcc" >&5
! $as_echo_n "checking dependency style of $depcc... " >&6; }
! if ${am_cv_CC_dependencies_compiler_type+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -z "$AMDEP_TRUE" && test -f "$am_depcomp"; then
    # We make a subdir and do the tests there.  Otherwise we can end up
***************
*** 3863,3870 ****
  fi
  
  fi
! { echo "$as_me:$LINENO: result: $am_cv_CC_dependencies_compiler_type" >&5
! echo "${ECHO_T}$am_cv_CC_dependencies_compiler_type" >&6; }
  CCDEPMODE=depmode=$am_cv_CC_dependencies_compiler_type
  
   if
--- 4403,4410 ----
  fi
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $am_cv_CC_dependencies_compiler_type" >&5
! $as_echo "$am_cv_CC_dependencies_compiler_type" >&6; }
  CCDEPMODE=depmode=$am_cv_CC_dependencies_compiler_type
  
   if
***************
*** 3880,3895 ****
  
  
  # Check whether --enable-largefile was given.
! if test "${enable_largefile+set}" = set; then
    enableval=$enable_largefile;
  fi
  
  if test "$enable_largefile" != no; then
  
!   { echo "$as_me:$LINENO: checking for special C compiler options needed for large files" >&5
! echo $ECHO_N "checking for special C compiler options needed for large files... $ECHO_C" >&6; }
! if test "${ac_cv_sys_largefile_CC+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    ac_cv_sys_largefile_CC=no
       if test "$GCC" != yes; then
--- 4420,4435 ----
  
  
  # Check whether --enable-largefile was given.
! if test "${enable_largefile+set}" = set; then :
    enableval=$enable_largefile;
  fi
  
  if test "$enable_largefile" != no; then
  
!   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for special C compiler options needed for large files" >&5
! $as_echo_n "checking for special C compiler options needed for large files... " >&6; }
! if ${ac_cv_sys_largefile_CC+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    ac_cv_sys_largefile_CC=no
       if test "$GCC" != yes; then
***************
*** 3897,3907 ****
         while :; do
  	 # IRIX 6.2 and later do not support large files by default,
  	 # so use the C compiler's -n32 option if that helps.
! 	 cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <sys/types.h>
   /* Check that off_t can represent 2**63 - 1 correctly.
--- 4437,4443 ----
         while :; do
  	 # IRIX 6.2 and later do not support large files by default,
  	 # so use the C compiler's -n32 option if that helps.
! 	 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <sys/types.h>
   /* Check that off_t can represent 2**63 - 1 correctly.
***************
*** 3920,3977 ****
    return 0;
  }
  _ACEOF
! 	 rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
    break
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
- 
  fi
- 
  rm -f core conftest.err conftest.$ac_objext
  	 CC="$CC -n32"
! 	 rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
    ac_cv_sys_largefile_CC=' -n32'; break
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
- 
  fi
- 
  rm -f core conftest.err conftest.$ac_objext
  	 break
         done
--- 4456,4469 ----
    return 0;
  }
  _ACEOF
! 	 if ac_fn_c_try_compile "$LINENO"; then :
    break
  fi
  rm -f core conftest.err conftest.$ac_objext
  	 CC="$CC -n32"
! 	 if ac_fn_c_try_compile "$LINENO"; then :
    ac_cv_sys_largefile_CC=' -n32'; break
  fi
  rm -f core conftest.err conftest.$ac_objext
  	 break
         done
***************
*** 3979,4001 ****
         rm -f conftest.$ac_ext
      fi
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_sys_largefile_CC" >&5
! echo "${ECHO_T}$ac_cv_sys_largefile_CC" >&6; }
    if test "$ac_cv_sys_largefile_CC" != no; then
      CC=$CC$ac_cv_sys_largefile_CC
    fi
  
!   { echo "$as_me:$LINENO: checking for _FILE_OFFSET_BITS value needed for large files" >&5
! echo $ECHO_N "checking for _FILE_OFFSET_BITS value needed for large files... $ECHO_C" >&6; }
! if test "${ac_cv_sys_file_offset_bits+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    while :; do
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <sys/types.h>
   /* Check that off_t can represent 2**63 - 1 correctly.
--- 4471,4489 ----
         rm -f conftest.$ac_ext
      fi
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_sys_largefile_CC" >&5
! $as_echo "$ac_cv_sys_largefile_CC" >&6; }
    if test "$ac_cv_sys_largefile_CC" != no; then
      CC=$CC$ac_cv_sys_largefile_CC
    fi
  
!   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for _FILE_OFFSET_BITS value needed for large files" >&5
! $as_echo_n "checking for _FILE_OFFSET_BITS value needed for large files... " >&6; }
! if ${ac_cv_sys_file_offset_bits+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    while :; do
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <sys/types.h>
   /* Check that off_t can represent 2**63 - 1 correctly.
***************
*** 4014,4050 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
    ac_cv_sys_file_offset_bits=no; break
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
- 
  fi
- 
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #define _FILE_OFFSET_BITS 64
  #include <sys/types.h>
--- 4502,4512 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_compile "$LINENO"; then :
    ac_cv_sys_file_offset_bits=no; break
  fi
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #define _FILE_OFFSET_BITS 64
  #include <sys/types.h>
***************
*** 4064,4094 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
    ac_cv_sys_file_offset_bits=64; break
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
- 
  fi
- 
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
    ac_cv_sys_file_offset_bits=unknown
    break
--- 4526,4534 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_compile "$LINENO"; then :
    ac_cv_sys_file_offset_bits=64; break
  fi
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
    ac_cv_sys_file_offset_bits=unknown
    break
***************
*** 4094,4101 ****
    break
  done
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_sys_file_offset_bits" >&5
! echo "${ECHO_T}$ac_cv_sys_file_offset_bits" >&6; }
  case $ac_cv_sys_file_offset_bits in #(
    no | unknown) ;;
    *)
--- 4534,4541 ----
    break
  done
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_sys_file_offset_bits" >&5
! $as_echo "$ac_cv_sys_file_offset_bits" >&6; }
  case $ac_cv_sys_file_offset_bits in #(
    no | unknown) ;;
    *)
***************
*** 4104,4122 ****
  _ACEOF
  ;;
  esac
! rm -f conftest*
    if test $ac_cv_sys_file_offset_bits = unknown; then
!     { echo "$as_me:$LINENO: checking for _LARGE_FILES value needed for large files" >&5
! echo $ECHO_N "checking for _LARGE_FILES value needed for large files... $ECHO_C" >&6; }
! if test "${ac_cv_sys_large_files+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    while :; do
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <sys/types.h>
   /* Check that off_t can represent 2**63 - 1 correctly.
--- 4544,4558 ----
  _ACEOF
  ;;
  esac
! rm -rf conftest*
    if test $ac_cv_sys_file_offset_bits = unknown; then
!     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for _LARGE_FILES value needed for large files" >&5
! $as_echo_n "checking for _LARGE_FILES value needed for large files... " >&6; }
! if ${ac_cv_sys_large_files+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    while :; do
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <sys/types.h>
   /* Check that off_t can represent 2**63 - 1 correctly.
***************
*** 4135,4171 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
    ac_cv_sys_large_files=no; break
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
- 
  fi
- 
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #define _LARGE_FILES 1
  #include <sys/types.h>
--- 4571,4581 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_compile "$LINENO"; then :
    ac_cv_sys_large_files=no; break
  fi
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #define _LARGE_FILES 1
  #include <sys/types.h>
***************
*** 4185,4215 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
    ac_cv_sys_large_files=1; break
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
- 
  fi
- 
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
    ac_cv_sys_large_files=unknown
    break
--- 4595,4603 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_compile "$LINENO"; then :
    ac_cv_sys_large_files=1; break
  fi
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
    ac_cv_sys_large_files=unknown
    break
***************
*** 4215,4222 ****
    break
  done
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_sys_large_files" >&5
! echo "${ECHO_T}$ac_cv_sys_large_files" >&6; }
  case $ac_cv_sys_large_files in #(
    no | unknown) ;;
    *)
--- 4603,4610 ----
    break
  done
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_sys_large_files" >&5
! $as_echo "$ac_cv_sys_large_files" >&6; }
  case $ac_cv_sys_large_files in #(
    no | unknown) ;;
    *)
***************
*** 4225,4231 ****
  _ACEOF
  ;;
  esac
! rm -f conftest*
    fi
  fi
  
--- 4613,4619 ----
  _ACEOF
  ;;
  esac
! rm -rf conftest*
    fi
  fi
  
***************
*** 4235,4244 ****
  do
    # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_AWK+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$AWK"; then
    ac_cv_prog_AWK="$AWK" # Let the user override the test.
--- 4623,4632 ----
  do
    # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_AWK+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$AWK"; then
    ac_cv_prog_AWK="$AWK" # Let the user override the test.
***************
*** 4248,4272 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_AWK="$ac_prog"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  AWK=$ac_cv_prog_AWK
  if test -n "$AWK"; then
!   { echo "$as_me:$LINENO: result: $AWK" >&5
! echo "${ECHO_T}$AWK" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 4636,4660 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_AWK="$ac_prog"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  AWK=$ac_cv_prog_AWK
  if test -n "$AWK"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $AWK" >&5
! $as_echo "$AWK" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 4281,4290 ****
  if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}gcc", so it can be a program name with args.
  set dummy ${ac_tool_prefix}gcc; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_CC+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$CC"; then
    ac_cv_prog_CC="$CC" # Let the user override the test.
--- 4669,4678 ----
  if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}gcc", so it can be a program name with args.
  set dummy ${ac_tool_prefix}gcc; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_CC+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$CC"; then
    ac_cv_prog_CC="$CC" # Let the user override the test.
***************
*** 4294,4318 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_CC="${ac_tool_prefix}gcc"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  CC=$ac_cv_prog_CC
  if test -n "$CC"; then
!   { echo "$as_me:$LINENO: result: $CC" >&5
! echo "${ECHO_T}$CC" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 4682,4706 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_CC="${ac_tool_prefix}gcc"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  CC=$ac_cv_prog_CC
  if test -n "$CC"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
! $as_echo "$CC" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 4321,4330 ****
    ac_ct_CC=$CC
    # Extract the first word of "gcc", so it can be a program name with args.
  set dummy gcc; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$ac_ct_CC"; then
    ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
--- 4709,4718 ----
    ac_ct_CC=$CC
    # Extract the first word of "gcc", so it can be a program name with args.
  set dummy gcc; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_ac_ct_CC+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$ac_ct_CC"; then
    ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
***************
*** 4334,4358 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_CC="gcc"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_CC=$ac_cv_prog_ac_ct_CC
  if test -n "$ac_ct_CC"; then
!   { echo "$as_me:$LINENO: result: $ac_ct_CC" >&5
! echo "${ECHO_T}$ac_ct_CC" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
    if test "x$ac_ct_CC" = x; then
--- 4722,4746 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_CC="gcc"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_CC=$ac_cv_prog_ac_ct_CC
  if test -n "$ac_ct_CC"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CC" >&5
! $as_echo "$ac_ct_CC" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
    if test "x$ac_ct_CC" = x; then
***************
*** 4360,4371 ****
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&5
! echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&2;}
  ac_tool_warned=yes ;;
  esac
      CC=$ac_ct_CC
--- 4748,4755 ----
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
! $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
  ac_tool_warned=yes ;;
  esac
      CC=$ac_ct_CC
***************
*** 4378,4387 ****
            if test -n "$ac_tool_prefix"; then
      # Extract the first word of "${ac_tool_prefix}cc", so it can be a program name with args.
  set dummy ${ac_tool_prefix}cc; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_CC+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$CC"; then
    ac_cv_prog_CC="$CC" # Let the user override the test.
--- 4762,4771 ----
            if test -n "$ac_tool_prefix"; then
      # Extract the first word of "${ac_tool_prefix}cc", so it can be a program name with args.
  set dummy ${ac_tool_prefix}cc; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_CC+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$CC"; then
    ac_cv_prog_CC="$CC" # Let the user override the test.
***************
*** 4391,4415 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_CC="${ac_tool_prefix}cc"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  CC=$ac_cv_prog_CC
  if test -n "$CC"; then
!   { echo "$as_me:$LINENO: result: $CC" >&5
! echo "${ECHO_T}$CC" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 4775,4799 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_CC="${ac_tool_prefix}cc"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  CC=$ac_cv_prog_CC
  if test -n "$CC"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
! $as_echo "$CC" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 4418,4427 ****
  if test -z "$CC"; then
    # Extract the first word of "cc", so it can be a program name with args.
  set dummy cc; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_CC+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$CC"; then
    ac_cv_prog_CC="$CC" # Let the user override the test.
--- 4802,4811 ----
  if test -z "$CC"; then
    # Extract the first word of "cc", so it can be a program name with args.
  set dummy cc; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_CC+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$CC"; then
    ac_cv_prog_CC="$CC" # Let the user override the test.
***************
*** 4432,4449 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      if test "$as_dir/$ac_word$ac_exec_ext" = "/usr/ucb/cc"; then
         ac_prog_rejected=yes
         continue
       fi
      ac_cv_prog_CC="cc"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  if test $ac_prog_rejected = yes; then
--- 4816,4833 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      if test "$as_dir/$ac_word$ac_exec_ext" = "/usr/ucb/cc"; then
         ac_prog_rejected=yes
         continue
       fi
      ac_cv_prog_CC="cc"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  if test $ac_prog_rejected = yes; then
***************
*** 4462,4472 ****
  fi
  CC=$ac_cv_prog_CC
  if test -n "$CC"; then
!   { echo "$as_me:$LINENO: result: $CC" >&5
! echo "${ECHO_T}$CC" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 4846,4856 ----
  fi
  CC=$ac_cv_prog_CC
  if test -n "$CC"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
! $as_echo "$CC" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 4477,4486 ****
    do
      # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
  set dummy $ac_tool_prefix$ac_prog; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_CC+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$CC"; then
    ac_cv_prog_CC="$CC" # Let the user override the test.
--- 4861,4870 ----
    do
      # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
  set dummy $ac_tool_prefix$ac_prog; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_CC+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$CC"; then
    ac_cv_prog_CC="$CC" # Let the user override the test.
***************
*** 4490,4514 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_CC="$ac_tool_prefix$ac_prog"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  CC=$ac_cv_prog_CC
  if test -n "$CC"; then
!   { echo "$as_me:$LINENO: result: $CC" >&5
! echo "${ECHO_T}$CC" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 4874,4898 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_CC="$ac_tool_prefix$ac_prog"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  CC=$ac_cv_prog_CC
  if test -n "$CC"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
! $as_echo "$CC" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 4521,4530 ****
  do
    # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$ac_ct_CC"; then
    ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
--- 4905,4914 ----
  do
    # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_ac_ct_CC+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$ac_ct_CC"; then
    ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
***************
*** 4534,4558 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_CC="$ac_prog"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_CC=$ac_cv_prog_ac_ct_CC
  if test -n "$ac_ct_CC"; then
!   { echo "$as_me:$LINENO: result: $ac_ct_CC" >&5
! echo "${ECHO_T}$ac_ct_CC" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 4918,4942 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_CC="$ac_prog"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_CC=$ac_cv_prog_ac_ct_CC
  if test -n "$ac_ct_CC"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CC" >&5
! $as_echo "$ac_ct_CC" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 4564,4575 ****
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&5
! echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&2;}
  ac_tool_warned=yes ;;
  esac
      CC=$ac_ct_CC
--- 4948,4955 ----
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
! $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
  ac_tool_warned=yes ;;
  esac
      CC=$ac_ct_CC
***************
*** 4579,4634 ****
  fi
  
  
! test -z "$CC" && { { echo "$as_me:$LINENO: error: no acceptable C compiler found in \$PATH
! See \`config.log' for more details." >&5
! echo "$as_me: error: no acceptable C compiler found in \$PATH
! See \`config.log' for more details." >&2;}
!    { (exit 1); exit 1; }; }
  
  # Provide some information about the compiler.
! echo "$as_me:$LINENO: checking for C compiler version" >&5
! ac_compiler=`set X $ac_compile; echo $2`
! { (ac_try="$ac_compiler --version >&5"
  case "(($ac_try" in
    *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
    *) ac_try_echo=$ac_try;;
  esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compiler --version >&5") 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }
! { (ac_try="$ac_compiler -v >&5"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compiler -v >&5") 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }
! { (ac_try="$ac_compiler -V >&5"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compiler -V >&5") 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }
  
! { echo "$as_me:$LINENO: checking whether we are using the GNU C compiler" >&5
! echo $ECHO_N "checking whether we are using the GNU C compiler... $ECHO_C" >&6; }
! if test "${ac_cv_c_compiler_gnu+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  int
--- 4959,5000 ----
  fi
  
  
! test -z "$CC" && { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
! $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
! as_fn_error $? "no acceptable C compiler found in \$PATH
! See \`config.log' for more details" "$LINENO" 5; }
  
  # Provide some information about the compiler.
! $as_echo "$as_me:${as_lineno-$LINENO}: checking for C compiler version" >&5
! set X $ac_compile
! ac_compiler=$2
! for ac_option in --version -v -V -qversion; do
!   { { ac_try="$ac_compiler $ac_option >&5"
  case "(($ac_try" in
    *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
    *) ac_try_echo=$ac_try;;
  esac
! eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
! $as_echo "$ac_try_echo"; } >&5
!   (eval "$ac_compiler $ac_option >&5") 2>conftest.err
    ac_status=$?
!   if test -s conftest.err; then
!     sed '10a\
! ... rest of stderr output deleted ...
!          10q' conftest.err >conftest.er1
!     cat conftest.er1 >&5
!   fi
!   rm -f conftest.er1 conftest.err
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }
! done
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether we are using the GNU C compiler" >&5
! $as_echo_n "checking whether we are using the GNU C compiler... " >&6; }
! if ${ac_cv_c_compiler_gnu+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  int
***************
*** 4642,4672 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
    ac_compiler_gnu=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_compiler_gnu=no
  fi
- 
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  ac_cv_c_compiler_gnu=$ac_compiler_gnu
  
--- 5008,5018 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_compile "$LINENO"; then :
    ac_compiler_gnu=yes
  else
!   ac_compiler_gnu=no
  fi
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  ac_cv_c_compiler_gnu=$ac_compiler_gnu
  
***************
*** 4671,4695 ****
  ac_cv_c_compiler_gnu=$ac_compiler_gnu
  
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_c_compiler_gnu" >&5
! echo "${ECHO_T}$ac_cv_c_compiler_gnu" >&6; }
! GCC=`test $ac_compiler_gnu = yes && echo yes`
  ac_test_CFLAGS=${CFLAGS+set}
  ac_save_CFLAGS=$CFLAGS
! { echo "$as_me:$LINENO: checking whether $CC accepts -g" >&5
! echo $ECHO_N "checking whether $CC accepts -g... $ECHO_C" >&6; }
! if test "${ac_cv_prog_cc_g+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    ac_save_c_werror_flag=$ac_c_werror_flag
     ac_c_werror_flag=yes
     ac_cv_prog_cc_g=no
     CFLAGS="-g"
!    cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  int
--- 5017,5041 ----
  ac_cv_c_compiler_gnu=$ac_compiler_gnu
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_compiler_gnu" >&5
! $as_echo "$ac_cv_c_compiler_gnu" >&6; }
! if test $ac_compiler_gnu = yes; then
!   GCC=yes
! else
!   GCC=
! fi
  ac_test_CFLAGS=${CFLAGS+set}
  ac_save_CFLAGS=$CFLAGS
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $CC accepts -g" >&5
! $as_echo_n "checking whether $CC accepts -g... " >&6; }
! if ${ac_cv_prog_cc_g+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    ac_save_c_werror_flag=$ac_c_werror_flag
     ac_c_werror_flag=yes
     ac_cv_prog_cc_g=no
     CFLAGS="-g"
!    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  int
***************
*** 4700,4733 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
    ac_cv_prog_cc_g=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	CFLAGS=""
!       cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  int
--- 5046,5056 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_compile "$LINENO"; then :
    ac_cv_prog_cc_g=yes
  else
!   CFLAGS=""
!       cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  int
***************
*** 4738,4772 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
!   :
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
  
! 	ac_c_werror_flag=$ac_save_c_werror_flag
  	 CFLAGS="-g"
! 	 cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  int
--- 5061,5072 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_compile "$LINENO"; then :
  
! else
!   ac_c_werror_flag=$ac_save_c_werror_flag
  	 CFLAGS="-g"
! 	 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  int
***************
*** 4777,4813 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
    ac_cv_prog_cc_g=yes
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
- 
  fi
- 
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  fi
- 
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  fi
- 
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
     ac_c_werror_flag=$ac_save_c_werror_flag
  fi
--- 5077,5089 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_compile "$LINENO"; then :
    ac_cv_prog_cc_g=yes
  fi
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  fi
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  fi
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
     ac_c_werror_flag=$ac_save_c_werror_flag
  fi
***************
*** 4811,4818 ****
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
     ac_c_werror_flag=$ac_save_c_werror_flag
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_prog_cc_g" >&5
! echo "${ECHO_T}$ac_cv_prog_cc_g" >&6; }
  if test "$ac_test_CFLAGS" = set; then
    CFLAGS=$ac_save_CFLAGS
  elif test $ac_cv_prog_cc_g = yes; then
--- 5087,5094 ----
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
     ac_c_werror_flag=$ac_save_c_werror_flag
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_g" >&5
! $as_echo "$ac_cv_prog_cc_g" >&6; }
  if test "$ac_test_CFLAGS" = set; then
    CFLAGS=$ac_save_CFLAGS
  elif test $ac_cv_prog_cc_g = yes; then
***************
*** 4828,4845 ****
      CFLAGS=
    fi
  fi
! { echo "$as_me:$LINENO: checking for $CC option to accept ISO C89" >&5
! echo $ECHO_N "checking for $CC option to accept ISO C89... $ECHO_C" >&6; }
! if test "${ac_cv_prog_cc_c89+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    ac_cv_prog_cc_c89=no
  ac_save_CC=$CC
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <stdarg.h>
  #include <stdio.h>
--- 5104,5117 ----
      CFLAGS=
    fi
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $CC option to accept ISO C89" >&5
! $as_echo_n "checking for $CC option to accept ISO C89... " >&6; }
! if ${ac_cv_prog_cc_c89+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    ac_cv_prog_cc_c89=no
  ac_save_CC=$CC
! cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <stdarg.h>
  #include <stdio.h>
***************
*** 4896,4926 ****
  	-Ae "-Aa -D_HPUX_SOURCE" "-Xc -D__EXTENSIONS__"
  do
    CC="$ac_save_CC $ac_arg"
!   rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
    ac_cv_prog_cc_c89=$ac_arg
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
- 
  fi
- 
  rm -f core conftest.err conftest.$ac_objext
    test "x$ac_cv_prog_cc_c89" != "xno" && break
  done
--- 5168,5176 ----
  	-Ae "-Aa -D_HPUX_SOURCE" "-Xc -D__EXTENSIONS__"
  do
    CC="$ac_save_CC $ac_arg"
!   if ac_fn_c_try_compile "$LINENO"; then :
    ac_cv_prog_cc_c89=$ac_arg
  fi
  rm -f core conftest.err conftest.$ac_objext
    test "x$ac_cv_prog_cc_c89" != "xno" && break
  done
***************
*** 4931,4947 ****
  # AC_CACHE_VAL
  case "x$ac_cv_prog_cc_c89" in
    x)
!     { echo "$as_me:$LINENO: result: none needed" >&5
! echo "${ECHO_T}none needed" >&6; } ;;
    xno)
!     { echo "$as_me:$LINENO: result: unsupported" >&5
! echo "${ECHO_T}unsupported" >&6; } ;;
    *)
      CC="$CC $ac_cv_prog_cc_c89"
!     { echo "$as_me:$LINENO: result: $ac_cv_prog_cc_c89" >&5
! echo "${ECHO_T}$ac_cv_prog_cc_c89" >&6; } ;;
  esac
  
  
  ac_ext=c
  ac_cpp='$CPP $CPPFLAGS'
--- 5181,5199 ----
  # AC_CACHE_VAL
  case "x$ac_cv_prog_cc_c89" in
    x)
!     { $as_echo "$as_me:${as_lineno-$LINENO}: result: none needed" >&5
! $as_echo "none needed" >&6; } ;;
    xno)
!     { $as_echo "$as_me:${as_lineno-$LINENO}: result: unsupported" >&5
! $as_echo "unsupported" >&6; } ;;
    *)
      CC="$CC $ac_cv_prog_cc_c89"
!     { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_c89" >&5
! $as_echo "$ac_cv_prog_cc_c89" >&6; } ;;
  esac
+ if test "x$ac_cv_prog_cc_c89" != xno; then :
  
+ fi
  
  ac_ext=c
  ac_cpp='$CPP $CPPFLAGS'
***************
*** 4951,4960 ****
  
  depcc="$CC"   am_compiler_list=
  
! { echo "$as_me:$LINENO: checking dependency style of $depcc" >&5
! echo $ECHO_N "checking dependency style of $depcc... $ECHO_C" >&6; }
! if test "${am_cv_CC_dependencies_compiler_type+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -z "$AMDEP_TRUE" && test -f "$am_depcomp"; then
    # We make a subdir and do the tests there.  Otherwise we can end up
--- 5203,5212 ----
  
  depcc="$CC"   am_compiler_list=
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking dependency style of $depcc" >&5
! $as_echo_n "checking dependency style of $depcc... " >&6; }
! if ${am_cv_CC_dependencies_compiler_type+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -z "$AMDEP_TRUE" && test -f "$am_depcomp"; then
    # We make a subdir and do the tests there.  Otherwise we can end up
***************
*** 5042,5049 ****
  fi
  
  fi
! { echo "$as_me:$LINENO: result: $am_cv_CC_dependencies_compiler_type" >&5
! echo "${ECHO_T}$am_cv_CC_dependencies_compiler_type" >&6; }
  CCDEPMODE=depmode=$am_cv_CC_dependencies_compiler_type
  
   if
--- 5294,5301 ----
  fi
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $am_cv_CC_dependencies_compiler_type" >&5
! $as_echo "$am_cv_CC_dependencies_compiler_type" >&6; }
  CCDEPMODE=depmode=$am_cv_CC_dependencies_compiler_type
  
   if
***************
*** 5057,5076 ****
  fi
  
  
!    case $ac_cv_prog_cc_stdc in
!   no) ac_cv_prog_cc_c99=no; ac_cv_prog_cc_c89=no ;;
!   *) { echo "$as_me:$LINENO: checking for $CC option to accept ISO C99" >&5
! echo $ECHO_N "checking for $CC option to accept ISO C99... $ECHO_C" >&6; }
! if test "${ac_cv_prog_cc_c99+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    ac_cv_prog_cc_c99=no
  ac_save_CC=$CC
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <stdarg.h>
  #include <stdbool.h>
--- 5309,5326 ----
  fi
  
  
!    case $ac_cv_prog_cc_stdc in #(
!   no) :
!     ac_cv_prog_cc_c99=no; ac_cv_prog_cc_c89=no ;; #(
!   *) :
!     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $CC option to accept ISO C99" >&5
! $as_echo_n "checking for $CC option to accept ISO C99... " >&6; }
! if ${ac_cv_prog_cc_c99+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    ac_cv_prog_cc_c99=no
  ac_save_CC=$CC
! cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <stdarg.h>
  #include <stdbool.h>
***************
*** 5209,5242 ****
    return 0;
  }
  _ACEOF
! for ac_arg in '' -std=gnu99 -c99 -qlanglvl=extc99
  do
    CC="$ac_save_CC $ac_arg"
!   rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
    ac_cv_prog_cc_c99=$ac_arg
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
- 
  fi
- 
  rm -f core conftest.err conftest.$ac_objext
    test "x$ac_cv_prog_cc_c99" != "xno" && break
  done
--- 5459,5470 ----
    return 0;
  }
  _ACEOF
! for ac_arg in '' -std=gnu99 -std=c99 -c99 -AC99 -xc99=all -qlanglvl=extc99
  do
    CC="$ac_save_CC $ac_arg"
!   if ac_fn_c_try_compile "$LINENO"; then :
    ac_cv_prog_cc_c99=$ac_arg
  fi
  rm -f core conftest.err conftest.$ac_objext
    test "x$ac_cv_prog_cc_c99" != "xno" && break
  done
***************
*** 5247,5277 ****
  # AC_CACHE_VAL
  case "x$ac_cv_prog_cc_c99" in
    x)
!     { echo "$as_me:$LINENO: result: none needed" >&5
! echo "${ECHO_T}none needed" >&6; } ;;
    xno)
!     { echo "$as_me:$LINENO: result: unsupported" >&5
! echo "${ECHO_T}unsupported" >&6; } ;;
    *)
      CC="$CC $ac_cv_prog_cc_c99"
!     { echo "$as_me:$LINENO: result: $ac_cv_prog_cc_c99" >&5
! echo "${ECHO_T}$ac_cv_prog_cc_c99" >&6; } ;;
  esac
! if test "x$ac_cv_prog_cc_c99" != xno; then
    ac_cv_prog_cc_stdc=$ac_cv_prog_cc_c99
  else
!   { echo "$as_me:$LINENO: checking for $CC option to accept ISO C89" >&5
! echo $ECHO_N "checking for $CC option to accept ISO C89... $ECHO_C" >&6; }
! if test "${ac_cv_prog_cc_c89+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    ac_cv_prog_cc_c89=no
  ac_save_CC=$CC
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <stdarg.h>
  #include <stdio.h>
--- 5475,5501 ----
  # AC_CACHE_VAL
  case "x$ac_cv_prog_cc_c99" in
    x)
!     { $as_echo "$as_me:${as_lineno-$LINENO}: result: none needed" >&5
! $as_echo "none needed" >&6; } ;;
    xno)
!     { $as_echo "$as_me:${as_lineno-$LINENO}: result: unsupported" >&5
! $as_echo "unsupported" >&6; } ;;
    *)
      CC="$CC $ac_cv_prog_cc_c99"
!     { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_c99" >&5
! $as_echo "$ac_cv_prog_cc_c99" >&6; } ;;
  esac
! if test "x$ac_cv_prog_cc_c99" != xno; then :
    ac_cv_prog_cc_stdc=$ac_cv_prog_cc_c99
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $CC option to accept ISO C89" >&5
! $as_echo_n "checking for $CC option to accept ISO C89... " >&6; }
! if ${ac_cv_prog_cc_c89+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    ac_cv_prog_cc_c89=no
  ac_save_CC=$CC
! cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <stdarg.h>
  #include <stdio.h>
***************
*** 5328,5358 ****
  	-Ae "-Aa -D_HPUX_SOURCE" "-Xc -D__EXTENSIONS__"
  do
    CC="$ac_save_CC $ac_arg"
!   rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
    ac_cv_prog_cc_c89=$ac_arg
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
- 
  fi
- 
  rm -f core conftest.err conftest.$ac_objext
    test "x$ac_cv_prog_cc_c89" != "xno" && break
  done
--- 5552,5560 ----
  	-Ae "-Aa -D_HPUX_SOURCE" "-Xc -D__EXTENSIONS__"
  do
    CC="$ac_save_CC $ac_arg"
!   if ac_fn_c_try_compile "$LINENO"; then :
    ac_cv_prog_cc_c89=$ac_arg
  fi
  rm -f core conftest.err conftest.$ac_objext
    test "x$ac_cv_prog_cc_c89" != "xno" && break
  done
***************
*** 5363,5415 ****
  # AC_CACHE_VAL
  case "x$ac_cv_prog_cc_c89" in
    x)
!     { echo "$as_me:$LINENO: result: none needed" >&5
! echo "${ECHO_T}none needed" >&6; } ;;
    xno)
!     { echo "$as_me:$LINENO: result: unsupported" >&5
! echo "${ECHO_T}unsupported" >&6; } ;;
    *)
      CC="$CC $ac_cv_prog_cc_c89"
!     { echo "$as_me:$LINENO: result: $ac_cv_prog_cc_c89" >&5
! echo "${ECHO_T}$ac_cv_prog_cc_c89" >&6; } ;;
  esac
! if test "x$ac_cv_prog_cc_c89" != xno; then
    ac_cv_prog_cc_stdc=$ac_cv_prog_cc_c89
  else
    ac_cv_prog_cc_stdc=no
  fi
  
! 
! fi
! 
!  ;;
! esac
!   { echo "$as_me:$LINENO: checking for $CC option to accept ISO Standard C" >&5
! echo $ECHO_N "checking for $CC option to accept ISO Standard C... $ECHO_C" >&6; }
!   if test "${ac_cv_prog_cc_stdc+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! fi
! 
!   case $ac_cv_prog_cc_stdc in
!   no) { echo "$as_me:$LINENO: result: unsupported" >&5
! echo "${ECHO_T}unsupported" >&6; } ;;
!   '') { echo "$as_me:$LINENO: result: none needed" >&5
! echo "${ECHO_T}none needed" >&6; } ;;
!   *) { echo "$as_me:$LINENO: result: $ac_cv_prog_cc_stdc" >&5
! echo "${ECHO_T}$ac_cv_prog_cc_stdc" >&6; } ;;
  esac
! 
! 
! { echo "$as_me:$LINENO: checking for an ANSI C-conforming const" >&5
! echo $ECHO_N "checking for an ANSI C-conforming const... $ECHO_C" >&6; }
! if test "${ac_cv_c_const+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  int
--- 5565,5613 ----
  # AC_CACHE_VAL
  case "x$ac_cv_prog_cc_c89" in
    x)
!     { $as_echo "$as_me:${as_lineno-$LINENO}: result: none needed" >&5
! $as_echo "none needed" >&6; } ;;
    xno)
!     { $as_echo "$as_me:${as_lineno-$LINENO}: result: unsupported" >&5
! $as_echo "unsupported" >&6; } ;;
    *)
      CC="$CC $ac_cv_prog_cc_c89"
!     { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_c89" >&5
! $as_echo "$ac_cv_prog_cc_c89" >&6; } ;;
  esac
! if test "x$ac_cv_prog_cc_c89" != xno; then :
    ac_cv_prog_cc_stdc=$ac_cv_prog_cc_c89
  else
    ac_cv_prog_cc_stdc=no
  fi
  
! fi
!  ;;
  esac
!   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $CC option to accept ISO Standard C" >&5
! $as_echo_n "checking for $CC option to accept ISO Standard C... " >&6; }
!   if ${ac_cv_prog_cc_stdc+:} false; then :
!   $as_echo_n "(cached) " >&6
! fi
! 
!   case $ac_cv_prog_cc_stdc in #(
!   no) :
!     { $as_echo "$as_me:${as_lineno-$LINENO}: result: unsupported" >&5
! $as_echo "unsupported" >&6; } ;; #(
!   '') :
!     { $as_echo "$as_me:${as_lineno-$LINENO}: result: none needed" >&5
! $as_echo "none needed" >&6; } ;; #(
!   *) :
!     { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_stdc" >&5
! $as_echo "$ac_cv_prog_cc_stdc" >&6; } ;;
! esac
! 
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for an ANSI C-conforming const" >&5
! $as_echo_n "checking for an ANSI C-conforming const... " >&6; }
! if ${ac_cv_c_const+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  int
***************
*** 5469,5518 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
    ac_cv_c_const=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_cv_c_const=no
  fi
- 
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_c_const" >&5
! echo "${ECHO_T}$ac_cv_c_const" >&6; }
  if test $ac_cv_c_const = no; then
  
! cat >>confdefs.h <<\_ACEOF
! #define const
! _ACEOF
  
  fi
  
  if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}ranlib", so it can be a program name with args.
  set dummy ${ac_tool_prefix}ranlib; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_RANLIB+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$RANLIB"; then
    ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
--- 5667,5694 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_compile "$LINENO"; then :
    ac_cv_c_const=yes
  else
!   ac_cv_c_const=no
  fi
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_const" >&5
! $as_echo "$ac_cv_c_const" >&6; }
  if test $ac_cv_c_const = no; then
  
! $as_echo "#define const /**/" >>confdefs.h
  
  fi
  
  if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}ranlib", so it can be a program name with args.
  set dummy ${ac_tool_prefix}ranlib; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_RANLIB+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$RANLIB"; then
    ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
***************
*** 5522,5546 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_RANLIB="${ac_tool_prefix}ranlib"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  RANLIB=$ac_cv_prog_RANLIB
  if test -n "$RANLIB"; then
!   { echo "$as_me:$LINENO: result: $RANLIB" >&5
! echo "${ECHO_T}$RANLIB" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 5698,5722 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_RANLIB="${ac_tool_prefix}ranlib"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  RANLIB=$ac_cv_prog_RANLIB
  if test -n "$RANLIB"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $RANLIB" >&5
! $as_echo "$RANLIB" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 5549,5558 ****
    ac_ct_RANLIB=$RANLIB
    # Extract the first word of "ranlib", so it can be a program name with args.
  set dummy ranlib; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_ac_ct_RANLIB+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$ac_ct_RANLIB"; then
    ac_cv_prog_ac_ct_RANLIB="$ac_ct_RANLIB" # Let the user override the test.
--- 5725,5734 ----
    ac_ct_RANLIB=$RANLIB
    # Extract the first word of "ranlib", so it can be a program name with args.
  set dummy ranlib; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_ac_ct_RANLIB+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$ac_ct_RANLIB"; then
    ac_cv_prog_ac_ct_RANLIB="$ac_ct_RANLIB" # Let the user override the test.
***************
*** 5562,5586 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_RANLIB="ranlib"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_RANLIB=$ac_cv_prog_ac_ct_RANLIB
  if test -n "$ac_ct_RANLIB"; then
!   { echo "$as_me:$LINENO: result: $ac_ct_RANLIB" >&5
! echo "${ECHO_T}$ac_ct_RANLIB" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
    if test "x$ac_ct_RANLIB" = x; then
--- 5738,5762 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_RANLIB="ranlib"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_RANLIB=$ac_cv_prog_ac_ct_RANLIB
  if test -n "$ac_ct_RANLIB"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_RANLIB" >&5
! $as_echo "$ac_ct_RANLIB" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
    if test "x$ac_ct_RANLIB" = x; then
***************
*** 5588,5599 ****
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&5
! echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&2;}
  ac_tool_warned=yes ;;
  esac
      RANLIB=$ac_ct_RANLIB
--- 5764,5771 ----
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
! $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
  ac_tool_warned=yes ;;
  esac
      RANLIB=$ac_ct_RANLIB
***************
*** 5602,5696 ****
    RANLIB="$ac_cv_prog_RANLIB"
  fi
  
- # Find a good install program.  We prefer a C program (faster),
- # so one script is as good as another.  But avoid the broken or
- # incompatible versions:
- # SysV /etc/install, /usr/sbin/install
- # SunOS /usr/etc/install
- # IRIX /sbin/install
- # AIX /bin/install
- # AmigaOS /C/install, which installs bootblocks on floppy discs
- # AIX 4 /usr/bin/installbsd, which doesn't work without a -g flag
- # AFS /usr/afsws/bin/install, which mishandles nonexistent args
- # SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"
- # OS/2's system install, which has a completely different semantic
- # ./install, which can be erroneously created by make from ./install.sh.
- { echo "$as_me:$LINENO: checking for a BSD-compatible install" >&5
- echo $ECHO_N "checking for a BSD-compatible install... $ECHO_C" >&6; }
- if test -z "$INSTALL"; then
- if test "${ac_cv_path_install+set}" = set; then
-   echo $ECHO_N "(cached) $ECHO_C" >&6
- else
-   as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
- for as_dir in $PATH
- do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-   # Account for people who put trailing slashes in PATH elements.
- case $as_dir/ in
-   ./ | .// | /cC/* | \
-   /etc/* | /usr/sbin/* | /usr/etc/* | /sbin/* | /usr/afsws/bin/* | \
-   ?:\\/os2\\/install\\/* | ?:\\/OS2\\/INSTALL\\/* | \
-   /usr/ucb/* ) ;;
-   *)
-     # OSF1 and SCO ODT 3.0 have their own names for install.
-     # Don't use installbsd from OSF since it installs stuff as root
-     # by default.
-     for ac_prog in ginstall scoinst install; do
-       for ac_exec_ext in '' $ac_executable_extensions; do
- 	if { test -f "$as_dir/$ac_prog$ac_exec_ext" && $as_test_x "$as_dir/$ac_prog$ac_exec_ext"; }; then
- 	  if test $ac_prog = install &&
- 	    grep dspmsg "$as_dir/$ac_prog$ac_exec_ext" >/dev/null 2>&1; then
- 	    # AIX install.  It has an incompatible calling convention.
- 	    :
- 	  elif test $ac_prog = install &&
- 	    grep pwplus "$as_dir/$ac_prog$ac_exec_ext" >/dev/null 2>&1; then
- 	    # program-specific install script used by HP pwplus--don't use.
- 	    :
- 	  else
- 	    ac_cv_path_install="$as_dir/$ac_prog$ac_exec_ext -c"
- 	    break 3
- 	  fi
- 	fi
-       done
-     done
-     ;;
- esac
- done
- IFS=$as_save_IFS
- 
- 
- fi
-   if test "${ac_cv_path_install+set}" = set; then
-     INSTALL=$ac_cv_path_install
-   else
-     # As a last resort, use the slow shell script.  Don't cache a
-     # value for INSTALL within a source directory, because that will
-     # break other packages using the cache if that directory is
-     # removed, or if the value is a relative name.
-     INSTALL=$ac_install_sh
-   fi
- fi
- { echo "$as_me:$LINENO: result: $INSTALL" >&5
- echo "${ECHO_T}$INSTALL" >&6; }
- 
- # Use test -z because SunOS4 sh mishandles braces in ${var-val}.
- # It thinks the first close brace ends the variable substitution.
- test -z "$INSTALL_PROGRAM" && INSTALL_PROGRAM='${INSTALL}'
- 
- test -z "$INSTALL_SCRIPT" && INSTALL_SCRIPT='${INSTALL}'
- 
- test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'
  
! { echo "$as_me:$LINENO: checking whether ln -s works" >&5
! echo $ECHO_N "checking whether ln -s works... $ECHO_C" >&6; }
  LN_S=$as_ln_s
  if test "$LN_S" = "ln -s"; then
!   { echo "$as_me:$LINENO: result: yes" >&5
! echo "${ECHO_T}yes" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no, using $LN_S" >&5
! echo "${ECHO_T}no, using $LN_S" >&6; }
  fi
  
  ac_ext=cpp
--- 5774,5789 ----
    RANLIB="$ac_cv_prog_RANLIB"
  fi
  
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether ln -s works" >&5
! $as_echo_n "checking whether ln -s works... " >&6; }
  LN_S=$as_ln_s
  if test "$LN_S" = "ln -s"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
! $as_echo "yes" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no, using $LN_S" >&5
! $as_echo "no, using $LN_S" >&6; }
  fi
  
  ac_ext=cpp
***************
*** 5707,5716 ****
    do
      # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
  set dummy $ac_tool_prefix$ac_prog; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_CXX+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$CXX"; then
    ac_cv_prog_CXX="$CXX" # Let the user override the test.
--- 5800,5809 ----
    do
      # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
  set dummy $ac_tool_prefix$ac_prog; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_CXX+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$CXX"; then
    ac_cv_prog_CXX="$CXX" # Let the user override the test.
***************
*** 5720,5744 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_CXX="$ac_tool_prefix$ac_prog"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  CXX=$ac_cv_prog_CXX
  if test -n "$CXX"; then
!   { echo "$as_me:$LINENO: result: $CXX" >&5
! echo "${ECHO_T}$CXX" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 5813,5837 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_CXX="$ac_tool_prefix$ac_prog"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  CXX=$ac_cv_prog_CXX
  if test -n "$CXX"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CXX" >&5
! $as_echo "$CXX" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 5751,5760 ****
  do
    # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_ac_ct_CXX+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$ac_ct_CXX"; then
    ac_cv_prog_ac_ct_CXX="$ac_ct_CXX" # Let the user override the test.
--- 5844,5853 ----
  do
    # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_ac_ct_CXX+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$ac_ct_CXX"; then
    ac_cv_prog_ac_ct_CXX="$ac_ct_CXX" # Let the user override the test.
***************
*** 5764,5788 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_CXX="$ac_prog"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_CXX=$ac_cv_prog_ac_ct_CXX
  if test -n "$ac_ct_CXX"; then
!   { echo "$as_me:$LINENO: result: $ac_ct_CXX" >&5
! echo "${ECHO_T}$ac_ct_CXX" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 5857,5881 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_CXX="$ac_prog"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_CXX=$ac_cv_prog_ac_ct_CXX
  if test -n "$ac_ct_CXX"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CXX" >&5
! $as_echo "$ac_ct_CXX" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 5794,5805 ****
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&5
! echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&2;}
  ac_tool_warned=yes ;;
  esac
      CXX=$ac_ct_CXX
--- 5887,5894 ----
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
! $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
  ac_tool_warned=yes ;;
  esac
      CXX=$ac_ct_CXX
***************
*** 5809,5857 ****
    fi
  fi
  # Provide some information about the compiler.
! echo "$as_me:$LINENO: checking for C++ compiler version" >&5
! ac_compiler=`set X $ac_compile; echo $2`
! { (ac_try="$ac_compiler --version >&5"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compiler --version >&5") 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }
! { (ac_try="$ac_compiler -v >&5"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compiler -v >&5") 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }
! { (ac_try="$ac_compiler -V >&5"
  case "(($ac_try" in
    *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
    *) ac_try_echo=$ac_try;;
  esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compiler -V >&5") 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }
  
! { echo "$as_me:$LINENO: checking whether we are using the GNU C++ compiler" >&5
! echo $ECHO_N "checking whether we are using the GNU C++ compiler... $ECHO_C" >&6; }
! if test "${ac_cv_cxx_compiler_gnu+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  int
--- 5898,5933 ----
    fi
  fi
  # Provide some information about the compiler.
! $as_echo "$as_me:${as_lineno-$LINENO}: checking for C++ compiler version" >&5
! set X $ac_compile
! ac_compiler=$2
! for ac_option in --version -v -V -qversion; do
!   { { ac_try="$ac_compiler $ac_option >&5"
  case "(($ac_try" in
    *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
    *) ac_try_echo=$ac_try;;
  esac
! eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
! $as_echo "$ac_try_echo"; } >&5
!   (eval "$ac_compiler $ac_option >&5") 2>conftest.err
    ac_status=$?
!   if test -s conftest.err; then
!     sed '10a\
! ... rest of stderr output deleted ...
!          10q' conftest.err >conftest.er1
!     cat conftest.er1 >&5
!   fi
!   rm -f conftest.er1 conftest.err
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }
! done
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether we are using the GNU C++ compiler" >&5
! $as_echo_n "checking whether we are using the GNU C++ compiler... " >&6; }
! if ${ac_cv_cxx_compiler_gnu+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  int
***************
*** 5865,5895 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_cxx_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
    ac_compiler_gnu=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_compiler_gnu=no
  fi
- 
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  ac_cv_cxx_compiler_gnu=$ac_compiler_gnu
  
--- 5941,5951 ----
    return 0;
  }
  _ACEOF
! if ac_fn_cxx_try_compile "$LINENO"; then :
    ac_compiler_gnu=yes
  else
!   ac_compiler_gnu=no
  fi
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  ac_cv_cxx_compiler_gnu=$ac_compiler_gnu
  
***************
*** 5894,5918 ****
  ac_cv_cxx_compiler_gnu=$ac_compiler_gnu
  
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_cxx_compiler_gnu" >&5
! echo "${ECHO_T}$ac_cv_cxx_compiler_gnu" >&6; }
! GXX=`test $ac_compiler_gnu = yes && echo yes`
  ac_test_CXXFLAGS=${CXXFLAGS+set}
  ac_save_CXXFLAGS=$CXXFLAGS
! { echo "$as_me:$LINENO: checking whether $CXX accepts -g" >&5
! echo $ECHO_N "checking whether $CXX accepts -g... $ECHO_C" >&6; }
! if test "${ac_cv_prog_cxx_g+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    ac_save_cxx_werror_flag=$ac_cxx_werror_flag
     ac_cxx_werror_flag=yes
     ac_cv_prog_cxx_g=no
     CXXFLAGS="-g"
!    cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  int
--- 5950,5974 ----
  ac_cv_cxx_compiler_gnu=$ac_compiler_gnu
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_cxx_compiler_gnu" >&5
! $as_echo "$ac_cv_cxx_compiler_gnu" >&6; }
! if test $ac_compiler_gnu = yes; then
!   GXX=yes
! else
!   GXX=
! fi
  ac_test_CXXFLAGS=${CXXFLAGS+set}
  ac_save_CXXFLAGS=$CXXFLAGS
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $CXX accepts -g" >&5
! $as_echo_n "checking whether $CXX accepts -g... " >&6; }
! if ${ac_cv_prog_cxx_g+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    ac_save_cxx_werror_flag=$ac_cxx_werror_flag
     ac_cxx_werror_flag=yes
     ac_cv_prog_cxx_g=no
     CXXFLAGS="-g"
!    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  int
***************
*** 5923,5956 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_cxx_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
    ac_cv_prog_cxx_g=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	CXXFLAGS=""
!       cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  int
--- 5979,5989 ----
    return 0;
  }
  _ACEOF
! if ac_fn_cxx_try_compile "$LINENO"; then :
    ac_cv_prog_cxx_g=yes
  else
!   CXXFLAGS=""
!       cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  int
***************
*** 5961,5995 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_cxx_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
!   :
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
  
! 	ac_cxx_werror_flag=$ac_save_cxx_werror_flag
  	 CXXFLAGS="-g"
! 	 cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  int
--- 5994,6005 ----
    return 0;
  }
  _ACEOF
! if ac_fn_cxx_try_compile "$LINENO"; then :
  
! else
!   ac_cxx_werror_flag=$ac_save_cxx_werror_flag
  	 CXXFLAGS="-g"
! 	 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  int
***************
*** 6000,6036 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_cxx_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
    ac_cv_prog_cxx_g=yes
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
- 
  fi
- 
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  fi
- 
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  fi
- 
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
     ac_cxx_werror_flag=$ac_save_cxx_werror_flag
  fi
--- 6010,6022 ----
    return 0;
  }
  _ACEOF
! if ac_fn_cxx_try_compile "$LINENO"; then :
    ac_cv_prog_cxx_g=yes
  fi
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  fi
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  fi
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
     ac_cxx_werror_flag=$ac_save_cxx_werror_flag
  fi
***************
*** 6034,6041 ****
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
     ac_cxx_werror_flag=$ac_save_cxx_werror_flag
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_prog_cxx_g" >&5
! echo "${ECHO_T}$ac_cv_prog_cxx_g" >&6; }
  if test "$ac_test_CXXFLAGS" = set; then
    CXXFLAGS=$ac_save_CXXFLAGS
  elif test $ac_cv_prog_cxx_g = yes; then
--- 6020,6027 ----
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
     ac_cxx_werror_flag=$ac_save_cxx_werror_flag
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cxx_g" >&5
! $as_echo "$ac_cv_prog_cxx_g" >&6; }
  if test "$ac_test_CXXFLAGS" = set; then
    CXXFLAGS=$ac_save_CXXFLAGS
  elif test $ac_cv_prog_cxx_g = yes; then
***************
*** 6059,6068 ****
  
  depcc="$CXX"  am_compiler_list=
  
! { echo "$as_me:$LINENO: checking dependency style of $depcc" >&5
! echo $ECHO_N "checking dependency style of $depcc... $ECHO_C" >&6; }
! if test "${am_cv_CXX_dependencies_compiler_type+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -z "$AMDEP_TRUE" && test -f "$am_depcomp"; then
    # We make a subdir and do the tests there.  Otherwise we can end up
--- 6045,6054 ----
  
  depcc="$CXX"  am_compiler_list=
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking dependency style of $depcc" >&5
! $as_echo_n "checking dependency style of $depcc... " >&6; }
! if ${am_cv_CXX_dependencies_compiler_type+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -z "$AMDEP_TRUE" && test -f "$am_depcomp"; then
    # We make a subdir and do the tests there.  Otherwise we can end up
***************
*** 6150,6157 ****
  fi
  
  fi
! { echo "$as_me:$LINENO: result: $am_cv_CXX_dependencies_compiler_type" >&5
! echo "${ECHO_T}$am_cv_CXX_dependencies_compiler_type" >&6; }
  CXXDEPMODE=depmode=$am_cv_CXX_dependencies_compiler_type
  
   if
--- 6136,6143 ----
  fi
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $am_cv_CXX_dependencies_compiler_type" >&5
! $as_echo "$am_cv_CXX_dependencies_compiler_type" >&6; }
  CXXDEPMODE=depmode=$am_cv_CXX_dependencies_compiler_type
  
   if
***************
*** 6165,6192 ****
  fi
  
  
! { echo "$as_me:$LINENO: checking if malloc debugging is wanted" >&5
! echo $ECHO_N "checking if malloc debugging is wanted... $ECHO_C" >&6; }
  
  # Check whether --with-dmalloc was given.
! if test "${with_dmalloc+set}" = set; then
    withval=$with_dmalloc; if test "$withval" = yes; then
!   { echo "$as_me:$LINENO: result: yes" >&5
! echo "${ECHO_T}yes" >&6; }
  
! cat >>confdefs.h <<\_ACEOF
! #define WITH_DMALLOC 1
! _ACEOF
  
    LIBS="$LIBS -ldmalloc"
    LDFLAGS="$LDFLAGS -g"
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 6151,6176 ----
  fi
  
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking if malloc debugging is wanted" >&5
! $as_echo_n "checking if malloc debugging is wanted... " >&6; }
  
  # Check whether --with-dmalloc was given.
! if test "${with_dmalloc+set}" = set; then :
    withval=$with_dmalloc; if test "$withval" = yes; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
! $as_echo "yes" >&6; }
  
! $as_echo "#define WITH_DMALLOC 1" >>confdefs.h
  
    LIBS="$LIBS -ldmalloc"
    LDFLAGS="$LDFLAGS -g"
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 6243,6257 ****
  ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
  ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
  ac_compiler_gnu=$ac_cv_c_compiler_gnu
! { echo "$as_me:$LINENO: checking how to run the C preprocessor" >&5
! echo $ECHO_N "checking how to run the C preprocessor... $ECHO_C" >&6; }
  # On Suns, sometimes $CPP names a directory.
  if test -n "$CPP" && test -d "$CPP"; then
    CPP=
  fi
  if test -z "$CPP"; then
!   if test "${ac_cv_prog_CPP+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
        # Double quotes because CPP needs to be expanded
      for CPP in "$CC -E" "$CC -E -traditional-cpp" "/lib/cpp"
--- 6227,6241 ----
  ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
  ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
  ac_compiler_gnu=$ac_cv_c_compiler_gnu
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking how to run the C preprocessor" >&5
! $as_echo_n "checking how to run the C preprocessor... " >&6; }
  # On Suns, sometimes $CPP names a directory.
  if test -n "$CPP" && test -d "$CPP"; then
    CPP=
  fi
  if test -z "$CPP"; then
!   if ${ac_cv_prog_CPP+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
        # Double quotes because CPP needs to be expanded
      for CPP in "$CC -E" "$CC -E -traditional-cpp" "/lib/cpp"
***************
*** 6265,6275 ****
    # <limits.h> exists even on freestanding compilers.
    # On the NeXT, cc -E runs the code through the compiler's parser,
    # not just through cpp. "Syntax error" is here to catch this case.
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #ifdef __STDC__
  # include <limits.h>
--- 6249,6255 ----
    # <limits.h> exists even on freestanding compilers.
    # On the NeXT, cc -E runs the code through the compiler's parser,
    # not just through cpp. "Syntax error" is here to catch this case.
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #ifdef __STDC__
  # include <limits.h>
***************
*** 6278,6353 ****
  #endif
  		     Syntax error
  _ACEOF
! if { (ac_try="$ac_cpp conftest.$ac_ext"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } >/dev/null && {
! 	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        }; then
!   :
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
  
    # Broken: fails on valid input.
  continue
  fi
! 
! rm -f conftest.err conftest.$ac_ext
  
    # OK, works on sane cases.  Now check whether nonexistent headers
    # can be detected and how.
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <ac_nonexistent.h>
  _ACEOF
! if { (ac_try="$ac_cpp conftest.$ac_ext"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } >/dev/null && {
! 	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        }; then
    # Broken: success on invalid input.
  continue
  else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
    # Passes both tests.
  ac_preproc_ok=:
  break
  fi
! 
! rm -f conftest.err conftest.$ac_ext
  
  done
  # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
! rm -f conftest.err conftest.$ac_ext
! if $ac_preproc_ok; then
    break
  fi
  
--- 6258,6291 ----
  #endif
  		     Syntax error
  _ACEOF
! if ac_fn_c_try_cpp "$LINENO"; then :
  
+ else
    # Broken: fails on valid input.
  continue
  fi
! rm -f conftest.err conftest.i conftest.$ac_ext
  
    # OK, works on sane cases.  Now check whether nonexistent headers
    # can be detected and how.
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <ac_nonexistent.h>
  _ACEOF
! if ac_fn_c_try_cpp "$LINENO"; then :
    # Broken: success on invalid input.
  continue
  else
    # Passes both tests.
  ac_preproc_ok=:
  break
  fi
! rm -f conftest.err conftest.i conftest.$ac_ext
  
  done
  # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
! rm -f conftest.i conftest.err conftest.$ac_ext
! if $ac_preproc_ok; then :
    break
  fi
  
***************
*** 6359,6366 ****
  else
    ac_cv_prog_CPP=$CPP
  fi
! { echo "$as_me:$LINENO: result: $CPP" >&5
! echo "${ECHO_T}$CPP" >&6; }
  ac_preproc_ok=false
  for ac_c_preproc_warn_flag in '' yes
  do
--- 6297,6304 ----
  else
    ac_cv_prog_CPP=$CPP
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CPP" >&5
! $as_echo "$CPP" >&6; }
  ac_preproc_ok=false
  for ac_c_preproc_warn_flag in '' yes
  do
***************
*** 6370,6380 ****
    # <limits.h> exists even on freestanding compilers.
    # On the NeXT, cc -E runs the code through the compiler's parser,
    # not just through cpp. "Syntax error" is here to catch this case.
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #ifdef __STDC__
  # include <limits.h>
--- 6308,6314 ----
    # <limits.h> exists even on freestanding compilers.
    # On the NeXT, cc -E runs the code through the compiler's parser,
    # not just through cpp. "Syntax error" is here to catch this case.
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #ifdef __STDC__
  # include <limits.h>
***************
*** 6383,6465 ****
  #endif
  		     Syntax error
  _ACEOF
! if { (ac_try="$ac_cpp conftest.$ac_ext"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } >/dev/null && {
! 	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        }; then
!   :
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
  
    # Broken: fails on valid input.
  continue
  fi
! 
! rm -f conftest.err conftest.$ac_ext
  
    # OK, works on sane cases.  Now check whether nonexistent headers
    # can be detected and how.
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <ac_nonexistent.h>
  _ACEOF
! if { (ac_try="$ac_cpp conftest.$ac_ext"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } >/dev/null && {
! 	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        }; then
    # Broken: success on invalid input.
  continue
  else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
    # Passes both tests.
  ac_preproc_ok=:
  break
  fi
! 
! rm -f conftest.err conftest.$ac_ext
  
  done
  # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
! rm -f conftest.err conftest.$ac_ext
! if $ac_preproc_ok; then
!   :
  else
!   { { echo "$as_me:$LINENO: error: C preprocessor \"$CPP\" fails sanity check
! See \`config.log' for more details." >&5
! echo "$as_me: error: C preprocessor \"$CPP\" fails sanity check
! See \`config.log' for more details." >&2;}
!    { (exit 1); exit 1; }; }
  fi
  
  ac_ext=c
--- 6317,6356 ----
  #endif
  		     Syntax error
  _ACEOF
! if ac_fn_c_try_cpp "$LINENO"; then :
  
+ else
    # Broken: fails on valid input.
  continue
  fi
! rm -f conftest.err conftest.i conftest.$ac_ext
  
    # OK, works on sane cases.  Now check whether nonexistent headers
    # can be detected and how.
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <ac_nonexistent.h>
  _ACEOF
! if ac_fn_c_try_cpp "$LINENO"; then :
    # Broken: success on invalid input.
  continue
  else
    # Passes both tests.
  ac_preproc_ok=:
  break
  fi
! rm -f conftest.err conftest.i conftest.$ac_ext
  
  done
  # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
! rm -f conftest.i conftest.err conftest.$ac_ext
! if $ac_preproc_ok; then :
! 
  else
!   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
! $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
! as_fn_error $? "C preprocessor \"$CPP\" fails sanity check
! See \`config.log' for more details" "$LINENO" 5; }
  fi
  
  ac_ext=c
***************
*** 6469,6513 ****
  ac_compiler_gnu=$ac_cv_c_compiler_gnu
  
  
! { echo "$as_me:$LINENO: checking for grep that handles long lines and -e" >&5
! echo $ECHO_N "checking for grep that handles long lines and -e... $ECHO_C" >&6; }
! if test "${ac_cv_path_GREP+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   # Extract the first word of "grep ggrep" to use in msg output
! if test -z "$GREP"; then
! set dummy grep ggrep; ac_prog_name=$2
! if test "${ac_cv_path_GREP+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    ac_path_GREP_found=false
! # Loop through the user's path and test for each of PROGNAME-LIST
! as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
  for as_dir in $PATH$PATH_SEPARATOR/usr/xpg4/bin
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_prog in grep ggrep; do
!   for ac_exec_ext in '' $ac_executable_extensions; do
!     ac_path_GREP="$as_dir/$ac_prog$ac_exec_ext"
!     { test -f "$ac_path_GREP" && $as_test_x "$ac_path_GREP"; } || continue
!     # Check for GNU ac_path_GREP and select it if it is found.
    # Check for GNU $ac_path_GREP
  case `"$ac_path_GREP" --version 2>&1` in
  *GNU*)
    ac_cv_path_GREP="$ac_path_GREP" ac_path_GREP_found=:;;
  *)
    ac_count=0
!   echo $ECHO_N "0123456789$ECHO_C" >"conftest.in"
    while :
    do
      cat "conftest.in" "conftest.in" >"conftest.tmp"
      mv "conftest.tmp" "conftest.in"
      cp "conftest.in" "conftest.nl"
!     echo 'GREP' >> "conftest.nl"
      "$ac_path_GREP" -e 'GREP$' -e '-(cannot match)-' < "conftest.nl" >"conftest.out" 2>/dev/null || break
      diff "conftest.out" "conftest.nl" >/dev/null 2>&1 || break
!     ac_count=`expr $ac_count + 1`
      if test $ac_count -gt ${ac_path_GREP_max-0}; then
        # Best one so far, save it but keep looking for a better one
        ac_cv_path_GREP="$ac_path_GREP"
--- 6360,6399 ----
  ac_compiler_gnu=$ac_cv_c_compiler_gnu
  
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for grep that handles long lines and -e" >&5
! $as_echo_n "checking for grep that handles long lines and -e... " >&6; }
! if ${ac_cv_path_GREP+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
+   if test -z "$GREP"; then
    ac_path_GREP_found=false
!   # Loop through the user's path and test for each of PROGNAME-LIST
!   as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
  for as_dir in $PATH$PATH_SEPARATOR/usr/xpg4/bin
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_prog in grep ggrep; do
!     for ac_exec_ext in '' $ac_executable_extensions; do
!       ac_path_GREP="$as_dir/$ac_prog$ac_exec_ext"
!       { test -f "$ac_path_GREP" && $as_test_x "$ac_path_GREP"; } || continue
! # Check for GNU ac_path_GREP and select it if it is found.
    # Check for GNU $ac_path_GREP
  case `"$ac_path_GREP" --version 2>&1` in
  *GNU*)
    ac_cv_path_GREP="$ac_path_GREP" ac_path_GREP_found=:;;
  *)
    ac_count=0
!   $as_echo_n 0123456789 >"conftest.in"
    while :
    do
      cat "conftest.in" "conftest.in" >"conftest.tmp"
      mv "conftest.tmp" "conftest.in"
      cp "conftest.in" "conftest.nl"
!     $as_echo 'GREP' >> "conftest.nl"
      "$ac_path_GREP" -e 'GREP$' -e '-(cannot match)-' < "conftest.nl" >"conftest.out" 2>/dev/null || break
      diff "conftest.out" "conftest.nl" >/dev/null 2>&1 || break
!     as_fn_arith $ac_count + 1 && ac_count=$as_val
      if test $ac_count -gt ${ac_path_GREP_max-0}; then
        # Best one so far, save it but keep looking for a better one
        ac_cv_path_GREP="$ac_path_GREP"
***************
*** 6519,6542 ****
    rm -f conftest.in conftest.tmp conftest.nl conftest.out;;
  esac
  
! 
!     $ac_path_GREP_found && break 3
    done
- done
- 
- done
  IFS=$as_save_IFS
! 
! 
! fi
! 
! GREP="$ac_cv_path_GREP"
! if test -z "$GREP"; then
!   { { echo "$as_me:$LINENO: error: no acceptable $ac_prog_name could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" >&5
! echo "$as_me: error: no acceptable $ac_prog_name could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" >&2;}
!    { (exit 1); exit 1; }; }
! fi
! 
  else
    ac_cv_path_GREP=$GREP
  fi
--- 6405,6418 ----
    rm -f conftest.in conftest.tmp conftest.nl conftest.out;;
  esac
  
!       $ac_path_GREP_found && break 3
!     done
!   done
    done
  IFS=$as_save_IFS
!   if test -z "$ac_cv_path_GREP"; then
!     as_fn_error $? "no acceptable grep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
!   fi
  else
    ac_cv_path_GREP=$GREP
  fi
***************
*** 6541,6595 ****
    ac_cv_path_GREP=$GREP
  fi
  
- 
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_path_GREP" >&5
! echo "${ECHO_T}$ac_cv_path_GREP" >&6; }
   GREP="$ac_cv_path_GREP"
  
  
! { echo "$as_me:$LINENO: checking for egrep" >&5
! echo $ECHO_N "checking for egrep... $ECHO_C" >&6; }
! if test "${ac_cv_path_EGREP+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if echo a | $GREP -E '(a|b)' >/dev/null 2>&1
     then ac_cv_path_EGREP="$GREP -E"
     else
!      # Extract the first word of "egrep" to use in msg output
! if test -z "$EGREP"; then
! set dummy egrep; ac_prog_name=$2
! if test "${ac_cv_path_EGREP+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
    ac_path_EGREP_found=false
! # Loop through the user's path and test for each of PROGNAME-LIST
! as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
  for as_dir in $PATH$PATH_SEPARATOR/usr/xpg4/bin
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_prog in egrep; do
!   for ac_exec_ext in '' $ac_executable_extensions; do
!     ac_path_EGREP="$as_dir/$ac_prog$ac_exec_ext"
!     { test -f "$ac_path_EGREP" && $as_test_x "$ac_path_EGREP"; } || continue
!     # Check for GNU ac_path_EGREP and select it if it is found.
    # Check for GNU $ac_path_EGREP
  case `"$ac_path_EGREP" --version 2>&1` in
  *GNU*)
    ac_cv_path_EGREP="$ac_path_EGREP" ac_path_EGREP_found=:;;
  *)
    ac_count=0
!   echo $ECHO_N "0123456789$ECHO_C" >"conftest.in"
    while :
    do
      cat "conftest.in" "conftest.in" >"conftest.tmp"
      mv "conftest.tmp" "conftest.in"
      cp "conftest.in" "conftest.nl"
!     echo 'EGREP' >> "conftest.nl"
      "$ac_path_EGREP" 'EGREP$' < "conftest.nl" >"conftest.out" 2>/dev/null || break
      diff "conftest.out" "conftest.nl" >/dev/null 2>&1 || break
!     ac_count=`expr $ac_count + 1`
      if test $ac_count -gt ${ac_path_EGREP_max-0}; then
        # Best one so far, save it but keep looking for a better one
        ac_cv_path_EGREP="$ac_path_EGREP"
--- 6417,6465 ----
    ac_cv_path_GREP=$GREP
  fi
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_path_GREP" >&5
! $as_echo "$ac_cv_path_GREP" >&6; }
   GREP="$ac_cv_path_GREP"
  
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for egrep" >&5
! $as_echo_n "checking for egrep... " >&6; }
! if ${ac_cv_path_EGREP+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if echo a | $GREP -E '(a|b)' >/dev/null 2>&1
     then ac_cv_path_EGREP="$GREP -E"
     else
!      if test -z "$EGREP"; then
    ac_path_EGREP_found=false
!   # Loop through the user's path and test for each of PROGNAME-LIST
!   as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
  for as_dir in $PATH$PATH_SEPARATOR/usr/xpg4/bin
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_prog in egrep; do
!     for ac_exec_ext in '' $ac_executable_extensions; do
!       ac_path_EGREP="$as_dir/$ac_prog$ac_exec_ext"
!       { test -f "$ac_path_EGREP" && $as_test_x "$ac_path_EGREP"; } || continue
! # Check for GNU ac_path_EGREP and select it if it is found.
    # Check for GNU $ac_path_EGREP
  case `"$ac_path_EGREP" --version 2>&1` in
  *GNU*)
    ac_cv_path_EGREP="$ac_path_EGREP" ac_path_EGREP_found=:;;
  *)
    ac_count=0
!   $as_echo_n 0123456789 >"conftest.in"
    while :
    do
      cat "conftest.in" "conftest.in" >"conftest.tmp"
      mv "conftest.tmp" "conftest.in"
      cp "conftest.in" "conftest.nl"
!     $as_echo 'EGREP' >> "conftest.nl"
      "$ac_path_EGREP" 'EGREP$' < "conftest.nl" >"conftest.out" 2>/dev/null || break
      diff "conftest.out" "conftest.nl" >/dev/null 2>&1 || break
!     as_fn_arith $ac_count + 1 && ac_count=$as_val
      if test $ac_count -gt ${ac_path_EGREP_max-0}; then
        # Best one so far, save it but keep looking for a better one
        ac_cv_path_EGREP="$ac_path_EGREP"
***************
*** 6601,6624 ****
    rm -f conftest.in conftest.tmp conftest.nl conftest.out;;
  esac
  
! 
!     $ac_path_EGREP_found && break 3
    done
- done
- 
- done
  IFS=$as_save_IFS
! 
! 
! fi
! 
! EGREP="$ac_cv_path_EGREP"
! if test -z "$EGREP"; then
!   { { echo "$as_me:$LINENO: error: no acceptable $ac_prog_name could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" >&5
! echo "$as_me: error: no acceptable $ac_prog_name could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" >&2;}
!    { (exit 1); exit 1; }; }
! fi
! 
  else
    ac_cv_path_EGREP=$EGREP
  fi
--- 6471,6484 ----
    rm -f conftest.in conftest.tmp conftest.nl conftest.out;;
  esac
  
!       $ac_path_EGREP_found && break 3
!     done
!   done
    done
  IFS=$as_save_IFS
!   if test -z "$ac_cv_path_EGREP"; then
!     as_fn_error $? "no acceptable egrep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
!   fi
  else
    ac_cv_path_EGREP=$EGREP
  fi
***************
*** 6623,6646 ****
    ac_cv_path_EGREP=$EGREP
  fi
  
- 
     fi
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_path_EGREP" >&5
! echo "${ECHO_T}$ac_cv_path_EGREP" >&6; }
   EGREP="$ac_cv_path_EGREP"
  
  
! { echo "$as_me:$LINENO: checking for ANSI C header files" >&5
! echo $ECHO_N "checking for ANSI C header files... $ECHO_C" >&6; }
! if test "${ac_cv_header_stdc+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <stdlib.h>
  #include <stdarg.h>
--- 6483,6501 ----
    ac_cv_path_EGREP=$EGREP
  fi
  
     fi
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_path_EGREP" >&5
! $as_echo "$ac_cv_path_EGREP" >&6; }
   EGREP="$ac_cv_path_EGREP"
  
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ANSI C header files" >&5
! $as_echo_n "checking for ANSI C header files... " >&6; }
! if ${ac_cv_header_stdc+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <stdlib.h>
  #include <stdarg.h>
***************
*** 6655,6685 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
    ac_cv_header_stdc=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_cv_header_stdc=no
  fi
- 
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  
  if test $ac_cv_header_stdc = yes; then
--- 6510,6520 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_compile "$LINENO"; then :
    ac_cv_header_stdc=yes
  else
!   ac_cv_header_stdc=no
  fi
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  
  if test $ac_cv_header_stdc = yes; then
***************
*** 6684,6701 ****
  
  if test $ac_cv_header_stdc = yes; then
    # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <string.h>
  
  _ACEOF
  if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
!   $EGREP "memchr" >/dev/null 2>&1; then
!   :
  else
    ac_cv_header_stdc=no
  fi
--- 6519,6532 ----
  
  if test $ac_cv_header_stdc = yes; then
    # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <string.h>
  
  _ACEOF
  if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
!   $EGREP "memchr" >/dev/null 2>&1; then :
! 
  else
    ac_cv_header_stdc=no
  fi
***************
*** 6705,6722 ****
  
  if test $ac_cv_header_stdc = yes; then
    # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <stdlib.h>
  
  _ACEOF
  if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
!   $EGREP "free" >/dev/null 2>&1; then
!   :
  else
    ac_cv_header_stdc=no
  fi
--- 6536,6549 ----
  
  if test $ac_cv_header_stdc = yes; then
    # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <stdlib.h>
  
  _ACEOF
  if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
!   $EGREP "free" >/dev/null 2>&1; then :
! 
  else
    ac_cv_header_stdc=no
  fi
***************
*** 6726,6739 ****
  
  if test $ac_cv_header_stdc = yes; then
    # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
!   if test "$cross_compiling" = yes; then
    :
  else
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <ctype.h>
  #include <stdlib.h>
--- 6553,6562 ----
  
  if test $ac_cv_header_stdc = yes; then
    # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
!   if test "$cross_compiling" = yes; then :
    :
  else
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <ctype.h>
  #include <stdlib.h>
***************
*** 6760,6807 ****
    return 0;
  }
  _ACEOF
! rm -f conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
!   { (case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_try") 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   :
! else
!   echo "$as_me: program exited with status $ac_status" >&5
! echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
  
! ( exit $ac_status )
! ac_cv_header_stdc=no
  fi
! rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
  fi
  
- 
  fi
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_header_stdc" >&5
! echo "${ECHO_T}$ac_cv_header_stdc" >&6; }
  if test $ac_cv_header_stdc = yes; then
  
! cat >>confdefs.h <<\_ACEOF
! #define STDC_HEADERS 1
! _ACEOF
  
  fi
  
--- 6583,6604 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_run "$LINENO"; then :
  
! else
!   ac_cv_header_stdc=no
  fi
! rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
!   conftest.$ac_objext conftest.beam conftest.$ac_ext
  fi
  
  fi
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_header_stdc" >&5
! $as_echo "$ac_cv_header_stdc" >&6; }
  if test $ac_cv_header_stdc = yes; then
  
! $as_echo "#define STDC_HEADERS 1" >>confdefs.h
  
  fi
  
***************
*** 6806,6872 ****
  fi
  
  # On IRIX 5.3, sys/types and inttypes.h are conflicting.
- 
- 
- 
- 
- 
- 
- 
- 
- 
  for ac_header in sys/types.h sys/stat.h stdlib.h string.h memory.h strings.h \
  		  inttypes.h stdint.h unistd.h
! do
! as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
! { echo "$as_me:$LINENO: checking for $ac_header" >&5
! echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6; }
! if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
! /* end confdefs.h.  */
! $ac_includes_default
! 
! #include <$ac_header>
! _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
!   eval "$as_ac_Header=yes"
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	eval "$as_ac_Header=no"
! fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
! fi
! ac_res=`eval echo '${'$as_ac_Header'}'`
! 	       { echo "$as_me:$LINENO: result: $ac_res" >&5
! echo "${ECHO_T}$ac_res" >&6; }
! if test `eval echo '${'$as_ac_Header'}'` = yes; then
    cat >>confdefs.h <<_ACEOF
! #define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
  _ACEOF
  
  fi
--- 6603,6617 ----
  fi
  
  # On IRIX 5.3, sys/types and inttypes.h are conflicting.
  for ac_header in sys/types.h sys/stat.h stdlib.h string.h memory.h strings.h \
  		  inttypes.h stdint.h unistd.h
! do :
!   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
! ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default
! "
! if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
    cat >>confdefs.h <<_ACEOF
! #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
  _ACEOF
  
  fi
***************
*** 6875,7014 ****
  
  
  
! 
! for ac_header in locale.h
! do
! as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
! if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
!   { echo "$as_me:$LINENO: checking for $ac_header" >&5
! echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6; }
! if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! fi
! ac_res=`eval echo '${'$as_ac_Header'}'`
! 	       { echo "$as_me:$LINENO: result: $ac_res" >&5
! echo "${ECHO_T}$ac_res" >&6; }
! else
!   # Is the header compilable?
! { echo "$as_me:$LINENO: checking $ac_header usability" >&5
! echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6; }
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
! /* end confdefs.h.  */
! $ac_includes_default
! #include <$ac_header>
! _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
!   ac_header_compiler=yes
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_header_compiler=no
! fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
! { echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
! echo "${ECHO_T}$ac_header_compiler" >&6; }
! 
! # Is the header present?
! { echo "$as_me:$LINENO: checking $ac_header presence" >&5
! echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6; }
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
! /* end confdefs.h.  */
! #include <$ac_header>
! _ACEOF
! if { (ac_try="$ac_cpp conftest.$ac_ext"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } >/dev/null && {
! 	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        }; then
!   ac_header_preproc=yes
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
!   ac_header_preproc=no
! fi
! 
! rm -f conftest.err conftest.$ac_ext
! { echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
! echo "${ECHO_T}$ac_header_preproc" >&6; }
! 
! # So?  What about this header?
! case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
!   yes:no: )
!     { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
! echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
!     { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the compiler's result" >&5
! echo "$as_me: WARNING: $ac_header: proceeding with the compiler's result" >&2;}
!     ac_header_preproc=yes
!     ;;
!   no:yes:* )
!     { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
! echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
!     { echo "$as_me:$LINENO: WARNING: $ac_header:     check for missing prerequisite headers?" >&5
! echo "$as_me: WARNING: $ac_header:     check for missing prerequisite headers?" >&2;}
!     { echo "$as_me:$LINENO: WARNING: $ac_header: see the Autoconf documentation" >&5
! echo "$as_me: WARNING: $ac_header: see the Autoconf documentation" >&2;}
!     { echo "$as_me:$LINENO: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&5
! echo "$as_me: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&2;}
!     { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
! echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;}
!     { echo "$as_me:$LINENO: WARNING: $ac_header: in the future, the compiler will take precedence" >&5
! echo "$as_me: WARNING: $ac_header: in the future, the compiler will take precedence" >&2;}
! 
!     ;;
! esac
! { echo "$as_me:$LINENO: checking for $ac_header" >&5
! echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6; }
! if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   eval "$as_ac_Header=\$ac_header_preproc"
! fi
! ac_res=`eval echo '${'$as_ac_Header'}'`
! 	       { echo "$as_me:$LINENO: result: $ac_res" >&5
! echo "${ECHO_T}$ac_res" >&6; }
! 
! fi
! if test `eval echo '${'$as_ac_Header'}'` = yes; then
    cat >>confdefs.h <<_ACEOF
! #define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
  _ACEOF
  
  fi
--- 6620,6631 ----
  
  
  
!    for ac_header in locale.h
! do :
!   ac_fn_c_check_header_mongrel "$LINENO" "locale.h" "ac_cv_header_locale_h" "$ac_includes_default"
! if test "x$ac_cv_header_locale_h" = xyes; then :
    cat >>confdefs.h <<_ACEOF
! #define HAVE_LOCALE_H 1
  _ACEOF
  
  fi
***************
*** 7016,7031 ****
  done
  
      if test $ac_cv_header_locale_h = yes; then
!     { echo "$as_me:$LINENO: checking for LC_MESSAGES" >&5
! echo $ECHO_N "checking for LC_MESSAGES... $ECHO_C" >&6; }
! if test "${am_cv_val_LC_MESSAGES+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <locale.h>
  int
--- 6633,6644 ----
  done
  
      if test $ac_cv_header_locale_h = yes; then
!     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for LC_MESSAGES" >&5
! $as_echo_n "checking for LC_MESSAGES... " >&6; }
! if ${am_cv_val_LC_MESSAGES+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <locale.h>
  int
***************
*** 7036,7077 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
    am_cv_val_LC_MESSAGES=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	am_cv_val_LC_MESSAGES=no
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  fi
! { echo "$as_me:$LINENO: result: $am_cv_val_LC_MESSAGES" >&5
! echo "${ECHO_T}$am_cv_val_LC_MESSAGES" >&6; }
      if test $am_cv_val_LC_MESSAGES = yes; then
  
! cat >>confdefs.h <<\_ACEOF
! #define HAVE_LC_MESSAGES 1
! _ACEOF
  
      fi
    fi
--- 6649,6667 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
    am_cv_val_LC_MESSAGES=yes
  else
!   am_cv_val_LC_MESSAGES=no
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $am_cv_val_LC_MESSAGES" >&5
! $as_echo "$am_cv_val_LC_MESSAGES" >&6; }
      if test $am_cv_val_LC_MESSAGES = yes; then
  
! $as_echo "#define HAVE_LC_MESSAGES 1" >>confdefs.h
  
      fi
    fi
***************
*** 7084,7231 ****
      XGETTEXT=:
      INTLLIBS=
  
!     if test "${ac_cv_header_libintl_h+set}" = set; then
!   { echo "$as_me:$LINENO: checking for libintl.h" >&5
! echo $ECHO_N "checking for libintl.h... $ECHO_C" >&6; }
! if test "${ac_cv_header_libintl_h+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! fi
! { echo "$as_me:$LINENO: result: $ac_cv_header_libintl_h" >&5
! echo "${ECHO_T}$ac_cv_header_libintl_h" >&6; }
! else
!   # Is the header compilable?
! { echo "$as_me:$LINENO: checking libintl.h usability" >&5
! echo $ECHO_N "checking libintl.h usability... $ECHO_C" >&6; }
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
! /* end confdefs.h.  */
! $ac_includes_default
! #include <libintl.h>
! _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
!   ac_header_compiler=yes
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_header_compiler=no
! fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
! { echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
! echo "${ECHO_T}$ac_header_compiler" >&6; }
! 
! # Is the header present?
! { echo "$as_me:$LINENO: checking libintl.h presence" >&5
! echo $ECHO_N "checking libintl.h presence... $ECHO_C" >&6; }
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
! /* end confdefs.h.  */
! #include <libintl.h>
! _ACEOF
! if { (ac_try="$ac_cpp conftest.$ac_ext"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } >/dev/null && {
! 	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        }; then
!   ac_header_preproc=yes
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
!   ac_header_preproc=no
! fi
! 
! rm -f conftest.err conftest.$ac_ext
! { echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
! echo "${ECHO_T}$ac_header_preproc" >&6; }
! 
! # So?  What about this header?
! case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
!   yes:no: )
!     { echo "$as_me:$LINENO: WARNING: libintl.h: accepted by the compiler, rejected by the preprocessor!" >&5
! echo "$as_me: WARNING: libintl.h: accepted by the compiler, rejected by the preprocessor!" >&2;}
!     { echo "$as_me:$LINENO: WARNING: libintl.h: proceeding with the compiler's result" >&5
! echo "$as_me: WARNING: libintl.h: proceeding with the compiler's result" >&2;}
!     ac_header_preproc=yes
!     ;;
!   no:yes:* )
!     { echo "$as_me:$LINENO: WARNING: libintl.h: present but cannot be compiled" >&5
! echo "$as_me: WARNING: libintl.h: present but cannot be compiled" >&2;}
!     { echo "$as_me:$LINENO: WARNING: libintl.h:     check for missing prerequisite headers?" >&5
! echo "$as_me: WARNING: libintl.h:     check for missing prerequisite headers?" >&2;}
!     { echo "$as_me:$LINENO: WARNING: libintl.h: see the Autoconf documentation" >&5
! echo "$as_me: WARNING: libintl.h: see the Autoconf documentation" >&2;}
!     { echo "$as_me:$LINENO: WARNING: libintl.h:     section \"Present But Cannot Be Compiled\"" >&5
! echo "$as_me: WARNING: libintl.h:     section \"Present But Cannot Be Compiled\"" >&2;}
!     { echo "$as_me:$LINENO: WARNING: libintl.h: proceeding with the preprocessor's result" >&5
! echo "$as_me: WARNING: libintl.h: proceeding with the preprocessor's result" >&2;}
!     { echo "$as_me:$LINENO: WARNING: libintl.h: in the future, the compiler will take precedence" >&5
! echo "$as_me: WARNING: libintl.h: in the future, the compiler will take precedence" >&2;}
! 
!     ;;
! esac
! { echo "$as_me:$LINENO: checking for libintl.h" >&5
! echo $ECHO_N "checking for libintl.h... $ECHO_C" >&6; }
! if test "${ac_cv_header_libintl_h+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   ac_cv_header_libintl_h=$ac_header_preproc
! fi
! { echo "$as_me:$LINENO: result: $ac_cv_header_libintl_h" >&5
! echo "${ECHO_T}$ac_cv_header_libintl_h" >&6; }
! 
! fi
! if test $ac_cv_header_libintl_h = yes; then
    gt_cv_func_dgettext_libintl="no"
        libintl_extra_libs=""
  
        #
        # First check in libc
        #
!       { echo "$as_me:$LINENO: checking for ngettext in libc" >&5
! echo $ECHO_N "checking for ngettext in libc... $ECHO_C" >&6; }
! if test "${gt_cv_func_ngettext_libc+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  #include <libintl.h>
--- 6674,6693 ----
      XGETTEXT=:
      INTLLIBS=
  
!     ac_fn_c_check_header_mongrel "$LINENO" "libintl.h" "ac_cv_header_libintl_h" "$ac_includes_default"
! if test "x$ac_cv_header_libintl_h" = xyes; then :
    gt_cv_func_dgettext_libintl="no"
        libintl_extra_libs=""
  
        #
        # First check in libc
        #
!       { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ngettext in libc" >&5
! $as_echo_n "checking for ngettext in libc... " >&6; }
! if ${gt_cv_func_ngettext_libc+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  #include <libintl.h>
***************
*** 7238,7287 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
    gt_cv_func_ngettext_libc=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	gt_cv_func_ngettext_libc=no
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  
  fi
! { echo "$as_me:$LINENO: result: $gt_cv_func_ngettext_libc" >&5
! echo "${ECHO_T}$gt_cv_func_ngettext_libc" >&6; }
  
        if test "$gt_cv_func_ngettext_libc" = "yes" ; then
! 	      { echo "$as_me:$LINENO: checking for dgettext in libc" >&5
! echo $ECHO_N "checking for dgettext in libc... $ECHO_C" >&6; }
! if test "${gt_cv_func_dgettext_libc+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  #include <libintl.h>
--- 6700,6724 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
    gt_cv_func_ngettext_libc=yes
  else
!   gt_cv_func_ngettext_libc=no
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $gt_cv_func_ngettext_libc" >&5
! $as_echo "$gt_cv_func_ngettext_libc" >&6; }
  
        if test "$gt_cv_func_ngettext_libc" = "yes" ; then
! 	      { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dgettext in libc" >&5
! $as_echo_n "checking for dgettext in libc... " >&6; }
! if ${gt_cv_func_dgettext_libc+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  #include <libintl.h>
***************
*** 7294,7423 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
    gt_cv_func_dgettext_libc=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	gt_cv_func_dgettext_libc=no
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  
  fi
! { echo "$as_me:$LINENO: result: $gt_cv_func_dgettext_libc" >&5
! echo "${ECHO_T}$gt_cv_func_dgettext_libc" >&6; }
        fi
  
        if test "$gt_cv_func_ngettext_libc" = "yes" ; then
! 
! for ac_func in bind_textdomain_codeset
! do
! as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
! { echo "$as_me:$LINENO: checking for $ac_func" >&5
! echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6; }
! if { as_var=$as_ac_var; eval "test \"\${$as_var+set}\" = set"; }; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
! /* end confdefs.h.  */
! /* Define $ac_func to an innocuous variant, in case <limits.h> declares $ac_func.
!    For example, HP-UX 11i <limits.h> declares gettimeofday.  */
! #define $ac_func innocuous_$ac_func
! 
! /* System header to define __stub macros and hopefully few prototypes,
!     which can conflict with char $ac_func (); below.
!     Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
!     <limits.h> exists even on freestanding compilers.  */
! 
! #ifdef __STDC__
! # include <limits.h>
! #else
! # include <assert.h>
! #endif
! 
! #undef $ac_func
! 
! /* Override any GCC internal prototype to avoid an error.
!    Use char because int might match the return type of a GCC
!    builtin and then its argument prototype would still apply.  */
! #ifdef __cplusplus
! extern "C"
! #endif
! char $ac_func ();
! /* The GNU C library defines this for functions which it implements
!     to always fail with ENOSYS.  Some functions are actually named
!     something starting with __ and the normal name is an alias.  */
! #if defined __stub_$ac_func || defined __stub___$ac_func
! choke me
! #endif
! 
! int
! main ()
! {
! return $ac_func ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
!   eval "$as_ac_var=yes"
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	eval "$as_ac_var=no"
! fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
! fi
! ac_res=`eval echo '${'$as_ac_var'}'`
! 	       { echo "$as_me:$LINENO: result: $ac_res" >&5
! echo "${ECHO_T}$ac_res" >&6; }
! if test `eval echo '${'$as_ac_var'}'` = yes; then
    cat >>confdefs.h <<_ACEOF
! #define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
  _ACEOF
  
  fi
--- 6731,6756 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
    gt_cv_func_dgettext_libc=yes
  else
!   gt_cv_func_dgettext_libc=no
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $gt_cv_func_dgettext_libc" >&5
! $as_echo "$gt_cv_func_dgettext_libc" >&6; }
        fi
  
        if test "$gt_cv_func_ngettext_libc" = "yes" ; then
!         for ac_func in bind_textdomain_codeset
! do :
!   ac_fn_c_check_func "$LINENO" "bind_textdomain_codeset" "ac_cv_func_bind_textdomain_codeset"
! if test "x$ac_cv_func_bind_textdomain_codeset" = xyes; then :
    cat >>confdefs.h <<_ACEOF
! #define HAVE_BIND_TEXTDOMAIN_CODESET 1
  _ACEOF
  
  fi
***************
*** 7432,7449 ****
  	 || test "$gt_cv_func_ngettext_libc" != "yes" \
           || test "$ac_cv_func_bind_textdomain_codeset" != "yes" ; then
  
!         { echo "$as_me:$LINENO: checking for bindtextdomain in -lintl" >&5
! echo $ECHO_N "checking for bindtextdomain in -lintl... $ECHO_C" >&6; }
! if test "${ac_cv_lib_intl_bindtextdomain+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-lintl  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
--- 6765,6778 ----
  	 || test "$gt_cv_func_ngettext_libc" != "yes" \
           || test "$ac_cv_func_bind_textdomain_codeset" != "yes" ; then
  
!         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for bindtextdomain in -lintl" >&5
! $as_echo_n "checking for bindtextdomain in -lintl... " >&6; }
! if ${ac_cv_lib_intl_bindtextdomain+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-lintl  $LIBS"
! cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
***************
*** 7461,7511 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
    ac_cv_lib_intl_bindtextdomain=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_cv_lib_intl_bindtextdomain=no
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_lib_intl_bindtextdomain" >&5
! echo "${ECHO_T}$ac_cv_lib_intl_bindtextdomain" >&6; }
! if test $ac_cv_lib_intl_bindtextdomain = yes; then
!   { echo "$as_me:$LINENO: checking for ngettext in -lintl" >&5
! echo $ECHO_N "checking for ngettext in -lintl... $ECHO_C" >&6; }
! if test "${ac_cv_lib_intl_ngettext+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-lintl  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
--- 6790,6815 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
    ac_cv_lib_intl_bindtextdomain=yes
  else
!   ac_cv_lib_intl_bindtextdomain=no
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_intl_bindtextdomain" >&5
! $as_echo "$ac_cv_lib_intl_bindtextdomain" >&6; }
! if test "x$ac_cv_lib_intl_bindtextdomain" = xyes; then :
!   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ngettext in -lintl" >&5
! $as_echo_n "checking for ngettext in -lintl... " >&6; }
! if ${ac_cv_lib_intl_ngettext+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-lintl  $LIBS"
! cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
***************
*** 7523,7573 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
    ac_cv_lib_intl_ngettext=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_cv_lib_intl_ngettext=no
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_lib_intl_ngettext" >&5
! echo "${ECHO_T}$ac_cv_lib_intl_ngettext" >&6; }
! if test $ac_cv_lib_intl_ngettext = yes; then
!   { echo "$as_me:$LINENO: checking for dgettext in -lintl" >&5
! echo $ECHO_N "checking for dgettext in -lintl... $ECHO_C" >&6; }
! if test "${ac_cv_lib_intl_dgettext+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-lintl  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
--- 6827,6852 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
    ac_cv_lib_intl_ngettext=yes
  else
!   ac_cv_lib_intl_ngettext=no
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_intl_ngettext" >&5
! $as_echo "$ac_cv_lib_intl_ngettext" >&6; }
! if test "x$ac_cv_lib_intl_ngettext" = xyes; then :
!   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dgettext in -lintl" >&5
! $as_echo_n "checking for dgettext in -lintl... " >&6; }
! if ${ac_cv_lib_intl_dgettext+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-lintl  $LIBS"
! cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
***************
*** 7585,7623 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
    ac_cv_lib_intl_dgettext=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_cv_lib_intl_dgettext=no
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_lib_intl_dgettext" >&5
! echo "${ECHO_T}$ac_cv_lib_intl_dgettext" >&6; }
! if test $ac_cv_lib_intl_dgettext = yes; then
    gt_cv_func_dgettext_libintl=yes
  fi
  
--- 6864,6881 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
    ac_cv_lib_intl_dgettext=yes
  else
!   ac_cv_lib_intl_dgettext=no
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_intl_dgettext" >&5
! $as_echo "$ac_cv_lib_intl_dgettext" >&6; }
! if test "x$ac_cv_lib_intl_dgettext" = xyes; then :
    gt_cv_func_dgettext_libintl=yes
  fi
  
***************
*** 7627,7648 ****
  
  
  	if test "$gt_cv_func_dgettext_libintl" != "yes" ; then
! 	  { echo "$as_me:$LINENO: checking if -liconv is needed to use gettext" >&5
! echo $ECHO_N "checking if -liconv is needed to use gettext... $ECHO_C" >&6; }
! 	  { echo "$as_me:$LINENO: result: " >&5
! echo "${ECHO_T}" >&6; }
!   	  { echo "$as_me:$LINENO: checking for ngettext in -lintl" >&5
! echo $ECHO_N "checking for ngettext in -lintl... $ECHO_C" >&6; }
! if test "${ac_cv_lib_intl_ngettext+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-lintl -liconv $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
--- 6885,6902 ----
  
  
  	if test "$gt_cv_func_dgettext_libintl" != "yes" ; then
! 	  { $as_echo "$as_me:${as_lineno-$LINENO}: checking if -liconv is needed to use gettext" >&5
! $as_echo_n "checking if -liconv is needed to use gettext... " >&6; }
! 	  { $as_echo "$as_me:${as_lineno-$LINENO}: result: " >&5
! $as_echo "" >&6; }
!   	  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ngettext in -lintl" >&5
! $as_echo_n "checking for ngettext in -lintl... " >&6; }
! if ${ac_cv_lib_intl_ngettext+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-lintl -liconv $LIBS"
! cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
***************
*** 7660,7710 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
    ac_cv_lib_intl_ngettext=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_cv_lib_intl_ngettext=no
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_lib_intl_ngettext" >&5
! echo "${ECHO_T}$ac_cv_lib_intl_ngettext" >&6; }
! if test $ac_cv_lib_intl_ngettext = yes; then
!   { echo "$as_me:$LINENO: checking for dcgettext in -lintl" >&5
! echo $ECHO_N "checking for dcgettext in -lintl... $ECHO_C" >&6; }
! if test "${ac_cv_lib_intl_dcgettext+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-lintl -liconv $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
--- 6914,6939 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
    ac_cv_lib_intl_ngettext=yes
  else
!   ac_cv_lib_intl_ngettext=no
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_intl_ngettext" >&5
! $as_echo "$ac_cv_lib_intl_ngettext" >&6; }
! if test "x$ac_cv_lib_intl_ngettext" = xyes; then :
!   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dcgettext in -lintl" >&5
! $as_echo_n "checking for dcgettext in -lintl... " >&6; }
! if ${ac_cv_lib_intl_dcgettext+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-lintl -liconv $LIBS"
! cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
***************
*** 7722,7760 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
    ac_cv_lib_intl_dcgettext=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_cv_lib_intl_dcgettext=no
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_lib_intl_dcgettext" >&5
! echo "${ECHO_T}$ac_cv_lib_intl_dcgettext" >&6; }
! if test $ac_cv_lib_intl_dcgettext = yes; then
    gt_cv_func_dgettext_libintl=yes
  			libintl_extra_libs=-liconv
  else
--- 6951,6968 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
    ac_cv_lib_intl_dcgettext=yes
  else
!   ac_cv_lib_intl_dcgettext=no
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_intl_dcgettext" >&5
! $as_echo "$ac_cv_lib_intl_dcgettext" >&6; }
! if test "x$ac_cv_lib_intl_dcgettext" = xyes; then :
    gt_cv_func_dgettext_libintl=yes
  			libintl_extra_libs=-liconv
  else
***************
*** 7776,7870 ****
            glib_save_LIBS="$LIBS"
            LIBS="$LIBS -lintl $libintl_extra_libs"
            unset ac_cv_func_bind_textdomain_codeset
! 
! for ac_func in bind_textdomain_codeset
! do
! as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
! { echo "$as_me:$LINENO: checking for $ac_func" >&5
! echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6; }
! if { as_var=$as_ac_var; eval "test \"\${$as_var+set}\" = set"; }; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
! /* end confdefs.h.  */
! /* Define $ac_func to an innocuous variant, in case <limits.h> declares $ac_func.
!    For example, HP-UX 11i <limits.h> declares gettimeofday.  */
! #define $ac_func innocuous_$ac_func
! 
! /* System header to define __stub macros and hopefully few prototypes,
!     which can conflict with char $ac_func (); below.
!     Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
!     <limits.h> exists even on freestanding compilers.  */
! 
! #ifdef __STDC__
! # include <limits.h>
! #else
! # include <assert.h>
! #endif
! 
! #undef $ac_func
! 
! /* Override any GCC internal prototype to avoid an error.
!    Use char because int might match the return type of a GCC
!    builtin and then its argument prototype would still apply.  */
! #ifdef __cplusplus
! extern "C"
! #endif
! char $ac_func ();
! /* The GNU C library defines this for functions which it implements
!     to always fail with ENOSYS.  Some functions are actually named
!     something starting with __ and the normal name is an alias.  */
! #if defined __stub_$ac_func || defined __stub___$ac_func
! choke me
! #endif
! 
! int
! main ()
! {
! return $ac_func ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
!   eval "$as_ac_var=yes"
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	eval "$as_ac_var=no"
! fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
! fi
! ac_res=`eval echo '${'$as_ac_var'}'`
! 	       { echo "$as_me:$LINENO: result: $ac_res" >&5
! echo "${ECHO_T}$ac_res" >&6; }
! if test `eval echo '${'$as_ac_var'}'` = yes; then
    cat >>confdefs.h <<_ACEOF
! #define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
  _ACEOF
  
  fi
--- 6984,6995 ----
            glib_save_LIBS="$LIBS"
            LIBS="$LIBS -lintl $libintl_extra_libs"
            unset ac_cv_func_bind_textdomain_codeset
!           for ac_func in bind_textdomain_codeset
! do :
!   ac_fn_c_check_func "$LINENO" "bind_textdomain_codeset" "ac_cv_func_bind_textdomain_codeset"
! if test "x$ac_cv_func_bind_textdomain_codeset" = xyes; then :
    cat >>confdefs.h <<_ACEOF
! #define HAVE_BIND_TEXTDOMAIN_CODESET 1
  _ACEOF
  
  fi
***************
*** 7894,7909 ****
  
        if test "$gt_cv_have_gettext" = "yes"; then
  
! cat >>confdefs.h <<\_ACEOF
! #define HAVE_GETTEXT 1
! _ACEOF
  
  	# Extract the first word of "msgfmt", so it can be a program name with args.
  set dummy msgfmt; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_path_MSGFMT+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    case "$MSGFMT" in
    /*)
--- 7019,7032 ----
  
        if test "$gt_cv_have_gettext" = "yes"; then
  
! $as_echo "#define HAVE_GETTEXT 1" >>confdefs.h
  
  	# Extract the first word of "msgfmt", so it can be a program name with args.
  set dummy msgfmt; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_path_MSGFMT+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    case "$MSGFMT" in
    /*)
***************
*** 7927,8038 ****
  fi
  MSGFMT="$ac_cv_path_MSGFMT"
  if test "$MSGFMT" != "no"; then
!   { echo "$as_me:$LINENO: result: $MSGFMT" >&5
! echo "${ECHO_T}$MSGFMT" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  	if test "$MSGFMT" != "no"; then
            glib_save_LIBS="$LIBS"
            LIBS="$LIBS $INTLLIBS"
! 
! for ac_func in dcgettext
! do
! as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
! { echo "$as_me:$LINENO: checking for $ac_func" >&5
! echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6; }
! if { as_var=$as_ac_var; eval "test \"\${$as_var+set}\" = set"; }; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
! /* end confdefs.h.  */
! /* Define $ac_func to an innocuous variant, in case <limits.h> declares $ac_func.
!    For example, HP-UX 11i <limits.h> declares gettimeofday.  */
! #define $ac_func innocuous_$ac_func
! 
! /* System header to define __stub macros and hopefully few prototypes,
!     which can conflict with char $ac_func (); below.
!     Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
!     <limits.h> exists even on freestanding compilers.  */
! 
! #ifdef __STDC__
! # include <limits.h>
! #else
! # include <assert.h>
! #endif
! 
! #undef $ac_func
! 
! /* Override any GCC internal prototype to avoid an error.
!    Use char because int might match the return type of a GCC
!    builtin and then its argument prototype would still apply.  */
! #ifdef __cplusplus
! extern "C"
! #endif
! char $ac_func ();
! /* The GNU C library defines this for functions which it implements
!     to always fail with ENOSYS.  Some functions are actually named
!     something starting with __ and the normal name is an alias.  */
! #if defined __stub_$ac_func || defined __stub___$ac_func
! choke me
! #endif
! 
! int
! main ()
! {
! return $ac_func ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
!   eval "$as_ac_var=yes"
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	eval "$as_ac_var=no"
! fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
! fi
! ac_res=`eval echo '${'$as_ac_var'}'`
! 	       { echo "$as_me:$LINENO: result: $ac_res" >&5
! echo "${ECHO_T}$ac_res" >&6; }
! if test `eval echo '${'$as_ac_var'}'` = yes; then
    cat >>confdefs.h <<_ACEOF
! #define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
  _ACEOF
  
  fi
  done
  
  	  MSGFMT_OPTS=
! 	  { echo "$as_me:$LINENO: checking if msgfmt accepts -c" >&5
! echo $ECHO_N "checking if msgfmt accepts -c... $ECHO_C" >&6; }
  	  cat >conftest.foo <<_ACEOF
  
  msgid ""
--- 7050,7078 ----
  fi
  MSGFMT="$ac_cv_path_MSGFMT"
  if test "$MSGFMT" != "no"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $MSGFMT" >&5
! $as_echo "$MSGFMT" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  	if test "$MSGFMT" != "no"; then
            glib_save_LIBS="$LIBS"
            LIBS="$LIBS $INTLLIBS"
! 	  for ac_func in dcgettext
! do :
!   ac_fn_c_check_func "$LINENO" "dcgettext" "ac_cv_func_dcgettext"
! if test "x$ac_cv_func_dcgettext" = xyes; then :
    cat >>confdefs.h <<_ACEOF
! #define HAVE_DCGETTEXT 1
  _ACEOF
  
  fi
  done
  
  	  MSGFMT_OPTS=
! 	  { $as_echo "$as_me:${as_lineno-$LINENO}: checking if msgfmt accepts -c" >&5
! $as_echo_n "checking if msgfmt accepts -c... " >&6; }
  	  cat >conftest.foo <<_ACEOF
  
  msgid ""
***************
*** 8046,8070 ****
  "Content-Transfer-Encoding: 8bit\n"
  
  _ACEOF
! if { (echo "$as_me:$LINENO: \$MSGFMT -c -o /dev/null conftest.foo") >&5
    ($MSGFMT -c -o /dev/null conftest.foo) 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
!   MSGFMT_OPTS=-c; { echo "$as_me:$LINENO: result: yes" >&5
! echo "${ECHO_T}yes" >&6; }
! else { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  echo "$as_me: failed input was:" >&5
  sed 's/^/| /' conftest.foo >&5
  fi
  
  	  # Extract the first word of "gmsgfmt", so it can be a program name with args.
  set dummy gmsgfmt; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_path_GMSGFMT+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    case $GMSGFMT in
    [\\/]* | ?:[\\/]*)
--- 7086,7110 ----
  "Content-Transfer-Encoding: 8bit\n"
  
  _ACEOF
! if { { $as_echo "$as_me:${as_lineno-$LINENO}: \$MSGFMT -c -o /dev/null conftest.foo"; } >&5
    ($MSGFMT -c -o /dev/null conftest.foo) 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then
!   MSGFMT_OPTS=-c; { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
! $as_echo "yes" >&6; }
! else { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  echo "$as_me: failed input was:" >&5
  sed 's/^/| /' conftest.foo >&5
  fi
  
  	  # Extract the first word of "gmsgfmt", so it can be a program name with args.
  set dummy gmsgfmt; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_path_GMSGFMT+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    case $GMSGFMT in
    [\\/]* | ?:[\\/]*)
***************
*** 8076,8089 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_path_GMSGFMT="$as_dir/$ac_word$ac_exec_ext"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
    test -z "$ac_cv_path_GMSGFMT" && ac_cv_path_GMSGFMT="$MSGFMT"
--- 7116,7129 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_path_GMSGFMT="$as_dir/$ac_word$ac_exec_ext"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
    test -z "$ac_cv_path_GMSGFMT" && ac_cv_path_GMSGFMT="$MSGFMT"
***************
*** 8092,8111 ****
  fi
  GMSGFMT=$ac_cv_path_GMSGFMT
  if test -n "$GMSGFMT"; then
!   { echo "$as_me:$LINENO: result: $GMSGFMT" >&5
! echo "${ECHO_T}$GMSGFMT" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
  	  # Extract the first word of "xgettext", so it can be a program name with args.
  set dummy xgettext; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_path_XGETTEXT+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    case "$XGETTEXT" in
    /*)
--- 7132,7151 ----
  fi
  GMSGFMT=$ac_cv_path_GMSGFMT
  if test -n "$GMSGFMT"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $GMSGFMT" >&5
! $as_echo "$GMSGFMT" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
  	  # Extract the first word of "xgettext", so it can be a program name with args.
  set dummy xgettext; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_path_XGETTEXT+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    case "$XGETTEXT" in
    /*)
***************
*** 8129,8146 ****
  fi
  XGETTEXT="$ac_cv_path_XGETTEXT"
  if test "$XGETTEXT" != ":"; then
!   { echo "$as_me:$LINENO: result: $XGETTEXT" >&5
! echo "${ECHO_T}$XGETTEXT" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
! 	  cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  int
--- 7169,7182 ----
  fi
  XGETTEXT="$ac_cv_path_XGETTEXT"
  if test "$XGETTEXT" != ":"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $XGETTEXT" >&5
! $as_echo "$XGETTEXT" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
! 	  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  int
***************
*** 8152,8265 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
    CATOBJEXT=.gmo
               DATADIRNAME=share
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	case $host in
  	    *-*-solaris*)
! 	    	                	    	                { echo "$as_me:$LINENO: checking for bind_textdomain_codeset" >&5
! echo $ECHO_N "checking for bind_textdomain_codeset... $ECHO_C" >&6; }
! if test "${ac_cv_func_bind_textdomain_codeset+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
! /* end confdefs.h.  */
! /* Define bind_textdomain_codeset to an innocuous variant, in case <limits.h> declares bind_textdomain_codeset.
!    For example, HP-UX 11i <limits.h> declares gettimeofday.  */
! #define bind_textdomain_codeset innocuous_bind_textdomain_codeset
! 
! /* System header to define __stub macros and hopefully few prototypes,
!     which can conflict with char bind_textdomain_codeset (); below.
!     Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
!     <limits.h> exists even on freestanding compilers.  */
! 
! #ifdef __STDC__
! # include <limits.h>
! #else
! # include <assert.h>
! #endif
! 
! #undef bind_textdomain_codeset
! 
! /* Override any GCC internal prototype to avoid an error.
!    Use char because int might match the return type of a GCC
!    builtin and then its argument prototype would still apply.  */
! #ifdef __cplusplus
! extern "C"
! #endif
! char bind_textdomain_codeset ();
! /* The GNU C library defines this for functions which it implements
!     to always fail with ENOSYS.  Some functions are actually named
!     something starting with __ and the normal name is an alias.  */
! #if defined __stub_bind_textdomain_codeset || defined __stub___bind_textdomain_codeset
! choke me
! #endif
! 
! int
! main ()
! {
! return bind_textdomain_codeset ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
!   ac_cv_func_bind_textdomain_codeset=yes
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_cv_func_bind_textdomain_codeset=no
! fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
! fi
! { echo "$as_me:$LINENO: result: $ac_cv_func_bind_textdomain_codeset" >&5
! echo "${ECHO_T}$ac_cv_func_bind_textdomain_codeset" >&6; }
! if test $ac_cv_func_bind_textdomain_codeset = yes; then
    CATOBJEXT=.gmo
                 DATADIRNAME=share
  else
--- 7188,7201 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
    CATOBJEXT=.gmo
               DATADIRNAME=share
  else
!   case $host in
  	    *-*-solaris*)
! 	    	                	    	                ac_fn_c_check_func "$LINENO" "bind_textdomain_codeset" "ac_cv_func_bind_textdomain_codeset"
! if test "x$ac_cv_func_bind_textdomain_codeset" = xyes; then :
    CATOBJEXT=.gmo
                 DATADIRNAME=share
  else
***************
*** 8274,8282 ****
  	    ;;
  	    esac
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
            LIBS="$glib_save_LIBS"
  	  INSTOBJEXT=.mo
  	else
--- 7210,7217 ----
  	    ;;
  	    esac
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
            LIBS="$glib_save_LIBS"
  	  INSTOBJEXT=.mo
  	else
***************
*** 8290,8298 ****
  
      if test "$gt_cv_have_gettext" = "yes" ; then
  
! cat >>confdefs.h <<\_ACEOF
! #define ENABLE_NLS 1
! _ACEOF
  
      fi
  
--- 7225,7231 ----
  
      if test "$gt_cv_have_gettext" = "yes" ; then
  
! $as_echo "#define ENABLE_NLS 1" >>confdefs.h
  
      fi
  
***************
*** 8300,8307 ****
                    if $XGETTEXT --omit-header /dev/null 2> /dev/null; then
          : ;
        else
!         { echo "$as_me:$LINENO: result: found xgettext program is not GNU xgettext; ignore it" >&5
! echo "${ECHO_T}found xgettext program is not GNU xgettext; ignore it" >&6; }
          XGETTEXT=":"
        fi
      fi
--- 7233,7240 ----
                    if $XGETTEXT --omit-header /dev/null 2> /dev/null; then
          : ;
        else
!         { $as_echo "$as_me:${as_lineno-$LINENO}: result: found xgettext program is not GNU xgettext; ignore it" >&5
! $as_echo "found xgettext program is not GNU xgettext; ignore it" >&6; }
          XGETTEXT=":"
        fi
      fi
***************
*** 8333,8340 ****
       if test "x$ALL_LINGUAS" = "x"; then
         LINGUAS=
       else
!        { echo "$as_me:$LINENO: checking for catalogs to be installed" >&5
! echo $ECHO_N "checking for catalogs to be installed... $ECHO_C" >&6; }
         NEW_LINGUAS=
         for presentlang in $ALL_LINGUAS; do
           useit=no
--- 7266,7273 ----
       if test "x$ALL_LINGUAS" = "x"; then
         LINGUAS=
       else
!        { $as_echo "$as_me:${as_lineno-$LINENO}: checking for catalogs to be installed" >&5
! $as_echo_n "checking for catalogs to be installed... " >&6; }
         NEW_LINGUAS=
         for presentlang in $ALL_LINGUAS; do
           useit=no
***************
*** 8358,8365 ****
           fi
         done
         LINGUAS=$NEW_LINGUAS
!        { echo "$as_me:$LINENO: result: $LINGUAS" >&5
! echo "${ECHO_T}$LINGUAS" >&6; }
       fi
  
            if test -n "$LINGUAS"; then
--- 7291,7298 ----
           fi
         done
         LINGUAS=$NEW_LINGUAS
!        { $as_echo "$as_me:${as_lineno-$LINENO}: result: $LINGUAS" >&5
! $as_echo "$LINGUAS" >&6; }
       fi
  
            if test -n "$LINGUAS"; then
***************
*** 8393,8401 ****
  
  # C++ fails to compile mysteriously without gettext ... fail here
  if test x"$gt_cv_have_gettext" != x"yes"; then
!   { { echo "$as_me:$LINENO: error: gettext not found" >&5
! echo "$as_me: error: gettext not found" >&2;}
!    { (exit 1); exit 1; }; }
  fi
  
  # Checks for libraries.
--- 7326,7332 ----
  
  # C++ fails to compile mysteriously without gettext ... fail here
  if test x"$gt_cv_have_gettext" != x"yes"; then
!   as_fn_error $? "gettext not found" "$LINENO" 5
  fi
  
  # Checks for libraries.
***************
*** 8404,8427 ****
  PACKAGES_USED=""
  
  # Checks for header files.
- 
- 
- 
- 
- 
  ac_header_dirent=no
  for ac_hdr in dirent.h sys/ndir.h sys/dir.h ndir.h; do
!   as_ac_Header=`echo "ac_cv_header_dirent_$ac_hdr" | $as_tr_sh`
! { echo "$as_me:$LINENO: checking for $ac_hdr that defines DIR" >&5
! echo $ECHO_N "checking for $ac_hdr that defines DIR... $ECHO_C" >&6; }
! if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <sys/types.h>
  #include <$ac_hdr>
--- 7335,7349 ----
  PACKAGES_USED=""
  
  # Checks for header files.
  ac_header_dirent=no
  for ac_hdr in dirent.h sys/ndir.h sys/dir.h ndir.h; do
!   as_ac_Header=`$as_echo "ac_cv_header_dirent_$ac_hdr" | $as_tr_sh`
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_hdr that defines DIR" >&5
! $as_echo_n "checking for $ac_hdr that defines DIR... " >&6; }
! if eval \${$as_ac_Header+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <sys/types.h>
  #include <$ac_hdr>
***************
*** 8435,8473 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
    eval "$as_ac_Header=yes"
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	eval "$as_ac_Header=no"
  fi
- 
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  fi
! ac_res=`eval echo '${'$as_ac_Header'}'`
! 	       { echo "$as_me:$LINENO: result: $ac_res" >&5
! echo "${ECHO_T}$ac_res" >&6; }
! if test `eval echo '${'$as_ac_Header'}'` = yes; then
    cat >>confdefs.h <<_ACEOF
! #define `echo "HAVE_$ac_hdr" | $as_tr_cpp` 1
  _ACEOF
  
  ac_header_dirent=$ac_hdr; break
--- 7357,7375 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_compile "$LINENO"; then :
    eval "$as_ac_Header=yes"
  else
!   eval "$as_ac_Header=no"
  fi
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  fi
! eval ac_res=\$$as_ac_Header
! 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
! $as_echo "$ac_res" >&6; }
! if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
    cat >>confdefs.h <<_ACEOF
! #define `$as_echo "HAVE_$ac_hdr" | $as_tr_cpp` 1
  _ACEOF
  
  ac_header_dirent=$ac_hdr; break
***************
*** 8476,8492 ****
  done
  # Two versions of opendir et al. are in -ldir and -lx on SCO Xenix.
  if test $ac_header_dirent = dirent.h; then
!   { echo "$as_me:$LINENO: checking for library containing opendir" >&5
! echo $ECHO_N "checking for library containing opendir... $ECHO_C" >&6; }
! if test "${ac_cv_search_opendir+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    ac_func_search_save_LIBS=$LIBS
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
--- 7378,7390 ----
  done
  # Two versions of opendir et al. are in -ldir and -lx on SCO Xenix.
  if test $ac_header_dirent = dirent.h; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for library containing opendir" >&5
! $as_echo_n "checking for library containing opendir... " >&6; }
! if ${ac_cv_search_opendir+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    ac_func_search_save_LIBS=$LIBS
! cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
***************
*** 8511,8576 ****
      ac_res=-l$ac_lib
      LIBS="-l$ac_lib  $ac_func_search_save_LIBS"
    fi
!   rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
    ac_cv_search_opendir=$ac_res
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
- 
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext
!   if test "${ac_cv_search_opendir+set}" = set; then
    break
  fi
  done
! if test "${ac_cv_search_opendir+set}" = set; then
!   :
  else
    ac_cv_search_opendir=no
  fi
  rm conftest.$ac_ext
  LIBS=$ac_func_search_save_LIBS
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_search_opendir" >&5
! echo "${ECHO_T}$ac_cv_search_opendir" >&6; }
  ac_res=$ac_cv_search_opendir
! if test "$ac_res" != no; then
    test "$ac_res" = "none required" || LIBS="$ac_res $LIBS"
  
  fi
  
  else
!   { echo "$as_me:$LINENO: checking for library containing opendir" >&5
! echo $ECHO_N "checking for library containing opendir... $ECHO_C" >&6; }
! if test "${ac_cv_search_opendir+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    ac_func_search_save_LIBS=$LIBS
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
--- 7409,7447 ----
      ac_res=-l$ac_lib
      LIBS="-l$ac_lib  $ac_func_search_save_LIBS"
    fi
!   if ac_fn_c_try_link "$LINENO"; then :
    ac_cv_search_opendir=$ac_res
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext
!   if ${ac_cv_search_opendir+:} false; then :
    break
  fi
  done
! if ${ac_cv_search_opendir+:} false; then :
! 
  else
    ac_cv_search_opendir=no
  fi
  rm conftest.$ac_ext
  LIBS=$ac_func_search_save_LIBS
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_search_opendir" >&5
! $as_echo "$ac_cv_search_opendir" >&6; }
  ac_res=$ac_cv_search_opendir
! if test "$ac_res" != no; then :
    test "$ac_res" = "none required" || LIBS="$ac_res $LIBS"
  
  fi
  
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for library containing opendir" >&5
! $as_echo_n "checking for library containing opendir... " >&6; }
! if ${ac_cv_search_opendir+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    ac_func_search_save_LIBS=$LIBS
! cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
***************
*** 8590,8660 ****
  _ACEOF
  for ac_lib in '' x; do
    if test -z "$ac_lib"; then
!     ac_res="none required"
!   else
!     ac_res=-l$ac_lib
!     LIBS="-l$ac_lib  $ac_func_search_save_LIBS"
!   fi
!   rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
    ac_cv_search_opendir=$ac_res
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
- 
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext
!   if test "${ac_cv_search_opendir+set}" = set; then
    break
  fi
  done
! if test "${ac_cv_search_opendir+set}" = set; then
!   :
  else
    ac_cv_search_opendir=no
  fi
  rm conftest.$ac_ext
  LIBS=$ac_func_search_save_LIBS
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_search_opendir" >&5
! echo "${ECHO_T}$ac_cv_search_opendir" >&6; }
  ac_res=$ac_cv_search_opendir
! if test "$ac_res" != no; then
    test "$ac_res" = "none required" || LIBS="$ac_res $LIBS"
  
  fi
  
  fi
  
! { echo "$as_me:$LINENO: checking for ANSI C header files" >&5
! echo $ECHO_N "checking for ANSI C header files... $ECHO_C" >&6; }
! if test "${ac_cv_header_stdc+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <stdlib.h>
  #include <stdarg.h>
--- 7461,7504 ----
  _ACEOF
  for ac_lib in '' x; do
    if test -z "$ac_lib"; then
!     ac_res="none required"
!   else
!     ac_res=-l$ac_lib
!     LIBS="-l$ac_lib  $ac_func_search_save_LIBS"
!   fi
!   if ac_fn_c_try_link "$LINENO"; then :
    ac_cv_search_opendir=$ac_res
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext
!   if ${ac_cv_search_opendir+:} false; then :
    break
  fi
  done
! if ${ac_cv_search_opendir+:} false; then :
! 
  else
    ac_cv_search_opendir=no
  fi
  rm conftest.$ac_ext
  LIBS=$ac_func_search_save_LIBS
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_search_opendir" >&5
! $as_echo "$ac_cv_search_opendir" >&6; }
  ac_res=$ac_cv_search_opendir
! if test "$ac_res" != no; then :
    test "$ac_res" = "none required" || LIBS="$ac_res $LIBS"
  
  fi
  
  fi
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ANSI C header files" >&5
! $as_echo_n "checking for ANSI C header files... " >&6; }
! if ${ac_cv_header_stdc+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <stdlib.h>
  #include <stdarg.h>
***************
*** 8669,8699 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
    ac_cv_header_stdc=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_cv_header_stdc=no
  fi
- 
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  
  if test $ac_cv_header_stdc = yes; then
--- 7513,7523 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_compile "$LINENO"; then :
    ac_cv_header_stdc=yes
  else
!   ac_cv_header_stdc=no
  fi
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  
  if test $ac_cv_header_stdc = yes; then
***************
*** 8698,8715 ****
  
  if test $ac_cv_header_stdc = yes; then
    # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <string.h>
  
  _ACEOF
  if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
!   $EGREP "memchr" >/dev/null 2>&1; then
!   :
  else
    ac_cv_header_stdc=no
  fi
--- 7522,7535 ----
  
  if test $ac_cv_header_stdc = yes; then
    # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <string.h>
  
  _ACEOF
  if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
!   $EGREP "memchr" >/dev/null 2>&1; then :
! 
  else
    ac_cv_header_stdc=no
  fi
***************
*** 8719,8736 ****
  
  if test $ac_cv_header_stdc = yes; then
    # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <stdlib.h>
  
  _ACEOF
  if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
!   $EGREP "free" >/dev/null 2>&1; then
!   :
  else
    ac_cv_header_stdc=no
  fi
--- 7539,7552 ----
  
  if test $ac_cv_header_stdc = yes; then
    # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <stdlib.h>
  
  _ACEOF
  if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
!   $EGREP "free" >/dev/null 2>&1; then :
! 
  else
    ac_cv_header_stdc=no
  fi
***************
*** 8740,8753 ****
  
  if test $ac_cv_header_stdc = yes; then
    # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
!   if test "$cross_compiling" = yes; then
    :
  else
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <ctype.h>
  #include <stdlib.h>
--- 7556,7565 ----
  
  if test $ac_cv_header_stdc = yes; then
    # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
!   if test "$cross_compiling" = yes; then :
    :
  else
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <ctype.h>
  #include <stdlib.h>
***************
*** 8774,8821 ****
    return 0;
  }
  _ACEOF
! rm -f conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
!   { (case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_try") 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   :
! else
!   echo "$as_me: program exited with status $ac_status" >&5
! echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
  
! ( exit $ac_status )
! ac_cv_header_stdc=no
  fi
! rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
  fi
  
- 
  fi
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_header_stdc" >&5
! echo "${ECHO_T}$ac_cv_header_stdc" >&6; }
  if test $ac_cv_header_stdc = yes; then
  
! cat >>confdefs.h <<\_ACEOF
! #define STDC_HEADERS 1
! _ACEOF
  
  fi
  
--- 7586,7607 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_run "$LINENO"; then :
  
! else
!   ac_cv_header_stdc=no
  fi
! rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
!   conftest.$ac_objext conftest.beam conftest.$ac_ext
  fi
  
  fi
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_header_stdc" >&5
! $as_echo "$ac_cv_header_stdc" >&6; }
  if test $ac_cv_header_stdc = yes; then
  
! $as_echo "#define STDC_HEADERS 1" >>confdefs.h
  
  fi
  
***************
*** 8819,8974 ****
  
  fi
  
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
  for ac_header in errno.h math.h fcntl.h limits.h stdlib.h string.h sys/file.h sys/ioctl.h sys/param.h sys/time.h sys/mman.h sys/types.h sys/stat.h unistd.h io.h direct.h windows.h
! do
! as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
! if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
!   { echo "$as_me:$LINENO: checking for $ac_header" >&5
! echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6; }
! if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! fi
! ac_res=`eval echo '${'$as_ac_Header'}'`
! 	       { echo "$as_me:$LINENO: result: $ac_res" >&5
! echo "${ECHO_T}$ac_res" >&6; }
! else
!   # Is the header compilable?
! { echo "$as_me:$LINENO: checking $ac_header usability" >&5
! echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6; }
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
! /* end confdefs.h.  */
! $ac_includes_default
! #include <$ac_header>
! _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
!   ac_header_compiler=yes
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_header_compiler=no
! fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
! { echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
! echo "${ECHO_T}$ac_header_compiler" >&6; }
! 
! # Is the header present?
! { echo "$as_me:$LINENO: checking $ac_header presence" >&5
! echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6; }
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
! /* end confdefs.h.  */
! #include <$ac_header>
! _ACEOF
! if { (ac_try="$ac_cpp conftest.$ac_ext"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } >/dev/null && {
! 	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        }; then
!   ac_header_preproc=yes
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
!   ac_header_preproc=no
! fi
! 
! rm -f conftest.err conftest.$ac_ext
! { echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
! echo "${ECHO_T}$ac_header_preproc" >&6; }
! 
! # So?  What about this header?
! case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
!   yes:no: )
!     { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
! echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
!     { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the compiler's result" >&5
! echo "$as_me: WARNING: $ac_header: proceeding with the compiler's result" >&2;}
!     ac_header_preproc=yes
!     ;;
!   no:yes:* )
!     { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
! echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
!     { echo "$as_me:$LINENO: WARNING: $ac_header:     check for missing prerequisite headers?" >&5
! echo "$as_me: WARNING: $ac_header:     check for missing prerequisite headers?" >&2;}
!     { echo "$as_me:$LINENO: WARNING: $ac_header: see the Autoconf documentation" >&5
! echo "$as_me: WARNING: $ac_header: see the Autoconf documentation" >&2;}
!     { echo "$as_me:$LINENO: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&5
! echo "$as_me: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&2;}
!     { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
! echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;}
!     { echo "$as_me:$LINENO: WARNING: $ac_header: in the future, the compiler will take precedence" >&5
! echo "$as_me: WARNING: $ac_header: in the future, the compiler will take precedence" >&2;}
! 
!     ;;
! esac
! { echo "$as_me:$LINENO: checking for $ac_header" >&5
! echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6; }
! if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   eval "$as_ac_Header=\$ac_header_preproc"
! fi
! ac_res=`eval echo '${'$as_ac_Header'}'`
! 	       { echo "$as_me:$LINENO: result: $ac_res" >&5
! echo "${ECHO_T}$ac_res" >&6; }
! 
! fi
! if test `eval echo '${'$as_ac_Header'}'` = yes; then
    cat >>confdefs.h <<_ACEOF
! #define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
  _ACEOF
  
  fi
--- 7605,7617 ----
  
  fi
  
  for ac_header in errno.h math.h fcntl.h limits.h stdlib.h string.h sys/file.h sys/ioctl.h sys/param.h sys/time.h sys/mman.h sys/types.h sys/stat.h unistd.h io.h direct.h windows.h
! do :
!   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
! ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
! if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
    cat >>confdefs.h <<_ACEOF
! #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
  _ACEOF
  
  fi
***************
*** 8984,8993 ****
  if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}dllwrap", so it can be a program name with args.
  set dummy ${ac_tool_prefix}dllwrap; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_DLLWRAP+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$DLLWRAP"; then
    ac_cv_prog_DLLWRAP="$DLLWRAP" # Let the user override the test.
--- 7627,7636 ----
  if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}dllwrap", so it can be a program name with args.
  set dummy ${ac_tool_prefix}dllwrap; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_DLLWRAP+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$DLLWRAP"; then
    ac_cv_prog_DLLWRAP="$DLLWRAP" # Let the user override the test.
***************
*** 8997,9021 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_DLLWRAP="${ac_tool_prefix}dllwrap"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  DLLWRAP=$ac_cv_prog_DLLWRAP
  if test -n "$DLLWRAP"; then
!   { echo "$as_me:$LINENO: result: $DLLWRAP" >&5
! echo "${ECHO_T}$DLLWRAP" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 7640,7664 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_DLLWRAP="${ac_tool_prefix}dllwrap"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  DLLWRAP=$ac_cv_prog_DLLWRAP
  if test -n "$DLLWRAP"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $DLLWRAP" >&5
! $as_echo "$DLLWRAP" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 9024,9033 ****
    ac_ct_DLLWRAP=$DLLWRAP
    # Extract the first word of "dllwrap", so it can be a program name with args.
  set dummy dllwrap; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_ac_ct_DLLWRAP+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$ac_ct_DLLWRAP"; then
    ac_cv_prog_ac_ct_DLLWRAP="$ac_ct_DLLWRAP" # Let the user override the test.
--- 7667,7676 ----
    ac_ct_DLLWRAP=$DLLWRAP
    # Extract the first word of "dllwrap", so it can be a program name with args.
  set dummy dllwrap; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_ac_ct_DLLWRAP+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$ac_ct_DLLWRAP"; then
    ac_cv_prog_ac_ct_DLLWRAP="$ac_ct_DLLWRAP" # Let the user override the test.
***************
*** 9037,9061 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_DLLWRAP="dllwrap"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_DLLWRAP=$ac_cv_prog_ac_ct_DLLWRAP
  if test -n "$ac_ct_DLLWRAP"; then
!   { echo "$as_me:$LINENO: result: $ac_ct_DLLWRAP" >&5
! echo "${ECHO_T}$ac_ct_DLLWRAP" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
    if test "x$ac_ct_DLLWRAP" = x; then
--- 7680,7704 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_DLLWRAP="dllwrap"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_DLLWRAP=$ac_cv_prog_ac_ct_DLLWRAP
  if test -n "$ac_ct_DLLWRAP"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_DLLWRAP" >&5
! $as_echo "$ac_ct_DLLWRAP" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
    if test "x$ac_ct_DLLWRAP" = x; then
***************
*** 9063,9074 ****
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&5
! echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&2;}
  ac_tool_warned=yes ;;
  esac
      DLLWRAP=$ac_ct_DLLWRAP
--- 7706,7713 ----
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
! $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
  ac_tool_warned=yes ;;
  esac
      DLLWRAP=$ac_ct_DLLWRAP
***************
*** 9080,9089 ****
  if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}dlltool", so it can be a program name with args.
  set dummy ${ac_tool_prefix}dlltool; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_DLLTOOL+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$DLLTOOL"; then
    ac_cv_prog_DLLTOOL="$DLLTOOL" # Let the user override the test.
--- 7719,7728 ----
  if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}dlltool", so it can be a program name with args.
  set dummy ${ac_tool_prefix}dlltool; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_DLLTOOL+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$DLLTOOL"; then
    ac_cv_prog_DLLTOOL="$DLLTOOL" # Let the user override the test.
***************
*** 9093,9117 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_DLLTOOL="${ac_tool_prefix}dlltool"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  DLLTOOL=$ac_cv_prog_DLLTOOL
  if test -n "$DLLTOOL"; then
!   { echo "$as_me:$LINENO: result: $DLLTOOL" >&5
! echo "${ECHO_T}$DLLTOOL" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 7732,7756 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_DLLTOOL="${ac_tool_prefix}dlltool"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  DLLTOOL=$ac_cv_prog_DLLTOOL
  if test -n "$DLLTOOL"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $DLLTOOL" >&5
! $as_echo "$DLLTOOL" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 9120,9129 ****
    ac_ct_DLLTOOL=$DLLTOOL
    # Extract the first word of "dlltool", so it can be a program name with args.
  set dummy dlltool; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_ac_ct_DLLTOOL+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$ac_ct_DLLTOOL"; then
    ac_cv_prog_ac_ct_DLLTOOL="$ac_ct_DLLTOOL" # Let the user override the test.
--- 7759,7768 ----
    ac_ct_DLLTOOL=$DLLTOOL
    # Extract the first word of "dlltool", so it can be a program name with args.
  set dummy dlltool; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_ac_ct_DLLTOOL+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$ac_ct_DLLTOOL"; then
    ac_cv_prog_ac_ct_DLLTOOL="$ac_ct_DLLTOOL" # Let the user override the test.
***************
*** 9133,9157 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_DLLTOOL="dlltool"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_DLLTOOL=$ac_cv_prog_ac_ct_DLLTOOL
  if test -n "$ac_ct_DLLTOOL"; then
!   { echo "$as_me:$LINENO: result: $ac_ct_DLLTOOL" >&5
! echo "${ECHO_T}$ac_ct_DLLTOOL" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
    if test "x$ac_ct_DLLTOOL" = x; then
--- 7772,7796 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_DLLTOOL="dlltool"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_DLLTOOL=$ac_cv_prog_ac_ct_DLLTOOL
  if test -n "$ac_ct_DLLTOOL"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_DLLTOOL" >&5
! $as_echo "$ac_ct_DLLTOOL" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
    if test "x$ac_ct_DLLTOOL" = x; then
***************
*** 9159,9170 ****
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&5
! echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&2;}
  ac_tool_warned=yes ;;
  esac
      DLLTOOL=$ac_ct_DLLTOOL
--- 7798,7805 ----
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
! $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
  ac_tool_warned=yes ;;
  esac
      DLLTOOL=$ac_ct_DLLTOOL
***************
*** 9176,9185 ****
  if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}objdump", so it can be a program name with args.
  set dummy ${ac_tool_prefix}objdump; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_OBJDUMP+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$OBJDUMP"; then
    ac_cv_prog_OBJDUMP="$OBJDUMP" # Let the user override the test.
--- 7811,7820 ----
  if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}objdump", so it can be a program name with args.
  set dummy ${ac_tool_prefix}objdump; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_OBJDUMP+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$OBJDUMP"; then
    ac_cv_prog_OBJDUMP="$OBJDUMP" # Let the user override the test.
***************
*** 9189,9213 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_OBJDUMP="${ac_tool_prefix}objdump"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  OBJDUMP=$ac_cv_prog_OBJDUMP
  if test -n "$OBJDUMP"; then
!   { echo "$as_me:$LINENO: result: $OBJDUMP" >&5
! echo "${ECHO_T}$OBJDUMP" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 7824,7848 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_OBJDUMP="${ac_tool_prefix}objdump"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  OBJDUMP=$ac_cv_prog_OBJDUMP
  if test -n "$OBJDUMP"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $OBJDUMP" >&5
! $as_echo "$OBJDUMP" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 9216,9225 ****
    ac_ct_OBJDUMP=$OBJDUMP
    # Extract the first word of "objdump", so it can be a program name with args.
  set dummy objdump; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_ac_ct_OBJDUMP+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$ac_ct_OBJDUMP"; then
    ac_cv_prog_ac_ct_OBJDUMP="$ac_ct_OBJDUMP" # Let the user override the test.
--- 7851,7860 ----
    ac_ct_OBJDUMP=$OBJDUMP
    # Extract the first word of "objdump", so it can be a program name with args.
  set dummy objdump; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_ac_ct_OBJDUMP+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$ac_ct_OBJDUMP"; then
    ac_cv_prog_ac_ct_OBJDUMP="$ac_ct_OBJDUMP" # Let the user override the test.
***************
*** 9229,9253 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_OBJDUMP="objdump"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_OBJDUMP=$ac_cv_prog_ac_ct_OBJDUMP
  if test -n "$ac_ct_OBJDUMP"; then
!   { echo "$as_me:$LINENO: result: $ac_ct_OBJDUMP" >&5
! echo "${ECHO_T}$ac_ct_OBJDUMP" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
    if test "x$ac_ct_OBJDUMP" = x; then
--- 7864,7888 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_OBJDUMP="objdump"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_OBJDUMP=$ac_cv_prog_ac_ct_OBJDUMP
  if test -n "$ac_ct_OBJDUMP"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_OBJDUMP" >&5
! $as_echo "$ac_ct_OBJDUMP" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
    if test "x$ac_ct_OBJDUMP" = x; then
***************
*** 9255,9266 ****
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&5
! echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&2;}
  ac_tool_warned=yes ;;
  esac
      OBJDUMP=$ac_ct_OBJDUMP
--- 7890,7897 ----
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
! $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
  ac_tool_warned=yes ;;
  esac
      OBJDUMP=$ac_ct_OBJDUMP
***************
*** 9272,9281 ****
  if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}ranlib", so it can be a program name with args.
  set dummy ${ac_tool_prefix}ranlib; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_RANLIB+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$RANLIB"; then
    ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
--- 7903,7912 ----
  if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}ranlib", so it can be a program name with args.
  set dummy ${ac_tool_prefix}ranlib; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_RANLIB+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$RANLIB"; then
    ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
***************
*** 9285,9309 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_RANLIB="${ac_tool_prefix}ranlib"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  RANLIB=$ac_cv_prog_RANLIB
  if test -n "$RANLIB"; then
!   { echo "$as_me:$LINENO: result: $RANLIB" >&5
! echo "${ECHO_T}$RANLIB" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 7916,7940 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_RANLIB="${ac_tool_prefix}ranlib"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  RANLIB=$ac_cv_prog_RANLIB
  if test -n "$RANLIB"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $RANLIB" >&5
! $as_echo "$RANLIB" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 9312,9321 ****
    ac_ct_RANLIB=$RANLIB
    # Extract the first word of "ranlib", so it can be a program name with args.
  set dummy ranlib; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_ac_ct_RANLIB+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$ac_ct_RANLIB"; then
    ac_cv_prog_ac_ct_RANLIB="$ac_ct_RANLIB" # Let the user override the test.
--- 7943,7952 ----
    ac_ct_RANLIB=$RANLIB
    # Extract the first word of "ranlib", so it can be a program name with args.
  set dummy ranlib; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_ac_ct_RANLIB+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$ac_ct_RANLIB"; then
    ac_cv_prog_ac_ct_RANLIB="$ac_ct_RANLIB" # Let the user override the test.
***************
*** 9325,9349 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_RANLIB="ranlib"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_RANLIB=$ac_cv_prog_ac_ct_RANLIB
  if test -n "$ac_ct_RANLIB"; then
!   { echo "$as_me:$LINENO: result: $ac_ct_RANLIB" >&5
! echo "${ECHO_T}$ac_ct_RANLIB" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
    if test "x$ac_ct_RANLIB" = x; then
--- 7956,7980 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_RANLIB="ranlib"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_RANLIB=$ac_cv_prog_ac_ct_RANLIB
  if test -n "$ac_ct_RANLIB"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_RANLIB" >&5
! $as_echo "$ac_ct_RANLIB" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
    if test "x$ac_ct_RANLIB" = x; then
***************
*** 9351,9362 ****
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&5
! echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&2;}
  ac_tool_warned=yes ;;
  esac
      RANLIB=$ac_ct_RANLIB
--- 7982,7989 ----
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
! $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
  ac_tool_warned=yes ;;
  esac
      RANLIB=$ac_ct_RANLIB
***************
*** 9368,9377 ****
  if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}strip", so it can be a program name with args.
  set dummy ${ac_tool_prefix}strip; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_STRIP+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$STRIP"; then
    ac_cv_prog_STRIP="$STRIP" # Let the user override the test.
--- 7995,8004 ----
  if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}strip", so it can be a program name with args.
  set dummy ${ac_tool_prefix}strip; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_STRIP+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$STRIP"; then
    ac_cv_prog_STRIP="$STRIP" # Let the user override the test.
***************
*** 9381,9405 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_STRIP="${ac_tool_prefix}strip"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  STRIP=$ac_cv_prog_STRIP
  if test -n "$STRIP"; then
!   { echo "$as_me:$LINENO: result: $STRIP" >&5
! echo "${ECHO_T}$STRIP" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 8008,8032 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_STRIP="${ac_tool_prefix}strip"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  STRIP=$ac_cv_prog_STRIP
  if test -n "$STRIP"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $STRIP" >&5
! $as_echo "$STRIP" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 9408,9417 ****
    ac_ct_STRIP=$STRIP
    # Extract the first word of "strip", so it can be a program name with args.
  set dummy strip; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_ac_ct_STRIP+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$ac_ct_STRIP"; then
    ac_cv_prog_ac_ct_STRIP="$ac_ct_STRIP" # Let the user override the test.
--- 8035,8044 ----
    ac_ct_STRIP=$STRIP
    # Extract the first word of "strip", so it can be a program name with args.
  set dummy strip; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_ac_ct_STRIP+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$ac_ct_STRIP"; then
    ac_cv_prog_ac_ct_STRIP="$ac_ct_STRIP" # Let the user override the test.
***************
*** 9421,9445 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_STRIP="strip"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_STRIP=$ac_cv_prog_ac_ct_STRIP
  if test -n "$ac_ct_STRIP"; then
!   { echo "$as_me:$LINENO: result: $ac_ct_STRIP" >&5
! echo "${ECHO_T}$ac_ct_STRIP" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
    if test "x$ac_ct_STRIP" = x; then
--- 8048,8072 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_STRIP="strip"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_STRIP=$ac_cv_prog_ac_ct_STRIP
  if test -n "$ac_ct_STRIP"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_STRIP" >&5
! $as_echo "$ac_ct_STRIP" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
    if test "x$ac_ct_STRIP" = x; then
***************
*** 9447,9458 ****
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&5
! echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&2;}
  ac_tool_warned=yes ;;
  esac
      STRIP=$ac_ct_STRIP
--- 8074,8081 ----
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
! $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
  ac_tool_warned=yes ;;
  esac
      STRIP=$ac_ct_STRIP
***************
*** 9464,9473 ****
  if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}ar", so it can be a program name with args.
  set dummy ${ac_tool_prefix}ar; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_AR+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$AR"; then
    ac_cv_prog_AR="$AR" # Let the user override the test.
--- 8087,8096 ----
  if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}ar", so it can be a program name with args.
  set dummy ${ac_tool_prefix}ar; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_AR+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$AR"; then
    ac_cv_prog_AR="$AR" # Let the user override the test.
***************
*** 9477,9501 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_AR="${ac_tool_prefix}ar"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  AR=$ac_cv_prog_AR
  if test -n "$AR"; then
!   { echo "$as_me:$LINENO: result: $AR" >&5
! echo "${ECHO_T}$AR" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 8100,8124 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_AR="${ac_tool_prefix}ar"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  AR=$ac_cv_prog_AR
  if test -n "$AR"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $AR" >&5
! $as_echo "$AR" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 9504,9513 ****
    ac_ct_AR=$AR
    # Extract the first word of "ar", so it can be a program name with args.
  set dummy ar; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_ac_ct_AR+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$ac_ct_AR"; then
    ac_cv_prog_ac_ct_AR="$ac_ct_AR" # Let the user override the test.
--- 8127,8136 ----
    ac_ct_AR=$AR
    # Extract the first word of "ar", so it can be a program name with args.
  set dummy ar; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_ac_ct_AR+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$ac_ct_AR"; then
    ac_cv_prog_ac_ct_AR="$ac_ct_AR" # Let the user override the test.
***************
*** 9517,9541 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_AR="ar"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_AR=$ac_cv_prog_ac_ct_AR
  if test -n "$ac_ct_AR"; then
!   { echo "$as_me:$LINENO: result: $ac_ct_AR" >&5
! echo "${ECHO_T}$ac_ct_AR" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
    if test "x$ac_ct_AR" = x; then
--- 8140,8164 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_AR="ar"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_AR=$ac_cv_prog_ac_ct_AR
  if test -n "$ac_ct_AR"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_AR" >&5
! $as_echo "$ac_ct_AR" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
    if test "x$ac_ct_AR" = x; then
***************
*** 9543,9554 ****
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&5
! echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&2;}
  ac_tool_warned=yes ;;
  esac
      AR=$ac_ct_AR
--- 8166,8173 ----
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
! $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
  ac_tool_warned=yes ;;
  esac
      AR=$ac_ct_AR
***************
*** 9560,9569 ****
  if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}as", so it can be a program name with args.
  set dummy ${ac_tool_prefix}as; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_AS+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$AS"; then
    ac_cv_prog_AS="$AS" # Let the user override the test.
--- 8179,8188 ----
  if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}as", so it can be a program name with args.
  set dummy ${ac_tool_prefix}as; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_AS+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$AS"; then
    ac_cv_prog_AS="$AS" # Let the user override the test.
***************
*** 9573,9597 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_AS="${ac_tool_prefix}as"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  AS=$ac_cv_prog_AS
  if test -n "$AS"; then
!   { echo "$as_me:$LINENO: result: $AS" >&5
! echo "${ECHO_T}$AS" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 8192,8216 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_AS="${ac_tool_prefix}as"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  AS=$ac_cv_prog_AS
  if test -n "$AS"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $AS" >&5
! $as_echo "$AS" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 9600,9609 ****
    ac_ct_AS=$AS
    # Extract the first word of "as", so it can be a program name with args.
  set dummy as; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_ac_ct_AS+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$ac_ct_AS"; then
    ac_cv_prog_ac_ct_AS="$ac_ct_AS" # Let the user override the test.
--- 8219,8228 ----
    ac_ct_AS=$AS
    # Extract the first word of "as", so it can be a program name with args.
  set dummy as; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_ac_ct_AS+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$ac_ct_AS"; then
    ac_cv_prog_ac_ct_AS="$ac_ct_AS" # Let the user override the test.
***************
*** 9613,9637 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_AS="as"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_AS=$ac_cv_prog_ac_ct_AS
  if test -n "$ac_ct_AS"; then
!   { echo "$as_me:$LINENO: result: $ac_ct_AS" >&5
! echo "${ECHO_T}$ac_ct_AS" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
    if test "x$ac_ct_AS" = x; then
--- 8232,8256 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_AS="as"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_AS=$ac_cv_prog_ac_ct_AS
  if test -n "$ac_ct_AS"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_AS" >&5
! $as_echo "$ac_ct_AS" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
    if test "x$ac_ct_AS" = x; then
***************
*** 9639,9650 ****
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&5
! echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&2;}
  ac_tool_warned=yes ;;
  esac
      AS=$ac_ct_AS
--- 8258,8265 ----
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
! $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
  ac_tool_warned=yes ;;
  esac
      AS=$ac_ct_AS
***************
*** 9656,9665 ****
  if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}ld", so it can be a program name with args.
  set dummy ${ac_tool_prefix}ld; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_LD+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$LD"; then
    ac_cv_prog_LD="$LD" # Let the user override the test.
--- 8271,8280 ----
  if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}ld", so it can be a program name with args.
  set dummy ${ac_tool_prefix}ld; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_LD+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$LD"; then
    ac_cv_prog_LD="$LD" # Let the user override the test.
***************
*** 9669,9693 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_LD="${ac_tool_prefix}ld"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  LD=$ac_cv_prog_LD
  if test -n "$LD"; then
!   { echo "$as_me:$LINENO: result: $LD" >&5
! echo "${ECHO_T}$LD" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 8284,8308 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_LD="${ac_tool_prefix}ld"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  LD=$ac_cv_prog_LD
  if test -n "$LD"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $LD" >&5
! $as_echo "$LD" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 9696,9705 ****
    ac_ct_LD=$LD
    # Extract the first word of "ld", so it can be a program name with args.
  set dummy ld; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_ac_ct_LD+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$ac_ct_LD"; then
    ac_cv_prog_ac_ct_LD="$ac_ct_LD" # Let the user override the test.
--- 8311,8320 ----
    ac_ct_LD=$LD
    # Extract the first word of "ld", so it can be a program name with args.
  set dummy ld; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_ac_ct_LD+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$ac_ct_LD"; then
    ac_cv_prog_ac_ct_LD="$ac_ct_LD" # Let the user override the test.
***************
*** 9709,9733 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_LD="ld"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_LD=$ac_cv_prog_ac_ct_LD
  if test -n "$ac_ct_LD"; then
!   { echo "$as_me:$LINENO: result: $ac_ct_LD" >&5
! echo "${ECHO_T}$ac_ct_LD" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
    if test "x$ac_ct_LD" = x; then
--- 8324,8348 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_LD="ld"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_LD=$ac_cv_prog_ac_ct_LD
  if test -n "$ac_ct_LD"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_LD" >&5
! $as_echo "$ac_ct_LD" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
    if test "x$ac_ct_LD" = x; then
***************
*** 9735,9746 ****
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&5
! echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&2;}
  ac_tool_warned=yes ;;
  esac
      LD=$ac_ct_LD
--- 8350,8357 ----
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
! $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
  ac_tool_warned=yes ;;
  esac
      LD=$ac_ct_LD
***************
*** 9751,9757 ****
  
  
  # Check whether --enable-shared was given.
! if test "${enable_shared+set}" = set; then
    enableval=$enable_shared; p=${PACKAGE-default}
      case $enableval in
      yes) enable_shared=yes ;;
--- 8362,8368 ----
  
  
  # Check whether --enable-shared was given.
! if test "${enable_shared+set}" = set; then :
    enableval=$enable_shared; p=${PACKAGE-default}
      case $enableval in
      yes) enable_shared=yes ;;
***************
*** 9775,9781 ****
  
  
  # Check whether --enable-static was given.
! if test "${enable_static+set}" = set; then
    enableval=$enable_static; p=${PACKAGE-default}
      case $enableval in
      yes) enable_static=yes ;;
--- 8386,8392 ----
  
  
  # Check whether --enable-static was given.
! if test "${enable_static+set}" = set; then :
    enableval=$enable_static; p=${PACKAGE-default}
      case $enableval in
      yes) enable_static=yes ;;
***************
*** 9799,9805 ****
  
  
  # Check whether --enable-fast-install was given.
! if test "${enable_fast_install+set}" = set; then
    enableval=$enable_fast_install; p=${PACKAGE-default}
      case $enableval in
      yes) enable_fast_install=yes ;;
--- 8410,8416 ----
  
  
  # Check whether --enable-fast-install was given.
! if test "${enable_fast_install+set}" = set; then :
    enableval=$enable_fast_install; p=${PACKAGE-default}
      case $enableval in
      yes) enable_fast_install=yes ;;
***************
*** 9822,9831 ****
  fi
  
  
! { echo "$as_me:$LINENO: checking for a sed that does not truncate output" >&5
! echo $ECHO_N "checking for a sed that does not truncate output... $ECHO_C" >&6; }
! if test "${lt_cv_path_SED+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    # Loop through the user's path and test for sed and gsed.
  # Then use that list of sed's as ones to test for truncation.
--- 8433,8442 ----
  fi
  
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for a sed that does not truncate output" >&5
! $as_echo_n "checking for a sed that does not truncate output... " >&6; }
! if ${lt_cv_path_SED+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    # Loop through the user's path and test for sed and gsed.
  # Then use that list of sed's as ones to test for truncation.
***************
*** 9878,9889 ****
  
  SED=$lt_cv_path_SED
  
! { echo "$as_me:$LINENO: result: $SED" >&5
! echo "${ECHO_T}$SED" >&6; }
  
  
  # Check whether --with-gnu-ld was given.
! if test "${with_gnu_ld+set}" = set; then
    withval=$with_gnu_ld; test "$withval" = no || with_gnu_ld=yes
  else
    with_gnu_ld=no
--- 8489,8500 ----
  
  SED=$lt_cv_path_SED
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $SED" >&5
! $as_echo "$SED" >&6; }
  
  
  # Check whether --with-gnu-ld was given.
! if test "${with_gnu_ld+set}" = set; then :
    withval=$with_gnu_ld; test "$withval" = no || with_gnu_ld=yes
  else
    with_gnu_ld=no
***************
*** 9892,9899 ****
  ac_prog=ld
  if test "$GCC" = yes; then
    # Check if gcc -print-prog-name=ld gives a path.
!   { echo "$as_me:$LINENO: checking for ld used by $CC" >&5
! echo $ECHO_N "checking for ld used by $CC... $ECHO_C" >&6; }
    case $host in
    *-*-mingw*)
      # gcc leaves a trailing carriage return which upsets mingw
--- 8503,8510 ----
  ac_prog=ld
  if test "$GCC" = yes; then
    # Check if gcc -print-prog-name=ld gives a path.
!   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ld used by $CC" >&5
! $as_echo_n "checking for ld used by $CC... " >&6; }
    case $host in
    *-*-mingw*)
      # gcc leaves a trailing carriage return which upsets mingw
***************
*** 9922,9935 ****
      ;;
    esac
  elif test "$with_gnu_ld" = yes; then
!   { echo "$as_me:$LINENO: checking for GNU ld" >&5
! echo $ECHO_N "checking for GNU ld... $ECHO_C" >&6; }
  else
!   { echo "$as_me:$LINENO: checking for non-GNU ld" >&5
! echo $ECHO_N "checking for non-GNU ld... $ECHO_C" >&6; }
  fi
! if test "${lt_cv_path_LD+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -z "$LD"; then
    lt_save_ifs="$IFS"; IFS=$PATH_SEPARATOR
--- 8533,8546 ----
      ;;
    esac
  elif test "$with_gnu_ld" = yes; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for GNU ld" >&5
! $as_echo_n "checking for GNU ld... " >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for non-GNU ld" >&5
! $as_echo_n "checking for non-GNU ld... " >&6; }
  fi
! if ${lt_cv_path_LD+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -z "$LD"; then
    lt_save_ifs="$IFS"; IFS=$PATH_SEPARATOR
***************
*** 9959,9977 ****
  
  LD="$lt_cv_path_LD"
  if test -n "$LD"; then
!   { echo "$as_me:$LINENO: result: $LD" >&5
! echo "${ECHO_T}$LD" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
! test -z "$LD" && { { echo "$as_me:$LINENO: error: no acceptable ld found in \$PATH" >&5
! echo "$as_me: error: no acceptable ld found in \$PATH" >&2;}
!    { (exit 1); exit 1; }; }
! { echo "$as_me:$LINENO: checking if the linker ($LD) is GNU ld" >&5
! echo $ECHO_N "checking if the linker ($LD) is GNU ld... $ECHO_C" >&6; }
! if test "${lt_cv_prog_gnu_ld+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    # I'd rather use --version here, but apparently some GNU lds only accept -v.
  case `$LD -v 2>&1 </dev/null` in
--- 8570,8586 ----
  
  LD="$lt_cv_path_LD"
  if test -n "$LD"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $LD" >&5
! $as_echo "$LD" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
! test -z "$LD" && as_fn_error $? "no acceptable ld found in \$PATH" "$LINENO" 5
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking if the linker ($LD) is GNU ld" >&5
! $as_echo_n "checking if the linker ($LD) is GNU ld... " >&6; }
! if ${lt_cv_prog_gnu_ld+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    # I'd rather use --version here, but apparently some GNU lds only accept -v.
  case `$LD -v 2>&1 </dev/null` in
***************
*** 9983,10002 ****
    ;;
  esac
  fi
! { echo "$as_me:$LINENO: result: $lt_cv_prog_gnu_ld" >&5
! echo "${ECHO_T}$lt_cv_prog_gnu_ld" >&6; }
  with_gnu_ld=$lt_cv_prog_gnu_ld
  
  
! { echo "$as_me:$LINENO: checking for $LD option to reload object files" >&5
! echo $ECHO_N "checking for $LD option to reload object files... $ECHO_C" >&6; }
! if test "${lt_cv_ld_reload_flag+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    lt_cv_ld_reload_flag='-r'
  fi
! { echo "$as_me:$LINENO: result: $lt_cv_ld_reload_flag" >&5
! echo "${ECHO_T}$lt_cv_ld_reload_flag" >&6; }
  reload_flag=$lt_cv_ld_reload_flag
  case $reload_flag in
  "" | " "*) ;;
--- 8592,8611 ----
    ;;
  esac
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_gnu_ld" >&5
! $as_echo "$lt_cv_prog_gnu_ld" >&6; }
  with_gnu_ld=$lt_cv_prog_gnu_ld
  
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $LD option to reload object files" >&5
! $as_echo_n "checking for $LD option to reload object files... " >&6; }
! if ${lt_cv_ld_reload_flag+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    lt_cv_ld_reload_flag='-r'
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_ld_reload_flag" >&5
! $as_echo "$lt_cv_ld_reload_flag" >&6; }
  reload_flag=$lt_cv_ld_reload_flag
  case $reload_flag in
  "" | " "*) ;;
***************
*** 10013,10022 ****
      ;;
  esac
  
! { echo "$as_me:$LINENO: checking for BSD-compatible nm" >&5
! echo $ECHO_N "checking for BSD-compatible nm... $ECHO_C" >&6; }
! if test "${lt_cv_path_NM+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$NM"; then
    # Let the user override the test.
--- 8622,8631 ----
      ;;
  esac
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for BSD-compatible nm" >&5
! $as_echo_n "checking for BSD-compatible nm... " >&6; }
! if ${lt_cv_path_NM+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$NM"; then
    # Let the user override the test.
***************
*** 10062,10075 ****
    test -z "$lt_cv_path_NM" && lt_cv_path_NM=nm
  fi
  fi
! { echo "$as_me:$LINENO: result: $lt_cv_path_NM" >&5
! echo "${ECHO_T}$lt_cv_path_NM" >&6; }
  NM="$lt_cv_path_NM"
  
! { echo "$as_me:$LINENO: checking how to recognize dependent libraries" >&5
! echo $ECHO_N "checking how to recognize dependent libraries... $ECHO_C" >&6; }
! if test "${lt_cv_deplibs_check_method+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    lt_cv_file_magic_cmd='$MAGIC_CMD'
  lt_cv_file_magic_test_file=
--- 8671,8684 ----
    test -z "$lt_cv_path_NM" && lt_cv_path_NM=nm
  fi
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_path_NM" >&5
! $as_echo "$lt_cv_path_NM" >&6; }
  NM="$lt_cv_path_NM"
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking how to recognize dependent libraries" >&5
! $as_echo_n "checking how to recognize dependent libraries... " >&6; }
! if ${lt_cv_deplibs_check_method+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    lt_cv_file_magic_cmd='$MAGIC_CMD'
  lt_cv_file_magic_test_file=
***************
*** 10252,10259 ****
  esac
  
  fi
! { echo "$as_me:$LINENO: result: $lt_cv_deplibs_check_method" >&5
! echo "${ECHO_T}$lt_cv_deplibs_check_method" >&6; }
  file_magic_cmd=$lt_cv_file_magic_cmd
  deplibs_check_method=$lt_cv_deplibs_check_method
  test -z "$deplibs_check_method" && deplibs_check_method=unknown
--- 8861,8868 ----
  esac
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_deplibs_check_method" >&5
! $as_echo "$lt_cv_deplibs_check_method" >&6; }
  file_magic_cmd=$lt_cv_file_magic_cmd
  deplibs_check_method=$lt_cv_deplibs_check_method
  test -z "$deplibs_check_method" && deplibs_check_method=unknown
***************
*** 10271,10277 ****
  compiler=$CC
  
  # Check whether --enable-libtool-lock was given.
! if test "${enable_libtool_lock+set}" = set; then
    enableval=$enable_libtool_lock;
  fi
  
--- 8880,8886 ----
  compiler=$CC
  
  # Check whether --enable-libtool-lock was given.
! if test "${enable_libtool_lock+set}" = set; then :
    enableval=$enable_libtool_lock;
  fi
  
***************
*** 10283,10293 ****
  ia64-*-hpux*)
    # Find out which ABI we are using.
    echo 'int i;' > conftest.$ac_ext
!   if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
    (eval $ac_compile) 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
      case `/usr/bin/file conftest.$ac_objext` in
      *ELF-32*)
        HPUX_IA64_MODE="32"
--- 8892,8902 ----
  ia64-*-hpux*)
    # Find out which ABI we are using.
    echo 'int i;' > conftest.$ac_ext
!   if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
    (eval $ac_compile) 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then
      case `/usr/bin/file conftest.$ac_objext` in
      *ELF-32*)
        HPUX_IA64_MODE="32"
***************
*** 10301,10312 ****
    ;;
  *-*-irix6*)
    # Find out which ABI we are using.
!   echo '#line 10304 "configure"' > conftest.$ac_ext
!   if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
    (eval $ac_compile) 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
     if test "$lt_cv_prog_gnu_ld" = yes; then
      case `/usr/bin/file conftest.$ac_objext` in
      *32-bit*)
--- 8910,8921 ----
    ;;
  *-*-irix6*)
    # Find out which ABI we are using.
!   echo '#line 8913 "configure"' > conftest.$ac_ext
!   if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
    (eval $ac_compile) 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then
     if test "$lt_cv_prog_gnu_ld" = yes; then
      case `/usr/bin/file conftest.$ac_objext` in
      *32-bit*)
***************
*** 10340,10350 ****
  s390*-*linux*|sparc*-*linux*)
    # Find out which ABI we are using.
    echo 'int i;' > conftest.$ac_ext
!   if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
    (eval $ac_compile) 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
      case `/usr/bin/file conftest.o` in
      *32-bit*)
        case $host in
--- 8949,8959 ----
  s390*-*linux*|sparc*-*linux*)
    # Find out which ABI we are using.
    echo 'int i;' > conftest.$ac_ext
!   if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
    (eval $ac_compile) 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then
      case `/usr/bin/file conftest.o` in
      *32-bit*)
        case $host in
***************
*** 10393,10402 ****
    # On SCO OpenServer 5, we need -belf to get full-featured binaries.
    SAVE_CFLAGS="$CFLAGS"
    CFLAGS="$CFLAGS -belf"
!   { echo "$as_me:$LINENO: checking whether the C compiler needs -belf" >&5
! echo $ECHO_N "checking whether the C compiler needs -belf... $ECHO_C" >&6; }
! if test "${lt_cv_cc_needs_belf+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    ac_ext=c
  ac_cpp='$CPP $CPPFLAGS'
--- 9002,9011 ----
    # On SCO OpenServer 5, we need -belf to get full-featured binaries.
    SAVE_CFLAGS="$CFLAGS"
    CFLAGS="$CFLAGS -belf"
!   { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the C compiler needs -belf" >&5
! $as_echo_n "checking whether the C compiler needs -belf... " >&6; }
! if ${lt_cv_cc_needs_belf+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    ac_ext=c
  ac_cpp='$CPP $CPPFLAGS'
***************
*** 10404,10414 ****
  ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
  ac_compiler_gnu=$ac_cv_c_compiler_gnu
  
!      cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  int
--- 9013,9019 ----
  ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
  ac_compiler_gnu=$ac_cv_c_compiler_gnu
  
!      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  int
***************
*** 10419,10452 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
    lt_cv_cc_needs_belf=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	lt_cv_cc_needs_belf=no
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
       ac_ext=c
  ac_cpp='$CPP $CPPFLAGS'
  ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
--- 9024,9036 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
    lt_cv_cc_needs_belf=yes
  else
!   lt_cv_cc_needs_belf=no
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
       ac_ext=c
  ac_cpp='$CPP $CPPFLAGS'
  ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
***************
*** 10454,10461 ****
  ac_compiler_gnu=$ac_cv_c_compiler_gnu
  
  fi
! { echo "$as_me:$LINENO: result: $lt_cv_cc_needs_belf" >&5
! echo "${ECHO_T}$lt_cv_cc_needs_belf" >&6; }
    if test x"$lt_cv_cc_needs_belf" != x"yes"; then
      # this is probably gcc 2.8.0, egcs 1.0 or newer; no need for -belf
      CFLAGS="$SAVE_CFLAGS"
--- 9038,9045 ----
  ac_compiler_gnu=$ac_cv_c_compiler_gnu
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_cc_needs_belf" >&5
! $as_echo "$lt_cv_cc_needs_belf" >&6; }
    if test x"$lt_cv_cc_needs_belf" != x"yes"; then
      # this is probably gcc 2.8.0, egcs 1.0 or newer; no need for -belf
      CFLAGS="$SAVE_CFLAGS"
***************
*** 10464,10474 ****
  sparc*-*solaris*)
    # Find out which ABI we are using.
    echo 'int i;' > conftest.$ac_ext
!   if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
    (eval $ac_compile) 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
      case `/usr/bin/file conftest.o` in
      *64-bit*)
        case $lt_cv_prog_gnu_ld in
--- 9048,9058 ----
  sparc*-*solaris*)
    # Find out which ABI we are using.
    echo 'int i;' > conftest.$ac_ext
!   if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
    (eval $ac_compile) 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then
      case `/usr/bin/file conftest.o` in
      *64-bit*)
        case $lt_cv_prog_gnu_ld in
***************
*** 10489,10498 ****
    if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}dlltool", so it can be a program name with args.
  set dummy ${ac_tool_prefix}dlltool; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_DLLTOOL+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$DLLTOOL"; then
    ac_cv_prog_DLLTOOL="$DLLTOOL" # Let the user override the test.
--- 9073,9082 ----
    if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}dlltool", so it can be a program name with args.
  set dummy ${ac_tool_prefix}dlltool; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_DLLTOOL+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$DLLTOOL"; then
    ac_cv_prog_DLLTOOL="$DLLTOOL" # Let the user override the test.
***************
*** 10502,10526 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_DLLTOOL="${ac_tool_prefix}dlltool"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  DLLTOOL=$ac_cv_prog_DLLTOOL
  if test -n "$DLLTOOL"; then
!   { echo "$as_me:$LINENO: result: $DLLTOOL" >&5
! echo "${ECHO_T}$DLLTOOL" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 9086,9110 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_DLLTOOL="${ac_tool_prefix}dlltool"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  DLLTOOL=$ac_cv_prog_DLLTOOL
  if test -n "$DLLTOOL"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $DLLTOOL" >&5
! $as_echo "$DLLTOOL" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 10529,10538 ****
    ac_ct_DLLTOOL=$DLLTOOL
    # Extract the first word of "dlltool", so it can be a program name with args.
  set dummy dlltool; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_ac_ct_DLLTOOL+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$ac_ct_DLLTOOL"; then
    ac_cv_prog_ac_ct_DLLTOOL="$ac_ct_DLLTOOL" # Let the user override the test.
--- 9113,9122 ----
    ac_ct_DLLTOOL=$DLLTOOL
    # Extract the first word of "dlltool", so it can be a program name with args.
  set dummy dlltool; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_ac_ct_DLLTOOL+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$ac_ct_DLLTOOL"; then
    ac_cv_prog_ac_ct_DLLTOOL="$ac_ct_DLLTOOL" # Let the user override the test.
***************
*** 10542,10566 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_DLLTOOL="dlltool"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_DLLTOOL=$ac_cv_prog_ac_ct_DLLTOOL
  if test -n "$ac_ct_DLLTOOL"; then
!   { echo "$as_me:$LINENO: result: $ac_ct_DLLTOOL" >&5
! echo "${ECHO_T}$ac_ct_DLLTOOL" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
    if test "x$ac_ct_DLLTOOL" = x; then
--- 9126,9150 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_DLLTOOL="dlltool"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_DLLTOOL=$ac_cv_prog_ac_ct_DLLTOOL
  if test -n "$ac_ct_DLLTOOL"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_DLLTOOL" >&5
! $as_echo "$ac_ct_DLLTOOL" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
    if test "x$ac_ct_DLLTOOL" = x; then
***************
*** 10568,10579 ****
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&5
! echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&2;}
  ac_tool_warned=yes ;;
  esac
      DLLTOOL=$ac_ct_DLLTOOL
--- 9152,9159 ----
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
! $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
  ac_tool_warned=yes ;;
  esac
      DLLTOOL=$ac_ct_DLLTOOL
***************
*** 10585,10594 ****
    if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}as", so it can be a program name with args.
  set dummy ${ac_tool_prefix}as; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_AS+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$AS"; then
    ac_cv_prog_AS="$AS" # Let the user override the test.
--- 9165,9174 ----
    if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}as", so it can be a program name with args.
  set dummy ${ac_tool_prefix}as; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_AS+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$AS"; then
    ac_cv_prog_AS="$AS" # Let the user override the test.
***************
*** 10598,10622 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_AS="${ac_tool_prefix}as"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  AS=$ac_cv_prog_AS
  if test -n "$AS"; then
!   { echo "$as_me:$LINENO: result: $AS" >&5
! echo "${ECHO_T}$AS" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 9178,9202 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_AS="${ac_tool_prefix}as"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  AS=$ac_cv_prog_AS
  if test -n "$AS"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $AS" >&5
! $as_echo "$AS" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 10625,10634 ****
    ac_ct_AS=$AS
    # Extract the first word of "as", so it can be a program name with args.
  set dummy as; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_ac_ct_AS+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$ac_ct_AS"; then
    ac_cv_prog_ac_ct_AS="$ac_ct_AS" # Let the user override the test.
--- 9205,9214 ----
    ac_ct_AS=$AS
    # Extract the first word of "as", so it can be a program name with args.
  set dummy as; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_ac_ct_AS+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$ac_ct_AS"; then
    ac_cv_prog_ac_ct_AS="$ac_ct_AS" # Let the user override the test.
***************
*** 10638,10662 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_AS="as"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_AS=$ac_cv_prog_ac_ct_AS
  if test -n "$ac_ct_AS"; then
!   { echo "$as_me:$LINENO: result: $ac_ct_AS" >&5
! echo "${ECHO_T}$ac_ct_AS" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
    if test "x$ac_ct_AS" = x; then
--- 9218,9242 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_AS="as"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_AS=$ac_cv_prog_ac_ct_AS
  if test -n "$ac_ct_AS"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_AS" >&5
! $as_echo "$ac_ct_AS" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
    if test "x$ac_ct_AS" = x; then
***************
*** 10664,10675 ****
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&5
! echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&2;}
  ac_tool_warned=yes ;;
  esac
      AS=$ac_ct_AS
--- 9244,9251 ----
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
! $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
  ac_tool_warned=yes ;;
  esac
      AS=$ac_ct_AS
***************
*** 10681,10690 ****
    if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}objdump", so it can be a program name with args.
  set dummy ${ac_tool_prefix}objdump; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_OBJDUMP+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$OBJDUMP"; then
    ac_cv_prog_OBJDUMP="$OBJDUMP" # Let the user override the test.
--- 9257,9266 ----
    if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}objdump", so it can be a program name with args.
  set dummy ${ac_tool_prefix}objdump; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_OBJDUMP+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$OBJDUMP"; then
    ac_cv_prog_OBJDUMP="$OBJDUMP" # Let the user override the test.
***************
*** 10694,10718 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_OBJDUMP="${ac_tool_prefix}objdump"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  OBJDUMP=$ac_cv_prog_OBJDUMP
  if test -n "$OBJDUMP"; then
!   { echo "$as_me:$LINENO: result: $OBJDUMP" >&5
! echo "${ECHO_T}$OBJDUMP" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 9270,9294 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_OBJDUMP="${ac_tool_prefix}objdump"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  OBJDUMP=$ac_cv_prog_OBJDUMP
  if test -n "$OBJDUMP"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $OBJDUMP" >&5
! $as_echo "$OBJDUMP" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 10721,10730 ****
    ac_ct_OBJDUMP=$OBJDUMP
    # Extract the first word of "objdump", so it can be a program name with args.
  set dummy objdump; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_ac_ct_OBJDUMP+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$ac_ct_OBJDUMP"; then
    ac_cv_prog_ac_ct_OBJDUMP="$ac_ct_OBJDUMP" # Let the user override the test.
--- 9297,9306 ----
    ac_ct_OBJDUMP=$OBJDUMP
    # Extract the first word of "objdump", so it can be a program name with args.
  set dummy objdump; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_ac_ct_OBJDUMP+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$ac_ct_OBJDUMP"; then
    ac_cv_prog_ac_ct_OBJDUMP="$ac_ct_OBJDUMP" # Let the user override the test.
***************
*** 10734,10758 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_OBJDUMP="objdump"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_OBJDUMP=$ac_cv_prog_ac_ct_OBJDUMP
  if test -n "$ac_ct_OBJDUMP"; then
!   { echo "$as_me:$LINENO: result: $ac_ct_OBJDUMP" >&5
! echo "${ECHO_T}$ac_ct_OBJDUMP" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
    if test "x$ac_ct_OBJDUMP" = x; then
--- 9310,9334 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_OBJDUMP="objdump"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_OBJDUMP=$ac_cv_prog_ac_ct_OBJDUMP
  if test -n "$ac_ct_OBJDUMP"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_OBJDUMP" >&5
! $as_echo "$ac_ct_OBJDUMP" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
    if test "x$ac_ct_OBJDUMP" = x; then
***************
*** 10760,10771 ****
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&5
! echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&2;}
  ac_tool_warned=yes ;;
  esac
      OBJDUMP=$ac_ct_OBJDUMP
--- 9336,9343 ----
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
! $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
  ac_tool_warned=yes ;;
  esac
      OBJDUMP=$ac_ct_OBJDUMP
***************
*** 10781,10920 ****
  need_locks="$enable_libtool_lock"
  
  
- 
  for ac_header in dlfcn.h
! do
! as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
! if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
!   { echo "$as_me:$LINENO: checking for $ac_header" >&5
! echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6; }
! if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! fi
! ac_res=`eval echo '${'$as_ac_Header'}'`
! 	       { echo "$as_me:$LINENO: result: $ac_res" >&5
! echo "${ECHO_T}$ac_res" >&6; }
! else
!   # Is the header compilable?
! { echo "$as_me:$LINENO: checking $ac_header usability" >&5
! echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6; }
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
! /* end confdefs.h.  */
! $ac_includes_default
! #include <$ac_header>
! _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
!   ac_header_compiler=yes
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_header_compiler=no
! fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
! { echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
! echo "${ECHO_T}$ac_header_compiler" >&6; }
! 
! # Is the header present?
! { echo "$as_me:$LINENO: checking $ac_header presence" >&5
! echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6; }
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
! /* end confdefs.h.  */
! #include <$ac_header>
! _ACEOF
! if { (ac_try="$ac_cpp conftest.$ac_ext"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } >/dev/null && {
! 	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        }; then
!   ac_header_preproc=yes
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
!   ac_header_preproc=no
! fi
! 
! rm -f conftest.err conftest.$ac_ext
! { echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
! echo "${ECHO_T}$ac_header_preproc" >&6; }
! 
! # So?  What about this header?
! case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
!   yes:no: )
!     { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
! echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
!     { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the compiler's result" >&5
! echo "$as_me: WARNING: $ac_header: proceeding with the compiler's result" >&2;}
!     ac_header_preproc=yes
!     ;;
!   no:yes:* )
!     { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
! echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
!     { echo "$as_me:$LINENO: WARNING: $ac_header:     check for missing prerequisite headers?" >&5
! echo "$as_me: WARNING: $ac_header:     check for missing prerequisite headers?" >&2;}
!     { echo "$as_me:$LINENO: WARNING: $ac_header: see the Autoconf documentation" >&5
! echo "$as_me: WARNING: $ac_header: see the Autoconf documentation" >&2;}
!     { echo "$as_me:$LINENO: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&5
! echo "$as_me: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&2;}
!     { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
! echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;}
!     { echo "$as_me:$LINENO: WARNING: $ac_header: in the future, the compiler will take precedence" >&5
! echo "$as_me: WARNING: $ac_header: in the future, the compiler will take precedence" >&2;}
! 
!     ;;
! esac
! { echo "$as_me:$LINENO: checking for $ac_header" >&5
! echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6; }
! if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   eval "$as_ac_Header=\$ac_header_preproc"
! fi
! ac_res=`eval echo '${'$as_ac_Header'}'`
! 	       { echo "$as_me:$LINENO: result: $ac_res" >&5
! echo "${ECHO_T}$ac_res" >&6; }
! 
! fi
! if test `eval echo '${'$as_ac_Header'}'` = yes; then
    cat >>confdefs.h <<_ACEOF
! #define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
  _ACEOF
  
  fi
--- 9353,9364 ----
  need_locks="$enable_libtool_lock"
  
  
  for ac_header in dlfcn.h
! do :
!   ac_fn_c_check_header_mongrel "$LINENO" "dlfcn.h" "ac_cv_header_dlfcn_h" "$ac_includes_default"
! if test "x$ac_cv_header_dlfcn_h" = xyes; then :
    cat >>confdefs.h <<_ACEOF
! #define HAVE_DLFCN_H 1
  _ACEOF
  
  fi
***************
*** 10931,10941 ****
  ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
  ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
  ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
! { echo "$as_me:$LINENO: checking how to run the C++ preprocessor" >&5
! echo $ECHO_N "checking how to run the C++ preprocessor... $ECHO_C" >&6; }
  if test -z "$CXXCPP"; then
!   if test "${ac_cv_prog_CXXCPP+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
        # Double quotes because CXXCPP needs to be expanded
      for CXXCPP in "$CXX -E" "/lib/cpp"
--- 9375,9385 ----
  ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
  ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
  ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking how to run the C++ preprocessor" >&5
! $as_echo_n "checking how to run the C++ preprocessor... " >&6; }
  if test -z "$CXXCPP"; then
!   if ${ac_cv_prog_CXXCPP+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
        # Double quotes because CXXCPP needs to be expanded
      for CXXCPP in "$CXX -E" "/lib/cpp"
***************
*** 10949,10959 ****
    # <limits.h> exists even on freestanding compilers.
    # On the NeXT, cc -E runs the code through the compiler's parser,
    # not just through cpp. "Syntax error" is here to catch this case.
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #ifdef __STDC__
  # include <limits.h>
--- 9393,9399 ----
    # <limits.h> exists even on freestanding compilers.
    # On the NeXT, cc -E runs the code through the compiler's parser,
    # not just through cpp. "Syntax error" is here to catch this case.
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #ifdef __STDC__
  # include <limits.h>
***************
*** 10961,11037 ****
  # include <assert.h>
  #endif
  		     Syntax error
! _ACEOF
! if { (ac_try="$ac_cpp conftest.$ac_ext"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } >/dev/null && {
! 	 test -z "$ac_cxx_preproc_warn_flag$ac_cxx_werror_flag" ||
! 	 test ! -s conftest.err
!        }; then
!   :
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
  
    # Broken: fails on valid input.
  continue
  fi
! 
! rm -f conftest.err conftest.$ac_ext
  
    # OK, works on sane cases.  Now check whether nonexistent headers
    # can be detected and how.
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <ac_nonexistent.h>
  _ACEOF
! if { (ac_try="$ac_cpp conftest.$ac_ext"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } >/dev/null && {
! 	 test -z "$ac_cxx_preproc_warn_flag$ac_cxx_werror_flag" ||
! 	 test ! -s conftest.err
!        }; then
    # Broken: success on invalid input.
  continue
  else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
    # Passes both tests.
  ac_preproc_ok=:
  break
  fi
! 
! rm -f conftest.err conftest.$ac_ext
  
  done
  # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
! rm -f conftest.err conftest.$ac_ext
! if $ac_preproc_ok; then
    break
  fi
  
--- 9401,9435 ----
  # include <assert.h>
  #endif
  		     Syntax error
! _ACEOF
! if ac_fn_cxx_try_cpp "$LINENO"; then :
  
+ else
    # Broken: fails on valid input.
  continue
  fi
! rm -f conftest.err conftest.i conftest.$ac_ext
  
    # OK, works on sane cases.  Now check whether nonexistent headers
    # can be detected and how.
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <ac_nonexistent.h>
  _ACEOF
! if ac_fn_cxx_try_cpp "$LINENO"; then :
    # Broken: success on invalid input.
  continue
  else
    # Passes both tests.
  ac_preproc_ok=:
  break
  fi
! rm -f conftest.err conftest.i conftest.$ac_ext
  
  done
  # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
! rm -f conftest.i conftest.err conftest.$ac_ext
! if $ac_preproc_ok; then :
    break
  fi
  
***************
*** 11043,11050 ****
  else
    ac_cv_prog_CXXCPP=$CXXCPP
  fi
! { echo "$as_me:$LINENO: result: $CXXCPP" >&5
! echo "${ECHO_T}$CXXCPP" >&6; }
  ac_preproc_ok=false
  for ac_cxx_preproc_warn_flag in '' yes
  do
--- 9441,9448 ----
  else
    ac_cv_prog_CXXCPP=$CXXCPP
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CXXCPP" >&5
! $as_echo "$CXXCPP" >&6; }
  ac_preproc_ok=false
  for ac_cxx_preproc_warn_flag in '' yes
  do
***************
*** 11054,11064 ****
    # <limits.h> exists even on freestanding compilers.
    # On the NeXT, cc -E runs the code through the compiler's parser,
    # not just through cpp. "Syntax error" is here to catch this case.
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #ifdef __STDC__
  # include <limits.h>
--- 9452,9458 ----
    # <limits.h> exists even on freestanding compilers.
    # On the NeXT, cc -E runs the code through the compiler's parser,
    # not just through cpp. "Syntax error" is here to catch this case.
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #ifdef __STDC__
  # include <limits.h>
***************
*** 11067,11149 ****
  #endif
  		     Syntax error
  _ACEOF
! if { (ac_try="$ac_cpp conftest.$ac_ext"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } >/dev/null && {
! 	 test -z "$ac_cxx_preproc_warn_flag$ac_cxx_werror_flag" ||
! 	 test ! -s conftest.err
!        }; then
!   :
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
  
    # Broken: fails on valid input.
  continue
  fi
! 
! rm -f conftest.err conftest.$ac_ext
  
    # OK, works on sane cases.  Now check whether nonexistent headers
    # can be detected and how.
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <ac_nonexistent.h>
  _ACEOF
! if { (ac_try="$ac_cpp conftest.$ac_ext"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } >/dev/null && {
! 	 test -z "$ac_cxx_preproc_warn_flag$ac_cxx_werror_flag" ||
! 	 test ! -s conftest.err
!        }; then
    # Broken: success on invalid input.
  continue
  else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
    # Passes both tests.
  ac_preproc_ok=:
  break
  fi
! 
! rm -f conftest.err conftest.$ac_ext
  
  done
  # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
! rm -f conftest.err conftest.$ac_ext
! if $ac_preproc_ok; then
!   :
  else
!   { { echo "$as_me:$LINENO: error: C++ preprocessor \"$CXXCPP\" fails sanity check
! See \`config.log' for more details." >&5
! echo "$as_me: error: C++ preprocessor \"$CXXCPP\" fails sanity check
! See \`config.log' for more details." >&2;}
!    { (exit 1); exit 1; }; }
  fi
  
  ac_ext=cpp
--- 9461,9500 ----
  #endif
  		     Syntax error
  _ACEOF
! if ac_fn_cxx_try_cpp "$LINENO"; then :
  
+ else
    # Broken: fails on valid input.
  continue
  fi
! rm -f conftest.err conftest.i conftest.$ac_ext
  
    # OK, works on sane cases.  Now check whether nonexistent headers
    # can be detected and how.
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <ac_nonexistent.h>
  _ACEOF
! if ac_fn_cxx_try_cpp "$LINENO"; then :
    # Broken: success on invalid input.
  continue
  else
    # Passes both tests.
  ac_preproc_ok=:
  break
  fi
! rm -f conftest.err conftest.i conftest.$ac_ext
  
  done
  # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
! rm -f conftest.i conftest.err conftest.$ac_ext
! if $ac_preproc_ok; then :
! 
  else
!   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
! $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
! as_fn_error $? "C++ preprocessor \"$CXXCPP\" fails sanity check
! See \`config.log' for more details" "$LINENO" 5; }
  fi
  
  ac_ext=cpp
***************
*** 11160,11173 ****
  ac_link='$F77 -o conftest$ac_exeext $FFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
  ac_compiler_gnu=$ac_cv_f77_compiler_gnu
  if test -n "$ac_tool_prefix"; then
!   for ac_prog in g77 xlf f77 frt pgf77 cf77 fort77 fl32 af77 xlf90 f90 pgf90 pghpf epcf90 gfortran g95 xlf95 f95 fort ifort ifc efc pgf95 lf95 ftn
    do
      # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
  set dummy $ac_tool_prefix$ac_prog; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_F77+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$F77"; then
    ac_cv_prog_F77="$F77" # Let the user override the test.
--- 9511,9524 ----
  ac_link='$F77 -o conftest$ac_exeext $FFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
  ac_compiler_gnu=$ac_cv_f77_compiler_gnu
  if test -n "$ac_tool_prefix"; then
!   for ac_prog in g77 xlf f77 frt pgf77 cf77 fort77 fl32 af77 xlf90 f90 pgf90 pghpf epcf90 gfortran g95 xlf95 f95 fort ifort ifc efc pgfortran pgf95 lf95 ftn
    do
      # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
  set dummy $ac_tool_prefix$ac_prog; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_F77+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$F77"; then
    ac_cv_prog_F77="$F77" # Let the user override the test.
***************
*** 11177,11201 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_F77="$ac_tool_prefix$ac_prog"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  F77=$ac_cv_prog_F77
  if test -n "$F77"; then
!   { echo "$as_me:$LINENO: result: $F77" >&5
! echo "${ECHO_T}$F77" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 9528,9552 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_F77="$ac_tool_prefix$ac_prog"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  F77=$ac_cv_prog_F77
  if test -n "$F77"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $F77" >&5
! $as_echo "$F77" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 11204,11217 ****
  fi
  if test -z "$F77"; then
    ac_ct_F77=$F77
!   for ac_prog in g77 xlf f77 frt pgf77 cf77 fort77 fl32 af77 xlf90 f90 pgf90 pghpf epcf90 gfortran g95 xlf95 f95 fort ifort ifc efc pgf95 lf95 ftn
  do
    # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_ac_ct_F77+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$ac_ct_F77"; then
    ac_cv_prog_ac_ct_F77="$ac_ct_F77" # Let the user override the test.
--- 9555,9568 ----
  fi
  if test -z "$F77"; then
    ac_ct_F77=$F77
!   for ac_prog in g77 xlf f77 frt pgf77 cf77 fort77 fl32 af77 xlf90 f90 pgf90 pghpf epcf90 gfortran g95 xlf95 f95 fort ifort ifc efc pgfortran pgf95 lf95 ftn
  do
    # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_ac_ct_F77+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$ac_ct_F77"; then
    ac_cv_prog_ac_ct_F77="$ac_ct_F77" # Let the user override the test.
***************
*** 11221,11245 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_F77="$ac_prog"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_F77=$ac_cv_prog_ac_ct_F77
  if test -n "$ac_ct_F77"; then
!   { echo "$as_me:$LINENO: result: $ac_ct_F77" >&5
! echo "${ECHO_T}$ac_ct_F77" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 9572,9596 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_F77="$ac_prog"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_F77=$ac_cv_prog_ac_ct_F77
  if test -n "$ac_ct_F77"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_F77" >&5
! $as_echo "$ac_ct_F77" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 11251,11262 ****
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&5
! echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&2;}
  ac_tool_warned=yes ;;
  esac
      F77=$ac_ct_F77
--- 9602,9609 ----
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
! $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
  ac_tool_warned=yes ;;
  esac
      F77=$ac_ct_F77
***************
*** 11265,11314 ****
  
  
  # Provide some information about the compiler.
! echo "$as_me:$LINENO: checking for Fortran 77 compiler version" >&5
! ac_compiler=`set X $ac_compile; echo $2`
! { (ac_try="$ac_compiler --version >&5"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compiler --version >&5") 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }
! { (ac_try="$ac_compiler -v >&5"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compiler -v >&5") 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }
! { (ac_try="$ac_compiler -V >&5"
  case "(($ac_try" in
    *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
    *) ac_try_echo=$ac_try;;
  esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compiler -V >&5") 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }
  rm -f a.out
  
  # If we don't use `.F' as extension, the preprocessor is not run on the
  # input file.  (Note that this only needs to work for GNU compilers.)
  ac_save_ext=$ac_ext
  ac_ext=F
! { echo "$as_me:$LINENO: checking whether we are using the GNU Fortran 77 compiler" >&5
! echo $ECHO_N "checking whether we are using the GNU Fortran 77 compiler... $ECHO_C" >&6; }
! if test "${ac_cv_f77_compiler_gnu+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   cat >conftest.$ac_ext <<_ACEOF
        program main
  #ifndef __GNUC__
         choke me
--- 9612,9652 ----
  
  
  # Provide some information about the compiler.
! $as_echo "$as_me:${as_lineno-$LINENO}: checking for Fortran 77 compiler version" >&5
! set X $ac_compile
! ac_compiler=$2
! for ac_option in --version -v -V -qversion; do
!   { { ac_try="$ac_compiler $ac_option >&5"
  case "(($ac_try" in
    *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
    *) ac_try_echo=$ac_try;;
  esac
! eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
! $as_echo "$ac_try_echo"; } >&5
!   (eval "$ac_compiler $ac_option >&5") 2>conftest.err
    ac_status=$?
!   if test -s conftest.err; then
!     sed '10a\
! ... rest of stderr output deleted ...
!          10q' conftest.err >conftest.er1
!     cat conftest.er1 >&5
!   fi
!   rm -f conftest.er1 conftest.err
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }
! done
  rm -f a.out
  
  # If we don't use `.F' as extension, the preprocessor is not run on the
  # input file.  (Note that this only needs to work for GNU compilers.)
  ac_save_ext=$ac_ext
  ac_ext=F
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether we are using the GNU Fortran 77 compiler" >&5
! $as_echo_n "checking whether we are using the GNU Fortran 77 compiler... " >&6; }
! if ${ac_cv_f77_compiler_gnu+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
!   cat > conftest.$ac_ext <<_ACEOF
        program main
  #ifndef __GNUC__
         choke me
***************
*** 11316,11346 ****
  
        end
  _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_f77_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
    ac_compiler_gnu=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_compiler_gnu=no
  fi
- 
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  ac_cv_f77_compiler_gnu=$ac_compiler_gnu
  
--- 9654,9664 ----
  
        end
  _ACEOF
! if ac_fn_f77_try_compile "$LINENO"; then :
    ac_compiler_gnu=yes
  else
!   ac_compiler_gnu=no
  fi
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  ac_cv_f77_compiler_gnu=$ac_compiler_gnu
  
***************
*** 11345,11392 ****
  ac_cv_f77_compiler_gnu=$ac_compiler_gnu
  
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_f77_compiler_gnu" >&5
! echo "${ECHO_T}$ac_cv_f77_compiler_gnu" >&6; }
  ac_ext=$ac_save_ext
  ac_test_FFLAGS=${FFLAGS+set}
  ac_save_FFLAGS=$FFLAGS
  FFLAGS=
! { echo "$as_me:$LINENO: checking whether $F77 accepts -g" >&5
! echo $ECHO_N "checking whether $F77 accepts -g... $ECHO_C" >&6; }
! if test "${ac_cv_prog_f77_g+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    FFLAGS=-g
! cat >conftest.$ac_ext <<_ACEOF
        program main
  
        end
  _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_f77_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
    ac_cv_prog_f77_g=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_cv_prog_f77_g=no
  fi
- 
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  
  fi
--- 9663,9690 ----
  ac_cv_f77_compiler_gnu=$ac_compiler_gnu
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_f77_compiler_gnu" >&5
! $as_echo "$ac_cv_f77_compiler_gnu" >&6; }
  ac_ext=$ac_save_ext
  ac_test_FFLAGS=${FFLAGS+set}
  ac_save_FFLAGS=$FFLAGS
  FFLAGS=
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $F77 accepts -g" >&5
! $as_echo_n "checking whether $F77 accepts -g... " >&6; }
! if ${ac_cv_prog_f77_g+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    FFLAGS=-g
! cat > conftest.$ac_ext <<_ACEOF
        program main
  
        end
  _ACEOF
! if ac_fn_f77_try_compile "$LINENO"; then :
    ac_cv_prog_f77_g=yes
  else
!   ac_cv_prog_f77_g=no
  fi
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  
  fi
***************
*** 11390,11397 ****
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_prog_f77_g" >&5
! echo "${ECHO_T}$ac_cv_prog_f77_g" >&6; }
  if test "$ac_test_FFLAGS" = set; then
    FFLAGS=$ac_save_FFLAGS
  elif test $ac_cv_prog_f77_g = yes; then
--- 9688,9695 ----
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_f77_g" >&5
! $as_echo "$ac_cv_prog_f77_g" >&6; }
  if test "$ac_test_FFLAGS" = set; then
    FFLAGS=$ac_save_FFLAGS
  elif test $ac_cv_prog_f77_g = yes; then
***************
*** 11408,11414 ****
    fi
  fi
  
! G77=`test $ac_compiler_gnu = yes && echo yes`
  ac_ext=c
  ac_cpp='$CPP $CPPFLAGS'
  ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
--- 9706,9716 ----
    fi
  fi
  
! if test $ac_compiler_gnu = yes; then
!   G77=yes
! else
!   G77=
! fi
  ac_ext=c
  ac_cpp='$CPP $CPPFLAGS'
  ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
***************
*** 11419,11428 ****
  
  # Autoconf 2.13's AC_OBJEXT and AC_EXEEXT macros only works for C compilers!
  # find the maximum length of command line arguments
! { echo "$as_me:$LINENO: checking the maximum length of command line arguments" >&5
! echo $ECHO_N "checking the maximum length of command line arguments... $ECHO_C" >&6; }
! if test "${lt_cv_sys_max_cmd_len+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
      i=0
    teststring="ABCD"
--- 9721,9730 ----
  
  # Autoconf 2.13's AC_OBJEXT and AC_EXEEXT macros only works for C compilers!
  # find the maximum length of command line arguments
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking the maximum length of command line arguments" >&5
! $as_echo_n "checking the maximum length of command line arguments... " >&6; }
! if ${lt_cv_sys_max_cmd_len+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
      i=0
    teststring="ABCD"
***************
*** 11531,11541 ****
  fi
  
  if test -n $lt_cv_sys_max_cmd_len ; then
!   { echo "$as_me:$LINENO: result: $lt_cv_sys_max_cmd_len" >&5
! echo "${ECHO_T}$lt_cv_sys_max_cmd_len" >&6; }
  else
!   { echo "$as_me:$LINENO: result: none" >&5
! echo "${ECHO_T}none" >&6; }
  fi
  
  
--- 9833,9843 ----
  fi
  
  if test -n $lt_cv_sys_max_cmd_len ; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_sys_max_cmd_len" >&5
! $as_echo "$lt_cv_sys_max_cmd_len" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: none" >&5
! $as_echo "none" >&6; }
  fi
  
  
***************
*** 11543,11552 ****
  
  
  # Check for command to grab the raw symbol name followed by C symbol from nm.
! { echo "$as_me:$LINENO: checking command to parse $NM output from $compiler object" >&5
! echo $ECHO_N "checking command to parse $NM output from $compiler object... $ECHO_C" >&6; }
! if test "${lt_cv_sys_global_symbol_pipe+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
  
  # These are sane defaults that work on at least a few old systems.
--- 9845,9854 ----
  
  
  # Check for command to grab the raw symbol name followed by C symbol from nm.
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking command to parse $NM output from $compiler object" >&5
! $as_echo_n "checking command to parse $NM output from $compiler object... " >&6; }
! if ${lt_cv_sys_global_symbol_pipe+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
  
  # These are sane defaults that work on at least a few old systems.
***************
*** 11648,11665 ****
  int main(){nm_test_var='a';nm_test_func();return(0);}
  EOF
  
!   if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
    (eval $ac_compile) 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
      # Now try to grab the symbols.
      nlist=conftest.nm
!     if { (eval echo "$as_me:$LINENO: \"$NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist\"") >&5
    (eval $NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist) 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && test -s "$nlist"; then
        # Try sorting and uniquifying the output.
        if sort "$nlist" | uniq > "$nlist"T; then
  	mv -f "$nlist"T "$nlist"
--- 9950,9967 ----
  int main(){nm_test_var='a';nm_test_func();return(0);}
  EOF
  
!   if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
    (eval $ac_compile) 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then
      # Now try to grab the symbols.
      nlist=conftest.nm
!     if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist\""; } >&5
    (eval $NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist) 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; } && test -s "$nlist"; then
        # Try sorting and uniquifying the output.
        if sort "$nlist" | uniq > "$nlist"T; then
  	mv -f "$nlist"T "$nlist"
***************
*** 11710,11720 ****
  	  lt_save_CFLAGS="$CFLAGS"
  	  LIBS="conftstm.$ac_objext"
  	  CFLAGS="$CFLAGS$lt_prog_compiler_no_builtin_flag"
! 	  if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
    (eval $ac_link) 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && test -s conftest${ac_exeext}; then
  	    pipe_works=yes
  	  fi
  	  LIBS="$lt_save_LIBS"
--- 10012,10022 ----
  	  lt_save_CFLAGS="$CFLAGS"
  	  LIBS="conftstm.$ac_objext"
  	  CFLAGS="$CFLAGS$lt_prog_compiler_no_builtin_flag"
! 	  if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_link\""; } >&5
    (eval $ac_link) 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; } && test -s conftest${ac_exeext}; then
  	    pipe_works=yes
  	  fi
  	  LIBS="$lt_save_LIBS"
***************
*** 11748,11764 ****
    lt_cv_sys_global_symbol_to_cdecl=
  fi
  if test -z "$lt_cv_sys_global_symbol_pipe$lt_cv_sys_global_symbol_to_cdecl"; then
!   { echo "$as_me:$LINENO: result: failed" >&5
! echo "${ECHO_T}failed" >&6; }
  else
!   { echo "$as_me:$LINENO: result: ok" >&5
! echo "${ECHO_T}ok" >&6; }
  fi
  
! { echo "$as_me:$LINENO: checking for objdir" >&5
! echo $ECHO_N "checking for objdir... $ECHO_C" >&6; }
! if test "${lt_cv_objdir+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    rm -f .libs 2>/dev/null
  mkdir .libs 2>/dev/null
--- 10050,10066 ----
    lt_cv_sys_global_symbol_to_cdecl=
  fi
  if test -z "$lt_cv_sys_global_symbol_pipe$lt_cv_sys_global_symbol_to_cdecl"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: failed" >&5
! $as_echo "failed" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: ok" >&5
! $as_echo "ok" >&6; }
  fi
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for objdir" >&5
! $as_echo_n "checking for objdir... " >&6; }
! if ${lt_cv_objdir+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    rm -f .libs 2>/dev/null
  mkdir .libs 2>/dev/null
***************
*** 11770,11777 ****
  fi
  rmdir .libs 2>/dev/null
  fi
! { echo "$as_me:$LINENO: result: $lt_cv_objdir" >&5
! echo "${ECHO_T}$lt_cv_objdir" >&6; }
  objdir=$lt_cv_objdir
  
  
--- 10072,10079 ----
  fi
  rmdir .libs 2>/dev/null
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_objdir" >&5
! $as_echo "$lt_cv_objdir" >&6; }
  objdir=$lt_cv_objdir
  
  
***************
*** 11822,11831 ****
  if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}ar", so it can be a program name with args.
  set dummy ${ac_tool_prefix}ar; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_AR+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$AR"; then
    ac_cv_prog_AR="$AR" # Let the user override the test.
--- 10124,10133 ----
  if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}ar", so it can be a program name with args.
  set dummy ${ac_tool_prefix}ar; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_AR+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$AR"; then
    ac_cv_prog_AR="$AR" # Let the user override the test.
***************
*** 11835,11859 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_AR="${ac_tool_prefix}ar"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  AR=$ac_cv_prog_AR
  if test -n "$AR"; then
!   { echo "$as_me:$LINENO: result: $AR" >&5
! echo "${ECHO_T}$AR" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 10137,10161 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_AR="${ac_tool_prefix}ar"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  AR=$ac_cv_prog_AR
  if test -n "$AR"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $AR" >&5
! $as_echo "$AR" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 11862,11871 ****
    ac_ct_AR=$AR
    # Extract the first word of "ar", so it can be a program name with args.
  set dummy ar; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_ac_ct_AR+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$ac_ct_AR"; then
    ac_cv_prog_ac_ct_AR="$ac_ct_AR" # Let the user override the test.
--- 10164,10173 ----
    ac_ct_AR=$AR
    # Extract the first word of "ar", so it can be a program name with args.
  set dummy ar; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_ac_ct_AR+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$ac_ct_AR"; then
    ac_cv_prog_ac_ct_AR="$ac_ct_AR" # Let the user override the test.
***************
*** 11875,11899 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_AR="ar"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_AR=$ac_cv_prog_ac_ct_AR
  if test -n "$ac_ct_AR"; then
!   { echo "$as_me:$LINENO: result: $ac_ct_AR" >&5
! echo "${ECHO_T}$ac_ct_AR" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
    if test "x$ac_ct_AR" = x; then
--- 10177,10201 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_AR="ar"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_AR=$ac_cv_prog_ac_ct_AR
  if test -n "$ac_ct_AR"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_AR" >&5
! $as_echo "$ac_ct_AR" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
    if test "x$ac_ct_AR" = x; then
***************
*** 11901,11912 ****
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&5
! echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&2;}
  ac_tool_warned=yes ;;
  esac
      AR=$ac_ct_AR
--- 10203,10210 ----
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
! $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
  ac_tool_warned=yes ;;
  esac
      AR=$ac_ct_AR
***************
*** 11918,11927 ****
  if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}ranlib", so it can be a program name with args.
  set dummy ${ac_tool_prefix}ranlib; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_RANLIB+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$RANLIB"; then
    ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
--- 10216,10225 ----
  if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}ranlib", so it can be a program name with args.
  set dummy ${ac_tool_prefix}ranlib; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_RANLIB+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$RANLIB"; then
    ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
***************
*** 11931,11955 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_RANLIB="${ac_tool_prefix}ranlib"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  RANLIB=$ac_cv_prog_RANLIB
  if test -n "$RANLIB"; then
!   { echo "$as_me:$LINENO: result: $RANLIB" >&5
! echo "${ECHO_T}$RANLIB" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 10229,10253 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_RANLIB="${ac_tool_prefix}ranlib"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  RANLIB=$ac_cv_prog_RANLIB
  if test -n "$RANLIB"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $RANLIB" >&5
! $as_echo "$RANLIB" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 11958,11967 ****
    ac_ct_RANLIB=$RANLIB
    # Extract the first word of "ranlib", so it can be a program name with args.
  set dummy ranlib; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_ac_ct_RANLIB+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$ac_ct_RANLIB"; then
    ac_cv_prog_ac_ct_RANLIB="$ac_ct_RANLIB" # Let the user override the test.
--- 10256,10265 ----
    ac_ct_RANLIB=$RANLIB
    # Extract the first word of "ranlib", so it can be a program name with args.
  set dummy ranlib; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_ac_ct_RANLIB+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$ac_ct_RANLIB"; then
    ac_cv_prog_ac_ct_RANLIB="$ac_ct_RANLIB" # Let the user override the test.
***************
*** 11971,11995 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_RANLIB="ranlib"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_RANLIB=$ac_cv_prog_ac_ct_RANLIB
  if test -n "$ac_ct_RANLIB"; then
!   { echo "$as_me:$LINENO: result: $ac_ct_RANLIB" >&5
! echo "${ECHO_T}$ac_ct_RANLIB" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
    if test "x$ac_ct_RANLIB" = x; then
--- 10269,10293 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_RANLIB="ranlib"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_RANLIB=$ac_cv_prog_ac_ct_RANLIB
  if test -n "$ac_ct_RANLIB"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_RANLIB" >&5
! $as_echo "$ac_ct_RANLIB" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
    if test "x$ac_ct_RANLIB" = x; then
***************
*** 11997,12008 ****
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&5
! echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&2;}
  ac_tool_warned=yes ;;
  esac
      RANLIB=$ac_ct_RANLIB
--- 10295,10302 ----
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
! $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
  ac_tool_warned=yes ;;
  esac
      RANLIB=$ac_ct_RANLIB
***************
*** 12014,12023 ****
  if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}strip", so it can be a program name with args.
  set dummy ${ac_tool_prefix}strip; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_STRIP+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$STRIP"; then
    ac_cv_prog_STRIP="$STRIP" # Let the user override the test.
--- 10308,10317 ----
  if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}strip", so it can be a program name with args.
  set dummy ${ac_tool_prefix}strip; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_STRIP+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$STRIP"; then
    ac_cv_prog_STRIP="$STRIP" # Let the user override the test.
***************
*** 12027,12051 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_STRIP="${ac_tool_prefix}strip"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  STRIP=$ac_cv_prog_STRIP
  if test -n "$STRIP"; then
!   { echo "$as_me:$LINENO: result: $STRIP" >&5
! echo "${ECHO_T}$STRIP" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 10321,10345 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_STRIP="${ac_tool_prefix}strip"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  STRIP=$ac_cv_prog_STRIP
  if test -n "$STRIP"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $STRIP" >&5
! $as_echo "$STRIP" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 12054,12063 ****
    ac_ct_STRIP=$STRIP
    # Extract the first word of "strip", so it can be a program name with args.
  set dummy strip; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_ac_ct_STRIP+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$ac_ct_STRIP"; then
    ac_cv_prog_ac_ct_STRIP="$ac_ct_STRIP" # Let the user override the test.
--- 10348,10357 ----
    ac_ct_STRIP=$STRIP
    # Extract the first word of "strip", so it can be a program name with args.
  set dummy strip; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_ac_ct_STRIP+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$ac_ct_STRIP"; then
    ac_cv_prog_ac_ct_STRIP="$ac_ct_STRIP" # Let the user override the test.
***************
*** 12067,12091 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_STRIP="strip"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_STRIP=$ac_cv_prog_ac_ct_STRIP
  if test -n "$ac_ct_STRIP"; then
!   { echo "$as_me:$LINENO: result: $ac_ct_STRIP" >&5
! echo "${ECHO_T}$ac_ct_STRIP" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
    if test "x$ac_ct_STRIP" = x; then
--- 10361,10385 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_STRIP="strip"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_STRIP=$ac_cv_prog_ac_ct_STRIP
  if test -n "$ac_ct_STRIP"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_STRIP" >&5
! $as_echo "$ac_ct_STRIP" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
    if test "x$ac_ct_STRIP" = x; then
***************
*** 12093,12104 ****
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&5
! echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&2;}
  ac_tool_warned=yes ;;
  esac
      STRIP=$ac_ct_STRIP
--- 10387,10394 ----
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
! $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
  ac_tool_warned=yes ;;
  esac
      STRIP=$ac_ct_STRIP
***************
*** 12161,12170 ****
  case $deplibs_check_method in
  file_magic*)
    if test "$file_magic_cmd" = '$MAGIC_CMD'; then
!     { echo "$as_me:$LINENO: checking for ${ac_tool_prefix}file" >&5
! echo $ECHO_N "checking for ${ac_tool_prefix}file... $ECHO_C" >&6; }
! if test "${lt_cv_path_MAGIC_CMD+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    case $MAGIC_CMD in
  [\\/*] |  ?:[\\/]*)
--- 10451,10460 ----
  case $deplibs_check_method in
  file_magic*)
    if test "$file_magic_cmd" = '$MAGIC_CMD'; then
!     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ${ac_tool_prefix}file" >&5
! $as_echo_n "checking for ${ac_tool_prefix}file... " >&6; }
! if ${lt_cv_path_MAGIC_CMD+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    case $MAGIC_CMD in
  [\\/*] |  ?:[\\/]*)
***************
*** 12214,12232 ****
  
  MAGIC_CMD="$lt_cv_path_MAGIC_CMD"
  if test -n "$MAGIC_CMD"; then
!   { echo "$as_me:$LINENO: result: $MAGIC_CMD" >&5
! echo "${ECHO_T}$MAGIC_CMD" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  if test -z "$lt_cv_path_MAGIC_CMD"; then
    if test -n "$ac_tool_prefix"; then
!     { echo "$as_me:$LINENO: checking for file" >&5
! echo $ECHO_N "checking for file... $ECHO_C" >&6; }
! if test "${lt_cv_path_MAGIC_CMD+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    case $MAGIC_CMD in
  [\\/*] |  ?:[\\/]*)
--- 10504,10522 ----
  
  MAGIC_CMD="$lt_cv_path_MAGIC_CMD"
  if test -n "$MAGIC_CMD"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $MAGIC_CMD" >&5
! $as_echo "$MAGIC_CMD" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  if test -z "$lt_cv_path_MAGIC_CMD"; then
    if test -n "$ac_tool_prefix"; then
!     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for file" >&5
! $as_echo_n "checking for file... " >&6; }
! if ${lt_cv_path_MAGIC_CMD+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    case $MAGIC_CMD in
  [\\/*] |  ?:[\\/]*)
***************
*** 12276,12286 ****
  
  MAGIC_CMD="$lt_cv_path_MAGIC_CMD"
  if test -n "$MAGIC_CMD"; then
!   { echo "$as_me:$LINENO: result: $MAGIC_CMD" >&5
! echo "${ECHO_T}$MAGIC_CMD" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
    else
--- 10566,10576 ----
  
  MAGIC_CMD="$lt_cv_path_MAGIC_CMD"
  if test -n "$MAGIC_CMD"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $MAGIC_CMD" >&5
! $as_echo "$MAGIC_CMD" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
    else
***************
*** 12298,12307 ****
      if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}dsymutil", so it can be a program name with args.
  set dummy ${ac_tool_prefix}dsymutil; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_DSYMUTIL+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$DSYMUTIL"; then
    ac_cv_prog_DSYMUTIL="$DSYMUTIL" # Let the user override the test.
--- 10588,10597 ----
      if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}dsymutil", so it can be a program name with args.
  set dummy ${ac_tool_prefix}dsymutil; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_DSYMUTIL+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$DSYMUTIL"; then
    ac_cv_prog_DSYMUTIL="$DSYMUTIL" # Let the user override the test.
***************
*** 12311,12335 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_DSYMUTIL="${ac_tool_prefix}dsymutil"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  DSYMUTIL=$ac_cv_prog_DSYMUTIL
  if test -n "$DSYMUTIL"; then
!   { echo "$as_me:$LINENO: result: $DSYMUTIL" >&5
! echo "${ECHO_T}$DSYMUTIL" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 10601,10625 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_DSYMUTIL="${ac_tool_prefix}dsymutil"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  DSYMUTIL=$ac_cv_prog_DSYMUTIL
  if test -n "$DSYMUTIL"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $DSYMUTIL" >&5
! $as_echo "$DSYMUTIL" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 12338,12347 ****
    ac_ct_DSYMUTIL=$DSYMUTIL
    # Extract the first word of "dsymutil", so it can be a program name with args.
  set dummy dsymutil; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_ac_ct_DSYMUTIL+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$ac_ct_DSYMUTIL"; then
    ac_cv_prog_ac_ct_DSYMUTIL="$ac_ct_DSYMUTIL" # Let the user override the test.
--- 10628,10637 ----
    ac_ct_DSYMUTIL=$DSYMUTIL
    # Extract the first word of "dsymutil", so it can be a program name with args.
  set dummy dsymutil; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_ac_ct_DSYMUTIL+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$ac_ct_DSYMUTIL"; then
    ac_cv_prog_ac_ct_DSYMUTIL="$ac_ct_DSYMUTIL" # Let the user override the test.
***************
*** 12351,12375 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_DSYMUTIL="dsymutil"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_DSYMUTIL=$ac_cv_prog_ac_ct_DSYMUTIL
  if test -n "$ac_ct_DSYMUTIL"; then
!   { echo "$as_me:$LINENO: result: $ac_ct_DSYMUTIL" >&5
! echo "${ECHO_T}$ac_ct_DSYMUTIL" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
    if test "x$ac_ct_DSYMUTIL" = x; then
--- 10641,10665 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_DSYMUTIL="dsymutil"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_DSYMUTIL=$ac_cv_prog_ac_ct_DSYMUTIL
  if test -n "$ac_ct_DSYMUTIL"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_DSYMUTIL" >&5
! $as_echo "$ac_ct_DSYMUTIL" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
    if test "x$ac_ct_DSYMUTIL" = x; then
***************
*** 12377,12388 ****
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&5
! echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&2;}
  ac_tool_warned=yes ;;
  esac
      DSYMUTIL=$ac_ct_DSYMUTIL
--- 10667,10674 ----
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
! $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
  ac_tool_warned=yes ;;
  esac
      DSYMUTIL=$ac_ct_DSYMUTIL
***************
*** 12394,12403 ****
      if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}nmedit", so it can be a program name with args.
  set dummy ${ac_tool_prefix}nmedit; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_NMEDIT+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$NMEDIT"; then
    ac_cv_prog_NMEDIT="$NMEDIT" # Let the user override the test.
--- 10680,10689 ----
      if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}nmedit", so it can be a program name with args.
  set dummy ${ac_tool_prefix}nmedit; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_NMEDIT+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$NMEDIT"; then
    ac_cv_prog_NMEDIT="$NMEDIT" # Let the user override the test.
***************
*** 12407,12431 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_NMEDIT="${ac_tool_prefix}nmedit"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  NMEDIT=$ac_cv_prog_NMEDIT
  if test -n "$NMEDIT"; then
!   { echo "$as_me:$LINENO: result: $NMEDIT" >&5
! echo "${ECHO_T}$NMEDIT" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 10693,10717 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_NMEDIT="${ac_tool_prefix}nmedit"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  NMEDIT=$ac_cv_prog_NMEDIT
  if test -n "$NMEDIT"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $NMEDIT" >&5
! $as_echo "$NMEDIT" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 12434,12443 ****
    ac_ct_NMEDIT=$NMEDIT
    # Extract the first word of "nmedit", so it can be a program name with args.
  set dummy nmedit; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_prog_ac_ct_NMEDIT+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$ac_ct_NMEDIT"; then
    ac_cv_prog_ac_ct_NMEDIT="$ac_ct_NMEDIT" # Let the user override the test.
--- 10720,10729 ----
    ac_ct_NMEDIT=$NMEDIT
    # Extract the first word of "nmedit", so it can be a program name with args.
  set dummy nmedit; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_prog_ac_ct_NMEDIT+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -n "$ac_ct_NMEDIT"; then
    ac_cv_prog_ac_ct_NMEDIT="$ac_ct_NMEDIT" # Let the user override the test.
***************
*** 12447,12471 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_NMEDIT="nmedit"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_NMEDIT=$ac_cv_prog_ac_ct_NMEDIT
  if test -n "$ac_ct_NMEDIT"; then
!   { echo "$as_me:$LINENO: result: $ac_ct_NMEDIT" >&5
! echo "${ECHO_T}$ac_ct_NMEDIT" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
    if test "x$ac_ct_NMEDIT" = x; then
--- 10733,10757 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_prog_ac_ct_NMEDIT="nmedit"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
  fi
  fi
  ac_ct_NMEDIT=$ac_cv_prog_ac_ct_NMEDIT
  if test -n "$ac_ct_NMEDIT"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_NMEDIT" >&5
! $as_echo "$ac_ct_NMEDIT" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
    if test "x$ac_ct_NMEDIT" = x; then
***************
*** 12473,12484 ****
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&5
! echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&2;}
  ac_tool_warned=yes ;;
  esac
      NMEDIT=$ac_ct_NMEDIT
--- 10759,10766 ----
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
! $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
  ac_tool_warned=yes ;;
  esac
      NMEDIT=$ac_ct_NMEDIT
***************
*** 12488,12497 ****
  fi
  
  
!     { echo "$as_me:$LINENO: checking for -single_module linker flag" >&5
! echo $ECHO_N "checking for -single_module linker flag... $ECHO_C" >&6; }
! if test "${lt_cv_apple_cc_single_mod+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    lt_cv_apple_cc_single_mod=no
        if test -z "${LT_MULTI_MODULE}"; then
--- 10770,10779 ----
  fi
  
  
!     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for -single_module linker flag" >&5
! $as_echo_n "checking for -single_module linker flag... " >&6; }
! if ${lt_cv_apple_cc_single_mod+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    lt_cv_apple_cc_single_mod=no
        if test -z "${LT_MULTI_MODULE}"; then
***************
*** 12509,12530 ****
     rm conftest.c
        fi
  fi
! { echo "$as_me:$LINENO: result: $lt_cv_apple_cc_single_mod" >&5
! echo "${ECHO_T}$lt_cv_apple_cc_single_mod" >&6; }
!     { echo "$as_me:$LINENO: checking for -exported_symbols_list linker flag" >&5
! echo $ECHO_N "checking for -exported_symbols_list linker flag... $ECHO_C" >&6; }
! if test "${lt_cv_ld_exported_symbols_list+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    lt_cv_ld_exported_symbols_list=no
        save_LDFLAGS=$LDFLAGS
        echo "_main" > conftest.sym
        LDFLAGS="$LDFLAGS -Wl,-exported_symbols_list,conftest.sym"
!       cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  int
--- 10791,10808 ----
     rm conftest.c
        fi
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_apple_cc_single_mod" >&5
! $as_echo "$lt_cv_apple_cc_single_mod" >&6; }
!     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for -exported_symbols_list linker flag" >&5
! $as_echo_n "checking for -exported_symbols_list linker flag... " >&6; }
! if ${lt_cv_ld_exported_symbols_list+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    lt_cv_ld_exported_symbols_list=no
        save_LDFLAGS=$LDFLAGS
        echo "_main" > conftest.sym
        LDFLAGS="$LDFLAGS -Wl,-exported_symbols_list,conftest.sym"
!       cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  int
***************
*** 12535,12573 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
    lt_cv_ld_exported_symbols_list=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	lt_cv_ld_exported_symbols_list=no
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
     LDFLAGS="$save_LDFLAGS"
  
  fi
! { echo "$as_me:$LINENO: result: $lt_cv_ld_exported_symbols_list" >&5
! echo "${ECHO_T}$lt_cv_ld_exported_symbols_list" >&6; }
      case $host_os in
      rhapsody* | darwin1.[0123])
        _lt_dar_allow_undefined='${wl}-undefined ${wl}suppress' ;;
--- 10813,10830 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
    lt_cv_ld_exported_symbols_list=yes
  else
!   lt_cv_ld_exported_symbols_list=no
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
     LDFLAGS="$save_LDFLAGS"
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_ld_exported_symbols_list" >&5
! $as_echo "$lt_cv_ld_exported_symbols_list" >&6; }
      case $host_os in
      rhapsody* | darwin1.[0123])
        _lt_dar_allow_undefined='${wl}-undefined ${wl}suppress' ;;
***************
*** 12608,12614 ****
  enable_win32_dll=yes
  
  # Check whether --enable-libtool-lock was given.
! if test "${enable_libtool_lock+set}" = set; then
    enableval=$enable_libtool_lock;
  fi
  
--- 10865,10871 ----
  enable_win32_dll=yes
  
  # Check whether --enable-libtool-lock was given.
! if test "${enable_libtool_lock+set}" = set; then :
    enableval=$enable_libtool_lock;
  fi
  
***************
*** 12616,12622 ****
  
  
  # Check whether --with-pic was given.
! if test "${with_pic+set}" = set; then
    withval=$with_pic; pic_mode="$withval"
  else
    pic_mode=default
--- 10873,10879 ----
  
  
  # Check whether --with-pic was given.
! if test "${with_pic+set}" = set; then :
    withval=$with_pic; pic_mode="$withval"
  else
    pic_mode=default
***************
*** 12679,12688 ****
    lt_prog_compiler_no_builtin_flag=' -fno-builtin'
  
  
! { echo "$as_me:$LINENO: checking if $compiler supports -fno-rtti -fno-exceptions" >&5
! echo $ECHO_N "checking if $compiler supports -fno-rtti -fno-exceptions... $ECHO_C" >&6; }
! if test "${lt_cv_prog_compiler_rtti_exceptions+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    lt_cv_prog_compiler_rtti_exceptions=no
    ac_outfile=conftest.$ac_objext
--- 10936,10945 ----
    lt_prog_compiler_no_builtin_flag=' -fno-builtin'
  
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler supports -fno-rtti -fno-exceptions" >&5
! $as_echo_n "checking if $compiler supports -fno-rtti -fno-exceptions... " >&6; }
! if ${lt_cv_prog_compiler_rtti_exceptions+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    lt_cv_prog_compiler_rtti_exceptions=no
    ac_outfile=conftest.$ac_objext
***************
*** 12697,12707 ****
     -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:12700: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>conftest.err)
     ac_status=$?
     cat conftest.err >&5
!    echo "$as_me:12704: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s "$ac_outfile"; then
       # The compiler can only warn and ignore the option if not recognized
       # So say no if there are warnings other than the usual output.
--- 10954,10964 ----
     -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:10957: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>conftest.err)
     ac_status=$?
     cat conftest.err >&5
!    echo "$as_me:10961: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s "$ac_outfile"; then
       # The compiler can only warn and ignore the option if not recognized
       # So say no if there are warnings other than the usual output.
***************
*** 12714,12721 ****
     $rm conftest*
  
  fi
! { echo "$as_me:$LINENO: result: $lt_cv_prog_compiler_rtti_exceptions" >&5
! echo "${ECHO_T}$lt_cv_prog_compiler_rtti_exceptions" >&6; }
  
  if test x"$lt_cv_prog_compiler_rtti_exceptions" = xyes; then
      lt_prog_compiler_no_builtin_flag="$lt_prog_compiler_no_builtin_flag -fno-rtti -fno-exceptions"
--- 10971,10978 ----
     $rm conftest*
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_compiler_rtti_exceptions" >&5
! $as_echo "$lt_cv_prog_compiler_rtti_exceptions" >&6; }
  
  if test x"$lt_cv_prog_compiler_rtti_exceptions" = xyes; then
      lt_prog_compiler_no_builtin_flag="$lt_prog_compiler_no_builtin_flag -fno-rtti -fno-exceptions"
***************
*** 12729,12736 ****
  lt_prog_compiler_pic=
  lt_prog_compiler_static=
  
! { echo "$as_me:$LINENO: checking for $compiler option to produce PIC" >&5
! echo $ECHO_N "checking for $compiler option to produce PIC... $ECHO_C" >&6; }
  
    if test "$GCC" = yes; then
      lt_prog_compiler_wl='-Wl,'
--- 10986,10993 ----
  lt_prog_compiler_pic=
  lt_prog_compiler_static=
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $compiler option to produce PIC" >&5
! $as_echo_n "checking for $compiler option to produce PIC... " >&6; }
  
    if test "$GCC" = yes; then
      lt_prog_compiler_wl='-Wl,'
***************
*** 12961,12978 ****
      esac
    fi
  
! { echo "$as_me:$LINENO: result: $lt_prog_compiler_pic" >&5
! echo "${ECHO_T}$lt_prog_compiler_pic" >&6; }
  
  #
  # Check to make sure the PIC flag actually works.
  #
  if test -n "$lt_prog_compiler_pic"; then
  
! { echo "$as_me:$LINENO: checking if $compiler PIC flag $lt_prog_compiler_pic works" >&5
! echo $ECHO_N "checking if $compiler PIC flag $lt_prog_compiler_pic works... $ECHO_C" >&6; }
! if test "${lt_cv_prog_compiler_pic_works+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    lt_cv_prog_compiler_pic_works=no
    ac_outfile=conftest.$ac_objext
--- 11218,11235 ----
      esac
    fi
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_prog_compiler_pic" >&5
! $as_echo "$lt_prog_compiler_pic" >&6; }
  
  #
  # Check to make sure the PIC flag actually works.
  #
  if test -n "$lt_prog_compiler_pic"; then
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler PIC flag $lt_prog_compiler_pic works" >&5
! $as_echo_n "checking if $compiler PIC flag $lt_prog_compiler_pic works... " >&6; }
! if ${lt_cv_prog_compiler_pic_works+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    lt_cv_prog_compiler_pic_works=no
    ac_outfile=conftest.$ac_objext
***************
*** 12987,12997 ****
     -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:12990: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>conftest.err)
     ac_status=$?
     cat conftest.err >&5
!    echo "$as_me:12994: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s "$ac_outfile"; then
       # The compiler can only warn and ignore the option if not recognized
       # So say no if there are warnings other than the usual output.
--- 11244,11254 ----
     -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:11247: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>conftest.err)
     ac_status=$?
     cat conftest.err >&5
!    echo "$as_me:11251: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s "$ac_outfile"; then
       # The compiler can only warn and ignore the option if not recognized
       # So say no if there are warnings other than the usual output.
***************
*** 13004,13011 ****
     $rm conftest*
  
  fi
! { echo "$as_me:$LINENO: result: $lt_cv_prog_compiler_pic_works" >&5
! echo "${ECHO_T}$lt_cv_prog_compiler_pic_works" >&6; }
  
  if test x"$lt_cv_prog_compiler_pic_works" = xyes; then
      case $lt_prog_compiler_pic in
--- 11261,11268 ----
     $rm conftest*
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_compiler_pic_works" >&5
! $as_echo "$lt_cv_prog_compiler_pic_works" >&6; }
  
  if test x"$lt_cv_prog_compiler_pic_works" = xyes; then
      case $lt_prog_compiler_pic in
***************
*** 13032,13041 ****
  # Check to make sure the static flag actually works.
  #
  wl=$lt_prog_compiler_wl eval lt_tmp_static_flag=\"$lt_prog_compiler_static\"
! { echo "$as_me:$LINENO: checking if $compiler static flag $lt_tmp_static_flag works" >&5
! echo $ECHO_N "checking if $compiler static flag $lt_tmp_static_flag works... $ECHO_C" >&6; }
! if test "${lt_cv_prog_compiler_static_works+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    lt_cv_prog_compiler_static_works=no
     save_LDFLAGS="$LDFLAGS"
--- 11289,11298 ----
  # Check to make sure the static flag actually works.
  #
  wl=$lt_prog_compiler_wl eval lt_tmp_static_flag=\"$lt_prog_compiler_static\"
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler static flag $lt_tmp_static_flag works" >&5
! $as_echo_n "checking if $compiler static flag $lt_tmp_static_flag works... " >&6; }
! if ${lt_cv_prog_compiler_static_works+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    lt_cv_prog_compiler_static_works=no
     save_LDFLAGS="$LDFLAGS"
***************
*** 13060,13067 ****
     LDFLAGS="$save_LDFLAGS"
  
  fi
! { echo "$as_me:$LINENO: result: $lt_cv_prog_compiler_static_works" >&5
! echo "${ECHO_T}$lt_cv_prog_compiler_static_works" >&6; }
  
  if test x"$lt_cv_prog_compiler_static_works" = xyes; then
      :
--- 11317,11324 ----
     LDFLAGS="$save_LDFLAGS"
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_compiler_static_works" >&5
! $as_echo "$lt_cv_prog_compiler_static_works" >&6; }
  
  if test x"$lt_cv_prog_compiler_static_works" = xyes; then
      :
***************
*** 13070,13079 ****
  fi
  
  
! { echo "$as_me:$LINENO: checking if $compiler supports -c -o file.$ac_objext" >&5
! echo $ECHO_N "checking if $compiler supports -c -o file.$ac_objext... $ECHO_C" >&6; }
! if test "${lt_cv_prog_compiler_c_o+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    lt_cv_prog_compiler_c_o=no
     $rm -r conftest 2>/dev/null
--- 11327,11336 ----
  fi
  
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler supports -c -o file.$ac_objext" >&5
! $as_echo_n "checking if $compiler supports -c -o file.$ac_objext... " >&6; }
! if ${lt_cv_prog_compiler_c_o+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    lt_cv_prog_compiler_c_o=no
     $rm -r conftest 2>/dev/null
***************
*** 13091,13101 ****
     -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:13094: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>out/conftest.err)
     ac_status=$?
     cat out/conftest.err >&5
!    echo "$as_me:13098: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s out/conftest2.$ac_objext
     then
       # The compiler can only warn and ignore the option if not recognized
--- 11348,11358 ----
     -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:11351: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>out/conftest.err)
     ac_status=$?
     cat out/conftest.err >&5
!    echo "$as_me:11355: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s out/conftest2.$ac_objext
     then
       # The compiler can only warn and ignore the option if not recognized
***************
*** 13117,13150 ****
     $rm conftest*
  
  fi
! { echo "$as_me:$LINENO: result: $lt_cv_prog_compiler_c_o" >&5
! echo "${ECHO_T}$lt_cv_prog_compiler_c_o" >&6; }
  
  
  hard_links="nottested"
  if test "$lt_cv_prog_compiler_c_o" = no && test "$need_locks" != no; then
    # do not overwrite the value of need_locks provided by the user
!   { echo "$as_me:$LINENO: checking if we can lock with hard links" >&5
! echo $ECHO_N "checking if we can lock with hard links... $ECHO_C" >&6; }
    hard_links=yes
    $rm conftest*
    ln conftest.a conftest.b 2>/dev/null && hard_links=no
    touch conftest.a
    ln conftest.a conftest.b 2>&5 || hard_links=no
    ln conftest.a conftest.b 2>/dev/null && hard_links=no
!   { echo "$as_me:$LINENO: result: $hard_links" >&5
! echo "${ECHO_T}$hard_links" >&6; }
    if test "$hard_links" = no; then
!     { echo "$as_me:$LINENO: WARNING: \`$CC' does not support \`-c -o', so \`make -j' may be unsafe" >&5
! echo "$as_me: WARNING: \`$CC' does not support \`-c -o', so \`make -j' may be unsafe" >&2;}
      need_locks=warn
    fi
  else
    need_locks=no
  fi
  
! { echo "$as_me:$LINENO: checking whether the $compiler linker ($LD) supports shared libraries" >&5
! echo $ECHO_N "checking whether the $compiler linker ($LD) supports shared libraries... $ECHO_C" >&6; }
  
    runpath_var=
    allow_undefined_flag=
--- 11374,11407 ----
     $rm conftest*
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_compiler_c_o" >&5
! $as_echo "$lt_cv_prog_compiler_c_o" >&6; }
  
  
  hard_links="nottested"
  if test "$lt_cv_prog_compiler_c_o" = no && test "$need_locks" != no; then
    # do not overwrite the value of need_locks provided by the user
!   { $as_echo "$as_me:${as_lineno-$LINENO}: checking if we can lock with hard links" >&5
! $as_echo_n "checking if we can lock with hard links... " >&6; }
    hard_links=yes
    $rm conftest*
    ln conftest.a conftest.b 2>/dev/null && hard_links=no
    touch conftest.a
    ln conftest.a conftest.b 2>&5 || hard_links=no
    ln conftest.a conftest.b 2>/dev/null && hard_links=no
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $hard_links" >&5
! $as_echo "$hard_links" >&6; }
    if test "$hard_links" = no; then
!     { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: \`$CC' does not support \`-c -o', so \`make -j' may be unsafe" >&5
! $as_echo "$as_me: WARNING: \`$CC' does not support \`-c -o', so \`make -j' may be unsafe" >&2;}
      need_locks=warn
    fi
  else
    need_locks=no
  fi
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the $compiler linker ($LD) supports shared libraries" >&5
! $as_echo_n "checking whether the $compiler linker ($LD) supports shared libraries... " >&6; }
  
    runpath_var=
    allow_undefined_flag=
***************
*** 13554,13564 ****
  	# -berok will link without error, but may produce a broken library.
  	allow_undefined_flag='-berok'
         # Determine the default libpath from the value encoded in an empty executable.
!        cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  int
--- 11811,11817 ----
  	# -berok will link without error, but may produce a broken library.
  	allow_undefined_flag='-berok'
         # Determine the default libpath from the value encoded in an empty executable.
!        cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  int
***************
*** 13569,13592 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
  
  lt_aix_libpath_sed='
      /Import File Strings/,/^$/ {
--- 11822,11828 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
  
  lt_aix_libpath_sed='
      /Import File Strings/,/^$/ {
***************
*** 13600,13614 ****
  if test -z "$aix_libpath"; then
    aix_libpath=`dump -HX64 conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
  fi
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
- 
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  if test -z "$aix_libpath"; then aix_libpath="/usr/lib:/lib"; fi
  
         hardcode_libdir_flag_spec='${wl}-blibpath:$libdir:'"$aix_libpath"
--- 11836,11844 ----
  if test -z "$aix_libpath"; then
    aix_libpath=`dump -HX64 conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
  fi
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  if test -z "$aix_libpath"; then aix_libpath="/usr/lib:/lib"; fi
  
         hardcode_libdir_flag_spec='${wl}-blibpath:$libdir:'"$aix_libpath"
***************
*** 13620,13630 ****
  	  archive_expsym_cmds="\$CC $shared_flag"' -o $output_objdir/$soname $libobjs $deplibs '"\${wl}$no_entry_flag"' $compiler_flags ${wl}${allow_undefined_flag} '"\${wl}$exp_sym_flag:\$export_symbols"
  	else
  	 # Determine the default libpath from the value encoded in an empty executable.
! 	 cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  int
--- 11850,11856 ----
  	  archive_expsym_cmds="\$CC $shared_flag"' -o $output_objdir/$soname $libobjs $deplibs '"\${wl}$no_entry_flag"' $compiler_flags ${wl}${allow_undefined_flag} '"\${wl}$exp_sym_flag:\$export_symbols"
  	else
  	 # Determine the default libpath from the value encoded in an empty executable.
! 	 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  int
***************
*** 13635,13658 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
  
  lt_aix_libpath_sed='
      /Import File Strings/,/^$/ {
--- 11861,11867 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
  
  lt_aix_libpath_sed='
      /Import File Strings/,/^$/ {
***************
*** 13666,13680 ****
  if test -z "$aix_libpath"; then
    aix_libpath=`dump -HX64 conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
  fi
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
- 
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  if test -z "$aix_libpath"; then aix_libpath="/usr/lib:/lib"; fi
  
  	 hardcode_libdir_flag_spec='${wl}-blibpath:$libdir:'"$aix_libpath"
--- 11875,11883 ----
  if test -z "$aix_libpath"; then
    aix_libpath=`dump -HX64 conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
  fi
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  if test -z "$aix_libpath"; then aix_libpath="/usr/lib:/lib"; fi
  
  	 hardcode_libdir_flag_spec='${wl}-blibpath:$libdir:'"$aix_libpath"
***************
*** 14124,14131 ****
      esac
    fi
  
! { echo "$as_me:$LINENO: result: $ld_shlibs" >&5
! echo "${ECHO_T}$ld_shlibs" >&6; }
  test "$ld_shlibs" = no && can_build_shared=no
  
  #
--- 12327,12334 ----
      esac
    fi
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ld_shlibs" >&5
! $as_echo "$ld_shlibs" >&6; }
  test "$ld_shlibs" = no && can_build_shared=no
  
  #
***************
*** 14145,14160 ****
        # Test whether the compiler implicitly links with -lc since on some
        # systems, -lgcc has to come before -lc. If gcc already passes -lc
        # to ld, don't add -lc before -lgcc.
!       { echo "$as_me:$LINENO: checking whether -lc should be explicitly linked in" >&5
! echo $ECHO_N "checking whether -lc should be explicitly linked in... $ECHO_C" >&6; }
        $rm conftest*
        echo "$lt_simple_compile_test_code" > conftest.$ac_ext
  
!       if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
    (eval $ac_compile) 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } 2>conftest.err; then
          soname=conftest
          lib=conftest
          libobjs=conftest.$ac_objext
--- 12348,12363 ----
        # Test whether the compiler implicitly links with -lc since on some
        # systems, -lgcc has to come before -lc. If gcc already passes -lc
        # to ld, don't add -lc before -lgcc.
!       { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether -lc should be explicitly linked in" >&5
! $as_echo_n "checking whether -lc should be explicitly linked in... " >&6; }
        $rm conftest*
        echo "$lt_simple_compile_test_code" > conftest.$ac_ext
  
!       if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
    (eval $ac_compile) 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; } 2>conftest.err; then
          soname=conftest
          lib=conftest
          libobjs=conftest.$ac_objext
***************
*** 14168,14178 ****
          libname=conftest
          lt_save_allow_undefined_flag=$allow_undefined_flag
          allow_undefined_flag=
!         if { (eval echo "$as_me:$LINENO: \"$archive_cmds 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1\"") >&5
    (eval $archive_cmds 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1) 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }
          then
  	  archive_cmds_need_lc=no
          else
--- 12371,12381 ----
          libname=conftest
          lt_save_allow_undefined_flag=$allow_undefined_flag
          allow_undefined_flag=
!         if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$archive_cmds 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1\""; } >&5
    (eval $archive_cmds 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1) 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }
          then
  	  archive_cmds_need_lc=no
          else
***************
*** 14183,14198 ****
          cat conftest.err 1>&5
        fi
        $rm conftest*
!       { echo "$as_me:$LINENO: result: $archive_cmds_need_lc" >&5
! echo "${ECHO_T}$archive_cmds_need_lc" >&6; }
        ;;
      esac
    fi
    ;;
  esac
  
! { echo "$as_me:$LINENO: checking dynamic linker characteristics" >&5
! echo $ECHO_N "checking dynamic linker characteristics... $ECHO_C" >&6; }
  library_names_spec=
  libname_spec='lib$name'
  soname_spec=
--- 12386,12401 ----
          cat conftest.err 1>&5
        fi
        $rm conftest*
!       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $archive_cmds_need_lc" >&5
! $as_echo "$archive_cmds_need_lc" >&6; }
        ;;
      esac
    fi
    ;;
  esac
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking dynamic linker characteristics" >&5
! $as_echo_n "checking dynamic linker characteristics... " >&6; }
  library_names_spec=
  libname_spec='lib$name'
  soname_spec=
***************
*** 14805,14823 ****
    dynamic_linker=no
    ;;
  esac
! { echo "$as_me:$LINENO: result: $dynamic_linker" >&5
! echo "${ECHO_T}$dynamic_linker" >&6; }
  test "$dynamic_linker" = no && can_build_shared=no
  
! if test "${lt_cv_sys_lib_search_path_spec+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    lt_cv_sys_lib_search_path_spec="$sys_lib_search_path_spec"
  fi
  
  sys_lib_search_path_spec="$lt_cv_sys_lib_search_path_spec"
! if test "${lt_cv_sys_lib_dlsearch_path_spec+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    lt_cv_sys_lib_dlsearch_path_spec="$sys_lib_dlsearch_path_spec"
  fi
--- 13008,13026 ----
    dynamic_linker=no
    ;;
  esac
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $dynamic_linker" >&5
! $as_echo "$dynamic_linker" >&6; }
  test "$dynamic_linker" = no && can_build_shared=no
  
! if ${lt_cv_sys_lib_search_path_spec+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    lt_cv_sys_lib_search_path_spec="$sys_lib_search_path_spec"
  fi
  
  sys_lib_search_path_spec="$lt_cv_sys_lib_search_path_spec"
! if ${lt_cv_sys_lib_dlsearch_path_spec+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    lt_cv_sys_lib_dlsearch_path_spec="$sys_lib_dlsearch_path_spec"
  fi
***************
*** 14829,14836 ****
    variables_saved_for_relink="$variables_saved_for_relink GCC_EXEC_PREFIX COMPILER_PATH LIBRARY_PATH"
  fi
  
! { echo "$as_me:$LINENO: checking how to hardcode library paths into programs" >&5
! echo $ECHO_N "checking how to hardcode library paths into programs... $ECHO_C" >&6; }
  hardcode_action=
  if test -n "$hardcode_libdir_flag_spec" || \
     test -n "$runpath_var" || \
--- 13032,13039 ----
    variables_saved_for_relink="$variables_saved_for_relink GCC_EXEC_PREFIX COMPILER_PATH LIBRARY_PATH"
  fi
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking how to hardcode library paths into programs" >&5
! $as_echo_n "checking how to hardcode library paths into programs... " >&6; }
  hardcode_action=
  if test -n "$hardcode_libdir_flag_spec" || \
     test -n "$runpath_var" || \
***************
*** 14854,14861 ****
    # directories.
    hardcode_action=unsupported
  fi
! { echo "$as_me:$LINENO: result: $hardcode_action" >&5
! echo "${ECHO_T}$hardcode_action" >&6; }
  
  if test "$hardcode_action" = relink; then
    # Fast installation is not supported
--- 13057,13064 ----
    # directories.
    hardcode_action=unsupported
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $hardcode_action" >&5
! $as_echo "$hardcode_action" >&6; }
  
  if test "$hardcode_action" = relink; then
    # Fast installation is not supported
***************
*** 14868,14880 ****
  
  striplib=
  old_striplib=
! { echo "$as_me:$LINENO: checking whether stripping libraries is possible" >&5
! echo $ECHO_N "checking whether stripping libraries is possible... $ECHO_C" >&6; }
  if test -n "$STRIP" && $STRIP -V 2>&1 | grep "GNU strip" >/dev/null; then
    test -z "$old_striplib" && old_striplib="$STRIP --strip-debug"
    test -z "$striplib" && striplib="$STRIP --strip-unneeded"
!   { echo "$as_me:$LINENO: result: yes" >&5
! echo "${ECHO_T}yes" >&6; }
  else
  # FIXME - insert some real tests, host_os isn't really good enough
    case $host_os in
--- 13071,13083 ----
  
  striplib=
  old_striplib=
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether stripping libraries is possible" >&5
! $as_echo_n "checking whether stripping libraries is possible... " >&6; }
  if test -n "$STRIP" && $STRIP -V 2>&1 | grep "GNU strip" >/dev/null; then
    test -z "$old_striplib" && old_striplib="$STRIP --strip-debug"
    test -z "$striplib" && striplib="$STRIP --strip-unneeded"
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
! $as_echo "yes" >&6; }
  else
  # FIXME - insert some real tests, host_os isn't really good enough
    case $host_os in
***************
*** 14882,14897 ****
         if test -n "$STRIP" ; then
           striplib="$STRIP -x"
           old_striplib="$STRIP -S"
!          { echo "$as_me:$LINENO: result: yes" >&5
! echo "${ECHO_T}yes" >&6; }
         else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
         ;;
     *)
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
      ;;
    esac
  fi
--- 13085,13100 ----
         if test -n "$STRIP" ; then
           striplib="$STRIP -x"
           old_striplib="$STRIP -S"
!          { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
! $as_echo "yes" >&6; }
         else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
         ;;
     *)
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
      ;;
    esac
  fi
***************
*** 14923,14940 ****
  
    darwin*)
    # if libdl is installed we need to link against it
!     { echo "$as_me:$LINENO: checking for dlopen in -ldl" >&5
! echo $ECHO_N "checking for dlopen in -ldl... $ECHO_C" >&6; }
! if test "${ac_cv_lib_dl_dlopen+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-ldl  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
--- 13126,13139 ----
  
    darwin*)
    # if libdl is installed we need to link against it
!     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dlopen in -ldl" >&5
! $as_echo_n "checking for dlopen in -ldl... " >&6; }
! if ${ac_cv_lib_dl_dlopen+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-ldl  $LIBS"
! cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
***************
*** 14952,15177 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
    ac_cv_lib_dl_dlopen=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_cv_lib_dl_dlopen=no
! fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
! fi
! { echo "$as_me:$LINENO: result: $ac_cv_lib_dl_dlopen" >&5
! echo "${ECHO_T}$ac_cv_lib_dl_dlopen" >&6; }
! if test $ac_cv_lib_dl_dlopen = yes; then
!   lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-ldl"
! else
! 
!     lt_cv_dlopen="dyld"
!     lt_cv_dlopen_libs=
!     lt_cv_dlopen_self=yes
! 
! fi
! 
!    ;;
! 
!   *)
!     { echo "$as_me:$LINENO: checking for shl_load" >&5
! echo $ECHO_N "checking for shl_load... $ECHO_C" >&6; }
! if test "${ac_cv_func_shl_load+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
! /* end confdefs.h.  */
! /* Define shl_load to an innocuous variant, in case <limits.h> declares shl_load.
!    For example, HP-UX 11i <limits.h> declares gettimeofday.  */
! #define shl_load innocuous_shl_load
! 
! /* System header to define __stub macros and hopefully few prototypes,
!     which can conflict with char shl_load (); below.
!     Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
!     <limits.h> exists even on freestanding compilers.  */
! 
! #ifdef __STDC__
! # include <limits.h>
! #else
! # include <assert.h>
! #endif
! 
! #undef shl_load
! 
! /* Override any GCC internal prototype to avoid an error.
!    Use char because int might match the return type of a GCC
!    builtin and then its argument prototype would still apply.  */
! #ifdef __cplusplus
! extern "C"
! #endif
! char shl_load ();
! /* The GNU C library defines this for functions which it implements
!     to always fail with ENOSYS.  Some functions are actually named
!     something starting with __ and the normal name is an alias.  */
! #if defined __stub_shl_load || defined __stub___shl_load
! choke me
! #endif
! 
! int
! main ()
! {
! return shl_load ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
!   ac_cv_func_shl_load=yes
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_cv_func_shl_load=no
! fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
! fi
! { echo "$as_me:$LINENO: result: $ac_cv_func_shl_load" >&5
! echo "${ECHO_T}$ac_cv_func_shl_load" >&6; }
! if test $ac_cv_func_shl_load = yes; then
!   lt_cv_dlopen="shl_load"
! else
!   { echo "$as_me:$LINENO: checking for shl_load in -ldld" >&5
! echo $ECHO_N "checking for shl_load in -ldld... $ECHO_C" >&6; }
! if test "${ac_cv_lib_dld_shl_load+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   ac_check_lib_save_LIBS=$LIBS
! LIBS="-ldld  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
! /* end confdefs.h.  */
! 
! /* Override any GCC internal prototype to avoid an error.
!    Use char because int might match the return type of a GCC
!    builtin and then its argument prototype would still apply.  */
! #ifdef __cplusplus
! extern "C"
! #endif
! char shl_load ();
! int
! main ()
! {
! return shl_load ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
!   ac_cv_lib_dld_shl_load=yes
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_cv_lib_dld_shl_load=no
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_lib_dld_shl_load" >&5
! echo "${ECHO_T}$ac_cv_lib_dld_shl_load" >&6; }
! if test $ac_cv_lib_dld_shl_load = yes; then
!   lt_cv_dlopen="shl_load" lt_cv_dlopen_libs="-ldld"
! else
!   { echo "$as_me:$LINENO: checking for dlopen" >&5
! echo $ECHO_N "checking for dlopen... $ECHO_C" >&6; }
! if test "${ac_cv_func_dlopen+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
-   cat >conftest.$ac_ext <<_ACEOF
- /* confdefs.h.  */
- _ACEOF
- cat confdefs.h >>conftest.$ac_ext
- cat >>conftest.$ac_ext <<_ACEOF
- /* end confdefs.h.  */
- /* Define dlopen to an innocuous variant, in case <limits.h> declares dlopen.
-    For example, HP-UX 11i <limits.h> declares gettimeofday.  */
- #define dlopen innocuous_dlopen
  
! /* System header to define __stub macros and hopefully few prototypes,
!     which can conflict with char dlopen (); below.
!     Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
!     <limits.h> exists even on freestanding compilers.  */
  
! #ifdef __STDC__
! # include <limits.h>
! #else
! # include <assert.h>
! #endif
  
! #undef dlopen
  
  /* Override any GCC internal prototype to avoid an error.
     Use char because int might match the return type of a GCC
--- 13151,13193 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
    ac_cv_lib_dl_dlopen=yes
  else
!   ac_cv_lib_dl_dlopen=no
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dl_dlopen" >&5
! $as_echo "$ac_cv_lib_dl_dlopen" >&6; }
! if test "x$ac_cv_lib_dl_dlopen" = xyes; then :
!   lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-ldl"
  else
  
!     lt_cv_dlopen="dyld"
!     lt_cv_dlopen_libs=
!     lt_cv_dlopen_self=yes
  
! fi
! 
!    ;;
  
!   *)
!     ac_fn_c_check_func "$LINENO" "shl_load" "ac_cv_func_shl_load"
! if test "x$ac_cv_func_shl_load" = xyes; then :
!   lt_cv_dlopen="shl_load"
! else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for shl_load in -ldld" >&5
! $as_echo_n "checking for shl_load in -ldld... " >&6; }
! if ${ac_cv_lib_dld_shl_load+:} false; then :
!   $as_echo_n "(cached) " >&6
! else
!   ac_check_lib_save_LIBS=$LIBS
! LIBS="-ldld  $LIBS"
! cat confdefs.h - <<_ACEOF >conftest.$ac_ext
! /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
     Use char because int might match the return type of a GCC
***************
*** 15179,15246 ****
  #ifdef __cplusplus
  extern "C"
  #endif
! char dlopen ();
! /* The GNU C library defines this for functions which it implements
!     to always fail with ENOSYS.  Some functions are actually named
!     something starting with __ and the normal name is an alias.  */
! #if defined __stub_dlopen || defined __stub___dlopen
! choke me
! #endif
! 
  int
  main ()
  {
! return dlopen ();
    ;
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
!   ac_cv_func_dlopen=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_cv_func_dlopen=no
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_func_dlopen" >&5
! echo "${ECHO_T}$ac_cv_func_dlopen" >&6; }
! if test $ac_cv_func_dlopen = yes; then
    lt_cv_dlopen="dlopen"
  else
!   { echo "$as_me:$LINENO: checking for dlopen in -ldl" >&5
! echo $ECHO_N "checking for dlopen in -ldl... $ECHO_C" >&6; }
! if test "${ac_cv_lib_dl_dlopen+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-ldl  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
--- 13195,13235 ----
  #ifdef __cplusplus
  extern "C"
  #endif
! char shl_load ();
  int
  main ()
  {
! return shl_load ();
    ;
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
!   ac_cv_lib_dld_shl_load=yes
  else
!   ac_cv_lib_dld_shl_load=no
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dld_shl_load" >&5
! $as_echo "$ac_cv_lib_dld_shl_load" >&6; }
! if test "x$ac_cv_lib_dld_shl_load" = xyes; then :
!   lt_cv_dlopen="shl_load" lt_cv_dlopen_libs="-ldld"
! else
!   ac_fn_c_check_func "$LINENO" "dlopen" "ac_cv_func_dlopen"
! if test "x$ac_cv_func_dlopen" = xyes; then :
    lt_cv_dlopen="dlopen"
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dlopen in -ldl" >&5
! $as_echo_n "checking for dlopen in -ldl... " >&6; }
! if ${ac_cv_lib_dl_dlopen+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-ldl  $LIBS"
! cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
***************
*** 15258,15310 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
    ac_cv_lib_dl_dlopen=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_cv_lib_dl_dlopen=no
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_lib_dl_dlopen" >&5
! echo "${ECHO_T}$ac_cv_lib_dl_dlopen" >&6; }
! if test $ac_cv_lib_dl_dlopen = yes; then
    lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-ldl"
  else
!   { echo "$as_me:$LINENO: checking for dlopen in -lsvld" >&5
! echo $ECHO_N "checking for dlopen in -lsvld... $ECHO_C" >&6; }
! if test "${ac_cv_lib_svld_dlopen+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-lsvld  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
--- 13247,13274 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
    ac_cv_lib_dl_dlopen=yes
  else
!   ac_cv_lib_dl_dlopen=no
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dl_dlopen" >&5
! $as_echo "$ac_cv_lib_dl_dlopen" >&6; }
! if test "x$ac_cv_lib_dl_dlopen" = xyes; then :
    lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-ldl"
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dlopen in -lsvld" >&5
! $as_echo_n "checking for dlopen in -lsvld... " >&6; }
! if ${ac_cv_lib_svld_dlopen+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-lsvld  $LIBS"
! cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
***************
*** 15322,15374 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
    ac_cv_lib_svld_dlopen=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_cv_lib_svld_dlopen=no
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_lib_svld_dlopen" >&5
! echo "${ECHO_T}$ac_cv_lib_svld_dlopen" >&6; }
! if test $ac_cv_lib_svld_dlopen = yes; then
    lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-lsvld"
  else
!   { echo "$as_me:$LINENO: checking for dld_link in -ldld" >&5
! echo $ECHO_N "checking for dld_link in -ldld... $ECHO_C" >&6; }
! if test "${ac_cv_lib_dld_dld_link+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-ldld  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
--- 13286,13313 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
    ac_cv_lib_svld_dlopen=yes
  else
!   ac_cv_lib_svld_dlopen=no
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_svld_dlopen" >&5
! $as_echo "$ac_cv_lib_svld_dlopen" >&6; }
! if test "x$ac_cv_lib_svld_dlopen" = xyes; then :
    lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-lsvld"
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dld_link in -ldld" >&5
! $as_echo_n "checking for dld_link in -ldld... " >&6; }
! if ${ac_cv_lib_dld_dld_link+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-ldld  $LIBS"
! cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
***************
*** 15386,15424 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
    ac_cv_lib_dld_dld_link=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_cv_lib_dld_dld_link=no
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_lib_dld_dld_link" >&5
! echo "${ECHO_T}$ac_cv_lib_dld_dld_link" >&6; }
! if test $ac_cv_lib_dld_dld_link = yes; then
    lt_cv_dlopen="dld_link" lt_cv_dlopen_libs="-ldld"
  fi
  
--- 13325,13342 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
    ac_cv_lib_dld_dld_link=yes
  else
!   ac_cv_lib_dld_dld_link=no
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dld_dld_link" >&5
! $as_echo "$ac_cv_lib_dld_dld_link" >&6; }
! if test "x$ac_cv_lib_dld_dld_link" = xyes; then :
    lt_cv_dlopen="dld_link" lt_cv_dlopen_libs="-ldld"
  fi
  
***************
*** 15457,15466 ****
      save_LIBS="$LIBS"
      LIBS="$lt_cv_dlopen_libs $LIBS"
  
!     { echo "$as_me:$LINENO: checking whether a program can dlopen itself" >&5
! echo $ECHO_N "checking whether a program can dlopen itself... $ECHO_C" >&6; }
! if test "${lt_cv_dlopen_self+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    	  if test "$cross_compiling" = yes; then :
    lt_cv_dlopen_self=cross
--- 13375,13384 ----
      save_LIBS="$LIBS"
      LIBS="$lt_cv_dlopen_libs $LIBS"
  
!     { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether a program can dlopen itself" >&5
! $as_echo_n "checking whether a program can dlopen itself... " >&6; }
! if ${lt_cv_dlopen_self+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    	  if test "$cross_compiling" = yes; then :
    lt_cv_dlopen_self=cross
***************
*** 15468,15474 ****
    lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
    lt_status=$lt_dlunknown
    cat > conftest.$ac_ext <<EOF
! #line 15471 "configure"
  #include "confdefs.h"
  
  #if HAVE_DLFCN_H
--- 13386,13392 ----
    lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
    lt_status=$lt_dlunknown
    cat > conftest.$ac_ext <<EOF
! #line 13389 "configure"
  #include "confdefs.h"
  
  #if HAVE_DLFCN_H
***************
*** 15531,15541 ****
      exit (status);
  }
  EOF
!   if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
    (eval $ac_link) 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && test -s conftest${ac_exeext} 2>/dev/null; then
      (./conftest; exit; ) >&5 2>/dev/null
      lt_status=$?
      case x$lt_status in
--- 13449,13459 ----
      exit (status);
  }
  EOF
!   if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_link\""; } >&5
    (eval $ac_link) 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; } && test -s conftest${ac_exeext} 2>/dev/null; then
      (./conftest; exit; ) >&5 2>/dev/null
      lt_status=$?
      case x$lt_status in
***************
*** 15552,15566 ****
  
  
  fi
! { echo "$as_me:$LINENO: result: $lt_cv_dlopen_self" >&5
! echo "${ECHO_T}$lt_cv_dlopen_self" >&6; }
  
      if test "x$lt_cv_dlopen_self" = xyes; then
        wl=$lt_prog_compiler_wl eval LDFLAGS=\"\$LDFLAGS $lt_prog_compiler_static\"
!       { echo "$as_me:$LINENO: checking whether a statically linked program can dlopen itself" >&5
! echo $ECHO_N "checking whether a statically linked program can dlopen itself... $ECHO_C" >&6; }
! if test "${lt_cv_dlopen_self_static+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    	  if test "$cross_compiling" = yes; then :
    lt_cv_dlopen_self_static=cross
--- 13470,13484 ----
  
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_dlopen_self" >&5
! $as_echo "$lt_cv_dlopen_self" >&6; }
  
      if test "x$lt_cv_dlopen_self" = xyes; then
        wl=$lt_prog_compiler_wl eval LDFLAGS=\"\$LDFLAGS $lt_prog_compiler_static\"
!       { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether a statically linked program can dlopen itself" >&5
! $as_echo_n "checking whether a statically linked program can dlopen itself... " >&6; }
! if ${lt_cv_dlopen_self_static+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    	  if test "$cross_compiling" = yes; then :
    lt_cv_dlopen_self_static=cross
***************
*** 15568,15574 ****
    lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
    lt_status=$lt_dlunknown
    cat > conftest.$ac_ext <<EOF
! #line 15571 "configure"
  #include "confdefs.h"
  
  #if HAVE_DLFCN_H
--- 13486,13492 ----
    lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
    lt_status=$lt_dlunknown
    cat > conftest.$ac_ext <<EOF
! #line 13489 "configure"
  #include "confdefs.h"
  
  #if HAVE_DLFCN_H
***************
*** 15631,15641 ****
      exit (status);
  }
  EOF
!   if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
    (eval $ac_link) 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && test -s conftest${ac_exeext} 2>/dev/null; then
      (./conftest; exit; ) >&5 2>/dev/null
      lt_status=$?
      case x$lt_status in
--- 13549,13559 ----
      exit (status);
  }
  EOF
!   if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_link\""; } >&5
    (eval $ac_link) 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; } && test -s conftest${ac_exeext} 2>/dev/null; then
      (./conftest; exit; ) >&5 2>/dev/null
      lt_status=$?
      case x$lt_status in
***************
*** 15652,15659 ****
  
  
  fi
! { echo "$as_me:$LINENO: result: $lt_cv_dlopen_self_static" >&5
! echo "${ECHO_T}$lt_cv_dlopen_self_static" >&6; }
      fi
  
      CPPFLAGS="$save_CPPFLAGS"
--- 13570,13577 ----
  
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_dlopen_self_static" >&5
! $as_echo "$lt_cv_dlopen_self_static" >&6; }
      fi
  
      CPPFLAGS="$save_CPPFLAGS"
***************
*** 15675,15687 ****
  
  
  # Report which library types will actually be built
! { echo "$as_me:$LINENO: checking if libtool supports shared libraries" >&5
! echo $ECHO_N "checking if libtool supports shared libraries... $ECHO_C" >&6; }
! { echo "$as_me:$LINENO: result: $can_build_shared" >&5
! echo "${ECHO_T}$can_build_shared" >&6; }
  
! { echo "$as_me:$LINENO: checking whether to build shared libraries" >&5
! echo $ECHO_N "checking whether to build shared libraries... $ECHO_C" >&6; }
  test "$can_build_shared" = "no" && enable_shared=no
  
  # On AIX, shared libraries and static libraries use the same namespace, and
--- 13593,13605 ----
  
  
  # Report which library types will actually be built
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking if libtool supports shared libraries" >&5
! $as_echo_n "checking if libtool supports shared libraries... " >&6; }
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $can_build_shared" >&5
! $as_echo "$can_build_shared" >&6; }
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to build shared libraries" >&5
! $as_echo_n "checking whether to build shared libraries... " >&6; }
  test "$can_build_shared" = "no" && enable_shared=no
  
  # On AIX, shared libraries and static libraries use the same namespace, and
***************
*** 15701,15715 ****
    fi
      ;;
  esac
! { echo "$as_me:$LINENO: result: $enable_shared" >&5
! echo "${ECHO_T}$enable_shared" >&6; }
  
! { echo "$as_me:$LINENO: checking whether to build static libraries" >&5
! echo $ECHO_N "checking whether to build static libraries... $ECHO_C" >&6; }
  # Make sure either enable_shared or enable_static is yes.
  test "$enable_shared" = yes || enable_static=yes
! { echo "$as_me:$LINENO: result: $enable_static" >&5
! echo "${ECHO_T}$enable_static" >&6; }
  
  # The else clause should only fire when bootstrapping the
  # libtool distribution, otherwise you forgot to ship ltmain.sh
--- 13619,13633 ----
    fi
      ;;
  esac
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $enable_shared" >&5
! $as_echo "$enable_shared" >&6; }
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to build static libraries" >&5
! $as_echo_n "checking whether to build static libraries... " >&6; }
  # Make sure either enable_shared or enable_static is yes.
  test "$enable_shared" = yes || enable_static=yes
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $enable_static" >&5
! $as_echo "$enable_static" >&6; }
  
  # The else clause should only fire when bootstrapping the
  # libtool distribution, otherwise you forgot to ship ltmain.sh
***************
*** 15802,15809 ****
  cfgfile="${ofile}T"
    trap "$rm \"$cfgfile\"; exit 1" 1 2 15
    $rm -f "$cfgfile"
!   { echo "$as_me:$LINENO: creating $ofile" >&5
! echo "$as_me: creating $ofile" >&6;}
  
    cat <<__EOF__ >> "$cfgfile"
  #! $SHELL
--- 13720,13727 ----
  cfgfile="${ofile}T"
    trap "$rm \"$cfgfile\"; exit 1" 1 2 15
    $rm -f "$cfgfile"
!   { $as_echo "$as_me:${as_lineno-$LINENO}: creating $ofile" >&5
! $as_echo "$as_me: creating $ofile" >&6;}
  
    cat <<__EOF__ >> "$cfgfile"
  #! $SHELL
***************
*** 16208,16232 ****
  
  
  # Check whether --with-tags was given.
! if test "${with_tags+set}" = set; then
    withval=$with_tags; tagnames="$withval"
  fi
  
  
  if test -f "$ltmain" && test -n "$tagnames"; then
    if test ! -f "${ofile}"; then
!     { echo "$as_me:$LINENO: WARNING: output file \`$ofile' does not exist" >&5
! echo "$as_me: WARNING: output file \`$ofile' does not exist" >&2;}
    fi
  
    if test -z "$LTCC"; then
      eval "`$SHELL ${ofile} --config | grep '^LTCC='`"
      if test -z "$LTCC"; then
!       { echo "$as_me:$LINENO: WARNING: output file \`$ofile' does not look like a libtool script" >&5
! echo "$as_me: WARNING: output file \`$ofile' does not look like a libtool script" >&2;}
      else
!       { echo "$as_me:$LINENO: WARNING: using \`LTCC=$LTCC', extracted from \`$ofile'" >&5
! echo "$as_me: WARNING: using \`LTCC=$LTCC', extracted from \`$ofile'" >&2;}
      fi
    fi
    if test -z "$LTCFLAGS"; then
--- 14126,14150 ----
  
  
  # Check whether --with-tags was given.
! if test "${with_tags+set}" = set; then :
    withval=$with_tags; tagnames="$withval"
  fi
  
  
  if test -f "$ltmain" && test -n "$tagnames"; then
    if test ! -f "${ofile}"; then
!     { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: output file \`$ofile' does not exist" >&5
! $as_echo "$as_me: WARNING: output file \`$ofile' does not exist" >&2;}
    fi
  
    if test -z "$LTCC"; then
      eval "`$SHELL ${ofile} --config | grep '^LTCC='`"
      if test -z "$LTCC"; then
!       { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: output file \`$ofile' does not look like a libtool script" >&5
! $as_echo "$as_me: WARNING: output file \`$ofile' does not look like a libtool script" >&2;}
      else
!       { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using \`LTCC=$LTCC', extracted from \`$ofile'" >&5
! $as_echo "$as_me: WARNING: using \`LTCC=$LTCC', extracted from \`$ofile'" >&2;}
      fi
    fi
    if test -z "$LTCFLAGS"; then
***************
*** 16243,16259 ****
      # Check whether tagname contains only valid characters
      case `$echo "X$tagname" | $Xsed -e 's:[-_ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890,/]::g'` in
      "") ;;
!     *)  { { echo "$as_me:$LINENO: error: invalid tag name: $tagname" >&5
! echo "$as_me: error: invalid tag name: $tagname" >&2;}
!    { (exit 1); exit 1; }; }
  	;;
      esac
  
      if grep "^# ### BEGIN LIBTOOL TAG CONFIG: $tagname$" < "${ofile}" > /dev/null
      then
!       { { echo "$as_me:$LINENO: error: tag name \"$tagname\" already exists" >&5
! echo "$as_me: error: tag name \"$tagname\" already exists" >&2;}
!    { (exit 1); exit 1; }; }
      fi
  
      # Update the list of available tags.
--- 14161,14173 ----
      # Check whether tagname contains only valid characters
      case `$echo "X$tagname" | $Xsed -e 's:[-_ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890,/]::g'` in
      "") ;;
!     *)  as_fn_error $? "invalid tag name: $tagname" "$LINENO" 5
  	;;
      esac
  
      if grep "^# ### BEGIN LIBTOOL TAG CONFIG: $tagname$" < "${ofile}" > /dev/null
      then
!       as_fn_error $? "tag name \"$tagname\" already exists" "$LINENO" 5
      fi
  
      # Update the list of available tags.
***************
*** 16386,16392 ****
  
  
  # Check whether --with-gnu-ld was given.
! if test "${with_gnu_ld+set}" = set; then
    withval=$with_gnu_ld; test "$withval" = no || with_gnu_ld=yes
  else
    with_gnu_ld=no
--- 14300,14306 ----
  
  
  # Check whether --with-gnu-ld was given.
! if test "${with_gnu_ld+set}" = set; then :
    withval=$with_gnu_ld; test "$withval" = no || with_gnu_ld=yes
  else
    with_gnu_ld=no
***************
*** 16395,16402 ****
  ac_prog=ld
  if test "$GCC" = yes; then
    # Check if gcc -print-prog-name=ld gives a path.
!   { echo "$as_me:$LINENO: checking for ld used by $CC" >&5
! echo $ECHO_N "checking for ld used by $CC... $ECHO_C" >&6; }
    case $host in
    *-*-mingw*)
      # gcc leaves a trailing carriage return which upsets mingw
--- 14309,14316 ----
  ac_prog=ld
  if test "$GCC" = yes; then
    # Check if gcc -print-prog-name=ld gives a path.
!   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ld used by $CC" >&5
! $as_echo_n "checking for ld used by $CC... " >&6; }
    case $host in
    *-*-mingw*)
      # gcc leaves a trailing carriage return which upsets mingw
***************
*** 16425,16438 ****
      ;;
    esac
  elif test "$with_gnu_ld" = yes; then
!   { echo "$as_me:$LINENO: checking for GNU ld" >&5
! echo $ECHO_N "checking for GNU ld... $ECHO_C" >&6; }
  else
!   { echo "$as_me:$LINENO: checking for non-GNU ld" >&5
! echo $ECHO_N "checking for non-GNU ld... $ECHO_C" >&6; }
  fi
! if test "${lt_cv_path_LD+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -z "$LD"; then
    lt_save_ifs="$IFS"; IFS=$PATH_SEPARATOR
--- 14339,14352 ----
      ;;
    esac
  elif test "$with_gnu_ld" = yes; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for GNU ld" >&5
! $as_echo_n "checking for GNU ld... " >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for non-GNU ld" >&5
! $as_echo_n "checking for non-GNU ld... " >&6; }
  fi
! if ${lt_cv_path_LD+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    if test -z "$LD"; then
    lt_save_ifs="$IFS"; IFS=$PATH_SEPARATOR
***************
*** 16462,16480 ****
  
  LD="$lt_cv_path_LD"
  if test -n "$LD"; then
!   { echo "$as_me:$LINENO: result: $LD" >&5
! echo "${ECHO_T}$LD" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
! test -z "$LD" && { { echo "$as_me:$LINENO: error: no acceptable ld found in \$PATH" >&5
! echo "$as_me: error: no acceptable ld found in \$PATH" >&2;}
!    { (exit 1); exit 1; }; }
! { echo "$as_me:$LINENO: checking if the linker ($LD) is GNU ld" >&5
! echo $ECHO_N "checking if the linker ($LD) is GNU ld... $ECHO_C" >&6; }
! if test "${lt_cv_prog_gnu_ld+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    # I'd rather use --version here, but apparently some GNU lds only accept -v.
  case `$LD -v 2>&1 </dev/null` in
--- 14376,14392 ----
  
  LD="$lt_cv_path_LD"
  if test -n "$LD"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $LD" >&5
! $as_echo "$LD" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
! test -z "$LD" && as_fn_error $? "no acceptable ld found in \$PATH" "$LINENO" 5
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking if the linker ($LD) is GNU ld" >&5
! $as_echo_n "checking if the linker ($LD) is GNU ld... " >&6; }
! if ${lt_cv_prog_gnu_ld+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    # I'd rather use --version here, but apparently some GNU lds only accept -v.
  case `$LD -v 2>&1 </dev/null` in
***************
*** 16486,16493 ****
    ;;
  esac
  fi
! { echo "$as_me:$LINENO: result: $lt_cv_prog_gnu_ld" >&5
! echo "${ECHO_T}$lt_cv_prog_gnu_ld" >&6; }
  with_gnu_ld=$lt_cv_prog_gnu_ld
  
  
--- 14398,14405 ----
    ;;
  esac
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_gnu_ld" >&5
! $as_echo "$lt_cv_prog_gnu_ld" >&6; }
  with_gnu_ld=$lt_cv_prog_gnu_ld
  
  
***************
*** 16537,16544 ****
  fi
  
  # PORTME: fill in a description of your system's C++ link characteristics
! { echo "$as_me:$LINENO: checking whether the $compiler linker ($LD) supports shared libraries" >&5
! echo $ECHO_N "checking whether the $compiler linker ($LD) supports shared libraries... $ECHO_C" >&6; }
  ld_shlibs_CXX=yes
  case $host_os in
    aix3*)
--- 14449,14456 ----
  fi
  
  # PORTME: fill in a description of your system's C++ link characteristics
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the $compiler linker ($LD) supports shared libraries" >&5
! $as_echo_n "checking whether the $compiler linker ($LD) supports shared libraries... " >&6; }
  ld_shlibs_CXX=yes
  case $host_os in
    aix3*)
***************
*** 16634,16644 ****
        # -berok will link without error, but may produce a broken library.
        allow_undefined_flag_CXX='-berok'
        # Determine the default libpath from the value encoded in an empty executable.
!       cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  int
--- 14546,14552 ----
        # -berok will link without error, but may produce a broken library.
        allow_undefined_flag_CXX='-berok'
        # Determine the default libpath from the value encoded in an empty executable.
!       cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  int
***************
*** 16649,16672 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_cxx_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
  
  lt_aix_libpath_sed='
      /Import File Strings/,/^$/ {
--- 14557,14563 ----
    return 0;
  }
  _ACEOF
! if ac_fn_cxx_try_link "$LINENO"; then :
  
  lt_aix_libpath_sed='
      /Import File Strings/,/^$/ {
***************
*** 16680,16694 ****
  if test -z "$aix_libpath"; then
    aix_libpath=`dump -HX64 conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
  fi
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
- 
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  if test -z "$aix_libpath"; then aix_libpath="/usr/lib:/lib"; fi
  
        hardcode_libdir_flag_spec_CXX='${wl}-blibpath:$libdir:'"$aix_libpath"
--- 14571,14579 ----
  if test -z "$aix_libpath"; then
    aix_libpath=`dump -HX64 conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
  fi
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  if test -z "$aix_libpath"; then aix_libpath="/usr/lib:/lib"; fi
  
        hardcode_libdir_flag_spec_CXX='${wl}-blibpath:$libdir:'"$aix_libpath"
***************
*** 16701,16711 ****
  	archive_expsym_cmds_CXX="\$CC $shared_flag"' -o $output_objdir/$soname $libobjs $deplibs '"\${wl}$no_entry_flag"' $compiler_flags ${wl}${allow_undefined_flag} '"\${wl}$exp_sym_flag:\$export_symbols"
        else
  	# Determine the default libpath from the value encoded in an empty executable.
! 	cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  int
--- 14586,14592 ----
  	archive_expsym_cmds_CXX="\$CC $shared_flag"' -o $output_objdir/$soname $libobjs $deplibs '"\${wl}$no_entry_flag"' $compiler_flags ${wl}${allow_undefined_flag} '"\${wl}$exp_sym_flag:\$export_symbols"
        else
  	# Determine the default libpath from the value encoded in an empty executable.
! 	cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  int
***************
*** 16716,16739 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_cxx_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
  
  lt_aix_libpath_sed='
      /Import File Strings/,/^$/ {
--- 14597,14603 ----
    return 0;
  }
  _ACEOF
! if ac_fn_cxx_try_link "$LINENO"; then :
  
  lt_aix_libpath_sed='
      /Import File Strings/,/^$/ {
***************
*** 16747,16761 ****
  if test -z "$aix_libpath"; then
    aix_libpath=`dump -HX64 conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
  fi
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
- 
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  if test -z "$aix_libpath"; then aix_libpath="/usr/lib:/lib"; fi
  
  	hardcode_libdir_flag_spec_CXX='${wl}-blibpath:$libdir:'"$aix_libpath"
--- 14611,14619 ----
  if test -z "$aix_libpath"; then
    aix_libpath=`dump -HX64 conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
  fi
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  if test -z "$aix_libpath"; then aix_libpath="/usr/lib:/lib"; fi
  
  	hardcode_libdir_flag_spec_CXX='${wl}-blibpath:$libdir:'"$aix_libpath"
***************
*** 17483,17490 ****
      ld_shlibs_CXX=no
      ;;
  esac
! { echo "$as_me:$LINENO: result: $ld_shlibs_CXX" >&5
! echo "${ECHO_T}$ld_shlibs_CXX" >&6; }
  test "$ld_shlibs_CXX" = no && can_build_shared=no
  
  GCC_CXX="$GXX"
--- 15341,15348 ----
      ld_shlibs_CXX=no
      ;;
  esac
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ld_shlibs_CXX" >&5
! $as_echo "$ld_shlibs_CXX" >&6; }
  test "$ld_shlibs_CXX" = no && can_build_shared=no
  
  GCC_CXX="$GXX"
***************
*** 17500,17510 ****
  };
  EOF
  
! if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
    (eval $ac_compile) 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
    # Parse the compiler output and extract the necessary
    # objects, libraries and library flags.
  
--- 15358,15368 ----
  };
  EOF
  
! if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
    (eval $ac_compile) 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then
    # Parse the compiler output and extract the necessary
    # objects, libraries and library flags.
  
***************
*** 17659,17666 ****
  lt_prog_compiler_pic_CXX=
  lt_prog_compiler_static_CXX=
  
! { echo "$as_me:$LINENO: checking for $compiler option to produce PIC" >&5
! echo $ECHO_N "checking for $compiler option to produce PIC... $ECHO_C" >&6; }
  
    # C++ specific cases for pic, static, wl, etc.
    if test "$GXX" = yes; then
--- 15517,15524 ----
  lt_prog_compiler_pic_CXX=
  lt_prog_compiler_static_CXX=
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $compiler option to produce PIC" >&5
! $as_echo_n "checking for $compiler option to produce PIC... " >&6; }
  
    # C++ specific cases for pic, static, wl, etc.
    if test "$GXX" = yes; then
***************
*** 17943,17960 ****
      esac
    fi
  
! { echo "$as_me:$LINENO: result: $lt_prog_compiler_pic_CXX" >&5
! echo "${ECHO_T}$lt_prog_compiler_pic_CXX" >&6; }
  
  #
  # Check to make sure the PIC flag actually works.
  #
  if test -n "$lt_prog_compiler_pic_CXX"; then
  
! { echo "$as_me:$LINENO: checking if $compiler PIC flag $lt_prog_compiler_pic_CXX works" >&5
! echo $ECHO_N "checking if $compiler PIC flag $lt_prog_compiler_pic_CXX works... $ECHO_C" >&6; }
! if test "${lt_cv_prog_compiler_pic_works_CXX+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    lt_cv_prog_compiler_pic_works_CXX=no
    ac_outfile=conftest.$ac_objext
--- 15801,15818 ----
      esac
    fi
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_prog_compiler_pic_CXX" >&5
! $as_echo "$lt_prog_compiler_pic_CXX" >&6; }
  
  #
  # Check to make sure the PIC flag actually works.
  #
  if test -n "$lt_prog_compiler_pic_CXX"; then
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler PIC flag $lt_prog_compiler_pic_CXX works" >&5
! $as_echo_n "checking if $compiler PIC flag $lt_prog_compiler_pic_CXX works... " >&6; }
! if ${lt_cv_prog_compiler_pic_works_CXX+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    lt_cv_prog_compiler_pic_works_CXX=no
    ac_outfile=conftest.$ac_objext
***************
*** 17969,17979 ****
     -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:17972: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>conftest.err)
     ac_status=$?
     cat conftest.err >&5
!    echo "$as_me:17976: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s "$ac_outfile"; then
       # The compiler can only warn and ignore the option if not recognized
       # So say no if there are warnings other than the usual output.
--- 15827,15837 ----
     -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:15830: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>conftest.err)
     ac_status=$?
     cat conftest.err >&5
!    echo "$as_me:15834: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s "$ac_outfile"; then
       # The compiler can only warn and ignore the option if not recognized
       # So say no if there are warnings other than the usual output.
***************
*** 17986,17993 ****
     $rm conftest*
  
  fi
! { echo "$as_me:$LINENO: result: $lt_cv_prog_compiler_pic_works_CXX" >&5
! echo "${ECHO_T}$lt_cv_prog_compiler_pic_works_CXX" >&6; }
  
  if test x"$lt_cv_prog_compiler_pic_works_CXX" = xyes; then
      case $lt_prog_compiler_pic_CXX in
--- 15844,15851 ----
     $rm conftest*
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_compiler_pic_works_CXX" >&5
! $as_echo "$lt_cv_prog_compiler_pic_works_CXX" >&6; }
  
  if test x"$lt_cv_prog_compiler_pic_works_CXX" = xyes; then
      case $lt_prog_compiler_pic_CXX in
***************
*** 18014,18023 ****
  # Check to make sure the static flag actually works.
  #
  wl=$lt_prog_compiler_wl_CXX eval lt_tmp_static_flag=\"$lt_prog_compiler_static_CXX\"
! { echo "$as_me:$LINENO: checking if $compiler static flag $lt_tmp_static_flag works" >&5
! echo $ECHO_N "checking if $compiler static flag $lt_tmp_static_flag works... $ECHO_C" >&6; }
! if test "${lt_cv_prog_compiler_static_works_CXX+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    lt_cv_prog_compiler_static_works_CXX=no
     save_LDFLAGS="$LDFLAGS"
--- 15872,15881 ----
  # Check to make sure the static flag actually works.
  #
  wl=$lt_prog_compiler_wl_CXX eval lt_tmp_static_flag=\"$lt_prog_compiler_static_CXX\"
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler static flag $lt_tmp_static_flag works" >&5
! $as_echo_n "checking if $compiler static flag $lt_tmp_static_flag works... " >&6; }
! if ${lt_cv_prog_compiler_static_works_CXX+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    lt_cv_prog_compiler_static_works_CXX=no
     save_LDFLAGS="$LDFLAGS"
***************
*** 18042,18049 ****
     LDFLAGS="$save_LDFLAGS"
  
  fi
! { echo "$as_me:$LINENO: result: $lt_cv_prog_compiler_static_works_CXX" >&5
! echo "${ECHO_T}$lt_cv_prog_compiler_static_works_CXX" >&6; }
  
  if test x"$lt_cv_prog_compiler_static_works_CXX" = xyes; then
      :
--- 15900,15907 ----
     LDFLAGS="$save_LDFLAGS"
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_compiler_static_works_CXX" >&5
! $as_echo "$lt_cv_prog_compiler_static_works_CXX" >&6; }
  
  if test x"$lt_cv_prog_compiler_static_works_CXX" = xyes; then
      :
***************
*** 18052,18061 ****
  fi
  
  
! { echo "$as_me:$LINENO: checking if $compiler supports -c -o file.$ac_objext" >&5
! echo $ECHO_N "checking if $compiler supports -c -o file.$ac_objext... $ECHO_C" >&6; }
! if test "${lt_cv_prog_compiler_c_o_CXX+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    lt_cv_prog_compiler_c_o_CXX=no
     $rm -r conftest 2>/dev/null
--- 15910,15919 ----
  fi
  
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler supports -c -o file.$ac_objext" >&5
! $as_echo_n "checking if $compiler supports -c -o file.$ac_objext... " >&6; }
! if ${lt_cv_prog_compiler_c_o_CXX+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    lt_cv_prog_compiler_c_o_CXX=no
     $rm -r conftest 2>/dev/null
***************
*** 18073,18083 ****
     -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:18076: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>out/conftest.err)
     ac_status=$?
     cat out/conftest.err >&5
!    echo "$as_me:18080: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s out/conftest2.$ac_objext
     then
       # The compiler can only warn and ignore the option if not recognized
--- 15931,15941 ----
     -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:15934: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>out/conftest.err)
     ac_status=$?
     cat out/conftest.err >&5
!    echo "$as_me:15938: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s out/conftest2.$ac_objext
     then
       # The compiler can only warn and ignore the option if not recognized
***************
*** 18099,18132 ****
     $rm conftest*
  
  fi
! { echo "$as_me:$LINENO: result: $lt_cv_prog_compiler_c_o_CXX" >&5
! echo "${ECHO_T}$lt_cv_prog_compiler_c_o_CXX" >&6; }
  
  
  hard_links="nottested"
  if test "$lt_cv_prog_compiler_c_o_CXX" = no && test "$need_locks" != no; then
    # do not overwrite the value of need_locks provided by the user
!   { echo "$as_me:$LINENO: checking if we can lock with hard links" >&5
! echo $ECHO_N "checking if we can lock with hard links... $ECHO_C" >&6; }
    hard_links=yes
    $rm conftest*
    ln conftest.a conftest.b 2>/dev/null && hard_links=no
    touch conftest.a
    ln conftest.a conftest.b 2>&5 || hard_links=no
    ln conftest.a conftest.b 2>/dev/null && hard_links=no
!   { echo "$as_me:$LINENO: result: $hard_links" >&5
! echo "${ECHO_T}$hard_links" >&6; }
    if test "$hard_links" = no; then
!     { echo "$as_me:$LINENO: WARNING: \`$CC' does not support \`-c -o', so \`make -j' may be unsafe" >&5
! echo "$as_me: WARNING: \`$CC' does not support \`-c -o', so \`make -j' may be unsafe" >&2;}
      need_locks=warn
    fi
  else
    need_locks=no
  fi
  
! { echo "$as_me:$LINENO: checking whether the $compiler linker ($LD) supports shared libraries" >&5
! echo $ECHO_N "checking whether the $compiler linker ($LD) supports shared libraries... $ECHO_C" >&6; }
  
    export_symbols_cmds_CXX='$NM $libobjs $convenience | $global_symbol_pipe | $SED '\''s/.* //'\'' | sort | uniq > $export_symbols'
    case $host_os in
--- 15957,15990 ----
     $rm conftest*
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_compiler_c_o_CXX" >&5
! $as_echo "$lt_cv_prog_compiler_c_o_CXX" >&6; }
  
  
  hard_links="nottested"
  if test "$lt_cv_prog_compiler_c_o_CXX" = no && test "$need_locks" != no; then
    # do not overwrite the value of need_locks provided by the user
!   { $as_echo "$as_me:${as_lineno-$LINENO}: checking if we can lock with hard links" >&5
! $as_echo_n "checking if we can lock with hard links... " >&6; }
    hard_links=yes
    $rm conftest*
    ln conftest.a conftest.b 2>/dev/null && hard_links=no
    touch conftest.a
    ln conftest.a conftest.b 2>&5 || hard_links=no
    ln conftest.a conftest.b 2>/dev/null && hard_links=no
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $hard_links" >&5
! $as_echo "$hard_links" >&6; }
    if test "$hard_links" = no; then
!     { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: \`$CC' does not support \`-c -o', so \`make -j' may be unsafe" >&5
! $as_echo "$as_me: WARNING: \`$CC' does not support \`-c -o', so \`make -j' may be unsafe" >&2;}
      need_locks=warn
    fi
  else
    need_locks=no
  fi
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the $compiler linker ($LD) supports shared libraries" >&5
! $as_echo_n "checking whether the $compiler linker ($LD) supports shared libraries... " >&6; }
  
    export_symbols_cmds_CXX='$NM $libobjs $convenience | $global_symbol_pipe | $SED '\''s/.* //'\'' | sort | uniq > $export_symbols'
    case $host_os in
***************
*** 18154,18161 ****
    esac
    exclude_expsyms_CXX='_GLOBAL_OFFSET_TABLE_|_GLOBAL__F[ID]_.*'
  
! { echo "$as_me:$LINENO: result: $ld_shlibs_CXX" >&5
! echo "${ECHO_T}$ld_shlibs_CXX" >&6; }
  test "$ld_shlibs_CXX" = no && can_build_shared=no
  
  #
--- 16012,16019 ----
    esac
    exclude_expsyms_CXX='_GLOBAL_OFFSET_TABLE_|_GLOBAL__F[ID]_.*'
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ld_shlibs_CXX" >&5
! $as_echo "$ld_shlibs_CXX" >&6; }
  test "$ld_shlibs_CXX" = no && can_build_shared=no
  
  #
***************
*** 18175,18190 ****
        # Test whether the compiler implicitly links with -lc since on some
        # systems, -lgcc has to come before -lc. If gcc already passes -lc
        # to ld, don't add -lc before -lgcc.
!       { echo "$as_me:$LINENO: checking whether -lc should be explicitly linked in" >&5
! echo $ECHO_N "checking whether -lc should be explicitly linked in... $ECHO_C" >&6; }
        $rm conftest*
        echo "$lt_simple_compile_test_code" > conftest.$ac_ext
  
!       if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
    (eval $ac_compile) 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } 2>conftest.err; then
          soname=conftest
          lib=conftest
          libobjs=conftest.$ac_objext
--- 16033,16048 ----
        # Test whether the compiler implicitly links with -lc since on some
        # systems, -lgcc has to come before -lc. If gcc already passes -lc
        # to ld, don't add -lc before -lgcc.
!       { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether -lc should be explicitly linked in" >&5
! $as_echo_n "checking whether -lc should be explicitly linked in... " >&6; }
        $rm conftest*
        echo "$lt_simple_compile_test_code" > conftest.$ac_ext
  
!       if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
    (eval $ac_compile) 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; } 2>conftest.err; then
          soname=conftest
          lib=conftest
          libobjs=conftest.$ac_objext
***************
*** 18198,18208 ****
          libname=conftest
          lt_save_allow_undefined_flag=$allow_undefined_flag_CXX
          allow_undefined_flag_CXX=
!         if { (eval echo "$as_me:$LINENO: \"$archive_cmds_CXX 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1\"") >&5
    (eval $archive_cmds_CXX 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1) 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }
          then
  	  archive_cmds_need_lc_CXX=no
          else
--- 16056,16066 ----
          libname=conftest
          lt_save_allow_undefined_flag=$allow_undefined_flag_CXX
          allow_undefined_flag_CXX=
!         if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$archive_cmds_CXX 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1\""; } >&5
    (eval $archive_cmds_CXX 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1) 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }
          then
  	  archive_cmds_need_lc_CXX=no
          else
***************
*** 18213,18228 ****
          cat conftest.err 1>&5
        fi
        $rm conftest*
!       { echo "$as_me:$LINENO: result: $archive_cmds_need_lc_CXX" >&5
! echo "${ECHO_T}$archive_cmds_need_lc_CXX" >&6; }
        ;;
      esac
    fi
    ;;
  esac
  
! { echo "$as_me:$LINENO: checking dynamic linker characteristics" >&5
! echo $ECHO_N "checking dynamic linker characteristics... $ECHO_C" >&6; }
  library_names_spec=
  libname_spec='lib$name'
  soname_spec=
--- 16071,16086 ----
          cat conftest.err 1>&5
        fi
        $rm conftest*
!       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $archive_cmds_need_lc_CXX" >&5
! $as_echo "$archive_cmds_need_lc_CXX" >&6; }
        ;;
      esac
    fi
    ;;
  esac
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking dynamic linker characteristics" >&5
! $as_echo_n "checking dynamic linker characteristics... " >&6; }
  library_names_spec=
  libname_spec='lib$name'
  soname_spec=
***************
*** 18783,18801 ****
    dynamic_linker=no
    ;;
  esac
! { echo "$as_me:$LINENO: result: $dynamic_linker" >&5
! echo "${ECHO_T}$dynamic_linker" >&6; }
  test "$dynamic_linker" = no && can_build_shared=no
  
! if test "${lt_cv_sys_lib_search_path_spec+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    lt_cv_sys_lib_search_path_spec="$sys_lib_search_path_spec"
  fi
  
  sys_lib_search_path_spec="$lt_cv_sys_lib_search_path_spec"
! if test "${lt_cv_sys_lib_dlsearch_path_spec+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    lt_cv_sys_lib_dlsearch_path_spec="$sys_lib_dlsearch_path_spec"
  fi
--- 16641,16659 ----
    dynamic_linker=no
    ;;
  esac
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $dynamic_linker" >&5
! $as_echo "$dynamic_linker" >&6; }
  test "$dynamic_linker" = no && can_build_shared=no
  
! if ${lt_cv_sys_lib_search_path_spec+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    lt_cv_sys_lib_search_path_spec="$sys_lib_search_path_spec"
  fi
  
  sys_lib_search_path_spec="$lt_cv_sys_lib_search_path_spec"
! if ${lt_cv_sys_lib_dlsearch_path_spec+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    lt_cv_sys_lib_dlsearch_path_spec="$sys_lib_dlsearch_path_spec"
  fi
***************
*** 18807,18814 ****
    variables_saved_for_relink="$variables_saved_for_relink GCC_EXEC_PREFIX COMPILER_PATH LIBRARY_PATH"
  fi
  
! { echo "$as_me:$LINENO: checking how to hardcode library paths into programs" >&5
! echo $ECHO_N "checking how to hardcode library paths into programs... $ECHO_C" >&6; }
  hardcode_action_CXX=
  if test -n "$hardcode_libdir_flag_spec_CXX" || \
     test -n "$runpath_var_CXX" || \
--- 16665,16672 ----
    variables_saved_for_relink="$variables_saved_for_relink GCC_EXEC_PREFIX COMPILER_PATH LIBRARY_PATH"
  fi
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking how to hardcode library paths into programs" >&5
! $as_echo_n "checking how to hardcode library paths into programs... " >&6; }
  hardcode_action_CXX=
  if test -n "$hardcode_libdir_flag_spec_CXX" || \
     test -n "$runpath_var_CXX" || \
***************
*** 18832,18839 ****
    # directories.
    hardcode_action_CXX=unsupported
  fi
! { echo "$as_me:$LINENO: result: $hardcode_action_CXX" >&5
! echo "${ECHO_T}$hardcode_action_CXX" >&6; }
  
  if test "$hardcode_action_CXX" = relink; then
    # Fast installation is not supported
--- 16690,16697 ----
    # directories.
    hardcode_action_CXX=unsupported
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $hardcode_action_CXX" >&5
! $as_echo "$hardcode_action_CXX" >&6; }
  
  if test "$hardcode_action_CXX" = relink; then
    # Fast installation is not supported
***************
*** 19371,19383 ****
  cc_basename=`$echo "X$cc_temp" | $Xsed -e 's%.*/%%' -e "s%^$host_alias-%%"`
  
  
! { echo "$as_me:$LINENO: checking if libtool supports shared libraries" >&5
! echo $ECHO_N "checking if libtool supports shared libraries... $ECHO_C" >&6; }
! { echo "$as_me:$LINENO: result: $can_build_shared" >&5
! echo "${ECHO_T}$can_build_shared" >&6; }
  
! { echo "$as_me:$LINENO: checking whether to build shared libraries" >&5
! echo $ECHO_N "checking whether to build shared libraries... $ECHO_C" >&6; }
  test "$can_build_shared" = "no" && enable_shared=no
  
  # On AIX, shared libraries and static libraries use the same namespace, and
--- 17229,17241 ----
  cc_basename=`$echo "X$cc_temp" | $Xsed -e 's%.*/%%' -e "s%^$host_alias-%%"`
  
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking if libtool supports shared libraries" >&5
! $as_echo_n "checking if libtool supports shared libraries... " >&6; }
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $can_build_shared" >&5
! $as_echo "$can_build_shared" >&6; }
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to build shared libraries" >&5
! $as_echo_n "checking whether to build shared libraries... " >&6; }
  test "$can_build_shared" = "no" && enable_shared=no
  
  # On AIX, shared libraries and static libraries use the same namespace, and
***************
*** 19396,19410 ****
    fi
    ;;
  esac
! { echo "$as_me:$LINENO: result: $enable_shared" >&5
! echo "${ECHO_T}$enable_shared" >&6; }
  
! { echo "$as_me:$LINENO: checking whether to build static libraries" >&5
! echo $ECHO_N "checking whether to build static libraries... $ECHO_C" >&6; }
  # Make sure either enable_shared or enable_static is yes.
  test "$enable_shared" = yes || enable_static=yes
! { echo "$as_me:$LINENO: result: $enable_static" >&5
! echo "${ECHO_T}$enable_static" >&6; }
  
  GCC_F77="$G77"
  LD_F77="$LD"
--- 17254,17268 ----
    fi
    ;;
  esac
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $enable_shared" >&5
! $as_echo "$enable_shared" >&6; }
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to build static libraries" >&5
! $as_echo_n "checking whether to build static libraries... " >&6; }
  # Make sure either enable_shared or enable_static is yes.
  test "$enable_shared" = yes || enable_static=yes
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $enable_static" >&5
! $as_echo "$enable_static" >&6; }
  
  GCC_F77="$G77"
  LD_F77="$LD"
***************
*** 19413,19420 ****
  lt_prog_compiler_pic_F77=
  lt_prog_compiler_static_F77=
  
! { echo "$as_me:$LINENO: checking for $compiler option to produce PIC" >&5
! echo $ECHO_N "checking for $compiler option to produce PIC... $ECHO_C" >&6; }
  
    if test "$GCC" = yes; then
      lt_prog_compiler_wl_F77='-Wl,'
--- 17271,17278 ----
  lt_prog_compiler_pic_F77=
  lt_prog_compiler_static_F77=
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $compiler option to produce PIC" >&5
! $as_echo_n "checking for $compiler option to produce PIC... " >&6; }
  
    if test "$GCC" = yes; then
      lt_prog_compiler_wl_F77='-Wl,'
***************
*** 19645,19662 ****
      esac
    fi
  
! { echo "$as_me:$LINENO: result: $lt_prog_compiler_pic_F77" >&5
! echo "${ECHO_T}$lt_prog_compiler_pic_F77" >&6; }
  
  #
  # Check to make sure the PIC flag actually works.
  #
  if test -n "$lt_prog_compiler_pic_F77"; then
  
! { echo "$as_me:$LINENO: checking if $compiler PIC flag $lt_prog_compiler_pic_F77 works" >&5
! echo $ECHO_N "checking if $compiler PIC flag $lt_prog_compiler_pic_F77 works... $ECHO_C" >&6; }
! if test "${lt_cv_prog_compiler_pic_works_F77+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    lt_cv_prog_compiler_pic_works_F77=no
    ac_outfile=conftest.$ac_objext
--- 17503,17520 ----
      esac
    fi
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_prog_compiler_pic_F77" >&5
! $as_echo "$lt_prog_compiler_pic_F77" >&6; }
  
  #
  # Check to make sure the PIC flag actually works.
  #
  if test -n "$lt_prog_compiler_pic_F77"; then
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler PIC flag $lt_prog_compiler_pic_F77 works" >&5
! $as_echo_n "checking if $compiler PIC flag $lt_prog_compiler_pic_F77 works... " >&6; }
! if ${lt_cv_prog_compiler_pic_works_F77+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    lt_cv_prog_compiler_pic_works_F77=no
    ac_outfile=conftest.$ac_objext
***************
*** 19671,19681 ****
     -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:19674: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>conftest.err)
     ac_status=$?
     cat conftest.err >&5
!    echo "$as_me:19678: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s "$ac_outfile"; then
       # The compiler can only warn and ignore the option if not recognized
       # So say no if there are warnings other than the usual output.
--- 17529,17539 ----
     -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:17532: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>conftest.err)
     ac_status=$?
     cat conftest.err >&5
!    echo "$as_me:17536: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s "$ac_outfile"; then
       # The compiler can only warn and ignore the option if not recognized
       # So say no if there are warnings other than the usual output.
***************
*** 19688,19695 ****
     $rm conftest*
  
  fi
! { echo "$as_me:$LINENO: result: $lt_cv_prog_compiler_pic_works_F77" >&5
! echo "${ECHO_T}$lt_cv_prog_compiler_pic_works_F77" >&6; }
  
  if test x"$lt_cv_prog_compiler_pic_works_F77" = xyes; then
      case $lt_prog_compiler_pic_F77 in
--- 17546,17553 ----
     $rm conftest*
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_compiler_pic_works_F77" >&5
! $as_echo "$lt_cv_prog_compiler_pic_works_F77" >&6; }
  
  if test x"$lt_cv_prog_compiler_pic_works_F77" = xyes; then
      case $lt_prog_compiler_pic_F77 in
***************
*** 19716,19725 ****
  # Check to make sure the static flag actually works.
  #
  wl=$lt_prog_compiler_wl_F77 eval lt_tmp_static_flag=\"$lt_prog_compiler_static_F77\"
! { echo "$as_me:$LINENO: checking if $compiler static flag $lt_tmp_static_flag works" >&5
! echo $ECHO_N "checking if $compiler static flag $lt_tmp_static_flag works... $ECHO_C" >&6; }
! if test "${lt_cv_prog_compiler_static_works_F77+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    lt_cv_prog_compiler_static_works_F77=no
     save_LDFLAGS="$LDFLAGS"
--- 17574,17583 ----
  # Check to make sure the static flag actually works.
  #
  wl=$lt_prog_compiler_wl_F77 eval lt_tmp_static_flag=\"$lt_prog_compiler_static_F77\"
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler static flag $lt_tmp_static_flag works" >&5
! $as_echo_n "checking if $compiler static flag $lt_tmp_static_flag works... " >&6; }
! if ${lt_cv_prog_compiler_static_works_F77+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    lt_cv_prog_compiler_static_works_F77=no
     save_LDFLAGS="$LDFLAGS"
***************
*** 19744,19751 ****
     LDFLAGS="$save_LDFLAGS"
  
  fi
! { echo "$as_me:$LINENO: result: $lt_cv_prog_compiler_static_works_F77" >&5
! echo "${ECHO_T}$lt_cv_prog_compiler_static_works_F77" >&6; }
  
  if test x"$lt_cv_prog_compiler_static_works_F77" = xyes; then
      :
--- 17602,17609 ----
     LDFLAGS="$save_LDFLAGS"
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_compiler_static_works_F77" >&5
! $as_echo "$lt_cv_prog_compiler_static_works_F77" >&6; }
  
  if test x"$lt_cv_prog_compiler_static_works_F77" = xyes; then
      :
***************
*** 19754,19763 ****
  fi
  
  
! { echo "$as_me:$LINENO: checking if $compiler supports -c -o file.$ac_objext" >&5
! echo $ECHO_N "checking if $compiler supports -c -o file.$ac_objext... $ECHO_C" >&6; }
! if test "${lt_cv_prog_compiler_c_o_F77+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    lt_cv_prog_compiler_c_o_F77=no
     $rm -r conftest 2>/dev/null
--- 17612,17621 ----
  fi
  
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler supports -c -o file.$ac_objext" >&5
! $as_echo_n "checking if $compiler supports -c -o file.$ac_objext... " >&6; }
! if ${lt_cv_prog_compiler_c_o_F77+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    lt_cv_prog_compiler_c_o_F77=no
     $rm -r conftest 2>/dev/null
***************
*** 19775,19785 ****
     -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:19778: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>out/conftest.err)
     ac_status=$?
     cat out/conftest.err >&5
!    echo "$as_me:19782: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s out/conftest2.$ac_objext
     then
       # The compiler can only warn and ignore the option if not recognized
--- 17633,17643 ----
     -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:17636: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>out/conftest.err)
     ac_status=$?
     cat out/conftest.err >&5
!    echo "$as_me:17640: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s out/conftest2.$ac_objext
     then
       # The compiler can only warn and ignore the option if not recognized
***************
*** 19801,19834 ****
     $rm conftest*
  
  fi
! { echo "$as_me:$LINENO: result: $lt_cv_prog_compiler_c_o_F77" >&5
! echo "${ECHO_T}$lt_cv_prog_compiler_c_o_F77" >&6; }
  
  
  hard_links="nottested"
  if test "$lt_cv_prog_compiler_c_o_F77" = no && test "$need_locks" != no; then
    # do not overwrite the value of need_locks provided by the user
!   { echo "$as_me:$LINENO: checking if we can lock with hard links" >&5
! echo $ECHO_N "checking if we can lock with hard links... $ECHO_C" >&6; }
    hard_links=yes
    $rm conftest*
    ln conftest.a conftest.b 2>/dev/null && hard_links=no
    touch conftest.a
    ln conftest.a conftest.b 2>&5 || hard_links=no
    ln conftest.a conftest.b 2>/dev/null && hard_links=no
!   { echo "$as_me:$LINENO: result: $hard_links" >&5
! echo "${ECHO_T}$hard_links" >&6; }
    if test "$hard_links" = no; then
!     { echo "$as_me:$LINENO: WARNING: \`$CC' does not support \`-c -o', so \`make -j' may be unsafe" >&5
! echo "$as_me: WARNING: \`$CC' does not support \`-c -o', so \`make -j' may be unsafe" >&2;}
      need_locks=warn
    fi
  else
    need_locks=no
  fi
  
! { echo "$as_me:$LINENO: checking whether the $compiler linker ($LD) supports shared libraries" >&5
! echo $ECHO_N "checking whether the $compiler linker ($LD) supports shared libraries... $ECHO_C" >&6; }
  
    runpath_var=
    allow_undefined_flag_F77=
--- 17659,17692 ----
     $rm conftest*
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_compiler_c_o_F77" >&5
! $as_echo "$lt_cv_prog_compiler_c_o_F77" >&6; }
  
  
  hard_links="nottested"
  if test "$lt_cv_prog_compiler_c_o_F77" = no && test "$need_locks" != no; then
    # do not overwrite the value of need_locks provided by the user
!   { $as_echo "$as_me:${as_lineno-$LINENO}: checking if we can lock with hard links" >&5
! $as_echo_n "checking if we can lock with hard links... " >&6; }
    hard_links=yes
    $rm conftest*
    ln conftest.a conftest.b 2>/dev/null && hard_links=no
    touch conftest.a
    ln conftest.a conftest.b 2>&5 || hard_links=no
    ln conftest.a conftest.b 2>/dev/null && hard_links=no
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $hard_links" >&5
! $as_echo "$hard_links" >&6; }
    if test "$hard_links" = no; then
!     { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: \`$CC' does not support \`-c -o', so \`make -j' may be unsafe" >&5
! $as_echo "$as_me: WARNING: \`$CC' does not support \`-c -o', so \`make -j' may be unsafe" >&2;}
      need_locks=warn
    fi
  else
    need_locks=no
  fi
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the $compiler linker ($LD) supports shared libraries" >&5
! $as_echo_n "checking whether the $compiler linker ($LD) supports shared libraries... " >&6; }
  
    runpath_var=
    allow_undefined_flag_F77=
***************
*** 20238,20266 ****
  	# -berok will link without error, but may produce a broken library.
  	allow_undefined_flag_F77='-berok'
         # Determine the default libpath from the value encoded in an empty executable.
!        cat >conftest.$ac_ext <<_ACEOF
        program main
  
        end
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_f77_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
  
  lt_aix_libpath_sed='
      /Import File Strings/,/^$/ {
--- 18096,18107 ----
  	# -berok will link without error, but may produce a broken library.
  	allow_undefined_flag_F77='-berok'
         # Determine the default libpath from the value encoded in an empty executable.
!        cat > conftest.$ac_ext <<_ACEOF
        program main
  
        end
  _ACEOF
! if ac_fn_f77_try_link "$LINENO"; then :
  
  lt_aix_libpath_sed='
      /Import File Strings/,/^$/ {
***************
*** 20274,20288 ****
  if test -z "$aix_libpath"; then
    aix_libpath=`dump -HX64 conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
  fi
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
- 
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  if test -z "$aix_libpath"; then aix_libpath="/usr/lib:/lib"; fi
  
         hardcode_libdir_flag_spec_F77='${wl}-blibpath:$libdir:'"$aix_libpath"
--- 18115,18123 ----
  if test -z "$aix_libpath"; then
    aix_libpath=`dump -HX64 conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
  fi
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  if test -z "$aix_libpath"; then aix_libpath="/usr/lib:/lib"; fi
  
         hardcode_libdir_flag_spec_F77='${wl}-blibpath:$libdir:'"$aix_libpath"
***************
*** 20294,20322 ****
  	  archive_expsym_cmds_F77="\$CC $shared_flag"' -o $output_objdir/$soname $libobjs $deplibs '"\${wl}$no_entry_flag"' $compiler_flags ${wl}${allow_undefined_flag} '"\${wl}$exp_sym_flag:\$export_symbols"
  	else
  	 # Determine the default libpath from the value encoded in an empty executable.
! 	 cat >conftest.$ac_ext <<_ACEOF
        program main
  
        end
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_f77_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
  
  lt_aix_libpath_sed='
      /Import File Strings/,/^$/ {
--- 18129,18140 ----
  	  archive_expsym_cmds_F77="\$CC $shared_flag"' -o $output_objdir/$soname $libobjs $deplibs '"\${wl}$no_entry_flag"' $compiler_flags ${wl}${allow_undefined_flag} '"\${wl}$exp_sym_flag:\$export_symbols"
  	else
  	 # Determine the default libpath from the value encoded in an empty executable.
! 	 cat > conftest.$ac_ext <<_ACEOF
        program main
  
        end
  _ACEOF
! if ac_fn_f77_try_link "$LINENO"; then :
  
  lt_aix_libpath_sed='
      /Import File Strings/,/^$/ {
***************
*** 20330,20344 ****
  if test -z "$aix_libpath"; then
    aix_libpath=`dump -HX64 conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
  fi
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
- 
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  if test -z "$aix_libpath"; then aix_libpath="/usr/lib:/lib"; fi
  
  	 hardcode_libdir_flag_spec_F77='${wl}-blibpath:$libdir:'"$aix_libpath"
--- 18148,18156 ----
  if test -z "$aix_libpath"; then
    aix_libpath=`dump -HX64 conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
  fi
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  if test -z "$aix_libpath"; then aix_libpath="/usr/lib:/lib"; fi
  
  	 hardcode_libdir_flag_spec_F77='${wl}-blibpath:$libdir:'"$aix_libpath"
***************
*** 20788,20795 ****
      esac
    fi
  
! { echo "$as_me:$LINENO: result: $ld_shlibs_F77" >&5
! echo "${ECHO_T}$ld_shlibs_F77" >&6; }
  test "$ld_shlibs_F77" = no && can_build_shared=no
  
  #
--- 18600,18607 ----
      esac
    fi
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ld_shlibs_F77" >&5
! $as_echo "$ld_shlibs_F77" >&6; }
  test "$ld_shlibs_F77" = no && can_build_shared=no
  
  #
***************
*** 20809,20824 ****
        # Test whether the compiler implicitly links with -lc since on some
        # systems, -lgcc has to come before -lc. If gcc already passes -lc
        # to ld, don't add -lc before -lgcc.
!       { echo "$as_me:$LINENO: checking whether -lc should be explicitly linked in" >&5
! echo $ECHO_N "checking whether -lc should be explicitly linked in... $ECHO_C" >&6; }
        $rm conftest*
        echo "$lt_simple_compile_test_code" > conftest.$ac_ext
  
!       if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
    (eval $ac_compile) 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } 2>conftest.err; then
          soname=conftest
          lib=conftest
          libobjs=conftest.$ac_objext
--- 18621,18636 ----
        # Test whether the compiler implicitly links with -lc since on some
        # systems, -lgcc has to come before -lc. If gcc already passes -lc
        # to ld, don't add -lc before -lgcc.
!       { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether -lc should be explicitly linked in" >&5
! $as_echo_n "checking whether -lc should be explicitly linked in... " >&6; }
        $rm conftest*
        echo "$lt_simple_compile_test_code" > conftest.$ac_ext
  
!       if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
    (eval $ac_compile) 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; } 2>conftest.err; then
          soname=conftest
          lib=conftest
          libobjs=conftest.$ac_objext
***************
*** 20832,20842 ****
          libname=conftest
          lt_save_allow_undefined_flag=$allow_undefined_flag_F77
          allow_undefined_flag_F77=
!         if { (eval echo "$as_me:$LINENO: \"$archive_cmds_F77 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1\"") >&5
    (eval $archive_cmds_F77 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1) 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }
          then
  	  archive_cmds_need_lc_F77=no
          else
--- 18644,18654 ----
          libname=conftest
          lt_save_allow_undefined_flag=$allow_undefined_flag_F77
          allow_undefined_flag_F77=
!         if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$archive_cmds_F77 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1\""; } >&5
    (eval $archive_cmds_F77 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1) 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }
          then
  	  archive_cmds_need_lc_F77=no
          else
***************
*** 20847,20862 ****
          cat conftest.err 1>&5
        fi
        $rm conftest*
!       { echo "$as_me:$LINENO: result: $archive_cmds_need_lc_F77" >&5
! echo "${ECHO_T}$archive_cmds_need_lc_F77" >&6; }
        ;;
      esac
    fi
    ;;
  esac
  
! { echo "$as_me:$LINENO: checking dynamic linker characteristics" >&5
! echo $ECHO_N "checking dynamic linker characteristics... $ECHO_C" >&6; }
  library_names_spec=
  libname_spec='lib$name'
  soname_spec=
--- 18659,18674 ----
          cat conftest.err 1>&5
        fi
        $rm conftest*
!       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $archive_cmds_need_lc_F77" >&5
! $as_echo "$archive_cmds_need_lc_F77" >&6; }
        ;;
      esac
    fi
    ;;
  esac
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking dynamic linker characteristics" >&5
! $as_echo_n "checking dynamic linker characteristics... " >&6; }
  library_names_spec=
  libname_spec='lib$name'
  soname_spec=
***************
*** 21417,21435 ****
    dynamic_linker=no
    ;;
  esac
! { echo "$as_me:$LINENO: result: $dynamic_linker" >&5
! echo "${ECHO_T}$dynamic_linker" >&6; }
  test "$dynamic_linker" = no && can_build_shared=no
  
! if test "${lt_cv_sys_lib_search_path_spec+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    lt_cv_sys_lib_search_path_spec="$sys_lib_search_path_spec"
  fi
  
  sys_lib_search_path_spec="$lt_cv_sys_lib_search_path_spec"
! if test "${lt_cv_sys_lib_dlsearch_path_spec+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    lt_cv_sys_lib_dlsearch_path_spec="$sys_lib_dlsearch_path_spec"
  fi
--- 19229,19247 ----
    dynamic_linker=no
    ;;
  esac
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $dynamic_linker" >&5
! $as_echo "$dynamic_linker" >&6; }
  test "$dynamic_linker" = no && can_build_shared=no
  
! if ${lt_cv_sys_lib_search_path_spec+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    lt_cv_sys_lib_search_path_spec="$sys_lib_search_path_spec"
  fi
  
  sys_lib_search_path_spec="$lt_cv_sys_lib_search_path_spec"
! if ${lt_cv_sys_lib_dlsearch_path_spec+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    lt_cv_sys_lib_dlsearch_path_spec="$sys_lib_dlsearch_path_spec"
  fi
***************
*** 21441,21448 ****
    variables_saved_for_relink="$variables_saved_for_relink GCC_EXEC_PREFIX COMPILER_PATH LIBRARY_PATH"
  fi
  
! { echo "$as_me:$LINENO: checking how to hardcode library paths into programs" >&5
! echo $ECHO_N "checking how to hardcode library paths into programs... $ECHO_C" >&6; }
  hardcode_action_F77=
  if test -n "$hardcode_libdir_flag_spec_F77" || \
     test -n "$runpath_var_F77" || \
--- 19253,19260 ----
    variables_saved_for_relink="$variables_saved_for_relink GCC_EXEC_PREFIX COMPILER_PATH LIBRARY_PATH"
  fi
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking how to hardcode library paths into programs" >&5
! $as_echo_n "checking how to hardcode library paths into programs... " >&6; }
  hardcode_action_F77=
  if test -n "$hardcode_libdir_flag_spec_F77" || \
     test -n "$runpath_var_F77" || \
***************
*** 21466,21473 ****
    # directories.
    hardcode_action_F77=unsupported
  fi
! { echo "$as_me:$LINENO: result: $hardcode_action_F77" >&5
! echo "${ECHO_T}$hardcode_action_F77" >&6; }
  
  if test "$hardcode_action_F77" = relink; then
    # Fast installation is not supported
--- 19278,19285 ----
    # directories.
    hardcode_action_F77=unsupported
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $hardcode_action_F77" >&5
! $as_echo "$hardcode_action_F77" >&6; }
  
  if test "$hardcode_action_F77" = relink; then
    # Fast installation is not supported
***************
*** 21977,21986 ****
    lt_prog_compiler_no_builtin_flag_GCJ=' -fno-builtin'
  
  
! { echo "$as_me:$LINENO: checking if $compiler supports -fno-rtti -fno-exceptions" >&5
! echo $ECHO_N "checking if $compiler supports -fno-rtti -fno-exceptions... $ECHO_C" >&6; }
! if test "${lt_cv_prog_compiler_rtti_exceptions+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    lt_cv_prog_compiler_rtti_exceptions=no
    ac_outfile=conftest.$ac_objext
--- 19789,19798 ----
    lt_prog_compiler_no_builtin_flag_GCJ=' -fno-builtin'
  
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler supports -fno-rtti -fno-exceptions" >&5
! $as_echo_n "checking if $compiler supports -fno-rtti -fno-exceptions... " >&6; }
! if ${lt_cv_prog_compiler_rtti_exceptions+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    lt_cv_prog_compiler_rtti_exceptions=no
    ac_outfile=conftest.$ac_objext
***************
*** 21995,22005 ****
     -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:21998: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>conftest.err)
     ac_status=$?
     cat conftest.err >&5
!    echo "$as_me:22002: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s "$ac_outfile"; then
       # The compiler can only warn and ignore the option if not recognized
       # So say no if there are warnings other than the usual output.
--- 19807,19817 ----
     -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:19810: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>conftest.err)
     ac_status=$?
     cat conftest.err >&5
!    echo "$as_me:19814: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s "$ac_outfile"; then
       # The compiler can only warn and ignore the option if not recognized
       # So say no if there are warnings other than the usual output.
***************
*** 22012,22019 ****
     $rm conftest*
  
  fi
! { echo "$as_me:$LINENO: result: $lt_cv_prog_compiler_rtti_exceptions" >&5
! echo "${ECHO_T}$lt_cv_prog_compiler_rtti_exceptions" >&6; }
  
  if test x"$lt_cv_prog_compiler_rtti_exceptions" = xyes; then
      lt_prog_compiler_no_builtin_flag_GCJ="$lt_prog_compiler_no_builtin_flag_GCJ -fno-rtti -fno-exceptions"
--- 19824,19831 ----
     $rm conftest*
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_compiler_rtti_exceptions" >&5
! $as_echo "$lt_cv_prog_compiler_rtti_exceptions" >&6; }
  
  if test x"$lt_cv_prog_compiler_rtti_exceptions" = xyes; then
      lt_prog_compiler_no_builtin_flag_GCJ="$lt_prog_compiler_no_builtin_flag_GCJ -fno-rtti -fno-exceptions"
***************
*** 22027,22034 ****
  lt_prog_compiler_pic_GCJ=
  lt_prog_compiler_static_GCJ=
  
! { echo "$as_me:$LINENO: checking for $compiler option to produce PIC" >&5
! echo $ECHO_N "checking for $compiler option to produce PIC... $ECHO_C" >&6; }
  
    if test "$GCC" = yes; then
      lt_prog_compiler_wl_GCJ='-Wl,'
--- 19839,19846 ----
  lt_prog_compiler_pic_GCJ=
  lt_prog_compiler_static_GCJ=
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $compiler option to produce PIC" >&5
! $as_echo_n "checking for $compiler option to produce PIC... " >&6; }
  
    if test "$GCC" = yes; then
      lt_prog_compiler_wl_GCJ='-Wl,'
***************
*** 22259,22276 ****
      esac
    fi
  
! { echo "$as_me:$LINENO: result: $lt_prog_compiler_pic_GCJ" >&5
! echo "${ECHO_T}$lt_prog_compiler_pic_GCJ" >&6; }
  
  #
  # Check to make sure the PIC flag actually works.
  #
  if test -n "$lt_prog_compiler_pic_GCJ"; then
  
! { echo "$as_me:$LINENO: checking if $compiler PIC flag $lt_prog_compiler_pic_GCJ works" >&5
! echo $ECHO_N "checking if $compiler PIC flag $lt_prog_compiler_pic_GCJ works... $ECHO_C" >&6; }
! if test "${lt_cv_prog_compiler_pic_works_GCJ+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    lt_cv_prog_compiler_pic_works_GCJ=no
    ac_outfile=conftest.$ac_objext
--- 20071,20088 ----
      esac
    fi
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_prog_compiler_pic_GCJ" >&5
! $as_echo "$lt_prog_compiler_pic_GCJ" >&6; }
  
  #
  # Check to make sure the PIC flag actually works.
  #
  if test -n "$lt_prog_compiler_pic_GCJ"; then
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler PIC flag $lt_prog_compiler_pic_GCJ works" >&5
! $as_echo_n "checking if $compiler PIC flag $lt_prog_compiler_pic_GCJ works... " >&6; }
! if ${lt_cv_prog_compiler_pic_works_GCJ+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    lt_cv_prog_compiler_pic_works_GCJ=no
    ac_outfile=conftest.$ac_objext
***************
*** 22285,22295 ****
     -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:22288: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>conftest.err)
     ac_status=$?
     cat conftest.err >&5
!    echo "$as_me:22292: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s "$ac_outfile"; then
       # The compiler can only warn and ignore the option if not recognized
       # So say no if there are warnings other than the usual output.
--- 20097,20107 ----
     -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:20100: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>conftest.err)
     ac_status=$?
     cat conftest.err >&5
!    echo "$as_me:20104: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s "$ac_outfile"; then
       # The compiler can only warn and ignore the option if not recognized
       # So say no if there are warnings other than the usual output.
***************
*** 22302,22309 ****
     $rm conftest*
  
  fi
! { echo "$as_me:$LINENO: result: $lt_cv_prog_compiler_pic_works_GCJ" >&5
! echo "${ECHO_T}$lt_cv_prog_compiler_pic_works_GCJ" >&6; }
  
  if test x"$lt_cv_prog_compiler_pic_works_GCJ" = xyes; then
      case $lt_prog_compiler_pic_GCJ in
--- 20114,20121 ----
     $rm conftest*
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_compiler_pic_works_GCJ" >&5
! $as_echo "$lt_cv_prog_compiler_pic_works_GCJ" >&6; }
  
  if test x"$lt_cv_prog_compiler_pic_works_GCJ" = xyes; then
      case $lt_prog_compiler_pic_GCJ in
***************
*** 22330,22339 ****
  # Check to make sure the static flag actually works.
  #
  wl=$lt_prog_compiler_wl_GCJ eval lt_tmp_static_flag=\"$lt_prog_compiler_static_GCJ\"
! { echo "$as_me:$LINENO: checking if $compiler static flag $lt_tmp_static_flag works" >&5
! echo $ECHO_N "checking if $compiler static flag $lt_tmp_static_flag works... $ECHO_C" >&6; }
! if test "${lt_cv_prog_compiler_static_works_GCJ+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    lt_cv_prog_compiler_static_works_GCJ=no
     save_LDFLAGS="$LDFLAGS"
--- 20142,20151 ----
  # Check to make sure the static flag actually works.
  #
  wl=$lt_prog_compiler_wl_GCJ eval lt_tmp_static_flag=\"$lt_prog_compiler_static_GCJ\"
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler static flag $lt_tmp_static_flag works" >&5
! $as_echo_n "checking if $compiler static flag $lt_tmp_static_flag works... " >&6; }
! if ${lt_cv_prog_compiler_static_works_GCJ+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    lt_cv_prog_compiler_static_works_GCJ=no
     save_LDFLAGS="$LDFLAGS"
***************
*** 22358,22365 ****
     LDFLAGS="$save_LDFLAGS"
  
  fi
! { echo "$as_me:$LINENO: result: $lt_cv_prog_compiler_static_works_GCJ" >&5
! echo "${ECHO_T}$lt_cv_prog_compiler_static_works_GCJ" >&6; }
  
  if test x"$lt_cv_prog_compiler_static_works_GCJ" = xyes; then
      :
--- 20170,20177 ----
     LDFLAGS="$save_LDFLAGS"
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_compiler_static_works_GCJ" >&5
! $as_echo "$lt_cv_prog_compiler_static_works_GCJ" >&6; }
  
  if test x"$lt_cv_prog_compiler_static_works_GCJ" = xyes; then
      :
***************
*** 22368,22377 ****
  fi
  
  
! { echo "$as_me:$LINENO: checking if $compiler supports -c -o file.$ac_objext" >&5
! echo $ECHO_N "checking if $compiler supports -c -o file.$ac_objext... $ECHO_C" >&6; }
! if test "${lt_cv_prog_compiler_c_o_GCJ+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    lt_cv_prog_compiler_c_o_GCJ=no
     $rm -r conftest 2>/dev/null
--- 20180,20189 ----
  fi
  
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler supports -c -o file.$ac_objext" >&5
! $as_echo_n "checking if $compiler supports -c -o file.$ac_objext... " >&6; }
! if ${lt_cv_prog_compiler_c_o_GCJ+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    lt_cv_prog_compiler_c_o_GCJ=no
     $rm -r conftest 2>/dev/null
***************
*** 22389,22399 ****
     -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:22392: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>out/conftest.err)
     ac_status=$?
     cat out/conftest.err >&5
!    echo "$as_me:22396: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s out/conftest2.$ac_objext
     then
       # The compiler can only warn and ignore the option if not recognized
--- 20201,20211 ----
     -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
     -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
     -e 's:$: $lt_compiler_flag:'`
!    (eval echo "\"\$as_me:20204: $lt_compile\"" >&5)
     (eval "$lt_compile" 2>out/conftest.err)
     ac_status=$?
     cat out/conftest.err >&5
!    echo "$as_me:20208: \$? = $ac_status" >&5
     if (exit $ac_status) && test -s out/conftest2.$ac_objext
     then
       # The compiler can only warn and ignore the option if not recognized
***************
*** 22415,22448 ****
     $rm conftest*
  
  fi
! { echo "$as_me:$LINENO: result: $lt_cv_prog_compiler_c_o_GCJ" >&5
! echo "${ECHO_T}$lt_cv_prog_compiler_c_o_GCJ" >&6; }
  
  
  hard_links="nottested"
  if test "$lt_cv_prog_compiler_c_o_GCJ" = no && test "$need_locks" != no; then
    # do not overwrite the value of need_locks provided by the user
!   { echo "$as_me:$LINENO: checking if we can lock with hard links" >&5
! echo $ECHO_N "checking if we can lock with hard links... $ECHO_C" >&6; }
    hard_links=yes
    $rm conftest*
    ln conftest.a conftest.b 2>/dev/null && hard_links=no
    touch conftest.a
    ln conftest.a conftest.b 2>&5 || hard_links=no
    ln conftest.a conftest.b 2>/dev/null && hard_links=no
!   { echo "$as_me:$LINENO: result: $hard_links" >&5
! echo "${ECHO_T}$hard_links" >&6; }
    if test "$hard_links" = no; then
!     { echo "$as_me:$LINENO: WARNING: \`$CC' does not support \`-c -o', so \`make -j' may be unsafe" >&5
! echo "$as_me: WARNING: \`$CC' does not support \`-c -o', so \`make -j' may be unsafe" >&2;}
      need_locks=warn
    fi
  else
    need_locks=no
  fi
  
! { echo "$as_me:$LINENO: checking whether the $compiler linker ($LD) supports shared libraries" >&5
! echo $ECHO_N "checking whether the $compiler linker ($LD) supports shared libraries... $ECHO_C" >&6; }
  
    runpath_var=
    allow_undefined_flag_GCJ=
--- 20227,20260 ----
     $rm conftest*
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_compiler_c_o_GCJ" >&5
! $as_echo "$lt_cv_prog_compiler_c_o_GCJ" >&6; }
  
  
  hard_links="nottested"
  if test "$lt_cv_prog_compiler_c_o_GCJ" = no && test "$need_locks" != no; then
    # do not overwrite the value of need_locks provided by the user
!   { $as_echo "$as_me:${as_lineno-$LINENO}: checking if we can lock with hard links" >&5
! $as_echo_n "checking if we can lock with hard links... " >&6; }
    hard_links=yes
    $rm conftest*
    ln conftest.a conftest.b 2>/dev/null && hard_links=no
    touch conftest.a
    ln conftest.a conftest.b 2>&5 || hard_links=no
    ln conftest.a conftest.b 2>/dev/null && hard_links=no
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $hard_links" >&5
! $as_echo "$hard_links" >&6; }
    if test "$hard_links" = no; then
!     { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: \`$CC' does not support \`-c -o', so \`make -j' may be unsafe" >&5
! $as_echo "$as_me: WARNING: \`$CC' does not support \`-c -o', so \`make -j' may be unsafe" >&2;}
      need_locks=warn
    fi
  else
    need_locks=no
  fi
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the $compiler linker ($LD) supports shared libraries" >&5
! $as_echo_n "checking whether the $compiler linker ($LD) supports shared libraries... " >&6; }
  
    runpath_var=
    allow_undefined_flag_GCJ=
***************
*** 22852,22862 ****
  	# -berok will link without error, but may produce a broken library.
  	allow_undefined_flag_GCJ='-berok'
         # Determine the default libpath from the value encoded in an empty executable.
!        cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  int
--- 20664,20670 ----
  	# -berok will link without error, but may produce a broken library.
  	allow_undefined_flag_GCJ='-berok'
         # Determine the default libpath from the value encoded in an empty executable.
!        cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  int
***************
*** 22867,22890 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
  
  lt_aix_libpath_sed='
      /Import File Strings/,/^$/ {
--- 20675,20681 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
  
  lt_aix_libpath_sed='
      /Import File Strings/,/^$/ {
***************
*** 22898,22912 ****
  if test -z "$aix_libpath"; then
    aix_libpath=`dump -HX64 conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
  fi
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
- 
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  if test -z "$aix_libpath"; then aix_libpath="/usr/lib:/lib"; fi
  
         hardcode_libdir_flag_spec_GCJ='${wl}-blibpath:$libdir:'"$aix_libpath"
--- 20689,20697 ----
  if test -z "$aix_libpath"; then
    aix_libpath=`dump -HX64 conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
  fi
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  if test -z "$aix_libpath"; then aix_libpath="/usr/lib:/lib"; fi
  
         hardcode_libdir_flag_spec_GCJ='${wl}-blibpath:$libdir:'"$aix_libpath"
***************
*** 22918,22928 ****
  	  archive_expsym_cmds_GCJ="\$CC $shared_flag"' -o $output_objdir/$soname $libobjs $deplibs '"\${wl}$no_entry_flag"' $compiler_flags ${wl}${allow_undefined_flag} '"\${wl}$exp_sym_flag:\$export_symbols"
  	else
  	 # Determine the default libpath from the value encoded in an empty executable.
! 	 cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  int
--- 20703,20709 ----
  	  archive_expsym_cmds_GCJ="\$CC $shared_flag"' -o $output_objdir/$soname $libobjs $deplibs '"\${wl}$no_entry_flag"' $compiler_flags ${wl}${allow_undefined_flag} '"\${wl}$exp_sym_flag:\$export_symbols"
  	else
  	 # Determine the default libpath from the value encoded in an empty executable.
! 	 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  int
***************
*** 22933,22956 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
  
  lt_aix_libpath_sed='
      /Import File Strings/,/^$/ {
--- 20714,20720 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
  
  lt_aix_libpath_sed='
      /Import File Strings/,/^$/ {
***************
*** 22964,22978 ****
  if test -z "$aix_libpath"; then
    aix_libpath=`dump -HX64 conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
  fi
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
- 
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  if test -z "$aix_libpath"; then aix_libpath="/usr/lib:/lib"; fi
  
  	 hardcode_libdir_flag_spec_GCJ='${wl}-blibpath:$libdir:'"$aix_libpath"
--- 20728,20736 ----
  if test -z "$aix_libpath"; then
    aix_libpath=`dump -HX64 conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
  fi
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  if test -z "$aix_libpath"; then aix_libpath="/usr/lib:/lib"; fi
  
  	 hardcode_libdir_flag_spec_GCJ='${wl}-blibpath:$libdir:'"$aix_libpath"
***************
*** 23422,23429 ****
      esac
    fi
  
! { echo "$as_me:$LINENO: result: $ld_shlibs_GCJ" >&5
! echo "${ECHO_T}$ld_shlibs_GCJ" >&6; }
  test "$ld_shlibs_GCJ" = no && can_build_shared=no
  
  #
--- 21180,21187 ----
      esac
    fi
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ld_shlibs_GCJ" >&5
! $as_echo "$ld_shlibs_GCJ" >&6; }
  test "$ld_shlibs_GCJ" = no && can_build_shared=no
  
  #
***************
*** 23443,23458 ****
        # Test whether the compiler implicitly links with -lc since on some
        # systems, -lgcc has to come before -lc. If gcc already passes -lc
        # to ld, don't add -lc before -lgcc.
!       { echo "$as_me:$LINENO: checking whether -lc should be explicitly linked in" >&5
! echo $ECHO_N "checking whether -lc should be explicitly linked in... $ECHO_C" >&6; }
        $rm conftest*
        echo "$lt_simple_compile_test_code" > conftest.$ac_ext
  
!       if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
    (eval $ac_compile) 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } 2>conftest.err; then
          soname=conftest
          lib=conftest
          libobjs=conftest.$ac_objext
--- 21201,21216 ----
        # Test whether the compiler implicitly links with -lc since on some
        # systems, -lgcc has to come before -lc. If gcc already passes -lc
        # to ld, don't add -lc before -lgcc.
!       { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether -lc should be explicitly linked in" >&5
! $as_echo_n "checking whether -lc should be explicitly linked in... " >&6; }
        $rm conftest*
        echo "$lt_simple_compile_test_code" > conftest.$ac_ext
  
!       if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
    (eval $ac_compile) 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; } 2>conftest.err; then
          soname=conftest
          lib=conftest
          libobjs=conftest.$ac_objext
***************
*** 23466,23476 ****
          libname=conftest
          lt_save_allow_undefined_flag=$allow_undefined_flag_GCJ
          allow_undefined_flag_GCJ=
!         if { (eval echo "$as_me:$LINENO: \"$archive_cmds_GCJ 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1\"") >&5
    (eval $archive_cmds_GCJ 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1) 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }
          then
  	  archive_cmds_need_lc_GCJ=no
          else
--- 21224,21234 ----
          libname=conftest
          lt_save_allow_undefined_flag=$allow_undefined_flag_GCJ
          allow_undefined_flag_GCJ=
!         if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$archive_cmds_GCJ 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1\""; } >&5
    (eval $archive_cmds_GCJ 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1) 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }
          then
  	  archive_cmds_need_lc_GCJ=no
          else
***************
*** 23481,23496 ****
          cat conftest.err 1>&5
        fi
        $rm conftest*
!       { echo "$as_me:$LINENO: result: $archive_cmds_need_lc_GCJ" >&5
! echo "${ECHO_T}$archive_cmds_need_lc_GCJ" >&6; }
        ;;
      esac
    fi
    ;;
  esac
  
! { echo "$as_me:$LINENO: checking dynamic linker characteristics" >&5
! echo $ECHO_N "checking dynamic linker characteristics... $ECHO_C" >&6; }
  library_names_spec=
  libname_spec='lib$name'
  soname_spec=
--- 21239,21254 ----
          cat conftest.err 1>&5
        fi
        $rm conftest*
!       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $archive_cmds_need_lc_GCJ" >&5
! $as_echo "$archive_cmds_need_lc_GCJ" >&6; }
        ;;
      esac
    fi
    ;;
  esac
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking dynamic linker characteristics" >&5
! $as_echo_n "checking dynamic linker characteristics... " >&6; }
  library_names_spec=
  libname_spec='lib$name'
  soname_spec=
***************
*** 24051,24069 ****
    dynamic_linker=no
    ;;
  esac
! { echo "$as_me:$LINENO: result: $dynamic_linker" >&5
! echo "${ECHO_T}$dynamic_linker" >&6; }
  test "$dynamic_linker" = no && can_build_shared=no
  
! if test "${lt_cv_sys_lib_search_path_spec+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    lt_cv_sys_lib_search_path_spec="$sys_lib_search_path_spec"
  fi
  
  sys_lib_search_path_spec="$lt_cv_sys_lib_search_path_spec"
! if test "${lt_cv_sys_lib_dlsearch_path_spec+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    lt_cv_sys_lib_dlsearch_path_spec="$sys_lib_dlsearch_path_spec"
  fi
--- 21809,21827 ----
    dynamic_linker=no
    ;;
  esac
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $dynamic_linker" >&5
! $as_echo "$dynamic_linker" >&6; }
  test "$dynamic_linker" = no && can_build_shared=no
  
! if ${lt_cv_sys_lib_search_path_spec+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    lt_cv_sys_lib_search_path_spec="$sys_lib_search_path_spec"
  fi
  
  sys_lib_search_path_spec="$lt_cv_sys_lib_search_path_spec"
! if ${lt_cv_sys_lib_dlsearch_path_spec+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    lt_cv_sys_lib_dlsearch_path_spec="$sys_lib_dlsearch_path_spec"
  fi
***************
*** 24075,24082 ****
    variables_saved_for_relink="$variables_saved_for_relink GCC_EXEC_PREFIX COMPILER_PATH LIBRARY_PATH"
  fi
  
! { echo "$as_me:$LINENO: checking how to hardcode library paths into programs" >&5
! echo $ECHO_N "checking how to hardcode library paths into programs... $ECHO_C" >&6; }
  hardcode_action_GCJ=
  if test -n "$hardcode_libdir_flag_spec_GCJ" || \
     test -n "$runpath_var_GCJ" || \
--- 21833,21840 ----
    variables_saved_for_relink="$variables_saved_for_relink GCC_EXEC_PREFIX COMPILER_PATH LIBRARY_PATH"
  fi
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking how to hardcode library paths into programs" >&5
! $as_echo_n "checking how to hardcode library paths into programs... " >&6; }
  hardcode_action_GCJ=
  if test -n "$hardcode_libdir_flag_spec_GCJ" || \
     test -n "$runpath_var_GCJ" || \
***************
*** 24100,24107 ****
    # directories.
    hardcode_action_GCJ=unsupported
  fi
! { echo "$as_me:$LINENO: result: $hardcode_action_GCJ" >&5
! echo "${ECHO_T}$hardcode_action_GCJ" >&6; }
  
  if test "$hardcode_action_GCJ" = relink; then
    # Fast installation is not supported
--- 21858,21865 ----
    # directories.
    hardcode_action_GCJ=unsupported
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $hardcode_action_GCJ" >&5
! $as_echo "$hardcode_action_GCJ" >&6; }
  
  if test "$hardcode_action_GCJ" = relink; then
    # Fast installation is not supported
***************
*** 25024,25032 ****
  	;;
  
        *)
! 	{ { echo "$as_me:$LINENO: error: Unsupported tag name: $tagname" >&5
! echo "$as_me: error: Unsupported tag name: $tagname" >&2;}
!    { (exit 1); exit 1; }; }
  	;;
        esac
  
--- 22782,22788 ----
  	;;
  
        *)
! 	as_fn_error $? "Unsupported tag name: $tagname" "$LINENO" 5
  	;;
        esac
  
***************
*** 25044,25052 ****
      chmod +x "$ofile"
    else
      rm -f "${ofile}T"
!     { { echo "$as_me:$LINENO: error: unable to update list of available tagged configurations." >&5
! echo "$as_me: error: unable to update list of available tagged configurations." >&2;}
!    { (exit 1); exit 1; }; }
    fi
  fi
  
--- 22800,22806 ----
      chmod +x "$ofile"
    else
      rm -f "${ofile}T"
!     as_fn_error $? "unable to update list of available tagged configurations." "$LINENO" 5
    fi
  fi
  
***************
*** 25081,25096 ****
  
  
  # Checks for typedefs, structures, and compiler characteristics.
! { echo "$as_me:$LINENO: checking for an ANSI C-conforming const" >&5
! echo $ECHO_N "checking for an ANSI C-conforming const... $ECHO_C" >&6; }
! if test "${ac_cv_c_const+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  int
--- 22835,22846 ----
  
  
  # Checks for typedefs, structures, and compiler characteristics.
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for an ANSI C-conforming const" >&5
! $as_echo_n "checking for an ANSI C-conforming const... " >&6; }
! if ${ac_cv_c_const+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  int
***************
*** 25150,25247 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
    ac_cv_c_const=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_cv_c_const=no
  fi
- 
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_c_const" >&5
! echo "${ECHO_T}$ac_cv_c_const" >&6; }
  if test $ac_cv_c_const = no; then
  
! cat >>confdefs.h <<\_ACEOF
! #define const
! _ACEOF
  
  fi
  
! { echo "$as_me:$LINENO: checking for mode_t" >&5
! echo $ECHO_N "checking for mode_t... $ECHO_C" >&6; }
! if test "${ac_cv_type_mode_t+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
! /* end confdefs.h.  */
! $ac_includes_default
! typedef mode_t ac__type_new_;
! int
! main ()
! {
! if ((ac__type_new_ *) 0)
!   return 0;
! if (sizeof (ac__type_new_))
!   return 0;
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
!   ac_cv_type_mode_t=yes
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_cv_type_mode_t=no
! fi
  
- rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
- fi
- { echo "$as_me:$LINENO: result: $ac_cv_type_mode_t" >&5
- echo "${ECHO_T}$ac_cv_type_mode_t" >&6; }
- if test $ac_cv_type_mode_t = yes; then
-   :
  else
  
  cat >>confdefs.h <<_ACEOF
--- 22900,22923 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_compile "$LINENO"; then :
    ac_cv_c_const=yes
  else
!   ac_cv_c_const=no
  fi
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_const" >&5
! $as_echo "$ac_cv_c_const" >&6; }
  if test $ac_cv_c_const = no; then
  
! $as_echo "#define const /**/" >>confdefs.h
  
  fi
  
! ac_fn_c_check_type "$LINENO" "mode_t" "ac_cv_type_mode_t" "$ac_includes_default"
! if test "x$ac_cv_type_mode_t" = xyes; then :
  
  else
  
  cat >>confdefs.h <<_ACEOF
***************
*** 25250,25373 ****
  
  fi
  
! { echo "$as_me:$LINENO: checking for off_t" >&5
! echo $ECHO_N "checking for off_t... $ECHO_C" >&6; }
! if test "${ac_cv_type_off_t+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
! /* end confdefs.h.  */
! $ac_includes_default
! typedef off_t ac__type_new_;
! int
! main ()
! {
! if ((ac__type_new_ *) 0)
!   return 0;
! if (sizeof (ac__type_new_))
!   return 0;
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
!   ac_cv_type_off_t=yes
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_cv_type_off_t=no
! fi
  
- rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
- fi
- { echo "$as_me:$LINENO: result: $ac_cv_type_off_t" >&5
- echo "${ECHO_T}$ac_cv_type_off_t" >&6; }
- if test $ac_cv_type_off_t = yes; then
-   :
  else
  
  cat >>confdefs.h <<_ACEOF
! #define off_t long int
! _ACEOF
! 
! fi
! 
! { echo "$as_me:$LINENO: checking for size_t" >&5
! echo $ECHO_N "checking for size_t... $ECHO_C" >&6; }
! if test "${ac_cv_type_size_t+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
! /* end confdefs.h.  */
! $ac_includes_default
! typedef size_t ac__type_new_;
! int
! main ()
! {
! if ((ac__type_new_ *) 0)
!   return 0;
! if (sizeof (ac__type_new_))
!   return 0;
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
!   ac_cv_type_size_t=yes
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
  
- 	ac_cv_type_size_t=no
  fi
  
! rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
! fi
! { echo "$as_me:$LINENO: result: $ac_cv_type_size_t" >&5
! echo "${ECHO_T}$ac_cv_type_size_t" >&6; }
! if test $ac_cv_type_size_t = yes; then
!   :
  else
  
  cat >>confdefs.h <<_ACEOF
--- 22926,22945 ----
  
  fi
  
! ac_fn_c_check_type "$LINENO" "off_t" "ac_cv_type_off_t" "$ac_includes_default"
! if test "x$ac_cv_type_off_t" = xyes; then :
  
  else
  
  cat >>confdefs.h <<_ACEOF
! #define off_t long int
! _ACEOF
  
  fi
  
! ac_fn_c_check_type "$LINENO" "size_t" "ac_cv_type_size_t" "$ac_includes_default"
! if test "x$ac_cv_type_size_t" = xyes; then :
! 
  else
  
  cat >>confdefs.h <<_ACEOF
***************
*** 25378,25396 ****
  
  
  # Checks for library functions.
! { echo "$as_me:$LINENO: checking for working memcmp" >&5
! echo $ECHO_N "checking for working memcmp... $ECHO_C" >&6; }
! if test "${ac_cv_func_memcmp_working+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   if test "$cross_compiling" = yes; then
    ac_cv_func_memcmp_working=no
  else
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  $ac_includes_default
  int
--- 22950,22964 ----
  
  
  # Checks for library functions.
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for working memcmp" >&5
! $as_echo_n "checking for working memcmp... " >&6; }
! if ${ac_cv_func_memcmp_working+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
!   if test "$cross_compiling" = yes; then :
    ac_cv_func_memcmp_working=no
  else
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  $ac_includes_default
  int
***************
*** 25425,25466 ****
    return 0;
  }
  _ACEOF
! rm -f conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
!   { (case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_try") 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
    ac_cv_func_memcmp_working=yes
  else
!   echo "$as_me: program exited with status $ac_status" >&5
! echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! ( exit $ac_status )
! ac_cv_func_memcmp_working=no
  fi
! rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
  fi
  
- 
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_func_memcmp_working" >&5
! echo "${ECHO_T}$ac_cv_func_memcmp_working" >&6; }
  test $ac_cv_func_memcmp_working = no && case " $LIBOBJS " in
    *" memcmp.$ac_objext "* ) ;;
    *) LIBOBJS="$LIBOBJS memcmp.$ac_objext"
--- 22993,23010 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_run "$LINENO"; then :
    ac_cv_func_memcmp_working=yes
  else
!   ac_cv_func_memcmp_working=no
  fi
! rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
!   conftest.$ac_objext conftest.beam conftest.$ac_ext
  fi
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_memcmp_working" >&5
! $as_echo "$ac_cv_func_memcmp_working" >&6; }
  test $ac_cv_func_memcmp_working = no && case " $LIBOBJS " in
    *" memcmp.$ac_objext "* ) ;;
    *) LIBOBJS="$LIBOBJS memcmp.$ac_objext"
***************
*** 25470,25608 ****
  
  
  
- for ac_header in stdlib.h unistd.h
- do
- as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
- if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
-   { echo "$as_me:$LINENO: checking for $ac_header" >&5
- echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6; }
- if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
-   echo $ECHO_N "(cached) $ECHO_C" >&6
- fi
- ac_res=`eval echo '${'$as_ac_Header'}'`
- 	       { echo "$as_me:$LINENO: result: $ac_res" >&5
- echo "${ECHO_T}$ac_res" >&6; }
- else
-   # Is the header compilable?
- { echo "$as_me:$LINENO: checking $ac_header usability" >&5
- echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6; }
- cat >conftest.$ac_ext <<_ACEOF
- /* confdefs.h.  */
- _ACEOF
- cat confdefs.h >>conftest.$ac_ext
- cat >>conftest.$ac_ext <<_ACEOF
- /* end confdefs.h.  */
- $ac_includes_default
- #include <$ac_header>
- _ACEOF
- rm -f conftest.$ac_objext
- if { (ac_try="$ac_compile"
- case "(($ac_try" in
-   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-   *) ac_try_echo=$ac_try;;
- esac
- eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-   (eval "$ac_compile") 2>conftest.er1
-   ac_status=$?
-   grep -v '^ *+' conftest.er1 >conftest.err
-   rm -f conftest.er1
-   cat conftest.err >&5
-   echo "$as_me:$LINENO: \$? = $ac_status" >&5
-   (exit $ac_status); } && {
- 	 test -z "$ac_c_werror_flag" ||
- 	 test ! -s conftest.err
-        } && test -s conftest.$ac_objext; then
-   ac_header_compiler=yes
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
- 	ac_header_compiler=no
- fi
- 
- rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
- { echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
- echo "${ECHO_T}$ac_header_compiler" >&6; }
- 
- # Is the header present?
- { echo "$as_me:$LINENO: checking $ac_header presence" >&5
- echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6; }
- cat >conftest.$ac_ext <<_ACEOF
- /* confdefs.h.  */
- _ACEOF
- cat confdefs.h >>conftest.$ac_ext
- cat >>conftest.$ac_ext <<_ACEOF
- /* end confdefs.h.  */
- #include <$ac_header>
- _ACEOF
- if { (ac_try="$ac_cpp conftest.$ac_ext"
- case "(($ac_try" in
-   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-   *) ac_try_echo=$ac_try;;
- esac
- eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-   (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
-   ac_status=$?
-   grep -v '^ *+' conftest.er1 >conftest.err
-   rm -f conftest.er1
-   cat conftest.err >&5
-   echo "$as_me:$LINENO: \$? = $ac_status" >&5
-   (exit $ac_status); } >/dev/null && {
- 	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
- 	 test ! -s conftest.err
-        }; then
-   ac_header_preproc=yes
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
-   ac_header_preproc=no
- fi
- 
- rm -f conftest.err conftest.$ac_ext
- { echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
- echo "${ECHO_T}$ac_header_preproc" >&6; }
- 
- # So?  What about this header?
- case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
-   yes:no: )
-     { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
- echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
-     { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the compiler's result" >&5
- echo "$as_me: WARNING: $ac_header: proceeding with the compiler's result" >&2;}
-     ac_header_preproc=yes
-     ;;
-   no:yes:* )
-     { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
- echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
-     { echo "$as_me:$LINENO: WARNING: $ac_header:     check for missing prerequisite headers?" >&5
- echo "$as_me: WARNING: $ac_header:     check for missing prerequisite headers?" >&2;}
-     { echo "$as_me:$LINENO: WARNING: $ac_header: see the Autoconf documentation" >&5
- echo "$as_me: WARNING: $ac_header: see the Autoconf documentation" >&2;}
-     { echo "$as_me:$LINENO: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&5
- echo "$as_me: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&2;}
-     { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
- echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;}
-     { echo "$as_me:$LINENO: WARNING: $ac_header: in the future, the compiler will take precedence" >&5
- echo "$as_me: WARNING: $ac_header: in the future, the compiler will take precedence" >&2;}
- 
-     ;;
- esac
- { echo "$as_me:$LINENO: checking for $ac_header" >&5
- echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6; }
- if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
-   echo $ECHO_N "(cached) $ECHO_C" >&6
- else
-   eval "$as_ac_Header=\$ac_header_preproc"
- fi
- ac_res=`eval echo '${'$as_ac_Header'}'`
- 	       { echo "$as_me:$LINENO: result: $ac_res" >&5
- echo "${ECHO_T}$ac_res" >&6; }
  
! fi
! if test `eval echo '${'$as_ac_Header'}'` = yes; then
    cat >>confdefs.h <<_ACEOF
! #define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
  _ACEOF
  
  fi
--- 23014,23028 ----
  
  
  
  
!   for ac_header in $ac_header_list
! do :
!   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
! ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default
! "
! if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
    cat >>confdefs.h <<_ACEOF
! #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
  _ACEOF
  
  fi
***************
*** 25610,25721 ****
  done
  
  
- for ac_func in getpagesize
- do
- as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
- { echo "$as_me:$LINENO: checking for $ac_func" >&5
- echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6; }
- if { as_var=$as_ac_var; eval "test \"\${$as_var+set}\" = set"; }; then
-   echo $ECHO_N "(cached) $ECHO_C" >&6
- else
-   cat >conftest.$ac_ext <<_ACEOF
- /* confdefs.h.  */
- _ACEOF
- cat confdefs.h >>conftest.$ac_ext
- cat >>conftest.$ac_ext <<_ACEOF
- /* end confdefs.h.  */
- /* Define $ac_func to an innocuous variant, in case <limits.h> declares $ac_func.
-    For example, HP-UX 11i <limits.h> declares gettimeofday.  */
- #define $ac_func innocuous_$ac_func
- 
- /* System header to define __stub macros and hopefully few prototypes,
-     which can conflict with char $ac_func (); below.
-     Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
-     <limits.h> exists even on freestanding compilers.  */
  
- #ifdef __STDC__
- # include <limits.h>
- #else
- # include <assert.h>
- #endif
  
- #undef $ac_func
  
- /* Override any GCC internal prototype to avoid an error.
-    Use char because int might match the return type of a GCC
-    builtin and then its argument prototype would still apply.  */
- #ifdef __cplusplus
- extern "C"
- #endif
- char $ac_func ();
- /* The GNU C library defines this for functions which it implements
-     to always fail with ENOSYS.  Some functions are actually named
-     something starting with __ and the normal name is an alias.  */
- #if defined __stub_$ac_func || defined __stub___$ac_func
- choke me
- #endif
  
- int
- main ()
- {
- return $ac_func ();
-   ;
-   return 0;
- }
- _ACEOF
- rm -f conftest.$ac_objext conftest$ac_exeext
- if { (ac_try="$ac_link"
- case "(($ac_try" in
-   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-   *) ac_try_echo=$ac_try;;
- esac
- eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-   (eval "$ac_link") 2>conftest.er1
-   ac_status=$?
-   grep -v '^ *+' conftest.er1 >conftest.err
-   rm -f conftest.er1
-   cat conftest.err >&5
-   echo "$as_me:$LINENO: \$? = $ac_status" >&5
-   (exit $ac_status); } && {
- 	 test -z "$ac_c_werror_flag" ||
- 	 test ! -s conftest.err
-        } && test -s conftest$ac_exeext &&
-        $as_test_x conftest$ac_exeext; then
-   eval "$as_ac_var=yes"
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
  
- 	eval "$as_ac_var=no"
- fi
  
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
! fi
! ac_res=`eval echo '${'$as_ac_var'}'`
! 	       { echo "$as_me:$LINENO: result: $ac_res" >&5
! echo "${ECHO_T}$ac_res" >&6; }
! if test `eval echo '${'$as_ac_var'}'` = yes; then
    cat >>confdefs.h <<_ACEOF
! #define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
  _ACEOF
  
  fi
  done
  
! { echo "$as_me:$LINENO: checking for working mmap" >&5
! echo $ECHO_N "checking for working mmap... $ECHO_C" >&6; }
! if test "${ac_cv_func_mmap_fixed_mapped+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   if test "$cross_compiling" = yes; then
    ac_cv_func_mmap_fixed_mapped=no
  else
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  $ac_includes_default
  /* malloc might have been renamed as rpl_malloc. */
--- 23030,23061 ----
  done
  
  
  
  
  
  
  
  
! for ac_func in getpagesize
! do :
!   ac_fn_c_check_func "$LINENO" "getpagesize" "ac_cv_func_getpagesize"
! if test "x$ac_cv_func_getpagesize" = xyes; then :
    cat >>confdefs.h <<_ACEOF
! #define HAVE_GETPAGESIZE 1
  _ACEOF
  
  fi
  done
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for working mmap" >&5
! $as_echo_n "checking for working mmap... " >&6; }
! if ${ac_cv_func_mmap_fixed_mapped+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
!   if test "$cross_compiling" = yes; then :
    ac_cv_func_mmap_fixed_mapped=no
  else
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  $ac_includes_default
  /* malloc might have been renamed as rpl_malloc. */
***************
*** 25752,25762 ****
  
  /* This mess was copied from the GNU getpagesize.h.  */
  #ifndef HAVE_GETPAGESIZE
- /* Assume that all systems that can run configure have sys/param.h.  */
- # ifndef HAVE_SYS_PARAM_H
- #  define HAVE_SYS_PARAM_H 1
- # endif
- 
  # ifdef _SC_PAGESIZE
  #  define getpagesize() sysconf(_SC_PAGESIZE)
  # else /* no _SC_PAGESIZE */
--- 23092,23097 ----
***************
*** 25791,25798 ****
  main ()
  {
    char *data, *data2, *data3;
    int i, pagesize;
!   int fd;
  
    pagesize = getpagesize ();
  
--- 23126,23134 ----
  main ()
  {
    char *data, *data2, *data3;
+   const char *cdata2;
    int i, pagesize;
!   int fd, fd2;
  
    pagesize = getpagesize ();
  
***************
*** 25805,25831 ****
    umask (0);
    fd = creat ("conftest.mmap", 0600);
    if (fd < 0)
!     return 1;
    if (write (fd, data, pagesize) != pagesize)
!     return 1;
    close (fd);
  
    /* Next, try to mmap the file at a fixed address which already has
       something else allocated at it.  If we can, also make sure that
       we see the same garbage.  */
    fd = open ("conftest.mmap", O_RDWR);
    if (fd < 0)
!     return 1;
!   data2 = (char *) malloc (2 * pagesize);
!   if (!data2)
!     return 1;
!   data2 += (pagesize - ((long int) data2 & (pagesize - 1))) & (pagesize - 1);
    if (data2 != mmap (data2, pagesize, PROT_READ | PROT_WRITE,
  		     MAP_PRIVATE | MAP_FIXED, fd, 0L))
!     return 1;
    for (i = 0; i < pagesize; ++i)
      if (*(data + i) != *(data2 + i))
!       return 1;
  
    /* Finally, make sure that changes to the mapped area do not
       percolate back to the file as seen by read().  (This is a bug on
--- 23141,23181 ----
    umask (0);
    fd = creat ("conftest.mmap", 0600);
    if (fd < 0)
!     return 2;
    if (write (fd, data, pagesize) != pagesize)
!     return 3;
    close (fd);
  
+   /* Next, check that the tail of a page is zero-filled.  File must have
+      non-zero length, otherwise we risk SIGBUS for entire page.  */
+   fd2 = open ("conftest.txt", O_RDWR | O_CREAT | O_TRUNC, 0600);
+   if (fd2 < 0)
+     return 4;
+   cdata2 = "";
+   if (write (fd2, cdata2, 1) != 1)
+     return 5;
+   data2 = (char *) mmap (0, pagesize, PROT_READ | PROT_WRITE, MAP_SHARED, fd2, 0L);
+   if (data2 == MAP_FAILED)
+     return 6;
+   for (i = 0; i < pagesize; ++i)
+     if (*(data2 + i))
+       return 7;
+   close (fd2);
+   if (munmap (data2, pagesize))
+     return 8;
+ 
    /* Next, try to mmap the file at a fixed address which already has
       something else allocated at it.  If we can, also make sure that
       we see the same garbage.  */
    fd = open ("conftest.mmap", O_RDWR);
    if (fd < 0)
!     return 9;
    if (data2 != mmap (data2, pagesize, PROT_READ | PROT_WRITE,
  		     MAP_PRIVATE | MAP_FIXED, fd, 0L))
!     return 10;
    for (i = 0; i < pagesize; ++i)
      if (*(data + i) != *(data2 + i))
!       return 11;
  
    /* Finally, make sure that changes to the mapped area do not
       percolate back to the file as seen by read().  (This is a bug on
***************
*** 25834,26203 ****
      *(data2 + i) = *(data2 + i) + 1;
    data3 = (char *) malloc (pagesize);
    if (!data3)
!     return 1;
    if (read (fd, data3, pagesize) != pagesize)
!     return 1;
    for (i = 0; i < pagesize; ++i)
!     if (*(data + i) != *(data3 + i))
!       return 1;
!   close (fd);
!   return 0;
! }
! _ACEOF
! rm -f conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
!   { (case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_try") 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_func_mmap_fixed_mapped=yes
! else
!   echo "$as_me: program exited with status $ac_status" >&5
! echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! ( exit $ac_status )
! ac_cv_func_mmap_fixed_mapped=no
! fi
! rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
! fi
! 
! 
! fi
! { echo "$as_me:$LINENO: result: $ac_cv_func_mmap_fixed_mapped" >&5
! echo "${ECHO_T}$ac_cv_func_mmap_fixed_mapped" >&6; }
! if test $ac_cv_func_mmap_fixed_mapped = yes; then
! 
! cat >>confdefs.h <<\_ACEOF
! #define HAVE_MMAP 1
! _ACEOF
! 
! fi
! rm -f conftest.mmap
! 
! 
! for ac_func in vprintf
! do
! as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
! { echo "$as_me:$LINENO: checking for $ac_func" >&5
! echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6; }
! if { as_var=$as_ac_var; eval "test \"\${$as_var+set}\" = set"; }; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
! /* end confdefs.h.  */
! /* Define $ac_func to an innocuous variant, in case <limits.h> declares $ac_func.
!    For example, HP-UX 11i <limits.h> declares gettimeofday.  */
! #define $ac_func innocuous_$ac_func
! 
! /* System header to define __stub macros and hopefully few prototypes,
!     which can conflict with char $ac_func (); below.
!     Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
!     <limits.h> exists even on freestanding compilers.  */
! 
! #ifdef __STDC__
! # include <limits.h>
! #else
! # include <assert.h>
! #endif
! 
! #undef $ac_func
! 
! /* Override any GCC internal prototype to avoid an error.
!    Use char because int might match the return type of a GCC
!    builtin and then its argument prototype would still apply.  */
! #ifdef __cplusplus
! extern "C"
! #endif
! char $ac_func ();
! /* The GNU C library defines this for functions which it implements
!     to always fail with ENOSYS.  Some functions are actually named
!     something starting with __ and the normal name is an alias.  */
! #if defined __stub_$ac_func || defined __stub___$ac_func
! choke me
! #endif
! 
! int
! main ()
! {
! return $ac_func ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
!   eval "$as_ac_var=yes"
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	eval "$as_ac_var=no"
! fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
! fi
! ac_res=`eval echo '${'$as_ac_var'}'`
! 	       { echo "$as_me:$LINENO: result: $ac_res" >&5
! echo "${ECHO_T}$ac_res" >&6; }
! if test `eval echo '${'$as_ac_var'}'` = yes; then
!   cat >>confdefs.h <<_ACEOF
! #define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
! _ACEOF
! 
! { echo "$as_me:$LINENO: checking for _doprnt" >&5
! echo $ECHO_N "checking for _doprnt... $ECHO_C" >&6; }
! if test "${ac_cv_func__doprnt+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
! /* end confdefs.h.  */
! /* Define _doprnt to an innocuous variant, in case <limits.h> declares _doprnt.
!    For example, HP-UX 11i <limits.h> declares gettimeofday.  */
! #define _doprnt innocuous__doprnt
! 
! /* System header to define __stub macros and hopefully few prototypes,
!     which can conflict with char _doprnt (); below.
!     Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
!     <limits.h> exists even on freestanding compilers.  */
! 
! #ifdef __STDC__
! # include <limits.h>
! #else
! # include <assert.h>
! #endif
! 
! #undef _doprnt
! 
! /* Override any GCC internal prototype to avoid an error.
!    Use char because int might match the return type of a GCC
!    builtin and then its argument prototype would still apply.  */
! #ifdef __cplusplus
! extern "C"
! #endif
! char _doprnt ();
! /* The GNU C library defines this for functions which it implements
!     to always fail with ENOSYS.  Some functions are actually named
!     something starting with __ and the normal name is an alias.  */
! #if defined __stub__doprnt || defined __stub____doprnt
! choke me
! #endif
! 
! int
! main ()
! {
! return _doprnt ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
!   ac_cv_func__doprnt=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_cv_func__doprnt=no
! fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_func__doprnt" >&5
! echo "${ECHO_T}$ac_cv_func__doprnt" >&6; }
! if test $ac_cv_func__doprnt = yes; then
! 
! cat >>confdefs.h <<\_ACEOF
! #define HAVE_DOPRNT 1
! _ACEOF
! 
  fi
  
  fi
! done
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
  
  
  
! for ac_func in getcwd gettimeofday getwd memset munmap putenv realpath strcasecmp strchr strcspn strdup strerror strrchr strspn vsnprintf realpath mkstemp mktemp random rand
! do
! as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
! { echo "$as_me:$LINENO: checking for $ac_func" >&5
! echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6; }
! if { as_var=$as_ac_var; eval "test \"\${$as_var+set}\" = set"; }; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
  _ACEOF
- cat confdefs.h >>conftest.$ac_ext
- cat >>conftest.$ac_ext <<_ACEOF
- /* end confdefs.h.  */
- /* Define $ac_func to an innocuous variant, in case <limits.h> declares $ac_func.
-    For example, HP-UX 11i <limits.h> declares gettimeofday.  */
- #define $ac_func innocuous_$ac_func
- 
- /* System header to define __stub macros and hopefully few prototypes,
-     which can conflict with char $ac_func (); below.
-     Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
-     <limits.h> exists even on freestanding compilers.  */
- 
- #ifdef __STDC__
- # include <limits.h>
- #else
- # include <assert.h>
- #endif
- 
- #undef $ac_func
  
! /* Override any GCC internal prototype to avoid an error.
!    Use char because int might match the return type of a GCC
!    builtin and then its argument prototype would still apply.  */
! #ifdef __cplusplus
! extern "C"
! #endif
! char $ac_func ();
! /* The GNU C library defines this for functions which it implements
!     to always fail with ENOSYS.  Some functions are actually named
!     something starting with __ and the normal name is an alias.  */
! #if defined __stub_$ac_func || defined __stub___$ac_func
! choke me
! #endif
  
! int
! main ()
! {
! return $ac_func ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
!   eval "$as_ac_var=yes"
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
  
- 	eval "$as_ac_var=no"
  fi
  
- rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-       conftest$ac_exeext conftest.$ac_ext
  fi
! ac_res=`eval echo '${'$as_ac_var'}'`
! 	       { echo "$as_me:$LINENO: result: $ac_res" >&5
! echo "${ECHO_T}$ac_res" >&6; }
! if test `eval echo '${'$as_ac_var'}'` = yes; then
    cat >>confdefs.h <<_ACEOF
! #define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
  _ACEOF
  
  fi
  done
  
! { echo "$as_me:$LINENO: checking for cbrt in -lm" >&5
! echo $ECHO_N "checking for cbrt in -lm... $ECHO_C" >&6; }
! if test "${ac_cv_lib_m_cbrt+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-lm  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
--- 23184,23257 ----
      *(data2 + i) = *(data2 + i) + 1;
    data3 = (char *) malloc (pagesize);
    if (!data3)
!     return 12;
    if (read (fd, data3, pagesize) != pagesize)
!     return 13;
    for (i = 0; i < pagesize; ++i)
!     if (*(data + i) != *(data3 + i))
!       return 14;
!   close (fd);
!   return 0;
! }
! _ACEOF
! if ac_fn_c_try_run "$LINENO"; then :
!   ac_cv_func_mmap_fixed_mapped=yes
  else
!   ac_cv_func_mmap_fixed_mapped=no
  fi
! rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
!   conftest.$ac_objext conftest.beam conftest.$ac_ext
  fi
  
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_mmap_fixed_mapped" >&5
! $as_echo "$ac_cv_func_mmap_fixed_mapped" >&6; }
! if test $ac_cv_func_mmap_fixed_mapped = yes; then
  
+ $as_echo "#define HAVE_MMAP 1" >>confdefs.h
  
+ fi
+ rm -f conftest.mmap conftest.txt
  
! for ac_func in vprintf
! do :
!   ac_fn_c_check_func "$LINENO" "vprintf" "ac_cv_func_vprintf"
! if test "x$ac_cv_func_vprintf" = xyes; then :
!   cat >>confdefs.h <<_ACEOF
! #define HAVE_VPRINTF 1
  _ACEOF
  
! ac_fn_c_check_func "$LINENO" "_doprnt" "ac_cv_func__doprnt"
! if test "x$ac_cv_func__doprnt" = xyes; then :
  
! $as_echo "#define HAVE_DOPRNT 1" >>confdefs.h
  
  fi
  
  fi
! done
! 
! 
! for ac_func in getcwd gettimeofday getwd memset munmap putenv realpath strcasecmp strchr strcspn strdup strerror strrchr strspn vsnprintf realpath mkstemp mktemp random rand
! do :
!   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
! ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
! if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
    cat >>confdefs.h <<_ACEOF
! #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
  _ACEOF
  
  fi
  done
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for cbrt in -lm" >&5
! $as_echo_n "checking for cbrt in -lm... " >&6; }
! if ${ac_cv_lib_m_cbrt+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-lm  $LIBS"
! cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
***************
*** 26215,26272 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
    ac_cv_lib_m_cbrt=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_cv_lib_m_cbrt=no
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_lib_m_cbrt" >&5
! echo "${ECHO_T}$ac_cv_lib_m_cbrt" >&6; }
! if test $ac_cv_lib_m_cbrt = yes; then
  
! cat >>confdefs.h <<\_ACEOF
! #define HAVE_CBRT 1
! _ACEOF
  
  fi
  
! { echo "$as_me:$LINENO: checking for hypot in -lm" >&5
! echo $ECHO_N "checking for hypot in -lm... $ECHO_C" >&6; }
! if test "${ac_cv_lib_m_hypot+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-lm  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
--- 23269,23299 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
    ac_cv_lib_m_cbrt=yes
  else
!   ac_cv_lib_m_cbrt=no
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_m_cbrt" >&5
! $as_echo "$ac_cv_lib_m_cbrt" >&6; }
! if test "x$ac_cv_lib_m_cbrt" = xyes; then :
  
! $as_echo "#define HAVE_CBRT 1" >>confdefs.h
  
  fi
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for hypot in -lm" >&5
! $as_echo_n "checking for hypot in -lm... " >&6; }
! if ${ac_cv_lib_m_hypot+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-lm  $LIBS"
! cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
***************
*** 26284,26326 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
    ac_cv_lib_m_hypot=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_cv_lib_m_hypot=no
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_lib_m_hypot" >&5
! echo "${ECHO_T}$ac_cv_lib_m_hypot" >&6; }
! if test $ac_cv_lib_m_hypot = yes; then
  
! cat >>confdefs.h <<\_ACEOF
! #define HAVE_HYPOT 1
! _ACEOF
  
  fi
  
--- 23311,23330 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
    ac_cv_lib_m_hypot=yes
  else
!   ac_cv_lib_m_hypot=no
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_m_hypot" >&5
! $as_echo "$ac_cv_lib_m_hypot" >&6; }
! if test "x$ac_cv_lib_m_hypot" = xyes; then :
  
! $as_echo "#define HAVE_HYPOT 1" >>confdefs.h
  
  fi
  
***************
*** 26333,26342 ****
  	if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}pkg-config", so it can be a program name with args.
  set dummy ${ac_tool_prefix}pkg-config; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_path_PKG_CONFIG+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    case $PKG_CONFIG in
    [\\/]* | ?:[\\/]*)
--- 23337,23346 ----
  	if test -n "$ac_tool_prefix"; then
    # Extract the first word of "${ac_tool_prefix}pkg-config", so it can be a program name with args.
  set dummy ${ac_tool_prefix}pkg-config; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_path_PKG_CONFIG+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    case $PKG_CONFIG in
    [\\/]* | ?:[\\/]*)
***************
*** 26348,26361 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_path_PKG_CONFIG="$as_dir/$ac_word$ac_exec_ext"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
    ;;
--- 23352,23365 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_path_PKG_CONFIG="$as_dir/$ac_word$ac_exec_ext"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
    ;;
***************
*** 26363,26373 ****
  fi
  PKG_CONFIG=$ac_cv_path_PKG_CONFIG
  if test -n "$PKG_CONFIG"; then
!   { echo "$as_me:$LINENO: result: $PKG_CONFIG" >&5
! echo "${ECHO_T}$PKG_CONFIG" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 23367,23377 ----
  fi
  PKG_CONFIG=$ac_cv_path_PKG_CONFIG
  if test -n "$PKG_CONFIG"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $PKG_CONFIG" >&5
! $as_echo "$PKG_CONFIG" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 26376,26385 ****
    ac_pt_PKG_CONFIG=$PKG_CONFIG
    # Extract the first word of "pkg-config", so it can be a program name with args.
  set dummy pkg-config; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_path_ac_pt_PKG_CONFIG+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    case $ac_pt_PKG_CONFIG in
    [\\/]* | ?:[\\/]*)
--- 23380,23389 ----
    ac_pt_PKG_CONFIG=$PKG_CONFIG
    # Extract the first word of "pkg-config", so it can be a program name with args.
  set dummy pkg-config; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_path_ac_pt_PKG_CONFIG+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    case $ac_pt_PKG_CONFIG in
    [\\/]* | ?:[\\/]*)
***************
*** 26391,26404 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_path_ac_pt_PKG_CONFIG="$as_dir/$ac_word$ac_exec_ext"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
    ;;
--- 23395,23408 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_path_ac_pt_PKG_CONFIG="$as_dir/$ac_word$ac_exec_ext"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
    ;;
***************
*** 26406,26416 ****
  fi
  ac_pt_PKG_CONFIG=$ac_cv_path_ac_pt_PKG_CONFIG
  if test -n "$ac_pt_PKG_CONFIG"; then
!   { echo "$as_me:$LINENO: result: $ac_pt_PKG_CONFIG" >&5
! echo "${ECHO_T}$ac_pt_PKG_CONFIG" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
    if test "x$ac_pt_PKG_CONFIG" = x; then
--- 23410,23420 ----
  fi
  ac_pt_PKG_CONFIG=$ac_cv_path_ac_pt_PKG_CONFIG
  if test -n "$ac_pt_PKG_CONFIG"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_pt_PKG_CONFIG" >&5
! $as_echo "$ac_pt_PKG_CONFIG" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
    if test "x$ac_pt_PKG_CONFIG" = x; then
***************
*** 26418,26429 ****
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { echo "$as_me:$LINENO: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&5
! echo "$as_me: WARNING: In the future, Autoconf will not detect cross-tools
! whose name does not start with the host triplet.  If you think this
! configuration is useful to you, please write to autoconf@gnu.org." >&2;}
  ac_tool_warned=yes ;;
  esac
      PKG_CONFIG=$ac_pt_PKG_CONFIG
--- 23422,23429 ----
    else
      case $cross_compiling:$ac_tool_warned in
  yes:)
! { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
! $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
  ac_tool_warned=yes ;;
  esac
      PKG_CONFIG=$ac_pt_PKG_CONFIG
***************
*** 26435,26467 ****
  fi
  if test -n "$PKG_CONFIG"; then
  	_pkg_min_version=0.9.0
! 	{ echo "$as_me:$LINENO: checking pkg-config is at least version $_pkg_min_version" >&5
! echo $ECHO_N "checking pkg-config is at least version $_pkg_min_version... $ECHO_C" >&6; }
  	if $PKG_CONFIG --atleast-pkgconfig-version $_pkg_min_version; then
! 		{ echo "$as_me:$LINENO: result: yes" >&5
! echo "${ECHO_T}yes" >&6; }
  	else
! 		{ echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  		PKG_CONFIG=""
  	fi
  
  fi
  
  pkg_failed=no
! { echo "$as_me:$LINENO: checking for REQUIRED" >&5
! echo $ECHO_N "checking for REQUIRED... $ECHO_C" >&6; }
  
  if test -n "$PKG_CONFIG"; then
      if test -n "$REQUIRED_CFLAGS"; then
          pkg_cv_REQUIRED_CFLAGS="$REQUIRED_CFLAGS"
      else
          if test -n "$PKG_CONFIG" && \
!     { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"glib-2.0 >= 2.6 gmodule-2.0 >= 2.4 libxml-2.0 gobject-2.0\"") >&5
    ($PKG_CONFIG --exists --print-errors "glib-2.0 >= 2.6 gmodule-2.0 >= 2.4 libxml-2.0 gobject-2.0") 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
    pkg_cv_REQUIRED_CFLAGS=`$PKG_CONFIG --cflags "glib-2.0 >= 2.6 gmodule-2.0 >= 2.4 libxml-2.0 gobject-2.0" 2>/dev/null`
  else
    pkg_failed=yes
--- 23435,23467 ----
  fi
  if test -n "$PKG_CONFIG"; then
  	_pkg_min_version=0.9.0
! 	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking pkg-config is at least version $_pkg_min_version" >&5
! $as_echo_n "checking pkg-config is at least version $_pkg_min_version... " >&6; }
  	if $PKG_CONFIG --atleast-pkgconfig-version $_pkg_min_version; then
! 		{ $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
! $as_echo "yes" >&6; }
  	else
! 		{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  		PKG_CONFIG=""
  	fi
  
  fi
  
  pkg_failed=no
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for REQUIRED" >&5
! $as_echo_n "checking for REQUIRED... " >&6; }
  
  if test -n "$PKG_CONFIG"; then
      if test -n "$REQUIRED_CFLAGS"; then
          pkg_cv_REQUIRED_CFLAGS="$REQUIRED_CFLAGS"
      else
          if test -n "$PKG_CONFIG" && \
!     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"glib-2.0 >= 2.6 gmodule-2.0 >= 2.4 libxml-2.0 gobject-2.0\""; } >&5
    ($PKG_CONFIG --exists --print-errors "glib-2.0 >= 2.6 gmodule-2.0 >= 2.4 libxml-2.0 gobject-2.0") 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then
    pkg_cv_REQUIRED_CFLAGS=`$PKG_CONFIG --cflags "glib-2.0 >= 2.6 gmodule-2.0 >= 2.4 libxml-2.0 gobject-2.0" 2>/dev/null`
  else
    pkg_failed=yes
***************
*** 26475,26485 ****
          pkg_cv_REQUIRED_LIBS="$REQUIRED_LIBS"
      else
          if test -n "$PKG_CONFIG" && \
!     { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"glib-2.0 >= 2.6 gmodule-2.0 >= 2.4 libxml-2.0 gobject-2.0\"") >&5
    ($PKG_CONFIG --exists --print-errors "glib-2.0 >= 2.6 gmodule-2.0 >= 2.4 libxml-2.0 gobject-2.0") 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
    pkg_cv_REQUIRED_LIBS=`$PKG_CONFIG --libs "glib-2.0 >= 2.6 gmodule-2.0 >= 2.4 libxml-2.0 gobject-2.0" 2>/dev/null`
  else
    pkg_failed=yes
--- 23475,23485 ----
          pkg_cv_REQUIRED_LIBS="$REQUIRED_LIBS"
      else
          if test -n "$PKG_CONFIG" && \
!     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"glib-2.0 >= 2.6 gmodule-2.0 >= 2.4 libxml-2.0 gobject-2.0\""; } >&5
    ($PKG_CONFIG --exists --print-errors "glib-2.0 >= 2.6 gmodule-2.0 >= 2.4 libxml-2.0 gobject-2.0") 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then
    pkg_cv_REQUIRED_LIBS=`$PKG_CONFIG --libs "glib-2.0 >= 2.6 gmodule-2.0 >= 2.4 libxml-2.0 gobject-2.0" 2>/dev/null`
  else
    pkg_failed=yes
***************
*** 26506,26523 ****
  	# Put the nasty error message in config.log where it belongs
  	echo "$REQUIRED_PKG_ERRORS" >&5
  
! 	{ { echo "$as_me:$LINENO: error: Package requirements (glib-2.0 >= 2.6 gmodule-2.0 >= 2.4 libxml-2.0 gobject-2.0) were not met:
! 
! $REQUIRED_PKG_ERRORS
! 
! Consider adjusting the PKG_CONFIG_PATH environment variable if you
! installed software in a non-standard prefix.
! 
! Alternatively, you may set the environment variables REQUIRED_CFLAGS
! and REQUIRED_LIBS to avoid the need to call pkg-config.
! See the pkg-config man page for more details.
! " >&5
! echo "$as_me: error: Package requirements (glib-2.0 >= 2.6 gmodule-2.0 >= 2.4 libxml-2.0 gobject-2.0) were not met:
  
  $REQUIRED_PKG_ERRORS
  
--- 23506,23512 ----
  	# Put the nasty error message in config.log where it belongs
  	echo "$REQUIRED_PKG_ERRORS" >&5
  
! 	as_fn_error $? "Package requirements (glib-2.0 >= 2.6 gmodule-2.0 >= 2.4 libxml-2.0 gobject-2.0) were not met:
  
  $REQUIRED_PKG_ERRORS
  
***************
*** 26527,26546 ****
  Alternatively, you may set the environment variables REQUIRED_CFLAGS
  and REQUIRED_LIBS to avoid the need to call pkg-config.
  See the pkg-config man page for more details.
! " >&2;}
!    { (exit 1); exit 1; }; }
  elif test $pkg_failed = untried; then
! 	{ { echo "$as_me:$LINENO: error: The pkg-config script could not be found or is too old.  Make sure it
! is in your PATH or set the PKG_CONFIG environment variable to the full
! path to pkg-config.
! 
! Alternatively, you may set the environment variables REQUIRED_CFLAGS
! and REQUIRED_LIBS to avoid the need to call pkg-config.
! See the pkg-config man page for more details.
! 
! To get pkg-config, see <http://pkg-config.freedesktop.org/>.
! See \`config.log' for more details." >&5
! echo "$as_me: error: The pkg-config script could not be found or is too old.  Make sure it
  is in your PATH or set the PKG_CONFIG environment variable to the full
  path to pkg-config.
  
--- 23516,23526 ----
  Alternatively, you may set the environment variables REQUIRED_CFLAGS
  and REQUIRED_LIBS to avoid the need to call pkg-config.
  See the pkg-config man page for more details.
! " "$LINENO" 5
  elif test $pkg_failed = untried; then
! 	{ { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
! $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
! as_fn_error $? "The pkg-config script could not be found or is too old.  Make sure it
  is in your PATH or set the PKG_CONFIG environment variable to the full
  path to pkg-config.
  
***************
*** 26549,26568 ****
  See the pkg-config man page for more details.
  
  To get pkg-config, see <http://pkg-config.freedesktop.org/>.
! See \`config.log' for more details." >&2;}
!    { (exit 1); exit 1; }; }
  else
  	REQUIRED_CFLAGS=$pkg_cv_REQUIRED_CFLAGS
  	REQUIRED_LIBS=$pkg_cv_REQUIRED_LIBS
!         { echo "$as_me:$LINENO: result: yes" >&5
! echo "${ECHO_T}yes" >&6; }
  	:
  fi
  PACKAGES_USED="$PACKAGES_USED glib-2.0 gmodule-2.0 libxml-2.0 gobject-2.0"
  
  # option to make im_* symlinks
  # Check whether --enable-links was given.
! if test "${enable_links+set}" = set; then
    enableval=$enable_links;
  fi
  
--- 23529,23547 ----
  See the pkg-config man page for more details.
  
  To get pkg-config, see <http://pkg-config.freedesktop.org/>.
! See \`config.log' for more details" "$LINENO" 5; }
  else
  	REQUIRED_CFLAGS=$pkg_cv_REQUIRED_CFLAGS
  	REQUIRED_LIBS=$pkg_cv_REQUIRED_LIBS
!         { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
! $as_echo "yes" >&6; }
  	:
  fi
  PACKAGES_USED="$PACKAGES_USED glib-2.0 gmodule-2.0 libxml-2.0 gobject-2.0"
  
  # option to make im_* symlinks
  # Check whether --enable-links was given.
! if test "${enable_links+set}" = set; then :
    enableval=$enable_links;
  fi
  
***************
*** 26592,26623 ****
  
  # option to eval without threads
  # Check whether --enable-threads was given.
! if test "${enable_threads+set}" = set; then
    enableval=$enable_threads;
  fi
  
  
  if test x"$enable_threads" != "xno"; then
  
! cat >>confdefs.h <<\_ACEOF
! #define HAVE_THREADS 1
! _ACEOF
  
  
  pkg_failed=no
! { echo "$as_me:$LINENO: checking for GTHREAD" >&5
! echo $ECHO_N "checking for GTHREAD... $ECHO_C" >&6; }
  
  if test -n "$PKG_CONFIG"; then
      if test -n "$GTHREAD_CFLAGS"; then
          pkg_cv_GTHREAD_CFLAGS="$GTHREAD_CFLAGS"
      else
          if test -n "$PKG_CONFIG" && \
!     { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"gthread-2.0\"") >&5
    ($PKG_CONFIG --exists --print-errors "gthread-2.0") 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
    pkg_cv_GTHREAD_CFLAGS=`$PKG_CONFIG --cflags "gthread-2.0" 2>/dev/null`
  else
    pkg_failed=yes
--- 23571,23600 ----
  
  # option to eval without threads
  # Check whether --enable-threads was given.
! if test "${enable_threads+set}" = set; then :
    enableval=$enable_threads;
  fi
  
  
  if test x"$enable_threads" != "xno"; then
  
! $as_echo "#define HAVE_THREADS 1" >>confdefs.h
  
  
  pkg_failed=no
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for GTHREAD" >&5
! $as_echo_n "checking for GTHREAD... " >&6; }
  
  if test -n "$PKG_CONFIG"; then
      if test -n "$GTHREAD_CFLAGS"; then
          pkg_cv_GTHREAD_CFLAGS="$GTHREAD_CFLAGS"
      else
          if test -n "$PKG_CONFIG" && \
!     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"gthread-2.0\""; } >&5
    ($PKG_CONFIG --exists --print-errors "gthread-2.0") 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then
    pkg_cv_GTHREAD_CFLAGS=`$PKG_CONFIG --cflags "gthread-2.0" 2>/dev/null`
  else
    pkg_failed=yes
***************
*** 26631,26641 ****
          pkg_cv_GTHREAD_LIBS="$GTHREAD_LIBS"
      else
          if test -n "$PKG_CONFIG" && \
!     { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"gthread-2.0\"") >&5
    ($PKG_CONFIG --exists --print-errors "gthread-2.0") 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
    pkg_cv_GTHREAD_LIBS=`$PKG_CONFIG --libs "gthread-2.0" 2>/dev/null`
  else
    pkg_failed=yes
--- 23608,23618 ----
          pkg_cv_GTHREAD_LIBS="$GTHREAD_LIBS"
      else
          if test -n "$PKG_CONFIG" && \
!     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"gthread-2.0\""; } >&5
    ($PKG_CONFIG --exists --print-errors "gthread-2.0") 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then
    pkg_cv_GTHREAD_LIBS=`$PKG_CONFIG --libs "gthread-2.0" 2>/dev/null`
  else
    pkg_failed=yes
***************
*** 26662,26679 ****
  	# Put the nasty error message in config.log where it belongs
  	echo "$GTHREAD_PKG_ERRORS" >&5
  
! 	{ { echo "$as_me:$LINENO: error: Package requirements (gthread-2.0) were not met:
! 
! $GTHREAD_PKG_ERRORS
! 
! Consider adjusting the PKG_CONFIG_PATH environment variable if you
! installed software in a non-standard prefix.
! 
! Alternatively, you may set the environment variables GTHREAD_CFLAGS
! and GTHREAD_LIBS to avoid the need to call pkg-config.
! See the pkg-config man page for more details.
! " >&5
! echo "$as_me: error: Package requirements (gthread-2.0) were not met:
  
  $GTHREAD_PKG_ERRORS
  
--- 23639,23645 ----
  	# Put the nasty error message in config.log where it belongs
  	echo "$GTHREAD_PKG_ERRORS" >&5
  
! 	as_fn_error $? "Package requirements (gthread-2.0) were not met:
  
  $GTHREAD_PKG_ERRORS
  
***************
*** 26683,26692 ****
  Alternatively, you may set the environment variables GTHREAD_CFLAGS
  and GTHREAD_LIBS to avoid the need to call pkg-config.
  See the pkg-config man page for more details.
! " >&2;}
!    { (exit 1); exit 1; }; }
  elif test $pkg_failed = untried; then
! 	{ { echo "$as_me:$LINENO: error: The pkg-config script could not be found or is too old.  Make sure it
  is in your PATH or set the PKG_CONFIG environment variable to the full
  path to pkg-config.
  
--- 23649,23659 ----
  Alternatively, you may set the environment variables GTHREAD_CFLAGS
  and GTHREAD_LIBS to avoid the need to call pkg-config.
  See the pkg-config man page for more details.
! " "$LINENO" 5
  elif test $pkg_failed = untried; then
! 	{ { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
! $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
! as_fn_error $? "The pkg-config script could not be found or is too old.  Make sure it
  is in your PATH or set the PKG_CONFIG environment variable to the full
  path to pkg-config.
  
***************
*** 26695,26717 ****
  See the pkg-config man page for more details.
  
  To get pkg-config, see <http://pkg-config.freedesktop.org/>.
! See \`config.log' for more details." >&5
! echo "$as_me: error: The pkg-config script could not be found or is too old.  Make sure it
! is in your PATH or set the PKG_CONFIG environment variable to the full
! path to pkg-config.
! 
! Alternatively, you may set the environment variables GTHREAD_CFLAGS
! and GTHREAD_LIBS to avoid the need to call pkg-config.
! See the pkg-config man page for more details.
! 
! To get pkg-config, see <http://pkg-config.freedesktop.org/>.
! See \`config.log' for more details." >&2;}
!    { (exit 1); exit 1; }; }
  else
  	GTHREAD_CFLAGS=$pkg_cv_GTHREAD_CFLAGS
  	GTHREAD_LIBS=$pkg_cv_GTHREAD_LIBS
!         { echo "$as_me:$LINENO: result: yes" >&5
! echo "${ECHO_T}yes" >&6; }
  	:
  fi
    PACKAGES_USED="$PACKAGES_USED gthread-2.0"
--- 23662,23673 ----
  See the pkg-config man page for more details.
  
  To get pkg-config, see <http://pkg-config.freedesktop.org/>.
! See \`config.log' for more details" "$LINENO" 5; }
  else
  	GTHREAD_CFLAGS=$pkg_cv_GTHREAD_CFLAGS
  	GTHREAD_LIBS=$pkg_cv_GTHREAD_LIBS
!         { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
! $as_echo "yes" >&6; }
  	:
  fi
    PACKAGES_USED="$PACKAGES_USED gthread-2.0"
***************
*** 26724,26730 ****
  # that with pkg-config
  
  # Check whether --with-fftw3 was given.
! if test "${with_fftw3+set}" = set; then
    withval=$with_fftw3;
  fi
  
--- 23680,23686 ----
  # that with pkg-config
  
  # Check whether --with-fftw3 was given.
! if test "${with_fftw3+set}" = set; then :
    withval=$with_fftw3;
  fi
  
***************
*** 26732,26750 ****
  if test x"$with_fftw3" != "xno"; then
  
  pkg_failed=no
! { echo "$as_me:$LINENO: checking for FFTW3" >&5
! echo $ECHO_N "checking for FFTW3... $ECHO_C" >&6; }
  
  if test -n "$PKG_CONFIG"; then
      if test -n "$FFTW3_CFLAGS"; then
          pkg_cv_FFTW3_CFLAGS="$FFTW3_CFLAGS"
      else
          if test -n "$PKG_CONFIG" && \
!     { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"fftw3\"") >&5
    ($PKG_CONFIG --exists --print-errors "fftw3") 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
    pkg_cv_FFTW3_CFLAGS=`$PKG_CONFIG --cflags "fftw3" 2>/dev/null`
  else
    pkg_failed=yes
--- 23688,23706 ----
  if test x"$with_fftw3" != "xno"; then
  
  pkg_failed=no
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for FFTW3" >&5
! $as_echo_n "checking for FFTW3... " >&6; }
  
  if test -n "$PKG_CONFIG"; then
      if test -n "$FFTW3_CFLAGS"; then
          pkg_cv_FFTW3_CFLAGS="$FFTW3_CFLAGS"
      else
          if test -n "$PKG_CONFIG" && \
!     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"fftw3\""; } >&5
    ($PKG_CONFIG --exists --print-errors "fftw3") 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then
    pkg_cv_FFTW3_CFLAGS=`$PKG_CONFIG --cflags "fftw3" 2>/dev/null`
  else
    pkg_failed=yes
***************
*** 26758,26768 ****
          pkg_cv_FFTW3_LIBS="$FFTW3_LIBS"
      else
          if test -n "$PKG_CONFIG" && \
!     { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"fftw3\"") >&5
    ($PKG_CONFIG --exists --print-errors "fftw3") 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
    pkg_cv_FFTW3_LIBS=`$PKG_CONFIG --libs "fftw3" 2>/dev/null`
  else
    pkg_failed=yes
--- 23714,23724 ----
          pkg_cv_FFTW3_LIBS="$FFTW3_LIBS"
      else
          if test -n "$PKG_CONFIG" && \
!     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"fftw3\""; } >&5
    ($PKG_CONFIG --exists --print-errors "fftw3") 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then
    pkg_cv_FFTW3_LIBS=`$PKG_CONFIG --libs "fftw3" 2>/dev/null`
  else
    pkg_failed=yes
***************
*** 26789,26812 ****
  	# Put the nasty error message in config.log where it belongs
  	echo "$FFTW3_PKG_ERRORS" >&5
  
! 	{ echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
!                 { echo "$as_me:$LINENO: WARNING: fftw3 not found; disabling fftw support" >&5
! echo "$as_me: WARNING: fftw3 not found; disabling fftw support" >&2;}
       with_fftw3=no
  elif test $pkg_failed = untried; then
! 	{ echo "$as_me:$LINENO: WARNING: fftw3 not found; disabling fftw support" >&5
! echo "$as_me: WARNING: fftw3 not found; disabling fftw support" >&2;}
       with_fftw3=no
  else
  	FFTW3_CFLAGS=$pkg_cv_FFTW3_CFLAGS
  	FFTW3_LIBS=$pkg_cv_FFTW3_LIBS
!         { echo "$as_me:$LINENO: result: yes" >&5
! echo "${ECHO_T}yes" >&6; }
  
! cat >>confdefs.h <<\_ACEOF
! #define HAVE_FFTW3 1
! _ACEOF
  
       with_fftw3=yes
       PACKAGES_USED="$PACKAGES_USED fftw3"
--- 23745,23766 ----
  	# Put the nasty error message in config.log where it belongs
  	echo "$FFTW3_PKG_ERRORS" >&5
  
! 	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
!                 { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: fftw3 not found; disabling fftw support" >&5
! $as_echo "$as_me: WARNING: fftw3 not found; disabling fftw support" >&2;}
       with_fftw3=no
  elif test $pkg_failed = untried; then
! 	{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: fftw3 not found; disabling fftw support" >&5
! $as_echo "$as_me: WARNING: fftw3 not found; disabling fftw support" >&2;}
       with_fftw3=no
  else
  	FFTW3_CFLAGS=$pkg_cv_FFTW3_CFLAGS
  	FFTW3_LIBS=$pkg_cv_FFTW3_LIBS
!         { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
! $as_echo "yes" >&6; }
  
! $as_echo "#define HAVE_FFTW3 1" >>confdefs.h
  
       with_fftw3=yes
       PACKAGES_USED="$PACKAGES_USED fftw3"
***************
*** 26818,26830 ****
  # --with-magickpackage=GraphicsMagick
  
  # Check whether --with-magick was given.
! if test "${with_magick+set}" = set; then
    withval=$with_magick;
  fi
  
  
  # Check whether --with-magickpackage was given.
! if test "${with_magickpackage+set}" = set; then
    withval=$with_magickpackage;
  fi
  
--- 23772,23784 ----
  # --with-magickpackage=GraphicsMagick
  
  # Check whether --with-magick was given.
! if test "${with_magick+set}" = set; then :
    withval=$with_magick;
  fi
  
  
  # Check whether --with-magickpackage was given.
! if test "${with_magickpackage+set}" = set; then :
    withval=$with_magickpackage;
  fi
  
***************
*** 26834,26852 ****
  if test x"$with_magickpackage" = "x"; then
  
  pkg_failed=no
! { echo "$as_me:$LINENO: checking for MAGICK_WAND" >&5
! echo $ECHO_N "checking for MAGICK_WAND... $ECHO_C" >&6; }
  
  if test -n "$PKG_CONFIG"; then
      if test -n "$MAGICK_WAND_CFLAGS"; then
          pkg_cv_MAGICK_WAND_CFLAGS="$MAGICK_WAND_CFLAGS"
      else
          if test -n "$PKG_CONFIG" && \
!     { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"MagickWand\"") >&5
    ($PKG_CONFIG --exists --print-errors "MagickWand") 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
    pkg_cv_MAGICK_WAND_CFLAGS=`$PKG_CONFIG --cflags "MagickWand" 2>/dev/null`
  else
    pkg_failed=yes
--- 23788,23806 ----
  if test x"$with_magickpackage" = "x"; then
  
  pkg_failed=no
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for MAGICK_WAND" >&5
! $as_echo_n "checking for MAGICK_WAND... " >&6; }
  
  if test -n "$PKG_CONFIG"; then
      if test -n "$MAGICK_WAND_CFLAGS"; then
          pkg_cv_MAGICK_WAND_CFLAGS="$MAGICK_WAND_CFLAGS"
      else
          if test -n "$PKG_CONFIG" && \
!     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"MagickWand\""; } >&5
    ($PKG_CONFIG --exists --print-errors "MagickWand") 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then
    pkg_cv_MAGICK_WAND_CFLAGS=`$PKG_CONFIG --cflags "MagickWand" 2>/dev/null`
  else
    pkg_failed=yes
***************
*** 26860,26870 ****
          pkg_cv_MAGICK_WAND_LIBS="$MAGICK_WAND_LIBS"
      else
          if test -n "$PKG_CONFIG" && \
!     { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"MagickWand\"") >&5
    ($PKG_CONFIG --exists --print-errors "MagickWand") 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
    pkg_cv_MAGICK_WAND_LIBS=`$PKG_CONFIG --libs "MagickWand" 2>/dev/null`
  else
    pkg_failed=yes
--- 23814,23824 ----
          pkg_cv_MAGICK_WAND_LIBS="$MAGICK_WAND_LIBS"
      else
          if test -n "$PKG_CONFIG" && \
!     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"MagickWand\""; } >&5
    ($PKG_CONFIG --exists --print-errors "MagickWand") 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then
    pkg_cv_MAGICK_WAND_LIBS=`$PKG_CONFIG --libs "MagickWand" 2>/dev/null`
  else
    pkg_failed=yes
***************
*** 26891,26913 ****
  	# Put the nasty error message in config.log where it belongs
  	echo "$MAGICK_WAND_PKG_ERRORS" >&5
  
! 	{ echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  
  pkg_failed=no
! { echo "$as_me:$LINENO: checking for IMAGE_MAGICK" >&5
! echo $ECHO_N "checking for IMAGE_MAGICK... $ECHO_C" >&6; }
  
  if test -n "$PKG_CONFIG"; then
      if test -n "$IMAGE_MAGICK_CFLAGS"; then
          pkg_cv_IMAGE_MAGICK_CFLAGS="$IMAGE_MAGICK_CFLAGS"
      else
          if test -n "$PKG_CONFIG" && \
!     { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"ImageMagick\"") >&5
    ($PKG_CONFIG --exists --print-errors "ImageMagick") 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
    pkg_cv_IMAGE_MAGICK_CFLAGS=`$PKG_CONFIG --cflags "ImageMagick" 2>/dev/null`
  else
    pkg_failed=yes
--- 23845,23867 ----
  	# Put the nasty error message in config.log where it belongs
  	echo "$MAGICK_WAND_PKG_ERRORS" >&5
  
! 	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  
  pkg_failed=no
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for IMAGE_MAGICK" >&5
! $as_echo_n "checking for IMAGE_MAGICK... " >&6; }
  
  if test -n "$PKG_CONFIG"; then
      if test -n "$IMAGE_MAGICK_CFLAGS"; then
          pkg_cv_IMAGE_MAGICK_CFLAGS="$IMAGE_MAGICK_CFLAGS"
      else
          if test -n "$PKG_CONFIG" && \
!     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"ImageMagick\""; } >&5
    ($PKG_CONFIG --exists --print-errors "ImageMagick") 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then
    pkg_cv_IMAGE_MAGICK_CFLAGS=`$PKG_CONFIG --cflags "ImageMagick" 2>/dev/null`
  else
    pkg_failed=yes
***************
*** 26921,26931 ****
          pkg_cv_IMAGE_MAGICK_LIBS="$IMAGE_MAGICK_LIBS"
      else
          if test -n "$PKG_CONFIG" && \
!     { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"ImageMagick\"") >&5
    ($PKG_CONFIG --exists --print-errors "ImageMagick") 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
    pkg_cv_IMAGE_MAGICK_LIBS=`$PKG_CONFIG --libs "ImageMagick" 2>/dev/null`
  else
    pkg_failed=yes
--- 23875,23885 ----
          pkg_cv_IMAGE_MAGICK_LIBS="$IMAGE_MAGICK_LIBS"
      else
          if test -n "$PKG_CONFIG" && \
!     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"ImageMagick\""; } >&5
    ($PKG_CONFIG --exists --print-errors "ImageMagick") 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then
    pkg_cv_IMAGE_MAGICK_LIBS=`$PKG_CONFIG --libs "ImageMagick" 2>/dev/null`
  else
    pkg_failed=yes
***************
*** 26952,26991 ****
  	# Put the nasty error message in config.log where it belongs
  	echo "$IMAGE_MAGICK_PKG_ERRORS" >&5
  
! 	{ echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
!                 { echo "$as_me:$LINENO: WARNING: neither MagickWand nor ImageMagick found; disabling Magick support" >&5
! echo "$as_me: WARNING: neither MagickWand nor ImageMagick found; disabling Magick support" >&2;}
        with_magick=no
  
  elif test $pkg_failed = untried; then
! 	{ echo "$as_me:$LINENO: WARNING: neither MagickWand nor ImageMagick found; disabling Magick support" >&5
! echo "$as_me: WARNING: neither MagickWand nor ImageMagick found; disabling Magick support" >&2;}
        with_magick=no
  
  else
  	IMAGE_MAGICK_CFLAGS=$pkg_cv_IMAGE_MAGICK_CFLAGS
  	IMAGE_MAGICK_LIBS=$pkg_cv_IMAGE_MAGICK_LIBS
!         { echo "$as_me:$LINENO: result: yes" >&5
! echo "${ECHO_T}yes" >&6; }
  	with_magickpackage=ImageMagick
  fi
  elif test $pkg_failed = untried; then
  
  pkg_failed=no
! { echo "$as_me:$LINENO: checking for IMAGE_MAGICK" >&5
! echo $ECHO_N "checking for IMAGE_MAGICK... $ECHO_C" >&6; }
  
  if test -n "$PKG_CONFIG"; then
      if test -n "$IMAGE_MAGICK_CFLAGS"; then
          pkg_cv_IMAGE_MAGICK_CFLAGS="$IMAGE_MAGICK_CFLAGS"
      else
          if test -n "$PKG_CONFIG" && \
!     { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"ImageMagick\"") >&5
    ($PKG_CONFIG --exists --print-errors "ImageMagick") 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
    pkg_cv_IMAGE_MAGICK_CFLAGS=`$PKG_CONFIG --cflags "ImageMagick" 2>/dev/null`
  else
    pkg_failed=yes
--- 23906,23945 ----
  	# Put the nasty error message in config.log where it belongs
  	echo "$IMAGE_MAGICK_PKG_ERRORS" >&5
  
! 	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
!                 { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: neither MagickWand nor ImageMagick found; disabling Magick support" >&5
! $as_echo "$as_me: WARNING: neither MagickWand nor ImageMagick found; disabling Magick support" >&2;}
        with_magick=no
  
  elif test $pkg_failed = untried; then
! 	{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: neither MagickWand nor ImageMagick found; disabling Magick support" >&5
! $as_echo "$as_me: WARNING: neither MagickWand nor ImageMagick found; disabling Magick support" >&2;}
        with_magick=no
  
  else
  	IMAGE_MAGICK_CFLAGS=$pkg_cv_IMAGE_MAGICK_CFLAGS
  	IMAGE_MAGICK_LIBS=$pkg_cv_IMAGE_MAGICK_LIBS
!         { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
! $as_echo "yes" >&6; }
  	with_magickpackage=ImageMagick
  fi
  elif test $pkg_failed = untried; then
  
  pkg_failed=no
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for IMAGE_MAGICK" >&5
! $as_echo_n "checking for IMAGE_MAGICK... " >&6; }
  
  if test -n "$PKG_CONFIG"; then
      if test -n "$IMAGE_MAGICK_CFLAGS"; then
          pkg_cv_IMAGE_MAGICK_CFLAGS="$IMAGE_MAGICK_CFLAGS"
      else
          if test -n "$PKG_CONFIG" && \
!     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"ImageMagick\""; } >&5
    ($PKG_CONFIG --exists --print-errors "ImageMagick") 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then
    pkg_cv_IMAGE_MAGICK_CFLAGS=`$PKG_CONFIG --cflags "ImageMagick" 2>/dev/null`
  else
    pkg_failed=yes
***************
*** 26999,27009 ****
          pkg_cv_IMAGE_MAGICK_LIBS="$IMAGE_MAGICK_LIBS"
      else
          if test -n "$PKG_CONFIG" && \
!     { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"ImageMagick\"") >&5
    ($PKG_CONFIG --exists --print-errors "ImageMagick") 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
    pkg_cv_IMAGE_MAGICK_LIBS=`$PKG_CONFIG --libs "ImageMagick" 2>/dev/null`
  else
    pkg_failed=yes
--- 23953,23963 ----
          pkg_cv_IMAGE_MAGICK_LIBS="$IMAGE_MAGICK_LIBS"
      else
          if test -n "$PKG_CONFIG" && \
!     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"ImageMagick\""; } >&5
    ($PKG_CONFIG --exists --print-errors "ImageMagick") 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then
    pkg_cv_IMAGE_MAGICK_LIBS=`$PKG_CONFIG --libs "ImageMagick" 2>/dev/null`
  else
    pkg_failed=yes
***************
*** 27030,27058 ****
  	# Put the nasty error message in config.log where it belongs
  	echo "$IMAGE_MAGICK_PKG_ERRORS" >&5
  
! 	{ echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
!                 { echo "$as_me:$LINENO: WARNING: neither MagickWand nor ImageMagick found; disabling Magick support" >&5
! echo "$as_me: WARNING: neither MagickWand nor ImageMagick found; disabling Magick support" >&2;}
        with_magick=no
  
  elif test $pkg_failed = untried; then
! 	{ echo "$as_me:$LINENO: WARNING: neither MagickWand nor ImageMagick found; disabling Magick support" >&5
! echo "$as_me: WARNING: neither MagickWand nor ImageMagick found; disabling Magick support" >&2;}
        with_magick=no
  
  else
  	IMAGE_MAGICK_CFLAGS=$pkg_cv_IMAGE_MAGICK_CFLAGS
  	IMAGE_MAGICK_LIBS=$pkg_cv_IMAGE_MAGICK_LIBS
!         { echo "$as_me:$LINENO: result: yes" >&5
! echo "${ECHO_T}yes" >&6; }
  	with_magickpackage=ImageMagick
  fi
  else
  	MAGICK_WAND_CFLAGS=$pkg_cv_MAGICK_WAND_CFLAGS
  	MAGICK_WAND_LIBS=$pkg_cv_MAGICK_WAND_LIBS
!         { echo "$as_me:$LINENO: result: yes" >&5
! echo "${ECHO_T}yes" >&6; }
  	with_magickpackage=MagickWand
  fi
  fi
--- 23984,24012 ----
  	# Put the nasty error message in config.log where it belongs
  	echo "$IMAGE_MAGICK_PKG_ERRORS" >&5
  
! 	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
!                 { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: neither MagickWand nor ImageMagick found; disabling Magick support" >&5
! $as_echo "$as_me: WARNING: neither MagickWand nor ImageMagick found; disabling Magick support" >&2;}
        with_magick=no
  
  elif test $pkg_failed = untried; then
! 	{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: neither MagickWand nor ImageMagick found; disabling Magick support" >&5
! $as_echo "$as_me: WARNING: neither MagickWand nor ImageMagick found; disabling Magick support" >&2;}
        with_magick=no
  
  else
  	IMAGE_MAGICK_CFLAGS=$pkg_cv_IMAGE_MAGICK_CFLAGS
  	IMAGE_MAGICK_LIBS=$pkg_cv_IMAGE_MAGICK_LIBS
!         { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
! $as_echo "yes" >&6; }
  	with_magickpackage=ImageMagick
  fi
  else
  	MAGICK_WAND_CFLAGS=$pkg_cv_MAGICK_WAND_CFLAGS
  	MAGICK_WAND_LIBS=$pkg_cv_MAGICK_WAND_LIBS
!         { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
! $as_echo "yes" >&6; }
  	with_magickpackage=MagickWand
  fi
  fi
***************
*** 27060,27078 ****
  if test x"$with_magick" != "xno"; then
  
  pkg_failed=no
! { echo "$as_me:$LINENO: checking for MAGICK" >&5
! echo $ECHO_N "checking for MAGICK... $ECHO_C" >&6; }
  
  if test -n "$PKG_CONFIG"; then
      if test -n "$MAGICK_CFLAGS"; then
          pkg_cv_MAGICK_CFLAGS="$MAGICK_CFLAGS"
      else
          if test -n "$PKG_CONFIG" && \
!     { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"\$with_magickpackage\"") >&5
    ($PKG_CONFIG --exists --print-errors "$with_magickpackage") 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
    pkg_cv_MAGICK_CFLAGS=`$PKG_CONFIG --cflags "$with_magickpackage" 2>/dev/null`
  else
    pkg_failed=yes
--- 24014,24032 ----
  if test x"$with_magick" != "xno"; then
  
  pkg_failed=no
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for MAGICK" >&5
! $as_echo_n "checking for MAGICK... " >&6; }
  
  if test -n "$PKG_CONFIG"; then
      if test -n "$MAGICK_CFLAGS"; then
          pkg_cv_MAGICK_CFLAGS="$MAGICK_CFLAGS"
      else
          if test -n "$PKG_CONFIG" && \
!     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"\$with_magickpackage\""; } >&5
    ($PKG_CONFIG --exists --print-errors "$with_magickpackage") 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then
    pkg_cv_MAGICK_CFLAGS=`$PKG_CONFIG --cflags "$with_magickpackage" 2>/dev/null`
  else
    pkg_failed=yes
***************
*** 27086,27096 ****
          pkg_cv_MAGICK_LIBS="$MAGICK_LIBS"
      else
          if test -n "$PKG_CONFIG" && \
!     { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"\$with_magickpackage\"") >&5
    ($PKG_CONFIG --exists --print-errors "$with_magickpackage") 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
    pkg_cv_MAGICK_LIBS=`$PKG_CONFIG --libs "$with_magickpackage" 2>/dev/null`
  else
    pkg_failed=yes
--- 24040,24050 ----
          pkg_cv_MAGICK_LIBS="$MAGICK_LIBS"
      else
          if test -n "$PKG_CONFIG" && \
!     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"\$with_magickpackage\""; } >&5
    ($PKG_CONFIG --exists --print-errors "$with_magickpackage") 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then
    pkg_cv_MAGICK_LIBS=`$PKG_CONFIG --libs "$with_magickpackage" 2>/dev/null`
  else
    pkg_failed=yes
***************
*** 27117,27142 ****
  	# Put the nasty error message in config.log where it belongs
  	echo "$MAGICK_PKG_ERRORS" >&5
  
! 	{ echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
!                 { echo "$as_me:$LINENO: WARNING: $with_magickpackage not found; disabling Magick support" >&5
! echo "$as_me: WARNING: $with_magickpackage not found; disabling Magick support" >&2;}
       with_magick=no
  
  elif test $pkg_failed = untried; then
! 	{ echo "$as_me:$LINENO: WARNING: $with_magickpackage not found; disabling Magick support" >&5
! echo "$as_me: WARNING: $with_magickpackage not found; disabling Magick support" >&2;}
       with_magick=no
  
  else
  	MAGICK_CFLAGS=$pkg_cv_MAGICK_CFLAGS
  	MAGICK_LIBS=$pkg_cv_MAGICK_LIBS
!         { echo "$as_me:$LINENO: result: yes" >&5
! echo "${ECHO_T}yes" >&6; }
  
! cat >>confdefs.h <<\_ACEOF
! #define HAVE_MAGICK 1
! _ACEOF
  
       with_magick=yes
       PACKAGES_USED="$PACKAGES_USED $with_magickpackage"
--- 24071,24094 ----
  	# Put the nasty error message in config.log where it belongs
  	echo "$MAGICK_PKG_ERRORS" >&5
  
! 	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
!                 { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $with_magickpackage not found; disabling Magick support" >&5
! $as_echo "$as_me: WARNING: $with_magickpackage not found; disabling Magick support" >&2;}
       with_magick=no
  
  elif test $pkg_failed = untried; then
! 	{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $with_magickpackage not found; disabling Magick support" >&5
! $as_echo "$as_me: WARNING: $with_magickpackage not found; disabling Magick support" >&2;}
       with_magick=no
  
  else
  	MAGICK_CFLAGS=$pkg_cv_MAGICK_CFLAGS
  	MAGICK_LIBS=$pkg_cv_MAGICK_LIBS
!         { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
! $as_echo "yes" >&6; }
  
! $as_echo "#define HAVE_MAGICK 1" >>confdefs.h
  
       with_magick=yes
       PACKAGES_USED="$PACKAGES_USED $with_magickpackage"
***************
*** 27149,27249 ****
    # graphicsmagick only has GetImageAttribute(), test for that as a fallback
    save_LIBS=$LIBS
    LIBS="$LIBS $MAGICK_LIBS"
! 
! 
! for ac_func in GetNextImageAttribute GetImageAttribute
! do
! as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
! { echo "$as_me:$LINENO: checking for $ac_func" >&5
! echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6; }
! if { as_var=$as_ac_var; eval "test \"\${$as_var+set}\" = set"; }; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
! /* end confdefs.h.  */
! /* Define $ac_func to an innocuous variant, in case <limits.h> declares $ac_func.
!    For example, HP-UX 11i <limits.h> declares gettimeofday.  */
! #define $ac_func innocuous_$ac_func
! 
! /* System header to define __stub macros and hopefully few prototypes,
!     which can conflict with char $ac_func (); below.
!     Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
!     <limits.h> exists even on freestanding compilers.  */
! 
! #ifdef __STDC__
! # include <limits.h>
! #else
! # include <assert.h>
! #endif
! 
! #undef $ac_func
! 
! /* Override any GCC internal prototype to avoid an error.
!    Use char because int might match the return type of a GCC
!    builtin and then its argument prototype would still apply.  */
! #ifdef __cplusplus
! extern "C"
! #endif
! char $ac_func ();
! /* The GNU C library defines this for functions which it implements
!     to always fail with ENOSYS.  Some functions are actually named
!     something starting with __ and the normal name is an alias.  */
! #if defined __stub_$ac_func || defined __stub___$ac_func
! choke me
! #endif
! 
! int
! main ()
! {
! return $ac_func ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
!   eval "$as_ac_var=yes"
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	eval "$as_ac_var=no"
! fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
! fi
! ac_res=`eval echo '${'$as_ac_var'}'`
! 	       { echo "$as_me:$LINENO: result: $ac_res" >&5
! echo "${ECHO_T}$ac_res" >&6; }
! if test `eval echo '${'$as_ac_var'}'` = yes; then
    cat >>confdefs.h <<_ACEOF
! #define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
  _ACEOF
  
! cat >>confdefs.h <<\_ACEOF
! #define HAVE_MAGICK_ATTR 1
! _ACEOF
  
  fi
  done
--- 24101,24116 ----
    # graphicsmagick only has GetImageAttribute(), test for that as a fallback
    save_LIBS=$LIBS
    LIBS="$LIBS $MAGICK_LIBS"
!   for ac_func in GetNextImageAttribute GetImageAttribute
! do :
!   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
! ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
! if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
    cat >>confdefs.h <<_ACEOF
! #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
  _ACEOF
  
! $as_echo "#define HAVE_MAGICK_ATTR 1" >>confdefs.h
  
  fi
  done
***************
*** 27254,27260 ****
  # liboil
  
  # Check whether --with-liboil was given.
! if test "${with_liboil+set}" = set; then
    withval=$with_liboil;
  fi
  
--- 24121,24127 ----
  # liboil
  
  # Check whether --with-liboil was given.
! if test "${with_liboil+set}" = set; then :
    withval=$with_liboil;
  fi
  
***************
*** 27262,27280 ****
  if test x"$with_liboil" != "xno"; then
  
  pkg_failed=no
! { echo "$as_me:$LINENO: checking for LIBOIL" >&5
! echo $ECHO_N "checking for LIBOIL... $ECHO_C" >&6; }
  
  if test -n "$PKG_CONFIG"; then
      if test -n "$LIBOIL_CFLAGS"; then
          pkg_cv_LIBOIL_CFLAGS="$LIBOIL_CFLAGS"
      else
          if test -n "$PKG_CONFIG" && \
!     { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"liboil-0.3\"") >&5
    ($PKG_CONFIG --exists --print-errors "liboil-0.3") 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
    pkg_cv_LIBOIL_CFLAGS=`$PKG_CONFIG --cflags "liboil-0.3" 2>/dev/null`
  else
    pkg_failed=yes
--- 24129,24147 ----
  if test x"$with_liboil" != "xno"; then
  
  pkg_failed=no
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for LIBOIL" >&5
! $as_echo_n "checking for LIBOIL... " >&6; }
  
  if test -n "$PKG_CONFIG"; then
      if test -n "$LIBOIL_CFLAGS"; then
          pkg_cv_LIBOIL_CFLAGS="$LIBOIL_CFLAGS"
      else
          if test -n "$PKG_CONFIG" && \
!     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"liboil-0.3\""; } >&5
    ($PKG_CONFIG --exists --print-errors "liboil-0.3") 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then
    pkg_cv_LIBOIL_CFLAGS=`$PKG_CONFIG --cflags "liboil-0.3" 2>/dev/null`
  else
    pkg_failed=yes
***************
*** 27288,27298 ****
          pkg_cv_LIBOIL_LIBS="$LIBOIL_LIBS"
      else
          if test -n "$PKG_CONFIG" && \
!     { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"liboil-0.3\"") >&5
    ($PKG_CONFIG --exists --print-errors "liboil-0.3") 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
    pkg_cv_LIBOIL_LIBS=`$PKG_CONFIG --libs "liboil-0.3" 2>/dev/null`
  else
    pkg_failed=yes
--- 24155,24165 ----
          pkg_cv_LIBOIL_LIBS="$LIBOIL_LIBS"
      else
          if test -n "$PKG_CONFIG" && \
!     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"liboil-0.3\""; } >&5
    ($PKG_CONFIG --exists --print-errors "liboil-0.3") 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then
    pkg_cv_LIBOIL_LIBS=`$PKG_CONFIG --libs "liboil-0.3" 2>/dev/null`
  else
    pkg_failed=yes
***************
*** 27319,27344 ****
  	# Put the nasty error message in config.log where it belongs
  	echo "$LIBOIL_PKG_ERRORS" >&5
  
! 	{ echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
!                 { echo "$as_me:$LINENO: WARNING: liboil not found; disabling liboil support" >&5
! echo "$as_me: WARNING: liboil not found; disabling liboil support" >&2;}
       with_liboil=no
  
  elif test $pkg_failed = untried; then
! 	{ echo "$as_me:$LINENO: WARNING: liboil not found; disabling liboil support" >&5
! echo "$as_me: WARNING: liboil not found; disabling liboil support" >&2;}
       with_liboil=no
  
  else
  	LIBOIL_CFLAGS=$pkg_cv_LIBOIL_CFLAGS
  	LIBOIL_LIBS=$pkg_cv_LIBOIL_LIBS
!         { echo "$as_me:$LINENO: result: yes" >&5
! echo "${ECHO_T}yes" >&6; }
  
! cat >>confdefs.h <<\_ACEOF
! #define HAVE_LIBOIL 1
! _ACEOF
  
       with_liboil=yes
       PACKAGES_USED="$PACKAGES_USED liboil-0.3"
--- 24186,24209 ----
  	# Put the nasty error message in config.log where it belongs
  	echo "$LIBOIL_PKG_ERRORS" >&5
  
! 	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
!                 { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: liboil not found; disabling liboil support" >&5
! $as_echo "$as_me: WARNING: liboil not found; disabling liboil support" >&2;}
       with_liboil=no
  
  elif test $pkg_failed = untried; then
! 	{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: liboil not found; disabling liboil support" >&5
! $as_echo "$as_me: WARNING: liboil not found; disabling liboil support" >&2;}
       with_liboil=no
  
  else
  	LIBOIL_CFLAGS=$pkg_cv_LIBOIL_CFLAGS
  	LIBOIL_LIBS=$pkg_cv_LIBOIL_LIBS
!         { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
! $as_echo "yes" >&6; }
  
! $as_echo "#define HAVE_LIBOIL 1" >>confdefs.h
  
       with_liboil=yes
       PACKAGES_USED="$PACKAGES_USED liboil-0.3"
***************
*** 27348,27354 ****
  # lcms
  
  # Check whether --with-lcms was given.
! if test "${with_lcms+set}" = set; then
    withval=$with_lcms;
  fi
  
--- 24213,24219 ----
  # lcms
  
  # Check whether --with-lcms was given.
! if test "${with_lcms+set}" = set; then :
    withval=$with_lcms;
  fi
  
***************
*** 27356,27374 ****
  if test x"$with_lcms" != "xno"; then
  
  pkg_failed=no
! { echo "$as_me:$LINENO: checking for LCMS" >&5
! echo $ECHO_N "checking for LCMS... $ECHO_C" >&6; }
  
  if test -n "$PKG_CONFIG"; then
      if test -n "$LCMS_CFLAGS"; then
          pkg_cv_LCMS_CFLAGS="$LCMS_CFLAGS"
      else
          if test -n "$PKG_CONFIG" && \
!     { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"lcms\"") >&5
    ($PKG_CONFIG --exists --print-errors "lcms") 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
    pkg_cv_LCMS_CFLAGS=`$PKG_CONFIG --cflags "lcms" 2>/dev/null`
  else
    pkg_failed=yes
--- 24221,24239 ----
  if test x"$with_lcms" != "xno"; then
  
  pkg_failed=no
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for LCMS" >&5
! $as_echo_n "checking for LCMS... " >&6; }
  
  if test -n "$PKG_CONFIG"; then
      if test -n "$LCMS_CFLAGS"; then
          pkg_cv_LCMS_CFLAGS="$LCMS_CFLAGS"
      else
          if test -n "$PKG_CONFIG" && \
!     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"lcms\""; } >&5
    ($PKG_CONFIG --exists --print-errors "lcms") 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then
    pkg_cv_LCMS_CFLAGS=`$PKG_CONFIG --cflags "lcms" 2>/dev/null`
  else
    pkg_failed=yes
***************
*** 27382,27392 ****
          pkg_cv_LCMS_LIBS="$LCMS_LIBS"
      else
          if test -n "$PKG_CONFIG" && \
!     { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"lcms\"") >&5
    ($PKG_CONFIG --exists --print-errors "lcms") 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
    pkg_cv_LCMS_LIBS=`$PKG_CONFIG --libs "lcms" 2>/dev/null`
  else
    pkg_failed=yes
--- 24247,24257 ----
          pkg_cv_LCMS_LIBS="$LCMS_LIBS"
      else
          if test -n "$PKG_CONFIG" && \
!     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"lcms\""; } >&5
    ($PKG_CONFIG --exists --print-errors "lcms") 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then
    pkg_cv_LCMS_LIBS=`$PKG_CONFIG --libs "lcms" 2>/dev/null`
  else
    pkg_failed=yes
***************
*** 27413,27438 ****
  	# Put the nasty error message in config.log where it belongs
  	echo "$LCMS_PKG_ERRORS" >&5
  
! 	{ echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
!                 { echo "$as_me:$LINENO: WARNING: lcms not found; disabling lcms support" >&5
! echo "$as_me: WARNING: lcms not found; disabling lcms support" >&2;}
       with_lcms=no
  
  elif test $pkg_failed = untried; then
! 	{ echo "$as_me:$LINENO: WARNING: lcms not found; disabling lcms support" >&5
! echo "$as_me: WARNING: lcms not found; disabling lcms support" >&2;}
       with_lcms=no
  
  else
  	LCMS_CFLAGS=$pkg_cv_LCMS_CFLAGS
  	LCMS_LIBS=$pkg_cv_LCMS_LIBS
!         { echo "$as_me:$LINENO: result: yes" >&5
! echo "${ECHO_T}yes" >&6; }
  
! cat >>confdefs.h <<\_ACEOF
! #define HAVE_LCMS 1
! _ACEOF
  
       with_lcms=yes
       PACKAGES_USED="$PACKAGES_USED lcms"
--- 24278,24301 ----
  	# Put the nasty error message in config.log where it belongs
  	echo "$LCMS_PKG_ERRORS" >&5
  
! 	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
!                 { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: lcms not found; disabling lcms support" >&5
! $as_echo "$as_me: WARNING: lcms not found; disabling lcms support" >&2;}
       with_lcms=no
  
  elif test $pkg_failed = untried; then
! 	{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: lcms not found; disabling lcms support" >&5
! $as_echo "$as_me: WARNING: lcms not found; disabling lcms support" >&2;}
       with_lcms=no
  
  else
  	LCMS_CFLAGS=$pkg_cv_LCMS_CFLAGS
  	LCMS_LIBS=$pkg_cv_LCMS_LIBS
!         { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
! $as_echo "yes" >&6; }
  
! $as_echo "#define HAVE_LCMS 1" >>confdefs.h
  
       with_lcms=yes
       PACKAGES_USED="$PACKAGES_USED lcms"
***************
*** 27442,27448 ****
  # OpenEXR
  
  # Check whether --with-OpenEXR was given.
! if test "${with_OpenEXR+set}" = set; then
    withval=$with_OpenEXR;
  fi
  
--- 24305,24311 ----
  # OpenEXR
  
  # Check whether --with-OpenEXR was given.
! if test "${with_OpenEXR+set}" = set; then :
    withval=$with_OpenEXR;
  fi
  
***************
*** 27451,27469 ****
  if test x"$with_OpenEXR" != "xno"; then
  
  pkg_failed=no
! { echo "$as_me:$LINENO: checking for OPENEXR" >&5
! echo $ECHO_N "checking for OPENEXR... $ECHO_C" >&6; }
  
  if test -n "$PKG_CONFIG"; then
      if test -n "$OPENEXR_CFLAGS"; then
          pkg_cv_OPENEXR_CFLAGS="$OPENEXR_CFLAGS"
      else
          if test -n "$PKG_CONFIG" && \
!     { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"OpenEXR >= 1.2.2\"") >&5
    ($PKG_CONFIG --exists --print-errors "OpenEXR >= 1.2.2") 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
    pkg_cv_OPENEXR_CFLAGS=`$PKG_CONFIG --cflags "OpenEXR >= 1.2.2" 2>/dev/null`
  else
    pkg_failed=yes
--- 24314,24332 ----
  if test x"$with_OpenEXR" != "xno"; then
  
  pkg_failed=no
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for OPENEXR" >&5
! $as_echo_n "checking for OPENEXR... " >&6; }
  
  if test -n "$PKG_CONFIG"; then
      if test -n "$OPENEXR_CFLAGS"; then
          pkg_cv_OPENEXR_CFLAGS="$OPENEXR_CFLAGS"
      else
          if test -n "$PKG_CONFIG" && \
!     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"OpenEXR >= 1.2.2\""; } >&5
    ($PKG_CONFIG --exists --print-errors "OpenEXR >= 1.2.2") 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then
    pkg_cv_OPENEXR_CFLAGS=`$PKG_CONFIG --cflags "OpenEXR >= 1.2.2" 2>/dev/null`
  else
    pkg_failed=yes
***************
*** 27477,27487 ****
          pkg_cv_OPENEXR_LIBS="$OPENEXR_LIBS"
      else
          if test -n "$PKG_CONFIG" && \
!     { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"OpenEXR >= 1.2.2\"") >&5
    ($PKG_CONFIG --exists --print-errors "OpenEXR >= 1.2.2") 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
    pkg_cv_OPENEXR_LIBS=`$PKG_CONFIG --libs "OpenEXR >= 1.2.2" 2>/dev/null`
  else
    pkg_failed=yes
--- 24340,24350 ----
          pkg_cv_OPENEXR_LIBS="$OPENEXR_LIBS"
      else
          if test -n "$PKG_CONFIG" && \
!     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"OpenEXR >= 1.2.2\""; } >&5
    ($PKG_CONFIG --exists --print-errors "OpenEXR >= 1.2.2") 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then
    pkg_cv_OPENEXR_LIBS=`$PKG_CONFIG --libs "OpenEXR >= 1.2.2" 2>/dev/null`
  else
    pkg_failed=yes
***************
*** 27508,27533 ****
  	# Put the nasty error message in config.log where it belongs
  	echo "$OPENEXR_PKG_ERRORS" >&5
  
! 	{ echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
!                 { echo "$as_me:$LINENO: WARNING: OpenEXR not found; disabling OpenEXR support" >&5
! echo "$as_me: WARNING: OpenEXR not found; disabling OpenEXR support" >&2;}
       with_OpenEXR=no
  
  elif test $pkg_failed = untried; then
! 	{ echo "$as_me:$LINENO: WARNING: OpenEXR not found; disabling OpenEXR support" >&5
! echo "$as_me: WARNING: OpenEXR not found; disabling OpenEXR support" >&2;}
       with_OpenEXR=no
  
  else
  	OPENEXR_CFLAGS=$pkg_cv_OPENEXR_CFLAGS
  	OPENEXR_LIBS=$pkg_cv_OPENEXR_LIBS
!         { echo "$as_me:$LINENO: result: yes" >&5
! echo "${ECHO_T}yes" >&6; }
  
! cat >>confdefs.h <<\_ACEOF
! #define HAVE_OPENEXR 1
! _ACEOF
  
       with_OpenEXR=yes
       PACKAGES_USED="$PACKAGES_USED OpenEXR"
--- 24371,24394 ----
  	# Put the nasty error message in config.log where it belongs
  	echo "$OPENEXR_PKG_ERRORS" >&5
  
! 	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
!                 { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: OpenEXR not found; disabling OpenEXR support" >&5
! $as_echo "$as_me: WARNING: OpenEXR not found; disabling OpenEXR support" >&2;}
       with_OpenEXR=no
  
  elif test $pkg_failed = untried; then
! 	{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: OpenEXR not found; disabling OpenEXR support" >&5
! $as_echo "$as_me: WARNING: OpenEXR not found; disabling OpenEXR support" >&2;}
       with_OpenEXR=no
  
  else
  	OPENEXR_CFLAGS=$pkg_cv_OPENEXR_CFLAGS
  	OPENEXR_LIBS=$pkg_cv_OPENEXR_LIBS
!         { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
! $as_echo "yes" >&6; }
  
! $as_echo "#define HAVE_OPENEXR 1" >>confdefs.h
  
       with_OpenEXR=yes
       PACKAGES_USED="$PACKAGES_USED OpenEXR"
***************
*** 27537,27543 ****
  # pangoft2
  
  # Check whether --with-pangoft2 was given.
! if test "${with_pangoft2+set}" = set; then
    withval=$with_pangoft2;
  fi
  
--- 24398,24404 ----
  # pangoft2
  
  # Check whether --with-pangoft2 was given.
! if test "${with_pangoft2+set}" = set; then :
    withval=$with_pangoft2;
  fi
  
***************
*** 27545,27563 ****
  if test x"$with_pangoft2" != "xno"; then
  
  pkg_failed=no
! { echo "$as_me:$LINENO: checking for PANGOFT2" >&5
! echo $ECHO_N "checking for PANGOFT2... $ECHO_C" >&6; }
  
  if test -n "$PKG_CONFIG"; then
      if test -n "$PANGOFT2_CFLAGS"; then
          pkg_cv_PANGOFT2_CFLAGS="$PANGOFT2_CFLAGS"
      else
          if test -n "$PKG_CONFIG" && \
!     { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"pangoft2\"") >&5
    ($PKG_CONFIG --exists --print-errors "pangoft2") 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
    pkg_cv_PANGOFT2_CFLAGS=`$PKG_CONFIG --cflags "pangoft2" 2>/dev/null`
  else
    pkg_failed=yes
--- 24406,24424 ----
  if test x"$with_pangoft2" != "xno"; then
  
  pkg_failed=no
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PANGOFT2" >&5
! $as_echo_n "checking for PANGOFT2... " >&6; }
  
  if test -n "$PKG_CONFIG"; then
      if test -n "$PANGOFT2_CFLAGS"; then
          pkg_cv_PANGOFT2_CFLAGS="$PANGOFT2_CFLAGS"
      else
          if test -n "$PKG_CONFIG" && \
!     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"pangoft2\""; } >&5
    ($PKG_CONFIG --exists --print-errors "pangoft2") 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then
    pkg_cv_PANGOFT2_CFLAGS=`$PKG_CONFIG --cflags "pangoft2" 2>/dev/null`
  else
    pkg_failed=yes
***************
*** 27571,27581 ****
          pkg_cv_PANGOFT2_LIBS="$PANGOFT2_LIBS"
      else
          if test -n "$PKG_CONFIG" && \
!     { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"pangoft2\"") >&5
    ($PKG_CONFIG --exists --print-errors "pangoft2") 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
    pkg_cv_PANGOFT2_LIBS=`$PKG_CONFIG --libs "pangoft2" 2>/dev/null`
  else
    pkg_failed=yes
--- 24432,24442 ----
          pkg_cv_PANGOFT2_LIBS="$PANGOFT2_LIBS"
      else
          if test -n "$PKG_CONFIG" && \
!     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"pangoft2\""; } >&5
    ($PKG_CONFIG --exists --print-errors "pangoft2") 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then
    pkg_cv_PANGOFT2_LIBS=`$PKG_CONFIG --libs "pangoft2" 2>/dev/null`
  else
    pkg_failed=yes
***************
*** 27602,27627 ****
  	# Put the nasty error message in config.log where it belongs
  	echo "$PANGOFT2_PKG_ERRORS" >&5
  
! 	{ echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
!                 { echo "$as_me:$LINENO: WARNING: pangoft2 not found; disabling pangoft2 support" >&5
! echo "$as_me: WARNING: pangoft2 not found; disabling pangoft2 support" >&2;}
       with_pangoft2=no
  
  elif test $pkg_failed = untried; then
! 	{ echo "$as_me:$LINENO: WARNING: pangoft2 not found; disabling pangoft2 support" >&5
! echo "$as_me: WARNING: pangoft2 not found; disabling pangoft2 support" >&2;}
       with_pangoft2=no
  
  else
  	PANGOFT2_CFLAGS=$pkg_cv_PANGOFT2_CFLAGS
  	PANGOFT2_LIBS=$pkg_cv_PANGOFT2_LIBS
!         { echo "$as_me:$LINENO: result: yes" >&5
! echo "${ECHO_T}yes" >&6; }
  
! cat >>confdefs.h <<\_ACEOF
! #define HAVE_PANGOFT2 1
! _ACEOF
  
       with_pangoft2=yes
       PACKAGES_USED="$PACKAGES_USED pangoft2"
--- 24463,24486 ----
  	# Put the nasty error message in config.log where it belongs
  	echo "$PANGOFT2_PKG_ERRORS" >&5
  
! 	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
!                 { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: pangoft2 not found; disabling pangoft2 support" >&5
! $as_echo "$as_me: WARNING: pangoft2 not found; disabling pangoft2 support" >&2;}
       with_pangoft2=no
  
  elif test $pkg_failed = untried; then
! 	{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: pangoft2 not found; disabling pangoft2 support" >&5
! $as_echo "$as_me: WARNING: pangoft2 not found; disabling pangoft2 support" >&2;}
       with_pangoft2=no
  
  else
  	PANGOFT2_CFLAGS=$pkg_cv_PANGOFT2_CFLAGS
  	PANGOFT2_LIBS=$pkg_cv_PANGOFT2_LIBS
!         { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
! $as_echo "yes" >&6; }
  
! $as_echo "#define HAVE_PANGOFT2 1" >>confdefs.h
  
       with_pangoft2=yes
       PACKAGES_USED="$PACKAGES_USED pangoft2"
***************
*** 27629,27640 ****
  fi
  
  # hmm, these don't have .pc files on ubuntu 5.10, how odd
! { echo "$as_me:$LINENO: checking for X" >&5
! echo $ECHO_N "checking for X... $ECHO_C" >&6; }
  
  
  # Check whether --with-x was given.
! if test "${with_x+set}" = set; then
    withval=$with_x;
  fi
  
--- 24488,24499 ----
  fi
  
  # hmm, these don't have .pc files on ubuntu 5.10, how odd
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for X" >&5
! $as_echo_n "checking for X... " >&6; }
  
  
  # Check whether --with-x was given.
! if test "${with_x+set}" = set; then :
    withval=$with_x;
  fi
  
***************
*** 27644,27654 ****
    have_x=disabled
  else
    case $x_includes,$x_libraries in #(
!     *\'*) { { echo "$as_me:$LINENO: error: Cannot use X directory names containing '" >&5
! echo "$as_me: error: Cannot use X directory names containing '" >&2;}
!    { (exit 1); exit 1; }; };; #(
!     *,NONE | NONE,*) if test "${ac_cv_have_x+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    # One or both of the vars are not set, and there is no cached value.
  ac_x_includes=no ac_x_libraries=no
--- 24503,24511 ----
    have_x=disabled
  else
    case $x_includes,$x_libraries in #(
!     *\'*) as_fn_error $? "cannot use X directory names containing '" "$LINENO" 5;; #(
!     *,NONE | NONE,*) if ${ac_cv_have_x+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    # One or both of the vars are not set, and there is no cached value.
  ac_x_includes=no ac_x_libraries=no
***************
*** 27664,27675 ****
  	@echo libdir='${LIBDIR}'
  _ACEOF
    if (export CC; ${XMKMF-xmkmf}) >/dev/null 2>/dev/null && test -f Makefile; then
!     # GNU make sometimes prints "make[1]: Entering...", which would confuse us.
      for ac_var in incroot usrlibdir libdir; do
        eval "ac_im_$ac_var=\`\${MAKE-make} $ac_var 2>/dev/null | sed -n 's/^$ac_var=//p'\`"
      done
      # Open Windows xmkmf reportedly sets LIBDIR instead of USRLIBDIR.
!     for ac_extension in a so sl; do
        if test ! -f "$ac_im_usrlibdir/libX11.$ac_extension" &&
  	 test -f "$ac_im_libdir/libX11.$ac_extension"; then
  	ac_im_usrlibdir=$ac_im_libdir; break
--- 24521,24532 ----
  	@echo libdir='${LIBDIR}'
  _ACEOF
    if (export CC; ${XMKMF-xmkmf}) >/dev/null 2>/dev/null && test -f Makefile; then
!     # GNU make sometimes prints "make[1]: Entering ...", which would confuse us.
      for ac_var in incroot usrlibdir libdir; do
        eval "ac_im_$ac_var=\`\${MAKE-make} $ac_var 2>/dev/null | sed -n 's/^$ac_var=//p'\`"
      done
      # Open Windows xmkmf reportedly sets LIBDIR instead of USRLIBDIR.
!     for ac_extension in a so sl dylib la dll; do
        if test ! -f "$ac_im_usrlibdir/libX11.$ac_extension" &&
  	 test -f "$ac_im_libdir/libX11.$ac_extension"; then
  	ac_im_usrlibdir=$ac_im_libdir; break
***************
*** 27683,27689 ****
  	*) test -f "$ac_im_incroot/X11/Xos.h" && ac_x_includes=$ac_im_incroot;;
      esac
      case $ac_im_usrlibdir in
! 	/usr/lib | /lib) ;;
  	*) test -d "$ac_im_usrlibdir" && ac_x_libraries=$ac_im_usrlibdir ;;
      esac
    fi
--- 24540,24546 ----
  	*) test -f "$ac_im_incroot/X11/Xos.h" && ac_x_includes=$ac_im_incroot;;
      esac
      case $ac_im_usrlibdir in
! 	/usr/lib | /usr/lib64 | /lib | /lib64) ;;
  	*) test -d "$ac_im_usrlibdir" && ac_x_libraries=$ac_im_usrlibdir ;;
      esac
    fi
***************
*** 27695,27715 ****
--- 24552,24576 ----
  # Check X11 before X11Rn because it is often a symlink to the current release.
  ac_x_header_dirs='
  /usr/X11/include
+ /usr/X11R7/include
  /usr/X11R6/include
  /usr/X11R5/include
  /usr/X11R4/include
  
  /usr/include/X11
+ /usr/include/X11R7
  /usr/include/X11R6
  /usr/include/X11R5
  /usr/include/X11R4
  
  /usr/local/X11/include
+ /usr/local/X11R7/include
  /usr/local/X11R6/include
  /usr/local/X11R5/include
  /usr/local/X11R4/include
  
  /usr/local/include/X11
+ /usr/local/include/X11R7
  /usr/local/include/X11R6
  /usr/local/include/X11R5
  /usr/local/include/X11R4
***************
*** 27731,27766 ****
  if test "$ac_x_includes" = no; then
    # Guess where to find include files, by looking for Xlib.h.
    # First, try using that file with no special directory specified.
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <X11/Xlib.h>
  _ACEOF
! if { (ac_try="$ac_cpp conftest.$ac_ext"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } >/dev/null && {
! 	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        }; then
    # We can compile using X headers with no special include directory.
  ac_x_includes=
  else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
    for ac_dir in $ac_x_header_dirs; do
    if test -r "$ac_dir/X11/Xlib.h"; then
      ac_x_includes=$ac_dir
--- 24592,24605 ----
  if test "$ac_x_includes" = no; then
    # Guess where to find include files, by looking for Xlib.h.
    # First, try using that file with no special directory specified.
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <X11/Xlib.h>
  _ACEOF
! if ac_fn_c_try_cpp "$LINENO"; then :
    # We can compile using X headers with no special include directory.
  ac_x_includes=
  else
    for ac_dir in $ac_x_header_dirs; do
    if test -r "$ac_dir/X11/Xlib.h"; then
      ac_x_includes=$ac_dir
***************
*** 27768,27775 ****
    fi
  done
  fi
! 
! rm -f conftest.err conftest.$ac_ext
  fi # $ac_x_includes = no
  
  if test "$ac_x_libraries" = no; then
--- 24607,24613 ----
    fi
  done
  fi
! rm -f conftest.err conftest.i conftest.$ac_ext
  fi # $ac_x_includes = no
  
  if test "$ac_x_libraries" = no; then
***************
*** 27778,27788 ****
    # Don't add to $LIBS permanently.
    ac_save_LIBS=$LIBS
    LIBS="-lX11 $LIBS"
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <X11/Xlib.h>
  int
--- 24616,24622 ----
    # Don't add to $LIBS permanently.
    ac_save_LIBS=$LIBS
    LIBS="-lX11 $LIBS"
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <X11/Xlib.h>
  int
***************
*** 27793,27828 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
    LIBS=$ac_save_LIBS
  # We can link X programs with no special library path.
  ac_x_libraries=
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	LIBS=$ac_save_LIBS
! for ac_dir in `echo "$ac_x_includes $ac_x_header_dirs" | sed s/include/lib/g`
  do
    # Don't even attempt the hair of trying to link an X program!
!   for ac_extension in a so sl; do
      if test -r "$ac_dir/libX11.$ac_extension"; then
        ac_x_libraries=$ac_dir
        break 2
--- 24627,24642 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
    LIBS=$ac_save_LIBS
  # We can link X programs with no special library path.
  ac_x_libraries=
  else
!   LIBS=$ac_save_LIBS
! for ac_dir in `$as_echo "$ac_x_includes $ac_x_header_dirs" | sed s/include/lib/g`
  do
    # Don't even attempt the hair of trying to link an X program!
!   for ac_extension in a so sl dylib la dll; do
      if test -r "$ac_dir/libX11.$ac_extension"; then
        ac_x_libraries=$ac_dir
        break 2
***************
*** 27830,27838 ****
    done
  done
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  fi # $ac_x_libraries = no
  
  case $ac_x_includes,$ac_x_libraries in #(
--- 24644,24651 ----
    done
  done
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  fi # $ac_x_libraries = no
  
  case $ac_x_includes,$ac_x_libraries in #(
***************
*** 27853,27860 ****
  fi # $with_x != no
  
  if test "$have_x" != yes; then
!   { echo "$as_me:$LINENO: result: $have_x" >&5
! echo "${ECHO_T}$have_x" >&6; }
    no_x=yes
  else
    # If each of the values was on the command line, it overrides each guess.
--- 24666,24673 ----
  fi # $with_x != no
  
  if test "$have_x" != yes; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $have_x" >&5
! $as_echo "$have_x" >&6; }
    no_x=yes
  else
    # If each of the values was on the command line, it overrides each guess.
***************
*** 27864,27879 ****
    ac_cv_have_x="have_x=yes\
  	ac_x_includes='$x_includes'\
  	ac_x_libraries='$x_libraries'"
!   { echo "$as_me:$LINENO: result: libraries $x_libraries, headers $x_includes" >&5
! echo "${ECHO_T}libraries $x_libraries, headers $x_includes" >&6; }
  fi
  
  if test "$no_x" = yes; then
    # Not all programs may use this symbol, but it does not hurt to define it.
  
! cat >>confdefs.h <<\_ACEOF
! #define X_DISPLAY_MISSING 1
! _ACEOF
  
    X_CFLAGS= X_PRE_LIBS= X_LIBS= X_EXTRA_LIBS=
  else
--- 24677,24690 ----
    ac_cv_have_x="have_x=yes\
  	ac_x_includes='$x_includes'\
  	ac_x_libraries='$x_libraries'"
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: libraries $x_libraries, headers $x_includes" >&5
! $as_echo "libraries $x_libraries, headers $x_includes" >&6; }
  fi
  
  if test "$no_x" = yes; then
    # Not all programs may use this symbol, but it does not hurt to define it.
  
! $as_echo "#define X_DISPLAY_MISSING 1" >>confdefs.h
  
    X_CFLAGS= X_PRE_LIBS= X_LIBS= X_EXTRA_LIBS=
  else
***************
*** 27886,27901 ****
      X_LIBS="$X_LIBS -L$x_libraries"
      # For Solaris; some versions of Sun CC require a space after -R and
      # others require no space.  Words are not sufficient . . . .
!     { echo "$as_me:$LINENO: checking whether -R must be followed by a space" >&5
! echo $ECHO_N "checking whether -R must be followed by a space... $ECHO_C" >&6; }
      ac_xsave_LIBS=$LIBS; LIBS="$LIBS -R$x_libraries"
      ac_xsave_c_werror_flag=$ac_c_werror_flag
      ac_c_werror_flag=yes
!     cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  int
--- 24697,24708 ----
      X_LIBS="$X_LIBS -L$x_libraries"
      # For Solaris; some versions of Sun CC require a space after -R and
      # others require no space.  Words are not sufficient . . . .
!     { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether -R must be followed by a space" >&5
! $as_echo_n "checking whether -R must be followed by a space... " >&6; }
      ac_xsave_LIBS=$LIBS; LIBS="$LIBS -R$x_libraries"
      ac_xsave_c_werror_flag=$ac_c_werror_flag
      ac_c_werror_flag=yes
!     cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  int
***************
*** 27906,27987 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
         X_LIBS="$X_LIBS -R$x_libraries"
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	LIBS="$ac_xsave_LIBS -R $x_libraries"
!        cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  int
  main ()
  {
  
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
!   { echo "$as_me:$LINENO: result: yes" >&5
! echo "${ECHO_T}yes" >&6; }
  	  X_LIBS="$X_LIBS -R $x_libraries"
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	{ echo "$as_me:$LINENO: result: neither works" >&5
! echo "${ECHO_T}neither works" >&6; }
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
      ac_c_werror_flag=$ac_xsave_c_werror_flag
      LIBS=$ac_xsave_LIBS
    fi
--- 24713,24748 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
         X_LIBS="$X_LIBS -R$x_libraries"
  else
!   LIBS="$ac_xsave_LIBS -R $x_libraries"
!        cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  int
  main ()
  {
  
!   ;
!   return 0;
! }
! _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
! $as_echo "yes" >&6; }
  	  X_LIBS="$X_LIBS -R $x_libraries"
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: neither works" >&5
! $as_echo "neither works" >&6; }
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
      ac_c_werror_flag=$ac_xsave_c_werror_flag
      LIBS=$ac_xsave_LIBS
    fi
***************
*** 27997,28007 ****
      # libraries were built with DECnet support.  And Karl Berry says
      # the Alpha needs dnet_stub (dnet does not exist).
      ac_xsave_LIBS="$LIBS"; LIBS="$LIBS $X_LIBS -lX11"
!     cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
--- 24758,24764 ----
      # libraries were built with DECnet support.  And Karl Berry says
      # the Alpha needs dnet_stub (dnet does not exist).
      ac_xsave_LIBS="$LIBS"; LIBS="$LIBS $X_LIBS -lX11"
!     cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
***************
*** 28019,28059 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
!   :
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
  
! 	{ echo "$as_me:$LINENO: checking for dnet_ntoa in -ldnet" >&5
! echo $ECHO_N "checking for dnet_ntoa in -ldnet... $ECHO_C" >&6; }
! if test "${ac_cv_lib_dnet_dnet_ntoa+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-ldnet  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
--- 24776,24792 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
  
! else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dnet_ntoa in -ldnet" >&5
! $as_echo_n "checking for dnet_ntoa in -ldnet... " >&6; }
! if ${ac_cv_lib_dnet_dnet_ntoa+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-ldnet  $LIBS"
! cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
***************
*** 28071,28125 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
    ac_cv_lib_dnet_dnet_ntoa=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_cv_lib_dnet_dnet_ntoa=no
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_lib_dnet_dnet_ntoa" >&5
! echo "${ECHO_T}$ac_cv_lib_dnet_dnet_ntoa" >&6; }
! if test $ac_cv_lib_dnet_dnet_ntoa = yes; then
    X_EXTRA_LIBS="$X_EXTRA_LIBS -ldnet"
  fi
  
      if test $ac_cv_lib_dnet_dnet_ntoa = no; then
!       { echo "$as_me:$LINENO: checking for dnet_ntoa in -ldnet_stub" >&5
! echo $ECHO_N "checking for dnet_ntoa in -ldnet_stub... $ECHO_C" >&6; }
! if test "${ac_cv_lib_dnet_stub_dnet_ntoa+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-ldnet_stub  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
--- 24804,24833 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
    ac_cv_lib_dnet_dnet_ntoa=yes
  else
!   ac_cv_lib_dnet_dnet_ntoa=no
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dnet_dnet_ntoa" >&5
! $as_echo "$ac_cv_lib_dnet_dnet_ntoa" >&6; }
! if test "x$ac_cv_lib_dnet_dnet_ntoa" = xyes; then :
    X_EXTRA_LIBS="$X_EXTRA_LIBS -ldnet"
  fi
  
      if test $ac_cv_lib_dnet_dnet_ntoa = no; then
!       { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dnet_ntoa in -ldnet_stub" >&5
! $as_echo_n "checking for dnet_ntoa in -ldnet_stub... " >&6; }
! if ${ac_cv_lib_dnet_stub_dnet_ntoa+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-ldnet_stub  $LIBS"
! cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
***************
*** 28137,28183 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
    ac_cv_lib_dnet_stub_dnet_ntoa=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_cv_lib_dnet_stub_dnet_ntoa=no
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_lib_dnet_stub_dnet_ntoa" >&5
! echo "${ECHO_T}$ac_cv_lib_dnet_stub_dnet_ntoa" >&6; }
! if test $ac_cv_lib_dnet_stub_dnet_ntoa = yes; then
    X_EXTRA_LIBS="$X_EXTRA_LIBS -ldnet_stub"
  fi
  
      fi
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
      LIBS="$ac_xsave_LIBS"
  
      # msh@cis.ufl.edu says -lnsl (and -lsocket) are needed for his 386/AT,
--- 24845,24869 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
    ac_cv_lib_dnet_stub_dnet_ntoa=yes
  else
!   ac_cv_lib_dnet_stub_dnet_ntoa=no
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dnet_stub_dnet_ntoa" >&5
! $as_echo "$ac_cv_lib_dnet_stub_dnet_ntoa" >&6; }
! if test "x$ac_cv_lib_dnet_stub_dnet_ntoa" = xyes; then :
    X_EXTRA_LIBS="$X_EXTRA_LIBS -ldnet_stub"
  fi
  
      fi
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
      LIBS="$ac_xsave_LIBS"
  
      # msh@cis.ufl.edu says -lnsl (and -lsocket) are needed for his 386/AT,
***************
*** 28188,28288 ****
      # on Irix 5.2, according to T.E. Dickey.
      # The functions gethostbyname, getservbyname, and inet_addr are
      # in -lbsd on LynxOS 3.0.1/i386, according to Lars Hecking.
!     { echo "$as_me:$LINENO: checking for gethostbyname" >&5
! echo $ECHO_N "checking for gethostbyname... $ECHO_C" >&6; }
! if test "${ac_cv_func_gethostbyname+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
! /* end confdefs.h.  */
! /* Define gethostbyname to an innocuous variant, in case <limits.h> declares gethostbyname.
!    For example, HP-UX 11i <limits.h> declares gettimeofday.  */
! #define gethostbyname innocuous_gethostbyname
! 
! /* System header to define __stub macros and hopefully few prototypes,
!     which can conflict with char gethostbyname (); below.
!     Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
!     <limits.h> exists even on freestanding compilers.  */
! 
! #ifdef __STDC__
! # include <limits.h>
! #else
! # include <assert.h>
! #endif
! 
! #undef gethostbyname
! 
! /* Override any GCC internal prototype to avoid an error.
!    Use char because int might match the return type of a GCC
!    builtin and then its argument prototype would still apply.  */
! #ifdef __cplusplus
! extern "C"
! #endif
! char gethostbyname ();
! /* The GNU C library defines this for functions which it implements
!     to always fail with ENOSYS.  Some functions are actually named
!     something starting with __ and the normal name is an alias.  */
! #if defined __stub_gethostbyname || defined __stub___gethostbyname
! choke me
! #endif
! 
! int
! main ()
! {
! return gethostbyname ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
!   ac_cv_func_gethostbyname=yes
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_cv_func_gethostbyname=no
! fi
  
- rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-       conftest$ac_exeext conftest.$ac_ext
  fi
- { echo "$as_me:$LINENO: result: $ac_cv_func_gethostbyname" >&5
- echo "${ECHO_T}$ac_cv_func_gethostbyname" >&6; }
  
      if test $ac_cv_func_gethostbyname = no; then
!       { echo "$as_me:$LINENO: checking for gethostbyname in -lnsl" >&5
! echo $ECHO_N "checking for gethostbyname in -lnsl... $ECHO_C" >&6; }
! if test "${ac_cv_lib_nsl_gethostbyname+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-lnsl  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
--- 24874,24893 ----
      # on Irix 5.2, according to T.E. Dickey.
      # The functions gethostbyname, getservbyname, and inet_addr are
      # in -lbsd on LynxOS 3.0.1/i386, according to Lars Hecking.
!     ac_fn_c_check_func "$LINENO" "gethostbyname" "ac_cv_func_gethostbyname"
! if test "x$ac_cv_func_gethostbyname" = xyes; then :
  
  fi
  
      if test $ac_cv_func_gethostbyname = no; then
!       { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gethostbyname in -lnsl" >&5
! $as_echo_n "checking for gethostbyname in -lnsl... " >&6; }
! if ${ac_cv_lib_nsl_gethostbyname+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-lnsl  $LIBS"
! cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
***************
*** 28300,28354 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
    ac_cv_lib_nsl_gethostbyname=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_cv_lib_nsl_gethostbyname=no
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_lib_nsl_gethostbyname" >&5
! echo "${ECHO_T}$ac_cv_lib_nsl_gethostbyname" >&6; }
! if test $ac_cv_lib_nsl_gethostbyname = yes; then
    X_EXTRA_LIBS="$X_EXTRA_LIBS -lnsl"
  fi
  
        if test $ac_cv_lib_nsl_gethostbyname = no; then
! 	{ echo "$as_me:$LINENO: checking for gethostbyname in -lbsd" >&5
! echo $ECHO_N "checking for gethostbyname in -lbsd... $ECHO_C" >&6; }
! if test "${ac_cv_lib_bsd_gethostbyname+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-lbsd  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
--- 24905,24934 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
    ac_cv_lib_nsl_gethostbyname=yes
  else
!   ac_cv_lib_nsl_gethostbyname=no
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_nsl_gethostbyname" >&5
! $as_echo "$ac_cv_lib_nsl_gethostbyname" >&6; }
! if test "x$ac_cv_lib_nsl_gethostbyname" = xyes; then :
    X_EXTRA_LIBS="$X_EXTRA_LIBS -lnsl"
  fi
  
        if test $ac_cv_lib_nsl_gethostbyname = no; then
! 	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for gethostbyname in -lbsd" >&5
! $as_echo_n "checking for gethostbyname in -lbsd... " >&6; }
! if ${ac_cv_lib_bsd_gethostbyname+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-lbsd  $LIBS"
! cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
***************
*** 28366,28404 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
    ac_cv_lib_bsd_gethostbyname=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_cv_lib_bsd_gethostbyname=no
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_lib_bsd_gethostbyname" >&5
! echo "${ECHO_T}$ac_cv_lib_bsd_gethostbyname" >&6; }
! if test $ac_cv_lib_bsd_gethostbyname = yes; then
    X_EXTRA_LIBS="$X_EXTRA_LIBS -lbsd"
  fi
  
--- 24946,24963 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
    ac_cv_lib_bsd_gethostbyname=yes
  else
!   ac_cv_lib_bsd_gethostbyname=no
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_bsd_gethostbyname" >&5
! $as_echo "$ac_cv_lib_bsd_gethostbyname" >&6; }
! if test "x$ac_cv_lib_bsd_gethostbyname" = xyes; then :
    X_EXTRA_LIBS="$X_EXTRA_LIBS -lbsd"
  fi
  
***************
*** 28412,28663 ****
      # variants that don't use the name server (or something).  -lsocket
      # must be given before -lnsl if both are needed.  We assume that
      # if connect needs -lnsl, so does gethostbyname.
!     { echo "$as_me:$LINENO: checking for connect" >&5
! echo $ECHO_N "checking for connect... $ECHO_C" >&6; }
! if test "${ac_cv_func_connect+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
! /* end confdefs.h.  */
! /* Define connect to an innocuous variant, in case <limits.h> declares connect.
!    For example, HP-UX 11i <limits.h> declares gettimeofday.  */
! #define connect innocuous_connect
! 
! /* System header to define __stub macros and hopefully few prototypes,
!     which can conflict with char connect (); below.
!     Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
!     <limits.h> exists even on freestanding compilers.  */
! 
! #ifdef __STDC__
! # include <limits.h>
! #else
! # include <assert.h>
! #endif
! 
! #undef connect
  
- /* Override any GCC internal prototype to avoid an error.
-    Use char because int might match the return type of a GCC
-    builtin and then its argument prototype would still apply.  */
- #ifdef __cplusplus
- extern "C"
- #endif
- char connect ();
- /* The GNU C library defines this for functions which it implements
-     to always fail with ENOSYS.  Some functions are actually named
-     something starting with __ and the normal name is an alias.  */
- #if defined __stub_connect || defined __stub___connect
- choke me
- #endif
- 
- int
- main ()
- {
- return connect ();
-   ;
-   return 0;
- }
- _ACEOF
- rm -f conftest.$ac_objext conftest$ac_exeext
- if { (ac_try="$ac_link"
- case "(($ac_try" in
-   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-   *) ac_try_echo=$ac_try;;
- esac
- eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-   (eval "$ac_link") 2>conftest.er1
-   ac_status=$?
-   grep -v '^ *+' conftest.er1 >conftest.err
-   rm -f conftest.er1
-   cat conftest.err >&5
-   echo "$as_me:$LINENO: \$? = $ac_status" >&5
-   (exit $ac_status); } && {
- 	 test -z "$ac_c_werror_flag" ||
- 	 test ! -s conftest.err
-        } && test -s conftest$ac_exeext &&
-        $as_test_x conftest$ac_exeext; then
-   ac_cv_func_connect=yes
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
- 	ac_cv_func_connect=no
- fi
- 
- rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-       conftest$ac_exeext conftest.$ac_ext
  fi
- { echo "$as_me:$LINENO: result: $ac_cv_func_connect" >&5
- echo "${ECHO_T}$ac_cv_func_connect" >&6; }
  
      if test $ac_cv_func_connect = no; then
!       { echo "$as_me:$LINENO: checking for connect in -lsocket" >&5
! echo $ECHO_N "checking for connect in -lsocket... $ECHO_C" >&6; }
! if test "${ac_cv_lib_socket_connect+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-lsocket $X_EXTRA_LIBS $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
! /* end confdefs.h.  */
! 
! /* Override any GCC internal prototype to avoid an error.
!    Use char because int might match the return type of a GCC
!    builtin and then its argument prototype would still apply.  */
! #ifdef __cplusplus
! extern "C"
! #endif
! char connect ();
! int
! main ()
! {
! return connect ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
!   ac_cv_lib_socket_connect=yes
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_cv_lib_socket_connect=no
! fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
! fi
! { echo "$as_me:$LINENO: result: $ac_cv_lib_socket_connect" >&5
! echo "${ECHO_T}$ac_cv_lib_socket_connect" >&6; }
! if test $ac_cv_lib_socket_connect = yes; then
!   X_EXTRA_LIBS="-lsocket $X_EXTRA_LIBS"
! fi
! 
!     fi
! 
!     # Guillermo Gomez says -lposix is necessary on A/UX.
!     { echo "$as_me:$LINENO: checking for remove" >&5
! echo $ECHO_N "checking for remove... $ECHO_C" >&6; }
! if test "${ac_cv_func_remove+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
! /* end confdefs.h.  */
! /* Define remove to an innocuous variant, in case <limits.h> declares remove.
!    For example, HP-UX 11i <limits.h> declares gettimeofday.  */
! #define remove innocuous_remove
! 
! /* System header to define __stub macros and hopefully few prototypes,
!     which can conflict with char remove (); below.
!     Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
!     <limits.h> exists even on freestanding compilers.  */
! 
! #ifdef __STDC__
! # include <limits.h>
! #else
! # include <assert.h>
! #endif
! 
! #undef remove
! 
! /* Override any GCC internal prototype to avoid an error.
!    Use char because int might match the return type of a GCC
!    builtin and then its argument prototype would still apply.  */
! #ifdef __cplusplus
! extern "C"
! #endif
! char remove ();
! /* The GNU C library defines this for functions which it implements
!     to always fail with ENOSYS.  Some functions are actually named
!     something starting with __ and the normal name is an alias.  */
! #if defined __stub_remove || defined __stub___remove
! choke me
! #endif
! 
! int
! main ()
! {
! return remove ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
!   ac_cv_func_remove=yes
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_cv_func_remove=no
! fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
! fi
! { echo "$as_me:$LINENO: result: $ac_cv_func_remove" >&5
! echo "${ECHO_T}$ac_cv_func_remove" >&6; }
! 
!     if test $ac_cv_func_remove = no; then
!       { echo "$as_me:$LINENO: checking for remove in -lposix" >&5
! echo $ECHO_N "checking for remove in -lposix... $ECHO_C" >&6; }
! if test "${ac_cv_lib_posix_remove+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   ac_check_lib_save_LIBS=$LIBS
! LIBS="-lposix  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
--- 24971,24990 ----
      # variants that don't use the name server (or something).  -lsocket
      # must be given before -lnsl if both are needed.  We assume that
      # if connect needs -lnsl, so does gethostbyname.
!     ac_fn_c_check_func "$LINENO" "connect" "ac_cv_func_connect"
! if test "x$ac_cv_func_connect" = xyes; then :
  
  fi
  
      if test $ac_cv_func_connect = no; then
!       { $as_echo "$as_me:${as_lineno-$LINENO}: checking for connect in -lsocket" >&5
! $as_echo_n "checking for connect in -lsocket... " >&6; }
! if ${ac_cv_lib_socket_connect+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-lsocket $X_EXTRA_LIBS $LIBS"
! cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
***************
*** 28666,28746 ****
  #ifdef __cplusplus
  extern "C"
  #endif
! char remove ();
  int
  main ()
  {
! return remove ();
    ;
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
!   ac_cv_lib_posix_remove=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_cv_lib_posix_remove=no
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_lib_posix_remove" >&5
! echo "${ECHO_T}$ac_cv_lib_posix_remove" >&6; }
! if test $ac_cv_lib_posix_remove = yes; then
!   X_EXTRA_LIBS="$X_EXTRA_LIBS -lposix"
  fi
  
      fi
  
!     # BSDI BSD/OS 2.1 needs -lipc for XOpenDisplay.
!     { echo "$as_me:$LINENO: checking for shmat" >&5
! echo $ECHO_N "checking for shmat... $ECHO_C" >&6; }
! if test "${ac_cv_func_shmat+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
! /* end confdefs.h.  */
! /* Define shmat to an innocuous variant, in case <limits.h> declares shmat.
!    For example, HP-UX 11i <limits.h> declares gettimeofday.  */
! #define shmat innocuous_shmat
! 
! /* System header to define __stub macros and hopefully few prototypes,
!     which can conflict with char shmat (); below.
!     Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
!     <limits.h> exists even on freestanding compilers.  */
  
! #ifdef __STDC__
! # include <limits.h>
! #else
! # include <assert.h>
! #endif
  
! #undef shmat
  
  /* Override any GCC internal prototype to avoid an error.
     Use char because int might match the return type of a GCC
--- 24993,25040 ----
  #ifdef __cplusplus
  extern "C"
  #endif
! char connect ();
  int
  main ()
  {
! return connect ();
    ;
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
!   ac_cv_lib_socket_connect=yes
  else
!   ac_cv_lib_socket_connect=no
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_socket_connect" >&5
! $as_echo "$ac_cv_lib_socket_connect" >&6; }
! if test "x$ac_cv_lib_socket_connect" = xyes; then :
!   X_EXTRA_LIBS="-lsocket $X_EXTRA_LIBS"
  fi
  
      fi
  
!     # Guillermo Gomez says -lposix is necessary on A/UX.
!     ac_fn_c_check_func "$LINENO" "remove" "ac_cv_func_remove"
! if test "x$ac_cv_func_remove" = xyes; then :
  
! fi
  
!     if test $ac_cv_func_remove = no; then
!       { $as_echo "$as_me:${as_lineno-$LINENO}: checking for remove in -lposix" >&5
! $as_echo_n "checking for remove in -lposix... " >&6; }
! if ${ac_cv_lib_posix_remove+:} false; then :
!   $as_echo_n "(cached) " >&6
! else
!   ac_check_lib_save_LIBS=$LIBS
! LIBS="-lposix  $LIBS"
! cat confdefs.h - <<_ACEOF >conftest.$ac_ext
! /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
     Use char because int might match the return type of a GCC
***************
*** 28748,28814 ****
  #ifdef __cplusplus
  extern "C"
  #endif
! char shmat ();
! /* The GNU C library defines this for functions which it implements
!     to always fail with ENOSYS.  Some functions are actually named
!     something starting with __ and the normal name is an alias.  */
! #if defined __stub_shmat || defined __stub___shmat
! choke me
! #endif
! 
  int
  main ()
  {
! return shmat ();
    ;
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
!   ac_cv_func_shmat=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_cv_func_shmat=no
  fi
  
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  fi
- { echo "$as_me:$LINENO: result: $ac_cv_func_shmat" >&5
- echo "${ECHO_T}$ac_cv_func_shmat" >&6; }
  
      if test $ac_cv_func_shmat = no; then
!       { echo "$as_me:$LINENO: checking for shmat in -lipc" >&5
! echo $ECHO_N "checking for shmat in -lipc... $ECHO_C" >&6; }
! if test "${ac_cv_lib_ipc_shmat+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-lipc  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
--- 25042,25088 ----
  #ifdef __cplusplus
  extern "C"
  #endif
! char remove ();
  int
  main ()
  {
! return remove ();
    ;
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
!   ac_cv_lib_posix_remove=yes
  else
!   ac_cv_lib_posix_remove=no
! fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
! fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_posix_remove" >&5
! $as_echo "$ac_cv_lib_posix_remove" >&6; }
! if test "x$ac_cv_lib_posix_remove" = xyes; then :
!   X_EXTRA_LIBS="$X_EXTRA_LIBS -lposix"
  fi
  
!     fi
! 
!     # BSDI BSD/OS 2.1 needs -lipc for XOpenDisplay.
!     ac_fn_c_check_func "$LINENO" "shmat" "ac_cv_func_shmat"
! if test "x$ac_cv_func_shmat" = xyes; then :
! 
  fi
  
      if test $ac_cv_func_shmat = no; then
!       { $as_echo "$as_me:${as_lineno-$LINENO}: checking for shmat in -lipc" >&5
! $as_echo_n "checking for shmat in -lipc... " >&6; }
! if ${ac_cv_lib_ipc_shmat+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-lipc  $LIBS"
! cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
***************
*** 28826,28864 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
    ac_cv_lib_ipc_shmat=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_cv_lib_ipc_shmat=no
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_lib_ipc_shmat" >&5
! echo "${ECHO_T}$ac_cv_lib_ipc_shmat" >&6; }
! if test $ac_cv_lib_ipc_shmat = yes; then
    X_EXTRA_LIBS="$X_EXTRA_LIBS -lipc"
  fi
  
--- 25100,25117 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
    ac_cv_lib_ipc_shmat=yes
  else
!   ac_cv_lib_ipc_shmat=no
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_ipc_shmat" >&5
! $as_echo "$ac_cv_lib_ipc_shmat" >&6; }
! if test "x$ac_cv_lib_ipc_shmat" = xyes; then :
    X_EXTRA_LIBS="$X_EXTRA_LIBS -lipc"
  fi
  
***************
*** 28874,28891 ****
    # These have to be linked with before -lX11, unlike the other
    # libraries we check for below, so use a different variable.
    # John Interrante, Karl Berry
!   { echo "$as_me:$LINENO: checking for IceConnectionNumber in -lICE" >&5
! echo $ECHO_N "checking for IceConnectionNumber in -lICE... $ECHO_C" >&6; }
! if test "${ac_cv_lib_ICE_IceConnectionNumber+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-lICE $X_EXTRA_LIBS $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
--- 25127,25140 ----
    # These have to be linked with before -lX11, unlike the other
    # libraries we check for below, so use a different variable.
    # John Interrante, Karl Berry
!   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for IceConnectionNumber in -lICE" >&5
! $as_echo_n "checking for IceConnectionNumber in -lICE... " >&6; }
! if ${ac_cv_lib_ICE_IceConnectionNumber+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    ac_check_lib_save_LIBS=$LIBS
  LIBS="-lICE $X_EXTRA_LIBS $LIBS"
! cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  
  /* Override any GCC internal prototype to avoid an error.
***************
*** 28903,28941 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
    ac_cv_lib_ICE_IceConnectionNumber=yes
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_cv_lib_ICE_IceConnectionNumber=no
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { echo "$as_me:$LINENO: result: $ac_cv_lib_ICE_IceConnectionNumber" >&5
! echo "${ECHO_T}$ac_cv_lib_ICE_IceConnectionNumber" >&6; }
! if test $ac_cv_lib_ICE_IceConnectionNumber = yes; then
    X_PRE_LIBS="$X_PRE_LIBS -lSM -lICE"
  fi
  
--- 25152,25169 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
    ac_cv_lib_ICE_IceConnectionNumber=yes
  else
!   ac_cv_lib_ICE_IceConnectionNumber=no
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  LIBS=$ac_check_lib_save_LIBS
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_ICE_IceConnectionNumber" >&5
! $as_echo "$ac_cv_lib_ICE_IceConnectionNumber" >&6; }
! if test "x$ac_cv_lib_ICE_IceConnectionNumber" = xyes; then :
    X_PRE_LIBS="$X_PRE_LIBS -lSM -lICE"
  fi
  
***************
*** 28951,28957 ****
  
  
  # Check whether --with-tiff was given.
! if test "${with_tiff+set}" = set; then
    withval=$with_tiff;
  fi
  
--- 25179,25185 ----
  
  
  # Check whether --with-tiff was given.
! if test "${with_tiff+set}" = set; then :
    withval=$with_tiff;
  fi
  
***************
*** 28963,28990 ****
  
  
  # Check whether --with-tiff-includes was given.
! if test "${with_tiff_includes+set}" = set; then
    withval=$with_tiff_includes; TIFF_INCLUDES="-I$withval"
  fi
  
  
  # Check whether --with-tiff-libraries was given.
! if test "${with_tiff_libraries+set}" = set; then
    withval=$with_tiff_libraries; TIFF_LIBS="-L$withval -ltiff"
  fi
  
  
! { echo "$as_me:$LINENO: checking for TIFF" >&5
! echo $ECHO_N "checking for TIFF... $ECHO_C" >&6; }
  
  # Look for tiff.h
  if test "$TIFF_INCLUDES" = ""; then
    # Check the standard search path
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <tiff.h>
  int
--- 25191,25214 ----
  
  
  # Check whether --with-tiff-includes was given.
! if test "${with_tiff_includes+set}" = set; then :
    withval=$with_tiff_includes; TIFF_INCLUDES="-I$withval"
  fi
  
  
  # Check whether --with-tiff-libraries was given.
! if test "${with_tiff_libraries+set}" = set; then :
    withval=$with_tiff_libraries; TIFF_LIBS="-L$withval -ltiff"
  fi
  
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for TIFF" >&5
! $as_echo_n "checking for TIFF... " >&6; }
  
  # Look for tiff.h
  if test "$TIFF_INCLUDES" = ""; then
    # Check the standard search path
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <tiff.h>
  int
***************
*** 28995,29024 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
  
      TIFF_INCLUDES=""
  
  else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
  
      # tiff.h is not in the standard search path, try
      # $prefix
--- 25219,25229 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_compile "$LINENO"; then :
  
      TIFF_INCLUDES=""
  
  else
  
      # tiff.h is not in the standard search path, try
      # $prefix
***************
*** 29026,29036 ****
  
      INCLUDES="-I${prefix}/include $INCLUDES"
  
!     cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <tiff.h>
  int
--- 25231,25237 ----
  
      INCLUDES="-I${prefix}/include $INCLUDES"
  
!     cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <tiff.h>
  int
***************
*** 29041,29070 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
  
        TIFF_INCLUDES="-I${prefix}/include"
  
  else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
  
        TIFF_INCLUDES="no"
  
--- 25242,25252 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_compile "$LINENO"; then :
  
        TIFF_INCLUDES="-I${prefix}/include"
  
  else
  
        TIFF_INCLUDES="no"
  
***************
*** 29088,29098 ****
    INCLUDES="$TIFF_INCLUDES $INCLUDES"
  
    # Try the standard search path first
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <tiff.h>
  int
--- 25268,25274 ----
    INCLUDES="$TIFF_INCLUDES $INCLUDES"
  
    # Try the standard search path first
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <tiff.h>
  int
***************
*** 29103,29143 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
  
      TIFF_LIBS="-ltiff"
  
  else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
  
      # libtiff is not in the standard search path, try $prefix
  
      LIBS="-L${prefix}/lib $LIBS"
  
!     cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <tiff.h>
  int
--- 25279,25295 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
  
      TIFF_LIBS="-ltiff"
  
  else
  
      # libtiff is not in the standard search path, try $prefix
  
      LIBS="-L${prefix}/lib $LIBS"
  
!     cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <tiff.h>
  int
***************
*** 29148,29190 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
  
        TIFF_LIBS="-L${prefix}/lib -ltiff"
  
  else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
  
        TIFF_LIBS=no
  
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  
    LIBS="$tiff_save_LIBS"
    INCLUDES="$tiff_save_INCLUDES"
--- 25300,25320 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
  
        TIFF_LIBS="-L${prefix}/lib -ltiff"
  
  else
  
        TIFF_LIBS=no
  
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  
    LIBS="$tiff_save_LIBS"
    INCLUDES="$tiff_save_INCLUDES"
***************
*** 29211,29232 ****
    tiff_includes_result="(none)"
  fi
  
! { echo "$as_me:$LINENO: result: libraries $tiff_libraries_result, headers $tiff_includes_result" >&5
! echo "${ECHO_T}libraries $tiff_libraries_result, headers $tiff_includes_result" >&6; }
  
  # Finally, execute ACTION-IF-FOUND/ACTION-IF-NOT-FOUND:
  if test "$TIFF_INCLUDES" != "no" && test "$TIFF_LIBS" != "no"; then
  
! cat >>confdefs.h <<\_ACEOF
! #define HAVE_TIFF 1
! _ACEOF
  
    with_tiff=yes
  else
    TIFF_INCLUDES=""
    TIFF_LIBS=""
!   { echo "$as_me:$LINENO: WARNING: libtiff not found; disabling TIFF support" >&5
! echo "$as_me: WARNING: libtiff not found; disabling TIFF support" >&2;}
     with_tiff=no
  
  fi
--- 25341,25360 ----
    tiff_includes_result="(none)"
  fi
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: libraries $tiff_libraries_result, headers $tiff_includes_result" >&5
! $as_echo "libraries $tiff_libraries_result, headers $tiff_includes_result" >&6; }
  
  # Finally, execute ACTION-IF-FOUND/ACTION-IF-NOT-FOUND:
  if test "$TIFF_INCLUDES" != "no" && test "$TIFF_LIBS" != "no"; then
  
! $as_echo "#define HAVE_TIFF 1" >>confdefs.h
  
    with_tiff=yes
  else
    TIFF_INCLUDES=""
    TIFF_LIBS=""
!   { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: libtiff not found; disabling TIFF support" >&5
! $as_echo "$as_me: WARNING: libtiff not found; disabling TIFF support" >&2;}
     with_tiff=no
  
  fi
***************
*** 29240,29246 ****
  
  
  # Check whether --with-zip was given.
! if test "${with_zip+set}" = set; then
    withval=$with_zip;
  fi
  
--- 25368,25374 ----
  
  
  # Check whether --with-zip was given.
! if test "${with_zip+set}" = set; then :
    withval=$with_zip;
  fi
  
***************
*** 29252,29279 ****
  
  
  # Check whether --with-zip-includes was given.
! if test "${with_zip_includes+set}" = set; then
    withval=$with_zip_includes; ZIP_INCLUDES="-I$withval"
  fi
  
  
  # Check whether --with-zip-libraries was given.
! if test "${with_zip_libraries+set}" = set; then
    withval=$with_zip_libraries; ZIP_LIBS="-L$withval -lz"
  fi
  
  
! { echo "$as_me:$LINENO: checking for ZIP" >&5
! echo $ECHO_N "checking for ZIP... $ECHO_C" >&6; }
  
  # Look for zlib.h
  if test "$ZIP_INCLUDES" = ""; then
    # Check the standard search path
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <zlib.h>
  int
--- 25380,25403 ----
  
  
  # Check whether --with-zip-includes was given.
! if test "${with_zip_includes+set}" = set; then :
    withval=$with_zip_includes; ZIP_INCLUDES="-I$withval"
  fi
  
  
  # Check whether --with-zip-libraries was given.
! if test "${with_zip_libraries+set}" = set; then :
    withval=$with_zip_libraries; ZIP_LIBS="-L$withval -lz"
  fi
  
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ZIP" >&5
! $as_echo_n "checking for ZIP... " >&6; }
  
  # Look for zlib.h
  if test "$ZIP_INCLUDES" = ""; then
    # Check the standard search path
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <zlib.h>
  int
***************
*** 29284,29313 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
  
      ZIP_INCLUDES=""
  
  else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
  
      # zlib.h is not in the standard search path, try
      # $prefix
--- 25408,25418 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_compile "$LINENO"; then :
  
      ZIP_INCLUDES=""
  
  else
  
      # zlib.h is not in the standard search path, try
      # $prefix
***************
*** 29315,29325 ****
  
      INCLUDES="-I${prefix}/include $INCLUDES"
  
!     cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <zlib.h>
  int
--- 25420,25426 ----
  
      INCLUDES="-I${prefix}/include $INCLUDES"
  
!     cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <zlib.h>
  int
***************
*** 29330,29359 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
  
        ZIP_INCLUDES="-I${prefix}/include"
  
  else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
  
        ZIP_INCLUDES="no"
  
--- 25431,25441 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_compile "$LINENO"; then :
  
        ZIP_INCLUDES="-I${prefix}/include"
  
  else
  
        ZIP_INCLUDES="no"
  
***************
*** 29377,29387 ****
    INCLUDES="$ZIP_INCLUDES $INCLUDES"
  
    # Try the standard search path first
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <zlib.h>
  int
--- 25457,25463 ----
    INCLUDES="$ZIP_INCLUDES $INCLUDES"
  
    # Try the standard search path first
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <zlib.h>
  int
***************
*** 29392,29432 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
  
      ZIP_LIBS="-lz"
  
  else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
  
      # libz is not in the standard search path, try $prefix
  
      LIBS="-L${prefix}/lib $LIBS"
  
!     cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <zlib.h>
  int
--- 25468,25484 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
  
      ZIP_LIBS="-lz"
  
  else
  
      # libz is not in the standard search path, try $prefix
  
      LIBS="-L${prefix}/lib $LIBS"
  
!     cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <zlib.h>
  int
***************
*** 29437,29479 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
  
        ZIP_LIBS="-L${prefix}/lib -lz"
  
  else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
  
        ZIP_LIBS=no
  
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  
    LIBS="$zip_save_LIBS"
    INCLUDES="$zip_save_INCLUDES"
--- 25489,25509 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
  
        ZIP_LIBS="-L${prefix}/lib -lz"
  
  else
  
        ZIP_LIBS=no
  
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  
    LIBS="$zip_save_LIBS"
    INCLUDES="$zip_save_INCLUDES"
***************
*** 29500,29521 ****
    zip_includes_result="(none)"
  fi
  
! { echo "$as_me:$LINENO: result: libraries $zip_libraries_result, headers $zip_includes_result" >&5
! echo "${ECHO_T}libraries $zip_libraries_result, headers $zip_includes_result" >&6; }
  
  # Finally, execute ACTION-IF-FOUND/ACTION-IF-NOT-FOUND:
  if test "$ZIP_INCLUDES" != "no" && test "$ZIP_LIBS" != "no"; then
  
! cat >>confdefs.h <<\_ACEOF
! #define HAVE_ZIP 1
! _ACEOF
  
    with_zip=yes
  else
    ZIP_LIBS=""
    ZIP_INCLUDES=""
!   { echo "$as_me:$LINENO: WARNING: libz not found; disabling ZIP support" >&5
! echo "$as_me: WARNING: libz not found; disabling ZIP support" >&2;}
     with_zip=no
  
  fi
--- 25530,25549 ----
    zip_includes_result="(none)"
  fi
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: libraries $zip_libraries_result, headers $zip_includes_result" >&5
! $as_echo "libraries $zip_libraries_result, headers $zip_includes_result" >&6; }
  
  # Finally, execute ACTION-IF-FOUND/ACTION-IF-NOT-FOUND:
  if test "$ZIP_INCLUDES" != "no" && test "$ZIP_LIBS" != "no"; then
  
! $as_echo "#define HAVE_ZIP 1" >>confdefs.h
  
    with_zip=yes
  else
    ZIP_LIBS=""
    ZIP_INCLUDES=""
!   { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: libz not found; disabling ZIP support" >&5
! $as_echo "$as_me: WARNING: libz not found; disabling ZIP support" >&2;}
     with_zip=no
  
  fi
***************
*** 29529,29535 ****
  
  
  # Check whether --with-jpeg was given.
! if test "${with_jpeg+set}" = set; then
    withval=$with_jpeg;
  fi
  
--- 25557,25563 ----
  
  
  # Check whether --with-jpeg was given.
! if test "${with_jpeg+set}" = set; then :
    withval=$with_jpeg;
  fi
  
***************
*** 29541,29568 ****
  
  
  # Check whether --with-jpeg-includes was given.
! if test "${with_jpeg_includes+set}" = set; then
    withval=$with_jpeg_includes; JPEG_INCLUDES="-I$withval"
  fi
  
  
  # Check whether --with-jpeg-libraries was given.
! if test "${with_jpeg_libraries+set}" = set; then
    withval=$with_jpeg_libraries; JPEG_LIBS="-L$withval -ljpeg"
  fi
  
  
! { echo "$as_me:$LINENO: checking for JPEG" >&5
! echo $ECHO_N "checking for JPEG... $ECHO_C" >&6; }
  
  # Look for jpeglib.h
  if test "$JPEG_INCLUDES" = ""; then
    # Check the standard search path
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <stdio.h>
      #include <jpeglib.h>
--- 25569,25592 ----
  
  
  # Check whether --with-jpeg-includes was given.
! if test "${with_jpeg_includes+set}" = set; then :
    withval=$with_jpeg_includes; JPEG_INCLUDES="-I$withval"
  fi
  
  
  # Check whether --with-jpeg-libraries was given.
! if test "${with_jpeg_libraries+set}" = set; then :
    withval=$with_jpeg_libraries; JPEG_LIBS="-L$withval -ljpeg"
  fi
  
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for JPEG" >&5
! $as_echo_n "checking for JPEG... " >&6; }
  
  # Look for jpeglib.h
  if test "$JPEG_INCLUDES" = ""; then
    # Check the standard search path
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <stdio.h>
      #include <jpeglib.h>
***************
*** 29574,29603 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
  
      JPEG_INCLUDES=""
  
  else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
  
      # jpeglib.h is not in the standard search path, try
      # $prefix
--- 25598,25608 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_compile "$LINENO"; then :
  
      JPEG_INCLUDES=""
  
  else
  
      # jpeglib.h is not in the standard search path, try
      # $prefix
***************
*** 29605,29615 ****
  
      INCLUDES="-I${prefix}/include $INCLUDES"
  
!     cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <stdio.h>
        #include <jpeglib.h>
--- 25610,25616 ----
  
      INCLUDES="-I${prefix}/include $INCLUDES"
  
!     cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <stdio.h>
        #include <jpeglib.h>
***************
*** 29621,29650 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
  
        JPEG_INCLUDES="-I${prefix}/include"
  
  else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
  
        JPEG_INCLUDES="no"
  
--- 25622,25632 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_compile "$LINENO"; then :
  
        JPEG_INCLUDES="-I${prefix}/include"
  
  else
  
        JPEG_INCLUDES="no"
  
***************
*** 29668,29678 ****
    INCLUDES="$JPEG_INCLUDES $INCLUDES"
  
    # Try the standard search path first
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <stdio.h>
      #include <jpeglib.h>
--- 25648,25654 ----
    INCLUDES="$JPEG_INCLUDES $INCLUDES"
  
    # Try the standard search path first
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <stdio.h>
      #include <jpeglib.h>
***************
*** 29685,29725 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
  
      JPEG_LIBS="-ljpeg"
  
  else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
  
      # libjpeg is not in the standard search path, try $prefix
  
      LIBS="-L${prefix}/lib $LIBS"
  
!     cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <stdio.h>
        #include <jpeg.h>
--- 25661,25677 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
  
      JPEG_LIBS="-ljpeg"
  
  else
  
      # libjpeg is not in the standard search path, try $prefix
  
      LIBS="-L${prefix}/lib $LIBS"
  
!     cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <stdio.h>
        #include <jpeg.h>
***************
*** 29732,29774 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
  
        JPEG_LIBS="-L${prefix}/lib -ljpeg"
  
  else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
  
        JPEG_LIBS=no
  
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  
    LIBS="$jpeg_save_LIBS"
    INCLUDES="$jpeg_save_INCLUDES"
--- 25684,25704 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
  
        JPEG_LIBS="-L${prefix}/lib -ljpeg"
  
  else
  
        JPEG_LIBS=no
  
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  
    LIBS="$jpeg_save_LIBS"
    INCLUDES="$jpeg_save_INCLUDES"
***************
*** 29795,29816 ****
    jpeg_includes_result="(none)"
  fi
  
! { echo "$as_me:$LINENO: result: libraries $jpeg_libraries_result, headers $jpeg_includes_result" >&5
! echo "${ECHO_T}libraries $jpeg_libraries_result, headers $jpeg_includes_result" >&6; }
  
  # Finally, execute ACTION-IF-FOUND/ACTION-IF-NOT-FOUND:
  if test "$JPEG_INCLUDES" != "no" && test "$JPEG_LIBS" != "no"; then
  
! cat >>confdefs.h <<\_ACEOF
! #define HAVE_JPEG 1
! _ACEOF
  
    with_jpeg=yes
  else
    JPEG_INCLUDES=""
    JPEG_LIBS=""
!   { echo "$as_me:$LINENO: WARNING: libjpeg not found; disabling JPEG support" >&5
! echo "$as_me: WARNING: libjpeg not found; disabling JPEG support" >&2;}
     with_jpeg=no
  
  fi
--- 25725,25744 ----
    jpeg_includes_result="(none)"
  fi
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: libraries $jpeg_libraries_result, headers $jpeg_includes_result" >&5
! $as_echo "libraries $jpeg_libraries_result, headers $jpeg_includes_result" >&6; }
  
  # Finally, execute ACTION-IF-FOUND/ACTION-IF-NOT-FOUND:
  if test "$JPEG_INCLUDES" != "no" && test "$JPEG_LIBS" != "no"; then
  
! $as_echo "#define HAVE_JPEG 1" >>confdefs.h
  
    with_jpeg=yes
  else
    JPEG_INCLUDES=""
    JPEG_LIBS=""
!   { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: libjpeg not found; disabling JPEG support" >&5
! $as_echo "$as_me: WARNING: libjpeg not found; disabling JPEG support" >&2;}
     with_jpeg=no
  
  fi
***************
*** 29820,29826 ****
  # look for PNG with pkg-config ... fall back to our tester
  
  # Check whether --with-png was given.
! if test "${with_png+set}" = set; then
    withval=$with_png;
  fi
  
--- 25748,25754 ----
  # look for PNG with pkg-config ... fall back to our tester
  
  # Check whether --with-png was given.
! if test "${with_png+set}" = set; then :
    withval=$with_png;
  fi
  
***************
*** 29828,29846 ****
  if test x"$with_png" != "xno"; then
  
  pkg_failed=no
! { echo "$as_me:$LINENO: checking for PNG" >&5
! echo $ECHO_N "checking for PNG... $ECHO_C" >&6; }
  
  if test -n "$PKG_CONFIG"; then
      if test -n "$PNG_CFLAGS"; then
          pkg_cv_PNG_CFLAGS="$PNG_CFLAGS"
      else
          if test -n "$PKG_CONFIG" && \
!     { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"libpng\"") >&5
    ($PKG_CONFIG --exists --print-errors "libpng") 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
    pkg_cv_PNG_CFLAGS=`$PKG_CONFIG --cflags "libpng" 2>/dev/null`
  else
    pkg_failed=yes
--- 25756,25774 ----
  if test x"$with_png" != "xno"; then
  
  pkg_failed=no
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PNG" >&5
! $as_echo_n "checking for PNG... " >&6; }
  
  if test -n "$PKG_CONFIG"; then
      if test -n "$PNG_CFLAGS"; then
          pkg_cv_PNG_CFLAGS="$PNG_CFLAGS"
      else
          if test -n "$PKG_CONFIG" && \
!     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"libpng\""; } >&5
    ($PKG_CONFIG --exists --print-errors "libpng") 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then
    pkg_cv_PNG_CFLAGS=`$PKG_CONFIG --cflags "libpng" 2>/dev/null`
  else
    pkg_failed=yes
***************
*** 29854,29864 ****
          pkg_cv_PNG_LIBS="$PNG_LIBS"
      else
          if test -n "$PKG_CONFIG" && \
!     { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"libpng\"") >&5
    ($PKG_CONFIG --exists --print-errors "libpng") 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
    pkg_cv_PNG_LIBS=`$PKG_CONFIG --libs "libpng" 2>/dev/null`
  else
    pkg_failed=yes
--- 25782,25792 ----
          pkg_cv_PNG_LIBS="$PNG_LIBS"
      else
          if test -n "$PKG_CONFIG" && \
!     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"libpng\""; } >&5
    ($PKG_CONFIG --exists --print-errors "libpng") 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then
    pkg_cv_PNG_LIBS=`$PKG_CONFIG --libs "libpng" 2>/dev/null`
  else
    pkg_failed=yes
***************
*** 29885,29892 ****
  	# Put the nasty error message in config.log where it belongs
  	echo "$PNG_PKG_ERRORS" >&5
  
! 	{ echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  
  
  
--- 25813,25820 ----
  	# Put the nasty error message in config.log where it belongs
  	echo "$PNG_PKG_ERRORS" >&5
  
! 	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  
  
  
***************
*** 29895,29901 ****
  
  
  # Check whether --with-png was given.
! if test "${with_png+set}" = set; then
    withval=$with_png;
  fi
  
--- 25823,25829 ----
  
  
  # Check whether --with-png was given.
! if test "${with_png+set}" = set; then :
    withval=$with_png;
  fi
  
***************
*** 29907,29934 ****
  
  
  # Check whether --with-png-includes was given.
! if test "${with_png_includes+set}" = set; then
    withval=$with_png_includes; PNG_INCLUDES="-I$withval"
  fi
  
  
  # Check whether --with-png-libraries was given.
! if test "${with_png_libraries+set}" = set; then
    withval=$with_png_libraries; PNG_LIBS="-L$withval -lpng"
  fi
  
  
! { echo "$as_me:$LINENO: checking for libpng" >&5
! echo $ECHO_N "checking for libpng... $ECHO_C" >&6; }
  
  # Look for png.h
  if test "$PNG_INCLUDES" = ""; then
    # Check the standard search path
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <png.h>
  int
--- 25835,25858 ----
  
  
  # Check whether --with-png-includes was given.
! if test "${with_png_includes+set}" = set; then :
    withval=$with_png_includes; PNG_INCLUDES="-I$withval"
  fi
  
  
  # Check whether --with-png-libraries was given.
! if test "${with_png_libraries+set}" = set; then :
    withval=$with_png_libraries; PNG_LIBS="-L$withval -lpng"
  fi
  
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for libpng" >&5
! $as_echo_n "checking for libpng... " >&6; }
  
  # Look for png.h
  if test "$PNG_INCLUDES" = ""; then
    # Check the standard search path
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <png.h>
  int
***************
*** 29939,29968 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
  
      PNG_INCLUDES=""
  
  else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
  
      # png.h is not in the standard search path, try
      # $prefix
--- 25863,25873 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_compile "$LINENO"; then :
  
      PNG_INCLUDES=""
  
  else
  
      # png.h is not in the standard search path, try
      # $prefix
***************
*** 29970,29980 ****
  
      INCLUDES="-I${prefix}/include $INCLUDES"
  
!     cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <png.h>
  int
--- 25875,25881 ----
  
      INCLUDES="-I${prefix}/include $INCLUDES"
  
!     cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <png.h>
  int
***************
*** 29985,30014 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
  
        PNG_INCLUDES="-I${prefix}/include"
  
  else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
  
        PNG_INCLUDES="no"
  
--- 25886,25896 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_compile "$LINENO"; then :
  
        PNG_INCLUDES="-I${prefix}/include"
  
  else
  
        PNG_INCLUDES="no"
  
***************
*** 30032,30042 ****
    INCLUDES="$PNG_INCLUDES $INCLUDES"
  
    # Try the standard search path first
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <png.h>
  int
--- 25912,25918 ----
    INCLUDES="$PNG_INCLUDES $INCLUDES"
  
    # Try the standard search path first
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <png.h>
  int
***************
*** 30045,30087 ****
  png_access_version_number()
    ;
    return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
  
      PNG_LIBS="-lpng"
  
  else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
  
      # libpng is not in the standard search path, try $prefix
  
      LIBS="-L${prefix}/lib $LIBS"
  
!     cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <png.h>
  int
--- 25921,25939 ----
  png_access_version_number()
    ;
    return 0;
! }
! _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
  
      PNG_LIBS="-lpng"
  
  else
  
      # libpng is not in the standard search path, try $prefix
  
      LIBS="-L${prefix}/lib $LIBS"
  
!     cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <png.h>
  int
***************
*** 30092,30134 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
  
        PNG_LIBS="-L${prefix}/lib -lpng"
  
  else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
  
        PNG_LIBS=no
  
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  
    LIBS="$png_save_LIBS"
    INCLUDES="$png_save_INCLUDES"
--- 25944,25964 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
  
        PNG_LIBS="-L${prefix}/lib -lpng"
  
  else
  
        PNG_LIBS=no
  
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  
    LIBS="$png_save_LIBS"
    INCLUDES="$png_save_INCLUDES"
***************
*** 30155,30176 ****
    png_includes_result="(none)"
  fi
  
! { echo "$as_me:$LINENO: result: libraries $png_libraries_result, headers $png_includes_result" >&5
! echo "${ECHO_T}libraries $png_libraries_result, headers $png_includes_result" >&6; }
  
  # Finally, execute ACTION-IF-FOUND/ACTION-IF-NOT-FOUND:
  if test "$PNG_INCLUDES" != "no" && test "$PNG_LIBS" != "no"; then
  
! cat >>confdefs.h <<\_ACEOF
! #define HAVE_PNG 1
! _ACEOF
  
  
  else
    PNG_INCLUDES=""
    PNG_LIBS=""
!   { echo "$as_me:$LINENO: WARNING: libpng not found; disabling PNG support" >&5
! echo "$as_me: WARNING: libpng not found; disabling PNG support" >&2;}
        with_png=no
  
  fi
--- 25985,26004 ----
    png_includes_result="(none)"
  fi
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: libraries $png_libraries_result, headers $png_includes_result" >&5
! $as_echo "libraries $png_libraries_result, headers $png_includes_result" >&6; }
  
  # Finally, execute ACTION-IF-FOUND/ACTION-IF-NOT-FOUND:
  if test "$PNG_INCLUDES" != "no" && test "$PNG_LIBS" != "no"; then
  
! $as_echo "#define HAVE_PNG 1" >>confdefs.h
  
  
  else
    PNG_INCLUDES=""
    PNG_LIBS=""
!   { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: libpng not found; disabling PNG support" >&5
! $as_echo "$as_me: WARNING: libpng not found; disabling PNG support" >&2;}
        with_png=no
  
  fi
***************
*** 30186,30192 ****
  
  
  # Check whether --with-png was given.
! if test "${with_png+set}" = set; then
    withval=$with_png;
  fi
  
--- 26014,26020 ----
  
  
  # Check whether --with-png was given.
! if test "${with_png+set}" = set; then :
    withval=$with_png;
  fi
  
***************
*** 30198,30225 ****
  
  
  # Check whether --with-png-includes was given.
! if test "${with_png_includes+set}" = set; then
    withval=$with_png_includes; PNG_INCLUDES="-I$withval"
  fi
  
  
  # Check whether --with-png-libraries was given.
! if test "${with_png_libraries+set}" = set; then
    withval=$with_png_libraries; PNG_LIBS="-L$withval -lpng"
  fi
  
  
! { echo "$as_me:$LINENO: checking for libpng" >&5
! echo $ECHO_N "checking for libpng... $ECHO_C" >&6; }
  
  # Look for png.h
  if test "$PNG_INCLUDES" = ""; then
    # Check the standard search path
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <png.h>
  int
--- 26026,26049 ----
  
  
  # Check whether --with-png-includes was given.
! if test "${with_png_includes+set}" = set; then :
    withval=$with_png_includes; PNG_INCLUDES="-I$withval"
  fi
  
  
  # Check whether --with-png-libraries was given.
! if test "${with_png_libraries+set}" = set; then :
    withval=$with_png_libraries; PNG_LIBS="-L$withval -lpng"
  fi
  
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for libpng" >&5
! $as_echo_n "checking for libpng... " >&6; }
  
  # Look for png.h
  if test "$PNG_INCLUDES" = ""; then
    # Check the standard search path
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <png.h>
  int
***************
*** 30230,30259 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
  
      PNG_INCLUDES=""
  
  else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
  
      # png.h is not in the standard search path, try
      # $prefix
--- 26054,26064 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_compile "$LINENO"; then :
  
      PNG_INCLUDES=""
  
  else
  
      # png.h is not in the standard search path, try
      # $prefix
***************
*** 30261,30271 ****
  
      INCLUDES="-I${prefix}/include $INCLUDES"
  
!     cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <png.h>
  int
--- 26066,26072 ----
  
      INCLUDES="-I${prefix}/include $INCLUDES"
  
!     cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <png.h>
  int
***************
*** 30276,30305 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
  
        PNG_INCLUDES="-I${prefix}/include"
  
  else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
  
        PNG_INCLUDES="no"
  
--- 26077,26087 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_compile "$LINENO"; then :
  
        PNG_INCLUDES="-I${prefix}/include"
  
  else
  
        PNG_INCLUDES="no"
  
***************
*** 30323,30333 ****
    INCLUDES="$PNG_INCLUDES $INCLUDES"
  
    # Try the standard search path first
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <png.h>
  int
--- 26103,26109 ----
    INCLUDES="$PNG_INCLUDES $INCLUDES"
  
    # Try the standard search path first
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <png.h>
  int
***************
*** 30338,30378 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
  
      PNG_LIBS="-lpng"
  
  else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
  
      # libpng is not in the standard search path, try $prefix
  
      LIBS="-L${prefix}/lib $LIBS"
  
!     cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <png.h>
  int
--- 26114,26130 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
  
      PNG_LIBS="-lpng"
  
  else
  
      # libpng is not in the standard search path, try $prefix
  
      LIBS="-L${prefix}/lib $LIBS"
  
!     cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <png.h>
  int
***************
*** 30383,30425 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (ac_try="$ac_link"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_link") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest$ac_exeext &&
!        $as_test_x conftest$ac_exeext; then
  
        PNG_LIBS="-L${prefix}/lib -lpng"
  
  else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
  
        PNG_LIBS=no
  
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  
  fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
!       conftest$ac_exeext conftest.$ac_ext
  
    LIBS="$png_save_LIBS"
    INCLUDES="$png_save_INCLUDES"
--- 26135,26155 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_link "$LINENO"; then :
  
        PNG_LIBS="-L${prefix}/lib -lpng"
  
  else
  
        PNG_LIBS=no
  
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  
  fi
! rm -f core conftest.err conftest.$ac_objext \
!     conftest$ac_exeext conftest.$ac_ext
  
    LIBS="$png_save_LIBS"
    INCLUDES="$png_save_INCLUDES"
***************
*** 30446,30467 ****
    png_includes_result="(none)"
  fi
  
! { echo "$as_me:$LINENO: result: libraries $png_libraries_result, headers $png_includes_result" >&5
! echo "${ECHO_T}libraries $png_libraries_result, headers $png_includes_result" >&6; }
  
  # Finally, execute ACTION-IF-FOUND/ACTION-IF-NOT-FOUND:
  if test "$PNG_INCLUDES" != "no" && test "$PNG_LIBS" != "no"; then
  
! cat >>confdefs.h <<\_ACEOF
! #define HAVE_PNG 1
! _ACEOF
  
  
  else
    PNG_INCLUDES=""
    PNG_LIBS=""
!   { echo "$as_me:$LINENO: WARNING: libpng not found; disabling PNG support" >&5
! echo "$as_me: WARNING: libpng not found; disabling PNG support" >&2;}
        with_png=no
  
  fi
--- 26176,26195 ----
    png_includes_result="(none)"
  fi
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: libraries $png_libraries_result, headers $png_includes_result" >&5
! $as_echo "libraries $png_libraries_result, headers $png_includes_result" >&6; }
  
  # Finally, execute ACTION-IF-FOUND/ACTION-IF-NOT-FOUND:
  if test "$PNG_INCLUDES" != "no" && test "$PNG_LIBS" != "no"; then
  
! $as_echo "#define HAVE_PNG 1" >>confdefs.h
  
  
  else
    PNG_INCLUDES=""
    PNG_LIBS=""
!   { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: libpng not found; disabling PNG support" >&5
! $as_echo "$as_me: WARNING: libpng not found; disabling PNG support" >&2;}
        with_png=no
  
  fi
***************
*** 30471,30482 ****
  else
  	PNG_CFLAGS=$pkg_cv_PNG_CFLAGS
  	PNG_LIBS=$pkg_cv_PNG_LIBS
!         { echo "$as_me:$LINENO: result: yes" >&5
! echo "${ECHO_T}yes" >&6; }
  
! cat >>confdefs.h <<\_ACEOF
! #define HAVE_PNG 1
! _ACEOF
  
       with_png=yes
       PACKAGES_USED="$PACKAGES_USED libpng"
--- 26199,26208 ----
  else
  	PNG_CFLAGS=$pkg_cv_PNG_CFLAGS
  	PNG_LIBS=$pkg_cv_PNG_LIBS
!         { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
! $as_echo "yes" >&6; }
  
! $as_echo "#define HAVE_PNG 1" >>confdefs.h
  
       with_png=yes
       PACKAGES_USED="$PACKAGES_USED libpng"
***************
*** 30486,30492 ****
  # libexif
  
  # Check whether --with-libexif was given.
! if test "${with_libexif+set}" = set; then
    withval=$with_libexif;
  fi
  
--- 26212,26218 ----
  # libexif
  
  # Check whether --with-libexif was given.
! if test "${with_libexif+set}" = set; then :
    withval=$with_libexif;
  fi
  
***************
*** 30494,30512 ****
  if test x"$with_libexif" != "xno"; then
  
  pkg_failed=no
! { echo "$as_me:$LINENO: checking for EXIF" >&5
! echo $ECHO_N "checking for EXIF... $ECHO_C" >&6; }
  
  if test -n "$PKG_CONFIG"; then
      if test -n "$EXIF_CFLAGS"; then
          pkg_cv_EXIF_CFLAGS="$EXIF_CFLAGS"
      else
          if test -n "$PKG_CONFIG" && \
!     { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"libexif >= 0.6\"") >&5
    ($PKG_CONFIG --exists --print-errors "libexif >= 0.6") 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
    pkg_cv_EXIF_CFLAGS=`$PKG_CONFIG --cflags "libexif >= 0.6" 2>/dev/null`
  else
    pkg_failed=yes
--- 26220,26238 ----
  if test x"$with_libexif" != "xno"; then
  
  pkg_failed=no
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for EXIF" >&5
! $as_echo_n "checking for EXIF... " >&6; }
  
  if test -n "$PKG_CONFIG"; then
      if test -n "$EXIF_CFLAGS"; then
          pkg_cv_EXIF_CFLAGS="$EXIF_CFLAGS"
      else
          if test -n "$PKG_CONFIG" && \
!     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"libexif >= 0.6\""; } >&5
    ($PKG_CONFIG --exists --print-errors "libexif >= 0.6") 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then
    pkg_cv_EXIF_CFLAGS=`$PKG_CONFIG --cflags "libexif >= 0.6" 2>/dev/null`
  else
    pkg_failed=yes
***************
*** 30520,30530 ****
          pkg_cv_EXIF_LIBS="$EXIF_LIBS"
      else
          if test -n "$PKG_CONFIG" && \
!     { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"libexif >= 0.6\"") >&5
    ($PKG_CONFIG --exists --print-errors "libexif >= 0.6") 2>&5
    ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
    pkg_cv_EXIF_LIBS=`$PKG_CONFIG --libs "libexif >= 0.6" 2>/dev/null`
  else
    pkg_failed=yes
--- 26246,26256 ----
          pkg_cv_EXIF_LIBS="$EXIF_LIBS"
      else
          if test -n "$PKG_CONFIG" && \
!     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"libexif >= 0.6\""; } >&5
    ($PKG_CONFIG --exists --print-errors "libexif >= 0.6") 2>&5
    ac_status=$?
!   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
!   test $ac_status = 0; }; then
    pkg_cv_EXIF_LIBS=`$PKG_CONFIG --libs "libexif >= 0.6" 2>/dev/null`
  else
    pkg_failed=yes
***************
*** 30551,30576 ****
  	# Put the nasty error message in config.log where it belongs
  	echo "$EXIF_PKG_ERRORS" >&5
  
! 	{ echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
!                 { echo "$as_me:$LINENO: WARNING: libexif >= 0.6 not found; disabling exif support" >&5
! echo "$as_me: WARNING: libexif >= 0.6 not found; disabling exif support" >&2;}
       with_libexif=no
  
  elif test $pkg_failed = untried; then
! 	{ echo "$as_me:$LINENO: WARNING: libexif >= 0.6 not found; disabling exif support" >&5
! echo "$as_me: WARNING: libexif >= 0.6 not found; disabling exif support" >&2;}
       with_libexif=no
  
  else
  	EXIF_CFLAGS=$pkg_cv_EXIF_CFLAGS
  	EXIF_LIBS=$pkg_cv_EXIF_LIBS
!         { echo "$as_me:$LINENO: result: yes" >&5
! echo "${ECHO_T}yes" >&6; }
  
! cat >>confdefs.h <<\_ACEOF
! #define HAVE_EXIF 1
! _ACEOF
  
       with_libexif=yes
       PACKAGES_USED="$PACKAGES_USED libexif"
--- 26277,26300 ----
  	# Put the nasty error message in config.log where it belongs
  	echo "$EXIF_PKG_ERRORS" >&5
  
! 	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
!                 { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: libexif >= 0.6 not found; disabling exif support" >&5
! $as_echo "$as_me: WARNING: libexif >= 0.6 not found; disabling exif support" >&2;}
       with_libexif=no
  
  elif test $pkg_failed = untried; then
! 	{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: libexif >= 0.6 not found; disabling exif support" >&5
! $as_echo "$as_me: WARNING: libexif >= 0.6 not found; disabling exif support" >&2;}
       with_libexif=no
  
  else
  	EXIF_CFLAGS=$pkg_cv_EXIF_CFLAGS
  	EXIF_LIBS=$pkg_cv_EXIF_LIBS
!         { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
! $as_echo "yes" >&6; }
  
! $as_echo "#define HAVE_EXIF 1" >>confdefs.h
  
       with_libexif=yes
       PACKAGES_USED="$PACKAGES_USED libexif"
***************
*** 30583,30718 ****
    # cppflags not cflags because we want the preproc to see the -I as well
    save_CPPFLAGS=$CPPFLAGS
    CPPFLAGS="$EXIF_CFLAGS $CPPFLAGS"
!   if test "${ac_cv_header_exif_data_h+set}" = set; then
!   { echo "$as_me:$LINENO: checking for exif-data.h" >&5
! echo $ECHO_N "checking for exif-data.h... $ECHO_C" >&6; }
! if test "${ac_cv_header_exif_data_h+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! fi
! { echo "$as_me:$LINENO: result: $ac_cv_header_exif_data_h" >&5
! echo "${ECHO_T}$ac_cv_header_exif_data_h" >&6; }
! else
!   # Is the header compilable?
! { echo "$as_me:$LINENO: checking exif-data.h usability" >&5
! echo $ECHO_N "checking exif-data.h usability... $ECHO_C" >&6; }
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
! /* end confdefs.h.  */
! $ac_includes_default
! #include <exif-data.h>
! _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
!   ac_header_compiler=yes
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_header_compiler=no
! fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
! { echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
! echo "${ECHO_T}$ac_header_compiler" >&6; }
! 
! # Is the header present?
! { echo "$as_me:$LINENO: checking exif-data.h presence" >&5
! echo $ECHO_N "checking exif-data.h presence... $ECHO_C" >&6; }
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
! /* end confdefs.h.  */
! #include <exif-data.h>
! _ACEOF
! if { (ac_try="$ac_cpp conftest.$ac_ext"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } >/dev/null && {
! 	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        }; then
!   ac_header_preproc=yes
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
!   ac_header_preproc=no
! fi
! 
! rm -f conftest.err conftest.$ac_ext
! { echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
! echo "${ECHO_T}$ac_header_preproc" >&6; }
! 
! # So?  What about this header?
! case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
!   yes:no: )
!     { echo "$as_me:$LINENO: WARNING: exif-data.h: accepted by the compiler, rejected by the preprocessor!" >&5
! echo "$as_me: WARNING: exif-data.h: accepted by the compiler, rejected by the preprocessor!" >&2;}
!     { echo "$as_me:$LINENO: WARNING: exif-data.h: proceeding with the compiler's result" >&5
! echo "$as_me: WARNING: exif-data.h: proceeding with the compiler's result" >&2;}
!     ac_header_preproc=yes
!     ;;
!   no:yes:* )
!     { echo "$as_me:$LINENO: WARNING: exif-data.h: present but cannot be compiled" >&5
! echo "$as_me: WARNING: exif-data.h: present but cannot be compiled" >&2;}
!     { echo "$as_me:$LINENO: WARNING: exif-data.h:     check for missing prerequisite headers?" >&5
! echo "$as_me: WARNING: exif-data.h:     check for missing prerequisite headers?" >&2;}
!     { echo "$as_me:$LINENO: WARNING: exif-data.h: see the Autoconf documentation" >&5
! echo "$as_me: WARNING: exif-data.h: see the Autoconf documentation" >&2;}
!     { echo "$as_me:$LINENO: WARNING: exif-data.h:     section \"Present But Cannot Be Compiled\"" >&5
! echo "$as_me: WARNING: exif-data.h:     section \"Present But Cannot Be Compiled\"" >&2;}
!     { echo "$as_me:$LINENO: WARNING: exif-data.h: proceeding with the preprocessor's result" >&5
! echo "$as_me: WARNING: exif-data.h: proceeding with the preprocessor's result" >&2;}
!     { echo "$as_me:$LINENO: WARNING: exif-data.h: in the future, the compiler will take precedence" >&5
! echo "$as_me: WARNING: exif-data.h: in the future, the compiler will take precedence" >&2;}
! 
!     ;;
! esac
! { echo "$as_me:$LINENO: checking for exif-data.h" >&5
! echo $ECHO_N "checking for exif-data.h... $ECHO_C" >&6; }
! if test "${ac_cv_header_exif_data_h+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   ac_cv_header_exif_data_h=$ac_header_preproc
! fi
! { echo "$as_me:$LINENO: result: $ac_cv_header_exif_data_h" >&5
! echo "${ECHO_T}$ac_cv_header_exif_data_h" >&6; }
! 
! fi
! if test $ac_cv_header_exif_data_h = yes; then
  
! cat >>confdefs.h <<\_ACEOF
! #define UNTAGGED_EXIF 1
! _ACEOF
  
  fi
  
--- 26307,26316 ----
    # cppflags not cflags because we want the preproc to see the -I as well
    save_CPPFLAGS=$CPPFLAGS
    CPPFLAGS="$EXIF_CFLAGS $CPPFLAGS"
!   ac_fn_c_check_header_mongrel "$LINENO" "exif-data.h" "ac_cv_header_exif_data_h" "$ac_includes_default"
! if test "x$ac_cv_header_exif_data_h" = xyes; then :
  
! $as_echo "#define UNTAGGED_EXIF 1" >>confdefs.h
  
  fi
  
***************
*** 30723,30729 ****
  # Look for linux video
  
  # Check whether --with-v4l was given.
! if test "${with_v4l+set}" = set; then
    withval=$with_v4l;
  fi
  
--- 26321,26327 ----
  # Look for linux video
  
  # Check whether --with-v4l was given.
! if test "${with_v4l+set}" = set; then :
    withval=$with_v4l;
  fi
  
***************
*** 30732,30868 ****
    # try a compile as well: if we're using icc the header can break
    # even try assigning to vc.type: if this works, surely the header is
    # functional
!   if test "${ac_cv_header_linux_videodev_h+set}" = set; then
!   { echo "$as_me:$LINENO: checking for linux/videodev.h" >&5
! echo $ECHO_N "checking for linux/videodev.h... $ECHO_C" >&6; }
! if test "${ac_cv_header_linux_videodev_h+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! fi
! { echo "$as_me:$LINENO: result: $ac_cv_header_linux_videodev_h" >&5
! echo "${ECHO_T}$ac_cv_header_linux_videodev_h" >&6; }
! else
!   # Is the header compilable?
! { echo "$as_me:$LINENO: checking linux/videodev.h usability" >&5
! echo $ECHO_N "checking linux/videodev.h usability... $ECHO_C" >&6; }
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
! /* end confdefs.h.  */
! $ac_includes_default
! #include <linux/videodev.h>
! _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
!   ac_header_compiler=yes
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
! 	ac_header_compiler=no
! fi
! 
! rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
! { echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
! echo "${ECHO_T}$ac_header_compiler" >&6; }
! 
! # Is the header present?
! { echo "$as_me:$LINENO: checking linux/videodev.h presence" >&5
! echo $ECHO_N "checking linux/videodev.h presence... $ECHO_C" >&6; }
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
! /* end confdefs.h.  */
! #include <linux/videodev.h>
! _ACEOF
! if { (ac_try="$ac_cpp conftest.$ac_ext"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } >/dev/null && {
! 	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        }; then
!   ac_header_preproc=yes
! else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
!   ac_header_preproc=no
! fi
! 
! rm -f conftest.err conftest.$ac_ext
! { echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
! echo "${ECHO_T}$ac_header_preproc" >&6; }
! 
! # So?  What about this header?
! case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
!   yes:no: )
!     { echo "$as_me:$LINENO: WARNING: linux/videodev.h: accepted by the compiler, rejected by the preprocessor!" >&5
! echo "$as_me: WARNING: linux/videodev.h: accepted by the compiler, rejected by the preprocessor!" >&2;}
!     { echo "$as_me:$LINENO: WARNING: linux/videodev.h: proceeding with the compiler's result" >&5
! echo "$as_me: WARNING: linux/videodev.h: proceeding with the compiler's result" >&2;}
!     ac_header_preproc=yes
!     ;;
!   no:yes:* )
!     { echo "$as_me:$LINENO: WARNING: linux/videodev.h: present but cannot be compiled" >&5
! echo "$as_me: WARNING: linux/videodev.h: present but cannot be compiled" >&2;}
!     { echo "$as_me:$LINENO: WARNING: linux/videodev.h:     check for missing prerequisite headers?" >&5
! echo "$as_me: WARNING: linux/videodev.h:     check for missing prerequisite headers?" >&2;}
!     { echo "$as_me:$LINENO: WARNING: linux/videodev.h: see the Autoconf documentation" >&5
! echo "$as_me: WARNING: linux/videodev.h: see the Autoconf documentation" >&2;}
!     { echo "$as_me:$LINENO: WARNING: linux/videodev.h:     section \"Present But Cannot Be Compiled\"" >&5
! echo "$as_me: WARNING: linux/videodev.h:     section \"Present But Cannot Be Compiled\"" >&2;}
!     { echo "$as_me:$LINENO: WARNING: linux/videodev.h: proceeding with the preprocessor's result" >&5
! echo "$as_me: WARNING: linux/videodev.h: proceeding with the preprocessor's result" >&2;}
!     { echo "$as_me:$LINENO: WARNING: linux/videodev.h: in the future, the compiler will take precedence" >&5
! echo "$as_me: WARNING: linux/videodev.h: in the future, the compiler will take precedence" >&2;}
! 
!     ;;
! esac
! { echo "$as_me:$LINENO: checking for linux/videodev.h" >&5
! echo $ECHO_N "checking for linux/videodev.h... $ECHO_C" >&6; }
! if test "${ac_cv_header_linux_videodev_h+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   ac_cv_header_linux_videodev_h=$ac_header_preproc
! fi
! { echo "$as_me:$LINENO: result: $ac_cv_header_linux_videodev_h" >&5
! echo "${ECHO_T}$ac_cv_header_linux_videodev_h" >&6; }
! 
! fi
! if test $ac_cv_header_linux_videodev_h = yes; then
!   cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <linux/videodev.h>
  int
--- 26330,26338 ----
    # try a compile as well: if we're using icc the header can break
    # even try assigning to vc.type: if this works, surely the header is
    # functional
!   ac_fn_c_check_header_mongrel "$LINENO" "linux/videodev.h" "ac_cv_header_linux_videodev_h" "$ac_includes_default"
! if test "x$ac_cv_header_linux_videodev_h" = xyes; then :
!   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <linux/videodev.h>
  int
***************
*** 30873,30903 ****
    return 0;
  }
  _ACEOF
! rm -f conftest.$ac_objext
! if { (ac_try="$ac_compile"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_compile") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && {
! 	 test -z "$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        } && test -s conftest.$ac_objext; then
    with_videodev=yes
- else
-   echo "$as_me: failed program was:" >&5
- sed 's/^/| /' conftest.$ac_ext >&5
- 
- 
  fi
- 
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  
  fi
--- 26343,26351 ----
    return 0;
  }
  _ACEOF
! if ac_fn_c_try_compile "$LINENO"; then :
    with_videodev=yes
  fi
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
  
  fi
***************
*** 30907,30927 ****
  
  if test x"$with_videodev" = x"yes"; then
  
! cat >>confdefs.h <<\_ACEOF
! #define HAVE_VIDEODEV 1
! _ACEOF
  
    with_v4l=yes
  else
!   { echo "$as_me:$LINENO: WARNING: linux/videodev.h not functional; disabling Linux video support" >&5
! echo "$as_me: WARNING: linux/videodev.h not functional; disabling Linux video support" >&2;}
    with_v4l=no
  fi
  
  # make python binding?
  
  # Check whether --with-python was given.
! if test "${with_python+set}" = set; then
    withval=$with_python;
  fi
  
--- 26355,26373 ----
  
  if test x"$with_videodev" = x"yes"; then
  
! $as_echo "#define HAVE_VIDEODEV 1" >>confdefs.h
  
    with_v4l=yes
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: linux/videodev.h not functional; disabling Linux video support" >&5
! $as_echo "$as_me: WARNING: linux/videodev.h not functional; disabling Linux video support" >&2;}
    with_v4l=no
  fi
  
  # make python binding?
  
  # Check whether --with-python was given.
! if test "${with_python+set}" = set; then :
    withval=$with_python;
  fi
  
***************
*** 30933,30940 ****
  
          if test -n "$PYTHON"; then
        # If the user set $PYTHON, use it and don't search something else.
!       { echo "$as_me:$LINENO: checking whether $PYTHON version >= 2.2" >&5
! echo $ECHO_N "checking whether $PYTHON version >= 2.2... $ECHO_C" >&6; }
        prog="import sys, string
  # split strings by '.' and convert to numeric.  Append some zeros
  # because we need at least 4 digits for the hex conversion.
--- 26379,26386 ----
  
          if test -n "$PYTHON"; then
        # If the user set $PYTHON, use it and don't search something else.
!       { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $PYTHON version >= 2.2" >&5
! $as_echo_n "checking whether $PYTHON version >= 2.2... " >&6; }
        prog="import sys, string
  # split strings by '.' and convert to numeric.  Append some zeros
  # because we need at least 4 digits for the hex conversion.
***************
*** 30946,30960 ****
     ($PYTHON -c "$prog") >&5 2>&5
     ac_status=$?
     echo "$as_me:$LINENO: \$? = $ac_status" >&5
!    (exit $ac_status); }; then
!   { echo "$as_me:$LINENO: result: yes" >&5
! echo "${ECHO_T}yes" >&6; }
! else
!   { { echo "$as_me:$LINENO: error: too old" >&5
! echo "$as_me: error: too old" >&2;}
!    { (exit 1); exit 1; }; }
  fi
- 
        am_display_PYTHON=$PYTHON
      else
        # Otherwise, try each interpreter until we find one that satisfies
--- 26392,26403 ----
     ($PYTHON -c "$prog") >&5 2>&5
     ac_status=$?
     echo "$as_me:$LINENO: \$? = $ac_status" >&5
!    (exit $ac_status); }; then :
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
! $as_echo "yes" >&6; }
! else
!   as_fn_error $? "too old" "$LINENO" 5
  fi
        am_display_PYTHON=$PYTHON
      else
        # Otherwise, try each interpreter until we find one that satisfies
***************
*** 30959,30968 ****
      else
        # Otherwise, try each interpreter until we find one that satisfies
        # VERSION.
!       { echo "$as_me:$LINENO: checking for a Python interpreter with version >= 2.2" >&5
! echo $ECHO_N "checking for a Python interpreter with version >= 2.2... $ECHO_C" >&6; }
! if test "${am_cv_pathless_PYTHON+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
  
  	for am_cv_pathless_PYTHON in python python2 python2.5 python2.4 python2.3 python2.2 python2.1 python2.0 python1.6 python1.5 none; do
--- 26402,26411 ----
      else
        # Otherwise, try each interpreter until we find one that satisfies
        # VERSION.
!       { $as_echo "$as_me:${as_lineno-$LINENO}: checking for a Python interpreter with version >= 2.2" >&5
! $as_echo_n "checking for a Python interpreter with version >= 2.2... " >&6; }
! if ${am_cv_pathless_PYTHON+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
  
  	for am_cv_pathless_PYTHON in python python2 python2.5 python2.4 python2.3 python2.2 python2.1 python2.0 python1.6 python1.5 none; do
***************
*** 30978,31001 ****
     ($am_cv_pathless_PYTHON -c "$prog") >&5 2>&5
     ac_status=$?
     echo "$as_me:$LINENO: \$? = $ac_status" >&5
!    (exit $ac_status); }; then
    break
  fi
- 
  	done
  fi
! { echo "$as_me:$LINENO: result: $am_cv_pathless_PYTHON" >&5
! echo "${ECHO_T}$am_cv_pathless_PYTHON" >&6; }
        # Set $PYTHON to the absolute path of $am_cv_pathless_PYTHON.
        if test "$am_cv_pathless_PYTHON" = none; then
  	PYTHON=:
        else
          # Extract the first word of "$am_cv_pathless_PYTHON", so it can be a program name with args.
  set dummy $am_cv_pathless_PYTHON; ac_word=$2
! { echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6; }
! if test "${ac_cv_path_PYTHON+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    case $PYTHON in
    [\\/]* | ?:[\\/]*)
--- 26421,26443 ----
     ($am_cv_pathless_PYTHON -c "$prog") >&5 2>&5
     ac_status=$?
     echo "$as_me:$LINENO: \$? = $ac_status" >&5
!    (exit $ac_status); }; then :
    break
  fi
  	done
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $am_cv_pathless_PYTHON" >&5
! $as_echo "$am_cv_pathless_PYTHON" >&6; }
        # Set $PYTHON to the absolute path of $am_cv_pathless_PYTHON.
        if test "$am_cv_pathless_PYTHON" = none; then
  	PYTHON=:
        else
          # Extract the first word of "$am_cv_pathless_PYTHON", so it can be a program name with args.
  set dummy $am_cv_pathless_PYTHON; ac_word=$2
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
! $as_echo_n "checking for $ac_word... " >&6; }
! if ${ac_cv_path_PYTHON+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    case $PYTHON in
    [\\/]* | ?:[\\/]*)
***************
*** 31007,31020 ****
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_path_PYTHON="$as_dir/$ac_word$ac_exec_ext"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
! done
  IFS=$as_save_IFS
  
    ;;
--- 26449,26462 ----
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     for ac_exec_ext in '' $ac_executable_extensions; do
    if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
      ac_cv_path_PYTHON="$as_dir/$ac_word$ac_exec_ext"
!     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
      break 2
    fi
  done
!   done
  IFS=$as_save_IFS
  
    ;;
***************
*** 31022,31032 ****
  fi
  PYTHON=$ac_cv_path_PYTHON
  if test -n "$PYTHON"; then
!   { echo "$as_me:$LINENO: result: $PYTHON" >&5
! echo "${ECHO_T}$PYTHON" >&6; }
  else
!   { echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6; }
  fi
  
  
--- 26464,26474 ----
  fi
  PYTHON=$ac_cv_path_PYTHON
  if test -n "$PYTHON"; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $PYTHON" >&5
! $as_echo "$PYTHON" >&6; }
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
! $as_echo "no" >&6; }
  fi
  
  
***************
*** 31037,31056 ****
  
    if test "$PYTHON" = :; then
        with_python=no
!      { echo "$as_me:$LINENO: WARNING: Python not found; disabling Python binding" >&5
! echo "$as_me: WARNING: Python not found; disabling Python binding" >&2;}
    else
  
  
!   { echo "$as_me:$LINENO: checking for $am_display_PYTHON version" >&5
! echo $ECHO_N "checking for $am_display_PYTHON version... $ECHO_C" >&6; }
! if test "${am_cv_python_version+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    am_cv_python_version=`$PYTHON -c "import sys; print sys.version[:3]"`
  fi
! { echo "$as_me:$LINENO: result: $am_cv_python_version" >&5
! echo "${ECHO_T}$am_cv_python_version" >&6; }
    PYTHON_VERSION=$am_cv_python_version
  
  
--- 26479,26498 ----
  
    if test "$PYTHON" = :; then
        with_python=no
!      { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: Python not found; disabling Python binding" >&5
! $as_echo "$as_me: WARNING: Python not found; disabling Python binding" >&2;}
    else
  
  
!   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $am_display_PYTHON version" >&5
! $as_echo_n "checking for $am_display_PYTHON version... " >&6; }
! if ${am_cv_python_version+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    am_cv_python_version=`$PYTHON -c "import sys; print sys.version[:3]"`
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $am_cv_python_version" >&5
! $as_echo "$am_cv_python_version" >&6; }
    PYTHON_VERSION=$am_cv_python_version
  
  
***************
*** 31061,31090 ****
  
  
  
!   { echo "$as_me:$LINENO: checking for $am_display_PYTHON platform" >&5
! echo $ECHO_N "checking for $am_display_PYTHON platform... $ECHO_C" >&6; }
! if test "${am_cv_python_platform+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    am_cv_python_platform=`$PYTHON -c "import sys; print sys.platform"`
  fi
! { echo "$as_me:$LINENO: result: $am_cv_python_platform" >&5
! echo "${ECHO_T}$am_cv_python_platform" >&6; }
    PYTHON_PLATFORM=$am_cv_python_platform
  
  
  
  
!                 { echo "$as_me:$LINENO: checking for $am_display_PYTHON script directory" >&5
! echo $ECHO_N "checking for $am_display_PYTHON script directory... $ECHO_C" >&6; }
! if test "${am_cv_python_pythondir+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    am_cv_python_pythondir=`$PYTHON -c "from distutils import sysconfig; print sysconfig.get_python_lib(0,0,prefix='$PYTHON_PREFIX')" 2>/dev/null ||
       echo "$PYTHON_PREFIX/lib/python$PYTHON_VERSION/site-packages"`
  fi
! { echo "$as_me:$LINENO: result: $am_cv_python_pythondir" >&5
! echo "${ECHO_T}$am_cv_python_pythondir" >&6; }
    pythondir=$am_cv_python_pythondir
  
  
--- 26503,26532 ----
  
  
  
!   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $am_display_PYTHON platform" >&5
! $as_echo_n "checking for $am_display_PYTHON platform... " >&6; }
! if ${am_cv_python_platform+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    am_cv_python_platform=`$PYTHON -c "import sys; print sys.platform"`
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $am_cv_python_platform" >&5
! $as_echo "$am_cv_python_platform" >&6; }
    PYTHON_PLATFORM=$am_cv_python_platform
  
  
  
  
!                 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $am_display_PYTHON script directory" >&5
! $as_echo_n "checking for $am_display_PYTHON script directory... " >&6; }
! if ${am_cv_python_pythondir+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    am_cv_python_pythondir=`$PYTHON -c "from distutils import sysconfig; print sysconfig.get_python_lib(0,0,prefix='$PYTHON_PREFIX')" 2>/dev/null ||
       echo "$PYTHON_PREFIX/lib/python$PYTHON_VERSION/site-packages"`
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $am_cv_python_pythondir" >&5
! $as_echo "$am_cv_python_pythondir" >&6; }
    pythondir=$am_cv_python_pythondir
  
  
***************
*** 31092,31107 ****
    pkgpythondir=\${pythondir}/$PACKAGE
  
  
!             { echo "$as_me:$LINENO: checking for $am_display_PYTHON extension module directory" >&5
! echo $ECHO_N "checking for $am_display_PYTHON extension module directory... $ECHO_C" >&6; }
! if test "${am_cv_python_pyexecdir+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    am_cv_python_pyexecdir=`$PYTHON -c "from distutils import sysconfig; print sysconfig.get_python_lib(1,0,prefix='$PYTHON_EXEC_PREFIX')" 2>/dev/null ||
       echo "${PYTHON_EXEC_PREFIX}/lib/python${PYTHON_VERSION}/site-packages"`
  fi
! { echo "$as_me:$LINENO: result: $am_cv_python_pyexecdir" >&5
! echo "${ECHO_T}$am_cv_python_pyexecdir" >&6; }
    pyexecdir=$am_cv_python_pyexecdir
  
  
--- 26534,26549 ----
    pkgpythondir=\${pythondir}/$PACKAGE
  
  
!             { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $am_display_PYTHON extension module directory" >&5
! $as_echo_n "checking for $am_display_PYTHON extension module directory... " >&6; }
! if ${am_cv_python_pyexecdir+:} false; then :
!   $as_echo_n "(cached) " >&6
  else
    am_cv_python_pyexecdir=`$PYTHON -c "from distutils import sysconfig; print sysconfig.get_python_lib(1,0,prefix='$PYTHON_EXEC_PREFIX')" 2>/dev/null ||
       echo "${PYTHON_EXEC_PREFIX}/lib/python${PYTHON_VERSION}/site-packages"`
  fi
! { $as_echo "$as_me:${as_lineno-$LINENO}: result: $am_cv_python_pyexecdir" >&5
! $as_echo "$am_cv_python_pyexecdir" >&6; }
    pyexecdir=$am_cv_python_pyexecdir
  
  
***************
*** 31117,31124 ****
  
  if test x"$with_python" != "xno"; then
  
! { echo "$as_me:$LINENO: checking for headers required to compile python extensions" >&5
! echo $ECHO_N "checking for headers required to compile python extensions... $ECHO_C" >&6; }
  py_prefix=`$PYTHON -c "import sys; print sys.prefix"`
  py_exec_prefix=`$PYTHON -c "import sys; print sys.exec_prefix"`
  PYTHON_INCLUDES="-I${py_prefix}/include/python${PYTHON_VERSION}"
--- 26559,26566 ----
  
  if test x"$with_python" != "xno"; then
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: checking for headers required to compile python extensions" >&5
! $as_echo_n "checking for headers required to compile python extensions... " >&6; }
  py_prefix=`$PYTHON -c "import sys; print sys.prefix"`
  py_exec_prefix=`$PYTHON -c "import sys; print sys.exec_prefix"`
  PYTHON_INCLUDES="-I${py_prefix}/include/python${PYTHON_VERSION}"
***************
*** 31128,31172 ****
  
  save_CPPFLAGS="$CPPFLAGS"
  CPPFLAGS="$CPPFLAGS $PYTHON_INCLUDES"
! cat >conftest.$ac_ext <<_ACEOF
! /* confdefs.h.  */
! _ACEOF
! cat confdefs.h >>conftest.$ac_ext
! cat >>conftest.$ac_ext <<_ACEOF
  /* end confdefs.h.  */
  #include <Python.h>
  _ACEOF
! if { (ac_try="$ac_cpp conftest.$ac_ext"
! case "(($ac_try" in
!   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
!   *) ac_try_echo=$ac_try;;
! esac
! eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
!   (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
!   ac_status=$?
!   grep -v '^ *+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } >/dev/null && {
! 	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
! 	 test ! -s conftest.err
!        }; then
!   { echo "$as_me:$LINENO: result: found" >&5
! echo "${ECHO_T}found" >&6; }
  
  else
!   echo "$as_me: failed program was:" >&5
! sed 's/^/| /' conftest.$ac_ext >&5
! 
!   { echo "$as_me:$LINENO: result: not found" >&5
! echo "${ECHO_T}not found" >&6; }
  with_python=no
!      { echo "$as_me:$LINENO: WARNING: Python headers not found" >&5
! echo "$as_me: WARNING: Python headers not found" >&2;}
  fi
! 
! rm -f conftest.err conftest.$ac_ext
  CPPFLAGS="$save_CPPFLAGS"
  
  fi
--- 26570,26591 ----
  
  save_CPPFLAGS="$CPPFLAGS"
  CPPFLAGS="$CPPFLAGS $PYTHON_INCLUDES"
! cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
  #include <Python.h>
  _ACEOF
! if ac_fn_c_try_cpp "$LINENO"; then :
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: found" >&5
! $as_echo "found" >&6; }
  
  else
!   { $as_echo "$as_me:${as_lineno-$LINENO}: result: not found" >&5
! $as_echo "not found" >&6; }
  with_python=no
!      { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: Python headers not found" >&5
! $as_echo "$as_me: WARNING: Python headers not found" >&2;}
  fi
! rm -f conftest.err conftest.i conftest.$ac_ext
  CPPFLAGS="$save_CPPFLAGS"
  
  fi
***************
*** 31199,31205 ****
  # platforms, so have an option to disable it
  
  # Check whether --with-cimg was given.
! if test "${with_cimg+set}" = set; then
    withval=$with_cimg;
  fi
  
--- 26618,26624 ----
  # platforms, so have an option to disable it
  
  # Check whether --with-cimg was given.
! if test "${with_cimg+set}" = set; then :
    withval=$with_cimg;
  fi
  
***************
*** 31214,31222 ****
  fi
  
  
! cat >>confdefs.h <<\_ACEOF
! #define WITH_CIMG 1
! _ACEOF
  
  
    # we have to explicitly link with stdc++ on mingw for some reason, yuk!
--- 26633,26639 ----
  fi
  
  
! $as_echo "#define WITH_CIMG 1" >>confdefs.h
  
  
    # we have to explicitly link with stdc++ on mingw for some reason, yuk!
***************
*** 31233,31240 ****
    WITH_CIMG_FALSE=
  fi
  
!   { echo "$as_me:$LINENO: WARNING: disabling CImg binding" >&5
! echo "$as_me: WARNING: disabling CImg binding" >&2;}
    with_cimg=no
  fi
  
--- 26650,26657 ----
    WITH_CIMG_FALSE=
  fi
  
!   { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: disabling CImg binding" >&5
! $as_echo "$as_me: WARNING: disabling CImg binding" >&2;}
    with_cimg=no
  fi
  
***************
*** 31283,31294 ****
      case $ac_val in #(
      *${as_nl}*)
        case $ac_var in #(
!       *_cv_*) { echo "$as_me:$LINENO: WARNING: Cache variable $ac_var contains a newline." >&5
! echo "$as_me: WARNING: Cache variable $ac_var contains a newline." >&2;} ;;
        esac
        case $ac_var in #(
        _ | IFS | as_nl) ;; #(
!       *) $as_unset $ac_var ;;
        esac ;;
      esac
    done
--- 26700,26712 ----
      case $ac_val in #(
      *${as_nl}*)
        case $ac_var in #(
!       *_cv_*) { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: cache variable $ac_var contains a newline" >&5
! $as_echo "$as_me: WARNING: cache variable $ac_var contains a newline" >&2;} ;;
        esac
        case $ac_var in #(
        _ | IFS | as_nl) ;; #(
!       BASH_ARGV | BASH_SOURCE) eval $ac_var= ;; #(
!       *) { eval $ac_var=; unset $ac_var;} ;;
        esac ;;
      esac
    done
***************
*** 31296,31303 ****
    (set) 2>&1 |
      case $as_nl`(ac_space=' '; set) 2>&1` in #(
      *${as_nl}ac_space=\ *)
!       # `set' does not quote correctly, so add quotes (double-quote
!       # substitution turns \\\\ into \\, and sed turns \\ into \).
        sed -n \
  	"s/'/'\\\\''/g;
  	  s/^\\([_$as_cr_alnum]*_cv_[_$as_cr_alnum]*\\)=\\(.*\\)/\\1='\\2'/p"
--- 26714,26721 ----
    (set) 2>&1 |
      case $as_nl`(ac_space=' '; set) 2>&1` in #(
      *${as_nl}ac_space=\ *)
!       # `set' does not quote correctly, so add quotes: double-quote
!       # substitution turns \\\\ into \\, and sed turns \\ into \.
        sed -n \
  	"s/'/'\\\\''/g;
  	  s/^\\([_$as_cr_alnum]*_cv_[_$as_cr_alnum]*\\)=\\(.*\\)/\\1='\\2'/p"
***************
*** 31319,31331 ****
       :end' >>confcache
  if diff "$cache_file" confcache >/dev/null 2>&1; then :; else
    if test -w "$cache_file"; then
!     test "x$cache_file" != "x/dev/null" &&
!       { echo "$as_me:$LINENO: updating cache $cache_file" >&5
! echo "$as_me: updating cache $cache_file" >&6;}
!     cat confcache >$cache_file
    else
!     { echo "$as_me:$LINENO: not updating unwritable cache $cache_file" >&5
! echo "$as_me: not updating unwritable cache $cache_file" >&6;}
    fi
  fi
  rm -f confcache
--- 26737,26760 ----
       :end' >>confcache
  if diff "$cache_file" confcache >/dev/null 2>&1; then :; else
    if test -w "$cache_file"; then
!     if test "x$cache_file" != "x/dev/null"; then
!       { $as_echo "$as_me:${as_lineno-$LINENO}: updating cache $cache_file" >&5
! $as_echo "$as_me: updating cache $cache_file" >&6;}
!       if test ! -f "$cache_file" || test -h "$cache_file"; then
! 	cat confcache >"$cache_file"
!       else
!         case $cache_file in #(
!         */* | ?:*)
! 	  mv -f confcache "$cache_file"$$ &&
! 	  mv -f "$cache_file"$$ "$cache_file" ;; #(
!         *)
! 	  mv -f confcache "$cache_file" ;;
! 	esac
!       fi
!     fi
    else
!     { $as_echo "$as_me:${as_lineno-$LINENO}: not updating unwritable cache $cache_file" >&5
! $as_echo "$as_me: not updating unwritable cache $cache_file" >&6;}
    fi
  fi
  rm -f confcache
***************
*** 31338,31351 ****
  
  ac_libobjs=
  ac_ltlibobjs=
  for ac_i in : $LIBOBJS; do test "x$ac_i" = x: && continue
    # 1. Remove the extension, and $U if already installed.
    ac_script='s/\$U\././;s/\.o$//;s/\.obj$//'
!   ac_i=`echo "$ac_i" | sed "$ac_script"`
    # 2. Prepend LIBOBJDIR.  When used with automake>=1.10 LIBOBJDIR
    #    will be set to the directory where LIBOBJS objects are built.
!   ac_libobjs="$ac_libobjs \${LIBOBJDIR}$ac_i\$U.$ac_objext"
!   ac_ltlibobjs="$ac_ltlibobjs \${LIBOBJDIR}$ac_i"'$U.lo'
  done
  LIBOBJS=$ac_libobjs
  
--- 26767,26781 ----
  
  ac_libobjs=
  ac_ltlibobjs=
+ U=
  for ac_i in : $LIBOBJS; do test "x$ac_i" = x: && continue
    # 1. Remove the extension, and $U if already installed.
    ac_script='s/\$U\././;s/\.o$//;s/\.obj$//'
!   ac_i=`$as_echo "$ac_i" | sed "$ac_script"`
    # 2. Prepend LIBOBJDIR.  When used with automake>=1.10 LIBOBJDIR
    #    will be set to the directory where LIBOBJS objects are built.
!   as_fn_append ac_libobjs " \${LIBOBJDIR}$ac_i\$U.$ac_objext"
!   as_fn_append ac_ltlibobjs " \${LIBOBJDIR}$ac_i"'$U.lo'
  done
  LIBOBJS=$ac_libobjs
  
***************
*** 31353,31448 ****
  
  
  if test -z "${OS_WIN32_TRUE}" && test -z "${OS_WIN32_FALSE}"; then
!   { { echo "$as_me:$LINENO: error: conditional \"OS_WIN32\" was never defined.
! Usually this means the macro was only invoked conditionally." >&5
! echo "$as_me: error: conditional \"OS_WIN32\" was never defined.
! Usually this means the macro was only invoked conditionally." >&2;}
!    { (exit 1); exit 1; }; }
  fi
  if test -z "${OS_WIN32_TRUE}" && test -z "${OS_WIN32_FALSE}"; then
!   { { echo "$as_me:$LINENO: error: conditional \"OS_WIN32\" was never defined.
! Usually this means the macro was only invoked conditionally." >&5
! echo "$as_me: error: conditional \"OS_WIN32\" was never defined.
! Usually this means the macro was only invoked conditionally." >&2;}
!    { (exit 1); exit 1; }; }
  fi
  if test -z "${AMDEP_TRUE}" && test -z "${AMDEP_FALSE}"; then
!   { { echo "$as_me:$LINENO: error: conditional \"AMDEP\" was never defined.
! Usually this means the macro was only invoked conditionally." >&5
! echo "$as_me: error: conditional \"AMDEP\" was never defined.
! Usually this means the macro was only invoked conditionally." >&2;}
!    { (exit 1); exit 1; }; }
  fi
  if test -z "${am__fastdepCC_TRUE}" && test -z "${am__fastdepCC_FALSE}"; then
!   { { echo "$as_me:$LINENO: error: conditional \"am__fastdepCC\" was never defined.
! Usually this means the macro was only invoked conditionally." >&5
! echo "$as_me: error: conditional \"am__fastdepCC\" was never defined.
! Usually this means the macro was only invoked conditionally." >&2;}
!    { (exit 1); exit 1; }; }
  fi
  if test -z "${am__fastdepCC_TRUE}" && test -z "${am__fastdepCC_FALSE}"; then
!   { { echo "$as_me:$LINENO: error: conditional \"am__fastdepCC\" was never defined.
! Usually this means the macro was only invoked conditionally." >&5
! echo "$as_me: error: conditional \"am__fastdepCC\" was never defined.
! Usually this means the macro was only invoked conditionally." >&2;}
!    { (exit 1); exit 1; }; }
  fi
  if test -z "${am__fastdepCXX_TRUE}" && test -z "${am__fastdepCXX_FALSE}"; then
!   { { echo "$as_me:$LINENO: error: conditional \"am__fastdepCXX\" was never defined.
! Usually this means the macro was only invoked conditionally." >&5
! echo "$as_me: error: conditional \"am__fastdepCXX\" was never defined.
! Usually this means the macro was only invoked conditionally." >&2;}
!    { (exit 1); exit 1; }; }
  fi
  if test -z "${ENABLE_LINKS_TRUE}" && test -z "${ENABLE_LINKS_FALSE}"; then
!   { { echo "$as_me:$LINENO: error: conditional \"ENABLE_LINKS\" was never defined.
! Usually this means the macro was only invoked conditionally." >&5
! echo "$as_me: error: conditional \"ENABLE_LINKS\" was never defined.
! Usually this means the macro was only invoked conditionally." >&2;}
!    { (exit 1); exit 1; }; }
  fi
  if test -z "${ENABLE_LINKS_TRUE}" && test -z "${ENABLE_LINKS_FALSE}"; then
!   { { echo "$as_me:$LINENO: error: conditional \"ENABLE_LINKS\" was never defined.
! Usually this means the macro was only invoked conditionally." >&5
! echo "$as_me: error: conditional \"ENABLE_LINKS\" was never defined.
! Usually this means the macro was only invoked conditionally." >&2;}
!    { (exit 1); exit 1; }; }
  fi
  if test -z "${HAVE_PYTHON_TRUE}" && test -z "${HAVE_PYTHON_FALSE}"; then
!   { { echo "$as_me:$LINENO: error: conditional \"HAVE_PYTHON\" was never defined.
! Usually this means the macro was only invoked conditionally." >&5
! echo "$as_me: error: conditional \"HAVE_PYTHON\" was never defined.
! Usually this means the macro was only invoked conditionally." >&2;}
!    { (exit 1); exit 1; }; }
  fi
  if test -z "${HAVE_PYTHON_TRUE}" && test -z "${HAVE_PYTHON_FALSE}"; then
!   { { echo "$as_me:$LINENO: error: conditional \"HAVE_PYTHON\" was never defined.
! Usually this means the macro was only invoked conditionally." >&5
! echo "$as_me: error: conditional \"HAVE_PYTHON\" was never defined.
! Usually this means the macro was only invoked conditionally." >&2;}
!    { (exit 1); exit 1; }; }
  fi
  if test -z "${WITH_CIMG_TRUE}" && test -z "${WITH_CIMG_FALSE}"; then
!   { { echo "$as_me:$LINENO: error: conditional \"WITH_CIMG\" was never defined.
! Usually this means the macro was only invoked conditionally." >&5
! echo "$as_me: error: conditional \"WITH_CIMG\" was never defined.
! Usually this means the macro was only invoked conditionally." >&2;}
!    { (exit 1); exit 1; }; }
  fi
  if test -z "${WITH_CIMG_TRUE}" && test -z "${WITH_CIMG_FALSE}"; then
!   { { echo "$as_me:$LINENO: error: conditional \"WITH_CIMG\" was never defined.
! Usually this means the macro was only invoked conditionally." >&5
! echo "$as_me: error: conditional \"WITH_CIMG\" was never defined.
! Usually this means the macro was only invoked conditionally." >&2;}
!    { (exit 1); exit 1; }; }
  fi
  
! : ${CONFIG_STATUS=./config.status}
  ac_clean_files_save=$ac_clean_files
  ac_clean_files="$ac_clean_files $CONFIG_STATUS"
! { echo "$as_me:$LINENO: creating $CONFIG_STATUS" >&5
! echo "$as_me: creating $CONFIG_STATUS" >&6;}
! cat >$CONFIG_STATUS <<_ACEOF
  #! $SHELL
  # Generated by $as_me.
  # Run this file to recreate the current configuration.
--- 26783,26844 ----
  
  
  if test -z "${OS_WIN32_TRUE}" && test -z "${OS_WIN32_FALSE}"; then
!   as_fn_error $? "conditional \"OS_WIN32\" was never defined.
! Usually this means the macro was only invoked conditionally." "$LINENO" 5
  fi
  if test -z "${OS_WIN32_TRUE}" && test -z "${OS_WIN32_FALSE}"; then
!   as_fn_error $? "conditional \"OS_WIN32\" was never defined.
! Usually this means the macro was only invoked conditionally." "$LINENO" 5
  fi
  if test -z "${AMDEP_TRUE}" && test -z "${AMDEP_FALSE}"; then
!   as_fn_error $? "conditional \"AMDEP\" was never defined.
! Usually this means the macro was only invoked conditionally." "$LINENO" 5
  fi
  if test -z "${am__fastdepCC_TRUE}" && test -z "${am__fastdepCC_FALSE}"; then
!   as_fn_error $? "conditional \"am__fastdepCC\" was never defined.
! Usually this means the macro was only invoked conditionally." "$LINENO" 5
  fi
  if test -z "${am__fastdepCC_TRUE}" && test -z "${am__fastdepCC_FALSE}"; then
!   as_fn_error $? "conditional \"am__fastdepCC\" was never defined.
! Usually this means the macro was only invoked conditionally." "$LINENO" 5
  fi
  if test -z "${am__fastdepCXX_TRUE}" && test -z "${am__fastdepCXX_FALSE}"; then
!   as_fn_error $? "conditional \"am__fastdepCXX\" was never defined.
! Usually this means the macro was only invoked conditionally." "$LINENO" 5
  fi
  if test -z "${ENABLE_LINKS_TRUE}" && test -z "${ENABLE_LINKS_FALSE}"; then
!   as_fn_error $? "conditional \"ENABLE_LINKS\" was never defined.
! Usually this means the macro was only invoked conditionally." "$LINENO" 5
  fi
  if test -z "${ENABLE_LINKS_TRUE}" && test -z "${ENABLE_LINKS_FALSE}"; then
!   as_fn_error $? "conditional \"ENABLE_LINKS\" was never defined.
! Usually this means the macro was only invoked conditionally." "$LINENO" 5
  fi
  if test -z "${HAVE_PYTHON_TRUE}" && test -z "${HAVE_PYTHON_FALSE}"; then
!   as_fn_error $? "conditional \"HAVE_PYTHON\" was never defined.
! Usually this means the macro was only invoked conditionally." "$LINENO" 5
  fi
  if test -z "${HAVE_PYTHON_TRUE}" && test -z "${HAVE_PYTHON_FALSE}"; then
!   as_fn_error $? "conditional \"HAVE_PYTHON\" was never defined.
! Usually this means the macro was only invoked conditionally." "$LINENO" 5
  fi
  if test -z "${WITH_CIMG_TRUE}" && test -z "${WITH_CIMG_FALSE}"; then
!   as_fn_error $? "conditional \"WITH_CIMG\" was never defined.
! Usually this means the macro was only invoked conditionally." "$LINENO" 5
  fi
  if test -z "${WITH_CIMG_TRUE}" && test -z "${WITH_CIMG_FALSE}"; then
!   as_fn_error $? "conditional \"WITH_CIMG\" was never defined.
! Usually this means the macro was only invoked conditionally." "$LINENO" 5
  fi
  
! : "${CONFIG_STATUS=./config.status}"
! ac_write_fail=0
  ac_clean_files_save=$ac_clean_files
  ac_clean_files="$ac_clean_files $CONFIG_STATUS"
! { $as_echo "$as_me:${as_lineno-$LINENO}: creating $CONFIG_STATUS" >&5
! $as_echo "$as_me: creating $CONFIG_STATUS" >&6;}
! as_write_fail=0
! cat >$CONFIG_STATUS <<_ASEOF || as_write_fail=1
  #! $SHELL
  # Generated by $as_me.
  # Run this file to recreate the current configuration.
***************
*** 31452,31479 ****
  debug=false
  ac_cs_recheck=false
  ac_cs_silent=false
- SHELL=\${CONFIG_SHELL-$SHELL}
- _ACEOF
  
! cat >>$CONFIG_STATUS <<\_ACEOF
! ## --------------------- ##
! ## M4sh Initialization.  ##
! ## --------------------- ##
  
  # Be more Bourne compatible
  DUALCASE=1; export DUALCASE # for MKS sh
! if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
    emulate sh
    NULLCMD=:
!   # Zsh 3.x and 4.x performs word splitting on ${1+"$@"}, which
    # is contrary to our usage.  Disable this feature.
    alias -g '${1+"$@"}'='"$@"'
    setopt NO_GLOB_SUBST
  else
!   case `(set -o) 2>/dev/null` in
!   *posix*) set -o posix ;;
  esac
- 
  fi
  
  
--- 26848,26878 ----
  debug=false
  ac_cs_recheck=false
  ac_cs_silent=false
  
! SHELL=\${CONFIG_SHELL-$SHELL}
! export SHELL
! _ASEOF
! cat >>$CONFIG_STATUS <<\_ASEOF || as_write_fail=1
! ## -------------------- ##
! ## M4sh Initialization. ##
! ## -------------------- ##
  
  # Be more Bourne compatible
  DUALCASE=1; export DUALCASE # for MKS sh
! if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then :
    emulate sh
    NULLCMD=:
!   # Pre-4.2 versions of Zsh do word splitting on ${1+"$@"}, which
    # is contrary to our usage.  Disable this feature.
    alias -g '${1+"$@"}'='"$@"'
    setopt NO_GLOB_SUBST
  else
!   case `(set -o) 2>/dev/null` in #(
!   *posix*) :
!     set -o posix ;; #(
!   *) :
!      ;;
  esac
  fi
  
  
***************
*** 31477,31510 ****
  fi
  
  
! 
! 
! # PATH needs CR
! # Avoid depending upon Character Ranges.
! as_cr_letters='abcdefghijklmnopqrstuvwxyz'
! as_cr_LETTERS='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
! as_cr_Letters=$as_cr_letters$as_cr_LETTERS
! as_cr_digits='0123456789'
! as_cr_alnum=$as_cr_Letters$as_cr_digits
! 
! # The user is always right.
! if test "${PATH_SEPARATOR+set}" != set; then
!   echo "#! /bin/sh" >conf$$.sh
!   echo  "exit 0"   >>conf$$.sh
!   chmod +x conf$$.sh
!   if (PATH="/nonexistent;."; conf$$.sh) >/dev/null 2>&1; then
!     PATH_SEPARATOR=';'
!   else
!     PATH_SEPARATOR=:
    fi
!   rm -f conf$$.sh
  fi
  
! # Support unset when possible.
! if ( (MAIL=60; unset MAIL) || exit) >/dev/null 2>&1; then
!   as_unset=unset
! else
!   as_unset=false
  fi
  
  
--- 26876,26926 ----
  fi
  
  
! as_nl='
! '
! export as_nl
! # Printing a long string crashes Solaris 7 /usr/bin/printf.
! as_echo='\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\'
! as_echo=$as_echo$as_echo$as_echo$as_echo$as_echo
! as_echo=$as_echo$as_echo$as_echo$as_echo$as_echo$as_echo
! # Prefer a ksh shell builtin over an external printf program on Solaris,
! # but without wasting forks for bash or zsh.
! if test -z "$BASH_VERSION$ZSH_VERSION" \
!     && (test "X`print -r -- $as_echo`" = "X$as_echo") 2>/dev/null; then
!   as_echo='print -r --'
!   as_echo_n='print -rn --'
! elif (test "X`printf %s $as_echo`" = "X$as_echo") 2>/dev/null; then
!   as_echo='printf %s\n'
!   as_echo_n='printf %s'
! else
!   if test "X`(/usr/ucb/echo -n -n $as_echo) 2>/dev/null`" = "X-n $as_echo"; then
!     as_echo_body='eval /usr/ucb/echo -n "$1$as_nl"'
!     as_echo_n='/usr/ucb/echo -n'
!   else
!     as_echo_body='eval expr "X$1" : "X\\(.*\\)"'
!     as_echo_n_body='eval
!       arg=$1;
!       case $arg in #(
!       *"$as_nl"*)
! 	expr "X$arg" : "X\\(.*\\)$as_nl";
! 	arg=`expr "X$arg" : ".*$as_nl\\(.*\\)"`;;
!       esac;
!       expr "X$arg" : "X\\(.*\\)" | tr -d "$as_nl"
!     '
!     export as_echo_n_body
!     as_echo_n='sh -c $as_echo_n_body as_echo'
    fi
!   export as_echo_body
!   as_echo='sh -c $as_echo_body as_echo'
  fi
  
! # The user is always right.
! if test "${PATH_SEPARATOR+set}" != set; then
!   PATH_SEPARATOR=:
!   (PATH='/bin;/bin'; FPATH=$PATH; sh -c :) >/dev/null 2>&1 && {
!     (PATH='/bin:/bin'; FPATH=$PATH; sh -c :) >/dev/null 2>&1 ||
!       PATH_SEPARATOR=';'
!   }
  fi
  
  
***************
*** 31513,31532 ****
  # there to prevent editors from complaining about space-tab.
  # (If _AS_PATH_WALK were called with IFS unset, it would disable word
  # splitting by setting IFS to empty value.)
- as_nl='
- '
  IFS=" ""	$as_nl"
  
  # Find who we are.  Look in the path if we contain no directory separator.
! case $0 in
    *[\\/]* ) as_myself=$0 ;;
    *) as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
  for as_dir in $PATH
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!   test -r "$as_dir/$0" && as_myself=$as_dir/$0 && break
! done
  IFS=$as_save_IFS
  
       ;;
--- 26929,26947 ----
  # there to prevent editors from complaining about space-tab.
  # (If _AS_PATH_WALK were called with IFS unset, it would disable word
  # splitting by setting IFS to empty value.)
  IFS=" ""	$as_nl"
  
  # Find who we are.  Look in the path if we contain no directory separator.
! as_myself=
! case $0 in #((
    *[\\/]* ) as_myself=$0 ;;
    *) as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
  for as_dir in $PATH
  do
    IFS=$as_save_IFS
    test -z "$as_dir" && as_dir=.
!     test -r "$as_dir/$0" && as_myself=$as_dir/$0 && break
!   done
  IFS=$as_save_IFS
  
       ;;
***************
*** 31537,31568 ****
    as_myself=$0
  fi
  if test ! -f "$as_myself"; then
!   echo "$as_myself: error: cannot find myself; rerun with an absolute file name" >&2
!   { (exit 1); exit 1; }
  fi
  
! # Work around bugs in pre-3.0 UWIN ksh.
! for as_var in ENV MAIL MAILPATH
! do ($as_unset $as_var) >/dev/null 2>&1 && $as_unset $as_var
  done
  PS1='$ '
  PS2='> '
  PS4='+ '
  
  # NLS nuisances.
! for as_var in \
!   LANG LANGUAGE LC_ADDRESS LC_ALL LC_COLLATE LC_CTYPE LC_IDENTIFICATION \
!   LC_MEASUREMENT LC_MESSAGES LC_MONETARY LC_NAME LC_NUMERIC LC_PAPER \
!   LC_TELEPHONE LC_TIME
! do
!   if (set +x; test -z "`(eval $as_var=C; export $as_var) 2>&1`"); then
!     eval $as_var=C; export $as_var
!   else
!     ($as_unset $as_var) >/dev/null 2>&1 && $as_unset $as_var
!   fi
! done
  
- # Required to use basename.
  if expr a : '\(a\)' >/dev/null 2>&1 &&
     test "X`expr 00001 : '.*\(...\)'`" = X001; then
    as_expr=expr
--- 26952,27062 ----
    as_myself=$0
  fi
  if test ! -f "$as_myself"; then
!   $as_echo "$as_myself: error: cannot find myself; rerun with an absolute file name" >&2
!   exit 1
  fi
  
! # Unset variables that we do not need and which cause bugs (e.g. in
! # pre-3.0 UWIN ksh).  But do not cause bugs in bash 2.01; the "|| exit 1"
! # suppresses any "Segmentation fault" message there.  '((' could
! # trigger a bug in pdksh 5.2.14.
! for as_var in BASH_ENV ENV MAIL MAILPATH
! do eval test x\${$as_var+set} = xset \
!   && ( (unset $as_var) || exit 1) >/dev/null 2>&1 && unset $as_var || :
  done
  PS1='$ '
  PS2='> '
  PS4='+ '
  
  # NLS nuisances.
! LC_ALL=C
! export LC_ALL
! LANGUAGE=C
! export LANGUAGE
! 
! # CDPATH.
! (unset CDPATH) >/dev/null 2>&1 && unset CDPATH
! 
! 
! # as_fn_error STATUS ERROR [LINENO LOG_FD]
! # ----------------------------------------
! # Output "`basename $0`: error: ERROR" to stderr. If LINENO and LOG_FD are
! # provided, also output the error to LOG_FD, referencing LINENO. Then exit the
! # script with STATUS, using 1 if that was 0.
! as_fn_error ()
! {
!   as_status=$1; test $as_status -eq 0 && as_status=1
!   if test "$4"; then
!     as_lineno=${as_lineno-"$3"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
!     $as_echo "$as_me:${as_lineno-$LINENO}: error: $2" >&$4
!   fi
!   $as_echo "$as_me: error: $2" >&2
!   as_fn_exit $as_status
! } # as_fn_error
! 
! 
! # as_fn_set_status STATUS
! # -----------------------
! # Set $? to STATUS, without forking.
! as_fn_set_status ()
! {
!   return $1
! } # as_fn_set_status
! 
! # as_fn_exit STATUS
! # -----------------
! # Exit the shell with STATUS, even in a "trap 0" or "set -e" context.
! as_fn_exit ()
! {
!   set +e
!   as_fn_set_status $1
!   exit $1
! } # as_fn_exit
! 
! # as_fn_unset VAR
! # ---------------
! # Portably unset VAR.
! as_fn_unset ()
! {
!   { eval $1=; unset $1;}
! }
! as_unset=as_fn_unset
! # as_fn_append VAR VALUE
! # ----------------------
! # Append the text in VALUE to the end of the definition contained in VAR. Take
! # advantage of any shell optimizations that allow amortized linear growth over
! # repeated appends, instead of the typical quadratic growth present in naive
! # implementations.
! if (eval "as_var=1; as_var+=2; test x\$as_var = x12") 2>/dev/null; then :
!   eval 'as_fn_append ()
!   {
!     eval $1+=\$2
!   }'
! else
!   as_fn_append ()
!   {
!     eval $1=\$$1\$2
!   }
! fi # as_fn_append
! 
! # as_fn_arith ARG...
! # ------------------
! # Perform arithmetic evaluation on the ARGs, and store the result in the
! # global $as_val. Take advantage of shells that can avoid forks. The arguments
! # must be portable across $(()) and expr.
! if (eval "test \$(( 1 + 1 )) = 2") 2>/dev/null; then :
!   eval 'as_fn_arith ()
!   {
!     as_val=$(( $* ))
!   }'
! else
!   as_fn_arith ()
!   {
!     as_val=`expr "$@" || test $? -eq 1`
!   }
! fi # as_fn_arith
! 
  
  if expr a : '\(a\)' >/dev/null 2>&1 &&
     test "X`expr 00001 : '.*\(...\)'`" = X001; then
    as_expr=expr
***************
*** 31573,31588 ****
  if (basename -- /) >/dev/null 2>&1 && test "X`basename -- / 2>&1`" = "X/"; then
    as_basename=basename
  else
!   as_basename=false
  fi
  
- 
- # Name of the executable.
  as_me=`$as_basename -- "$0" ||
  $as_expr X/"$0" : '.*/\([^/][^/]*\)/*$' \| \
  	 X"$0" : 'X\(//\)$' \| \
  	 X"$0" : 'X\(/\)' \| . 2>/dev/null ||
! echo X/"$0" |
      sed '/^.*\/\([^/][^/]*\)\/*$/{
  	    s//\1/
  	    q
--- 27067,27086 ----
  if (basename -- /) >/dev/null 2>&1 && test "X`basename -- / 2>&1`" = "X/"; then
    as_basename=basename
  else
!   as_basename=false
! fi
! 
! if (as_dir=`dirname -- /` && test "X$as_dir" = X/) >/dev/null 2>&1; then
!   as_dirname=dirname
! else
!   as_dirname=false
  fi
  
  as_me=`$as_basename -- "$0" ||
  $as_expr X/"$0" : '.*/\([^/][^/]*\)/*$' \| \
  	 X"$0" : 'X\(//\)$' \| \
  	 X"$0" : 'X\(/\)' \| . 2>/dev/null ||
! $as_echo X/"$0" |
      sed '/^.*\/\([^/][^/]*\)\/*$/{
  	    s//\1/
  	    q
***************
*** 31597,31700 ****
  	  }
  	  s/.*/./; q'`
  
! # CDPATH.
! $as_unset CDPATH
! 
! 
! 
!   as_lineno_1=$LINENO
!   as_lineno_2=$LINENO
!   test "x$as_lineno_1" != "x$as_lineno_2" &&
!   test "x`expr $as_lineno_1 + 1`" = "x$as_lineno_2" || {
! 
!   # Create $as_me.lineno as a copy of $as_myself, but with $LINENO
!   # uniformly replaced by the line number.  The first 'sed' inserts a
!   # line-number line after each line using $LINENO; the second 'sed'
!   # does the real work.  The second script uses 'N' to pair each
!   # line-number line with the line containing $LINENO, and appends
!   # trailing '-' during substitution so that $LINENO is not a special
!   # case at line end.
!   # (Raja R Harinath suggested sed '=', and Paul Eggert wrote the
!   # scripts with optimization help from Paolo Bonzini.  Blame Lee
!   # E. McMahon (1931-1989) for sed's syntax.  :-)
!   sed -n '
!     p
!     /[$]LINENO/=
!   ' <$as_myself |
!     sed '
!       s/[$]LINENO.*/&-/
!       t lineno
!       b
!       :lineno
!       N
!       :loop
!       s/[$]LINENO\([^'$as_cr_alnum'_].*\n\)\(.*\)/\2\1\2/
!       t loop
!       s/-\n.*//
!     ' >$as_me.lineno &&
!   chmod +x "$as_me.lineno" ||
!     { echo "$as_me: error: cannot create $as_me.lineno; rerun with a POSIX shell" >&2
!    { (exit 1); exit 1; }; }
! 
!   # Don't try to exec as it changes $[0], causing all sort of problems
!   # (the dirname of $[0] is not the place where we might find the
!   # original and so on.  Autoconf is especially sensitive to this).
!   . "./$as_me.lineno"
!   # Exit status is that of the last command.
!   exit
! }
! 
! 
! if (as_dir=`dirname -- /` && test "X$as_dir" = X/) >/dev/null 2>&1; then
!   as_dirname=dirname
! else
!   as_dirname=false
! fi
  
  ECHO_C= ECHO_N= ECHO_T=
! case `echo -n x` in
  -n*)
!   case `echo 'x\c'` in
    *c*) ECHO_T='	';;	# ECHO_T is single tab character.
!   *)   ECHO_C='\c';;
    esac;;
  *)
    ECHO_N='-n';;
  esac
  
- if expr a : '\(a\)' >/dev/null 2>&1 &&
-    test "X`expr 00001 : '.*\(...\)'`" = X001; then
-   as_expr=expr
- else
-   as_expr=false
- fi
- 
  rm -f conf$$ conf$$.exe conf$$.file
  if test -d conf$$.dir; then
    rm -f conf$$.dir/conf$$.file
  else
    rm -f conf$$.dir
!   mkdir conf$$.dir
  fi
! echo >conf$$.file
! if ln -s conf$$.file conf$$ 2>/dev/null; then
!   as_ln_s='ln -s'
!   # ... but there are two gotchas:
!   # 1) On MSYS, both `ln -s file dir' and `ln file dir' fail.
!   # 2) DJGPP < 2.04 has no symlinks; `ln -s' creates a wrapper executable.
!   # In both cases, we have to default to `cp -p'.
!   ln -s conf$$.file conf$$.dir 2>/dev/null && test ! -f conf$$.exe ||
      as_ln_s='cp -p'
! elif ln conf$$.file conf$$ 2>/dev/null; then
!   as_ln_s=ln
  else
    as_ln_s='cp -p'
  fi
  rm -f conf$$ conf$$.exe conf$$.dir/conf$$.file conf$$.file
  rmdir conf$$.dir 2>/dev/null
  
  if mkdir -p . 2>/dev/null; then
!   as_mkdir_p=:
  else
    test -d ./-p && rmdir ./-p
    as_mkdir_p=false
--- 27095,27197 ----
  	  }
  	  s/.*/./; q'`
  
! # Avoid depending upon Character Ranges.
! as_cr_letters='abcdefghijklmnopqrstuvwxyz'
! as_cr_LETTERS='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
! as_cr_Letters=$as_cr_letters$as_cr_LETTERS
! as_cr_digits='0123456789'
! as_cr_alnum=$as_cr_Letters$as_cr_digits
  
  ECHO_C= ECHO_N= ECHO_T=
! case `echo -n x` in #(((((
  -n*)
!   case `echo 'xy\c'` in
    *c*) ECHO_T='	';;	# ECHO_T is single tab character.
!   xy)  ECHO_C='\c';;
!   *)   echo `echo ksh88 bug on AIX 6.1` > /dev/null
!        ECHO_T='	';;
    esac;;
  *)
    ECHO_N='-n';;
  esac
  
  rm -f conf$$ conf$$.exe conf$$.file
  if test -d conf$$.dir; then
    rm -f conf$$.dir/conf$$.file
  else
    rm -f conf$$.dir
!   mkdir conf$$.dir 2>/dev/null
  fi
! if (echo >conf$$.file) 2>/dev/null; then
!   if ln -s conf$$.file conf$$ 2>/dev/null; then
!     as_ln_s='ln -s'
!     # ... but there are two gotchas:
!     # 1) On MSYS, both `ln -s file dir' and `ln file dir' fail.
!     # 2) DJGPP < 2.04 has no symlinks; `ln -s' creates a wrapper executable.
!     # In both cases, we have to default to `cp -p'.
!     ln -s conf$$.file conf$$.dir 2>/dev/null && test ! -f conf$$.exe ||
!       as_ln_s='cp -p'
!   elif ln conf$$.file conf$$ 2>/dev/null; then
!     as_ln_s=ln
!   else
      as_ln_s='cp -p'
!   fi
  else
    as_ln_s='cp -p'
  fi
  rm -f conf$$ conf$$.exe conf$$.dir/conf$$.file conf$$.file
  rmdir conf$$.dir 2>/dev/null
  
+ 
+ # as_fn_mkdir_p
+ # -------------
+ # Create "$as_dir" as a directory, including parents if necessary.
+ as_fn_mkdir_p ()
+ {
+ 
+   case $as_dir in #(
+   -*) as_dir=./$as_dir;;
+   esac
+   test -d "$as_dir" || eval $as_mkdir_p || {
+     as_dirs=
+     while :; do
+       case $as_dir in #(
+       *\'*) as_qdir=`$as_echo "$as_dir" | sed "s/'/'\\\\\\\\''/g"`;; #'(
+       *) as_qdir=$as_dir;;
+       esac
+       as_dirs="'$as_qdir' $as_dirs"
+       as_dir=`$as_dirname -- "$as_dir" ||
+ $as_expr X"$as_dir" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
+ 	 X"$as_dir" : 'X\(//\)[^/]' \| \
+ 	 X"$as_dir" : 'X\(//\)$' \| \
+ 	 X"$as_dir" : 'X\(/\)' \| . 2>/dev/null ||
+ $as_echo X"$as_dir" |
+     sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
+ 	    s//\1/
+ 	    q
+ 	  }
+ 	  /^X\(\/\/\)[^/].*/{
+ 	    s//\1/
+ 	    q
+ 	  }
+ 	  /^X\(\/\/\)$/{
+ 	    s//\1/
+ 	    q
+ 	  }
+ 	  /^X\(\/\).*/{
+ 	    s//\1/
+ 	    q
+ 	  }
+ 	  s/.*/./; q'`
+       test -d "$as_dir" && break
+     done
+     test -z "$as_dirs" || eval "mkdir $as_dirs"
+   } || test -d "$as_dir" || as_fn_error $? "cannot create directory $as_dir"
+ 
+ 
+ } # as_fn_mkdir_p
  if mkdir -p . 2>/dev/null; then
!   as_mkdir_p='mkdir -p "$as_dir"'
  else
    test -d ./-p && rmdir ./-p
    as_mkdir_p=false
***************
*** 31711,31722 ****
    as_test_x='
      eval sh -c '\''
        if test -d "$1"; then
!         test -d "$1/.";
        else
! 	case $1 in
!         -*)set "./$1";;
  	esac;
! 	case `ls -ld'$as_ls_L_option' "$1" 2>/dev/null` in
  	???[sx]*):;;*)false;;esac;fi
      '\'' sh
    '
--- 27208,27219 ----
    as_test_x='
      eval sh -c '\''
        if test -d "$1"; then
! 	test -d "$1/.";
        else
! 	case $1 in #(
! 	-*)set "./$1";;
  	esac;
! 	case `ls -ld'$as_ls_L_option' "$1" 2>/dev/null` in #((
  	???[sx]*):;;*)false;;esac;fi
      '\'' sh
    '
***************
*** 31731,31743 ****
  
  
  exec 6>&1
  
! # Save the log message, to keep $[0] and so on meaningful, and to
  # report actual input values of CONFIG_FILES etc. instead of their
  # values after options handling.
  ac_log="
  This file was extended by $as_me, which was
! generated by GNU Autoconf 2.61.  Invocation command line was
  
    CONFIG_FILES    = $CONFIG_FILES
    CONFIG_HEADERS  = $CONFIG_HEADERS
--- 27228,27246 ----
  
  
  exec 6>&1
+ ## ----------------------------------- ##
+ ## Main body of $CONFIG_STATUS script. ##
+ ## ----------------------------------- ##
+ _ASEOF
+ test $as_write_fail = 0 && chmod +x $CONFIG_STATUS || ac_write_fail=1
  
! cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
! # Save the log message, to keep $0 and so on meaningful, and to
  # report actual input values of CONFIG_FILES etc. instead of their
  # values after options handling.
  ac_log="
  This file was extended by $as_me, which was
! generated by GNU Autoconf 2.68.  Invocation command line was
  
    CONFIG_FILES    = $CONFIG_FILES
    CONFIG_HEADERS  = $CONFIG_HEADERS
***************
*** 31750,31756 ****
  
  _ACEOF
  
! cat >>$CONFIG_STATUS <<_ACEOF
  # Files that config.status was made for.
  config_files="$ac_config_files"
  config_headers="$ac_config_headers"
--- 27253,27268 ----
  
  _ACEOF
  
! case $ac_config_files in *"
! "*) set x $ac_config_files; shift; ac_config_files=$*;;
! esac
! 
! case $ac_config_headers in *"
! "*) set x $ac_config_headers; shift; ac_config_headers=$*;;
! esac
! 
! 
! cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
  # Files that config.status was made for.
  config_files="$ac_config_files"
  config_headers="$ac_config_headers"
***************
*** 31758,31779 ****
  
  _ACEOF
  
! cat >>$CONFIG_STATUS <<\_ACEOF
  ac_cs_usage="\
! \`$as_me' instantiates files from templates according to the
! current configuration.
  
! Usage: $0 [OPTIONS] [FILE]...
  
    -h, --help       print this help, then exit
    -V, --version    print version number and configuration settings, then exit
!   -q, --quiet      do not print progress messages
    -d, --debug      don't remove temporary files
        --recheck    update $as_me by reconfiguring in the same conditions
!   --file=FILE[:TEMPLATE]
! 		   instantiate the configuration file FILE
!   --header=FILE[:TEMPLATE]
! 		   instantiate the configuration header FILE
  
  Configuration files:
  $config_files
--- 27270,27294 ----
  
  _ACEOF
  
! cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
  ac_cs_usage="\
! \`$as_me' instantiates files and other configuration actions
! from templates according to the current configuration.  Unless the files
! and actions are specified as TAGs, all are instantiated by default.
  
! Usage: $0 [OPTION]... [TAG]...
  
    -h, --help       print this help, then exit
    -V, --version    print version number and configuration settings, then exit
!       --config     print configuration, then exit
!   -q, --quiet, --silent
!                    do not print progress messages
    -d, --debug      don't remove temporary files
        --recheck    update $as_me by reconfiguring in the same conditions
!       --file=FILE[:TEMPLATE]
!                    instantiate the configuration file FILE
!       --header=FILE[:TEMPLATE]
!                    instantiate the configuration header FILE
  
  Configuration files:
  $config_files
***************
*** 31784,31799 ****
  Configuration commands:
  $config_commands
  
! Report bugs to <bug-autoconf@gnu.org>."
  
  _ACEOF
! cat >>$CONFIG_STATUS <<_ACEOF
  ac_cs_version="\\
  config.status
! configured by $0, generated by GNU Autoconf 2.61,
!   with options \\"`echo "$ac_configure_args" | sed 's/^ //; s/[\\""\`\$]/\\\\&/g'`\\"
  
! Copyright (C) 2006 Free Software Foundation, Inc.
  This config.status script is free software; the Free Software Foundation
  gives unlimited permission to copy, distribute and modify it."
  
--- 27299,27315 ----
  Configuration commands:
  $config_commands
  
! Report bugs to the package provider."
  
  _ACEOF
! cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
! ac_cs_config="`$as_echo "$ac_configure_args" | sed 's/^ //; s/[\\""\`\$]/\\\\&/g'`"
  ac_cs_version="\\
  config.status
! configured by $0, generated by GNU Autoconf 2.68,
!   with options \\"\$ac_cs_config\\"
  
! Copyright (C) 2010 Free Software Foundation, Inc.
  This config.status script is free software; the Free Software Foundation
  gives unlimited permission to copy, distribute and modify it."
  
***************
*** 31801,31820 ****
  srcdir='$srcdir'
  INSTALL='$INSTALL'
  MKDIR_P='$MKDIR_P'
  _ACEOF
  
! cat >>$CONFIG_STATUS <<\_ACEOF
! # If no file are specified by the user, then we need to provide default
! # value.  By we need to know if files were specified by the user.
  ac_need_defaults=:
  while test $# != 0
  do
    case $1 in
!   --*=*)
      ac_option=`expr "X$1" : 'X\([^=]*\)='`
      ac_optarg=`expr "X$1" : 'X[^=]*=\(.*\)'`
      ac_shift=:
      ;;
    *)
      ac_option=$1
      ac_optarg=$2
--- 27317,27342 ----
  srcdir='$srcdir'
  INSTALL='$INSTALL'
  MKDIR_P='$MKDIR_P'
+ AWK='$AWK'
+ test -n "\$AWK" || AWK=awk
  _ACEOF
  
! cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
! # The default lists apply if the user does not specify any file.
  ac_need_defaults=:
  while test $# != 0
  do
    case $1 in
!   --*=?*)
      ac_option=`expr "X$1" : 'X\([^=]*\)='`
      ac_optarg=`expr "X$1" : 'X[^=]*=\(.*\)'`
      ac_shift=:
      ;;
+   --*=)
+     ac_option=`expr "X$1" : 'X\([^=]*\)='`
+     ac_optarg=
+     ac_shift=:
+     ;;
    *)
      ac_option=$1
      ac_optarg=$2
***************
*** 31827,31860 ****
    -recheck | --recheck | --rechec | --reche | --rech | --rec | --re | --r)
      ac_cs_recheck=: ;;
    --version | --versio | --versi | --vers | --ver | --ve | --v | -V )
!     echo "$ac_cs_version"; exit ;;
    --debug | --debu | --deb | --de | --d | -d )
      debug=: ;;
    --file | --fil | --fi | --f )
      $ac_shift
!     CONFIG_FILES="$CONFIG_FILES $ac_optarg"
      ac_need_defaults=false;;
    --header | --heade | --head | --hea )
      $ac_shift
!     CONFIG_HEADERS="$CONFIG_HEADERS $ac_optarg"
      ac_need_defaults=false;;
    --he | --h)
      # Conflict between --help and --header
!     { echo "$as_me: error: ambiguous option: $1
! Try \`$0 --help' for more information." >&2
!    { (exit 1); exit 1; }; };;
    --help | --hel | -h )
!     echo "$ac_cs_usage"; exit ;;
    -q | -quiet | --quiet | --quie | --qui | --qu | --q \
    | -silent | --silent | --silen | --sile | --sil | --si | --s)
      ac_cs_silent=: ;;
  
    # This is an error.
!   -*) { echo "$as_me: error: unrecognized option: $1
! Try \`$0 --help' for more information." >&2
!    { (exit 1); exit 1; }; } ;;
  
!   *) ac_config_targets="$ac_config_targets $1"
       ac_need_defaults=false ;;
  
    esac
--- 27349,27389 ----
    -recheck | --recheck | --rechec | --reche | --rech | --rec | --re | --r)
      ac_cs_recheck=: ;;
    --version | --versio | --versi | --vers | --ver | --ve | --v | -V )
!     $as_echo "$ac_cs_version"; exit ;;
!   --config | --confi | --conf | --con | --co | --c )
!     $as_echo "$ac_cs_config"; exit ;;
    --debug | --debu | --deb | --de | --d | -d )
      debug=: ;;
    --file | --fil | --fi | --f )
      $ac_shift
!     case $ac_optarg in
!     *\'*) ac_optarg=`$as_echo "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"` ;;
!     '') as_fn_error $? "missing file argument" ;;
!     esac
!     as_fn_append CONFIG_FILES " '$ac_optarg'"
      ac_need_defaults=false;;
    --header | --heade | --head | --hea )
      $ac_shift
!     case $ac_optarg in
!     *\'*) ac_optarg=`$as_echo "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"` ;;
!     esac
!     as_fn_append CONFIG_HEADERS " '$ac_optarg'"
      ac_need_defaults=false;;
    --he | --h)
      # Conflict between --help and --header
!     as_fn_error $? "ambiguous option: \`$1'
! Try \`$0 --help' for more information.";;
    --help | --hel | -h )
!     $as_echo "$ac_cs_usage"; exit ;;
    -q | -quiet | --quiet | --quie | --qui | --qu | --q \
    | -silent | --silent | --silen | --sile | --sil | --si | --s)
      ac_cs_silent=: ;;
  
    # This is an error.
!   -*) as_fn_error $? "unrecognized option: \`$1'
! Try \`$0 --help' for more information." ;;
  
!   *) as_fn_append ac_config_targets " $1"
       ac_need_defaults=false ;;
  
    esac
***************
*** 31869,31895 ****
  fi
  
  _ACEOF
! cat >>$CONFIG_STATUS <<_ACEOF
  if \$ac_cs_recheck; then
!   echo "running CONFIG_SHELL=$SHELL $SHELL $0 "$ac_configure_args \$ac_configure_extra_args " --no-create --no-recursion" >&6
!   CONFIG_SHELL=$SHELL
    export CONFIG_SHELL
!   exec $SHELL "$0"$ac_configure_args \$ac_configure_extra_args --no-create --no-recursion
  fi
  
  _ACEOF
! cat >>$CONFIG_STATUS <<\_ACEOF
  exec 5>>config.log
  {
    echo
    sed 'h;s/./-/g;s/^.../## /;s/...$/ ##/;p;x;p;x' <<_ASBOX
  ## Running $as_me. ##
  _ASBOX
!   echo "$ac_log"
  } >&5
  
  _ACEOF
! cat >>$CONFIG_STATUS <<_ACEOF
  #
  # INIT-COMMANDS
  #
--- 27398,27426 ----
  fi
  
  _ACEOF
! cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
  if \$ac_cs_recheck; then
!   set X '$SHELL' '$0' $ac_configure_args \$ac_configure_extra_args --no-create --no-recursion
!   shift
!   \$as_echo "running CONFIG_SHELL=$SHELL \$*" >&6
!   CONFIG_SHELL='$SHELL'
    export CONFIG_SHELL
!   exec "\$@"
  fi
  
  _ACEOF
! cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
  exec 5>>config.log
  {
    echo
    sed 'h;s/./-/g;s/^.../## /;s/...$/ ##/;p;x;p;x' <<_ASBOX
  ## Running $as_me. ##
  _ASBOX
!   $as_echo "$ac_log"
  } >&5
  
  _ACEOF
! cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
  #
  # INIT-COMMANDS
  #
***************
*** 31898,31904 ****
  
  _ACEOF
  
! cat >>$CONFIG_STATUS <<\_ACEOF
  
  # Handling of arguments.
  for ac_config_target in $ac_config_targets
--- 27429,27435 ----
  
  _ACEOF
  
! cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
  
  # Handling of arguments.
  for ac_config_target in $ac_config_targets
***************
*** 31958,31966 ****
      "python/vipsCC/Makefile") CONFIG_FILES="$CONFIG_FILES python/vipsCC/Makefile" ;;
      "po/Makefile.in") CONFIG_FILES="$CONFIG_FILES po/Makefile.in" ;;
  
!   *) { { echo "$as_me:$LINENO: error: invalid argument: $ac_config_target" >&5
! echo "$as_me: error: invalid argument: $ac_config_target" >&2;}
!    { (exit 1); exit 1; }; };;
    esac
  done
  
--- 27489,27495 ----
      "python/vipsCC/Makefile") CONFIG_FILES="$CONFIG_FILES python/vipsCC/Makefile" ;;
      "po/Makefile.in") CONFIG_FILES="$CONFIG_FILES po/Makefile.in" ;;
  
!   *) as_fn_error $? "invalid argument: \`$ac_config_target'" "$LINENO" 5;;
    esac
  done
  
***************
*** 31983,32370 ****
  # after its creation but before its name has been assigned to `$tmp'.
  $debug ||
  {
!   tmp=
    trap 'exit_status=$?
!   { test -z "$tmp" || test ! -d "$tmp" || rm -fr "$tmp"; } && exit $exit_status
  ' 0
!   trap '{ (exit 1); exit 1; }' 1 2 13 15
  }
  # Create a (secure) tmp directory for tmp files.
  
  {
    tmp=`(umask 077 && mktemp -d "./confXXXXXX") 2>/dev/null` &&
!   test -n "$tmp" && test -d "$tmp"
  }  ||
  {
    tmp=./conf$$-$RANDOM
    (umask 077 && mkdir "$tmp")
! } ||
! {
!    echo "$me: cannot create a temporary directory in ." >&2
!    { (exit 1); exit 1; }
! }
! 
! #
! # Set up the sed scripts for CONFIG_FILES section.
! #
  
! # No need to generate the scripts if there are no CONFIG_FILES.
! # This happens for instance when ./config.status config.h
  if test -n "$CONFIG_FILES"; then
  
- _ACEOF
  
  
  
  ac_delim='%!_!# '
  for ac_last_try in false false false false false :; do
!   cat >conf$$subs.sed <<_ACEOF
! SHELL!$SHELL$ac_delim
! PATH_SEPARATOR!$PATH_SEPARATOR$ac_delim
! PACKAGE_NAME!$PACKAGE_NAME$ac_delim
! PACKAGE_TARNAME!$PACKAGE_TARNAME$ac_delim
! PACKAGE_VERSION!$PACKAGE_VERSION$ac_delim
! PACKAGE_STRING!$PACKAGE_STRING$ac_delim
! PACKAGE_BUGREPORT!$PACKAGE_BUGREPORT$ac_delim
! exec_prefix!$exec_prefix$ac_delim
! prefix!$prefix$ac_delim
! program_transform_name!$program_transform_name$ac_delim
! bindir!$bindir$ac_delim
! sbindir!$sbindir$ac_delim
! libexecdir!$libexecdir$ac_delim
! datarootdir!$datarootdir$ac_delim
! datadir!$datadir$ac_delim
! sysconfdir!$sysconfdir$ac_delim
! sharedstatedir!$sharedstatedir$ac_delim
! localstatedir!$localstatedir$ac_delim
! includedir!$includedir$ac_delim
! oldincludedir!$oldincludedir$ac_delim
! docdir!$docdir$ac_delim
! infodir!$infodir$ac_delim
! htmldir!$htmldir$ac_delim
! dvidir!$dvidir$ac_delim
! pdfdir!$pdfdir$ac_delim
! psdir!$psdir$ac_delim
! libdir!$libdir$ac_delim
! localedir!$localedir$ac_delim
! mandir!$mandir$ac_delim
! DEFS!$DEFS$ac_delim
! ECHO_C!$ECHO_C$ac_delim
! ECHO_N!$ECHO_N$ac_delim
! ECHO_T!$ECHO_T$ac_delim
! LIBS!$LIBS$ac_delim
! build_alias!$build_alias$ac_delim
! host_alias!$host_alias$ac_delim
! target_alias!$target_alias$ac_delim
! INSTALL_PROGRAM!$INSTALL_PROGRAM$ac_delim
! INSTALL_SCRIPT!$INSTALL_SCRIPT$ac_delim
! INSTALL_DATA!$INSTALL_DATA$ac_delim
! am__isrc!$am__isrc$ac_delim
! CYGPATH_W!$CYGPATH_W$ac_delim
! PACKAGE!$PACKAGE$ac_delim
! VERSION!$VERSION$ac_delim
! ACLOCAL!$ACLOCAL$ac_delim
! AUTOCONF!$AUTOCONF$ac_delim
! AUTOMAKE!$AUTOMAKE$ac_delim
! AUTOHEADER!$AUTOHEADER$ac_delim
! MAKEINFO!$MAKEINFO$ac_delim
! install_sh!$install_sh$ac_delim
! STRIP!$STRIP$ac_delim
! INSTALL_STRIP_PROGRAM!$INSTALL_STRIP_PROGRAM$ac_delim
! mkdir_p!$mkdir_p$ac_delim
! AWK!$AWK$ac_delim
! SET_MAKE!$SET_MAKE$ac_delim
! am__leading_dot!$am__leading_dot$ac_delim
! AMTAR!$AMTAR$ac_delim
! am__tar!$am__tar$ac_delim
! am__untar!$am__untar$ac_delim
! IM_VERSION!$IM_VERSION$ac_delim
! IM_VERSION_STRING!$IM_VERSION_STRING$ac_delim
! IM_MAJOR_VERSION!$IM_MAJOR_VERSION$ac_delim
! IM_MINOR_VERSION!$IM_MINOR_VERSION$ac_delim
! IM_MICRO_VERSION!$IM_MICRO_VERSION$ac_delim
! LIBRARY_CURRENT!$LIBRARY_CURRENT$ac_delim
! LIBRARY_REVISION!$LIBRARY_REVISION$ac_delim
! LIBRARY_AGE!$LIBRARY_AGE$ac_delim
! build!$build$ac_delim
! build_cpu!$build_cpu$ac_delim
! build_vendor!$build_vendor$ac_delim
! build_os!$build_os$ac_delim
! host!$host$ac_delim
! host_cpu!$host_cpu$ac_delim
! host_vendor!$host_vendor$ac_delim
! host_os!$host_os$ac_delim
! OS_WIN32_TRUE!$OS_WIN32_TRUE$ac_delim
! OS_WIN32_FALSE!$OS_WIN32_FALSE$ac_delim
! CC!$CC$ac_delim
! CFLAGS!$CFLAGS$ac_delim
! LDFLAGS!$LDFLAGS$ac_delim
! CPPFLAGS!$CPPFLAGS$ac_delim
! ac_ct_CC!$ac_ct_CC$ac_delim
! EXEEXT!$EXEEXT$ac_delim
! OBJEXT!$OBJEXT$ac_delim
! DEPDIR!$DEPDIR$ac_delim
! am__include!$am__include$ac_delim
! am__quote!$am__quote$ac_delim
! AMDEP_TRUE!$AMDEP_TRUE$ac_delim
! AMDEP_FALSE!$AMDEP_FALSE$ac_delim
! AMDEPBACKSLASH!$AMDEPBACKSLASH$ac_delim
! CCDEPMODE!$CCDEPMODE$ac_delim
! am__fastdepCC_TRUE!$am__fastdepCC_TRUE$ac_delim
! am__fastdepCC_FALSE!$am__fastdepCC_FALSE$ac_delim
! RANLIB!$RANLIB$ac_delim
! LN_S!$LN_S$ac_delim
! CXX!$CXX$ac_delim
! CXXFLAGS!$CXXFLAGS$ac_delim
! _ACEOF
  
!   if test `sed -n "s/.*$ac_delim\$/X/p" conf$$subs.sed | grep -c X` = 97; then
      break
    elif $ac_last_try; then
!     { { echo "$as_me:$LINENO: error: could not make $CONFIG_STATUS" >&5
! echo "$as_me: error: could not make $CONFIG_STATUS" >&2;}
!    { (exit 1); exit 1; }; }
    else
      ac_delim="$ac_delim!$ac_delim _$ac_delim!! "
    fi
  done
  
! ac_eof=`sed -n '/^CEOF[0-9]*$/s/CEOF/0/p' conf$$subs.sed`
! if test -n "$ac_eof"; then
!   ac_eof=`echo "$ac_eof" | sort -nru | sed 1q`
!   ac_eof=`expr $ac_eof + 1`
! fi
! 
! cat >>$CONFIG_STATUS <<_ACEOF
! cat >"\$tmp/subs-1.sed" <<\CEOF$ac_eof
! /@[a-zA-Z_][a-zA-Z_0-9]*@/!b
! _ACEOF
! sed '
! s/[,\\&]/\\&/g; s/@/@|#_!!_#|/g
! s/^/s,@/; s/!/@,|#_!!_#|/
! :n
! t n
! s/'"$ac_delim"'$/,g/; t
! s/$/\\/; p
! N; s/^.*\n//; s/[,\\&]/\\&/g; s/@/@|#_!!_#|/g; b n
! ' >>$CONFIG_STATUS <conf$$subs.sed
! rm -f conf$$subs.sed
! cat >>$CONFIG_STATUS <<_ACEOF
! CEOF$ac_eof
  _ACEOF
  
  
! ac_delim='%!_!# '
! for ac_last_try in false false false false false :; do
!   cat >conf$$subs.sed <<_ACEOF
! ac_ct_CXX!$ac_ct_CXX$ac_delim
! CXXDEPMODE!$CXXDEPMODE$ac_delim
! am__fastdepCXX_TRUE!$am__fastdepCXX_TRUE$ac_delim
! am__fastdepCXX_FALSE!$am__fastdepCXX_FALSE$ac_delim
! GETTEXT_PACKAGE!$GETTEXT_PACKAGE$ac_delim
! CPP!$CPP$ac_delim
! GREP!$GREP$ac_delim
! EGREP!$EGREP$ac_delim
! USE_NLS!$USE_NLS$ac_delim
! MSGFMT!$MSGFMT$ac_delim
! MSGFMT_OPTS!$MSGFMT_OPTS$ac_delim
! GMSGFMT!$GMSGFMT$ac_delim
! XGETTEXT!$XGETTEXT$ac_delim
! CATALOGS!$CATALOGS$ac_delim
! CATOBJEXT!$CATOBJEXT$ac_delim
! DATADIRNAME!$DATADIRNAME$ac_delim
! GMOFILES!$GMOFILES$ac_delim
! INSTOBJEXT!$INSTOBJEXT$ac_delim
! INTLLIBS!$INTLLIBS$ac_delim
! PO_IN_DATADIR_TRUE!$PO_IN_DATADIR_TRUE$ac_delim
! PO_IN_DATADIR_FALSE!$PO_IN_DATADIR_FALSE$ac_delim
! POFILES!$POFILES$ac_delim
! POSUB!$POSUB$ac_delim
! MKINSTALLDIRS!$MKINSTALLDIRS$ac_delim
! DLLWRAP!$DLLWRAP$ac_delim
! DLLTOOL!$DLLTOOL$ac_delim
! OBJDUMP!$OBJDUMP$ac_delim
! AR!$AR$ac_delim
! AS!$AS$ac_delim
! LD!$LD$ac_delim
! SED!$SED$ac_delim
! ECHO!$ECHO$ac_delim
! DSYMUTIL!$DSYMUTIL$ac_delim
! NMEDIT!$NMEDIT$ac_delim
! CXXCPP!$CXXCPP$ac_delim
! F77!$F77$ac_delim
! FFLAGS!$FFLAGS$ac_delim
! ac_ct_F77!$ac_ct_F77$ac_delim
! LIBTOOL!$LIBTOOL$ac_delim
! LIBOBJS!$LIBOBJS$ac_delim
! PKG_CONFIG!$PKG_CONFIG$ac_delim
! REQUIRED_CFLAGS!$REQUIRED_CFLAGS$ac_delim
! REQUIRED_LIBS!$REQUIRED_LIBS$ac_delim
! ENABLE_LINKS_TRUE!$ENABLE_LINKS_TRUE$ac_delim
! ENABLE_LINKS_FALSE!$ENABLE_LINKS_FALSE$ac_delim
! GTHREAD_CFLAGS!$GTHREAD_CFLAGS$ac_delim
! GTHREAD_LIBS!$GTHREAD_LIBS$ac_delim
! FFTW3_CFLAGS!$FFTW3_CFLAGS$ac_delim
! FFTW3_LIBS!$FFTW3_LIBS$ac_delim
! MAGICK_WAND_CFLAGS!$MAGICK_WAND_CFLAGS$ac_delim
! MAGICK_WAND_LIBS!$MAGICK_WAND_LIBS$ac_delim
! IMAGE_MAGICK_CFLAGS!$IMAGE_MAGICK_CFLAGS$ac_delim
! IMAGE_MAGICK_LIBS!$IMAGE_MAGICK_LIBS$ac_delim
! MAGICK_CFLAGS!$MAGICK_CFLAGS$ac_delim
! MAGICK_LIBS!$MAGICK_LIBS$ac_delim
! LIBOIL_CFLAGS!$LIBOIL_CFLAGS$ac_delim
! LIBOIL_LIBS!$LIBOIL_LIBS$ac_delim
! LCMS_CFLAGS!$LCMS_CFLAGS$ac_delim
! LCMS_LIBS!$LCMS_LIBS$ac_delim
! OPENEXR_CFLAGS!$OPENEXR_CFLAGS$ac_delim
! OPENEXR_LIBS!$OPENEXR_LIBS$ac_delim
! PANGOFT2_CFLAGS!$PANGOFT2_CFLAGS$ac_delim
! PANGOFT2_LIBS!$PANGOFT2_LIBS$ac_delim
! XMKMF!$XMKMF$ac_delim
! X_CFLAGS!$X_CFLAGS$ac_delim
! X_PRE_LIBS!$X_PRE_LIBS$ac_delim
! X_LIBS!$X_LIBS$ac_delim
! X_EXTRA_LIBS!$X_EXTRA_LIBS$ac_delim
! TIFF_LIBS!$TIFF_LIBS$ac_delim
! TIFF_INCLUDES!$TIFF_INCLUDES$ac_delim
! ZIP_LIBS!$ZIP_LIBS$ac_delim
! ZIP_INCLUDES!$ZIP_INCLUDES$ac_delim
! JPEG_LIBS!$JPEG_LIBS$ac_delim
! JPEG_INCLUDES!$JPEG_INCLUDES$ac_delim
! PNG_CFLAGS!$PNG_CFLAGS$ac_delim
! PNG_LIBS!$PNG_LIBS$ac_delim
! PNG_INCLUDES!$PNG_INCLUDES$ac_delim
! EXIF_CFLAGS!$EXIF_CFLAGS$ac_delim
! EXIF_LIBS!$EXIF_LIBS$ac_delim
! PYTHON!$PYTHON$ac_delim
! PYTHON_VERSION!$PYTHON_VERSION$ac_delim
! PYTHON_PREFIX!$PYTHON_PREFIX$ac_delim
! PYTHON_EXEC_PREFIX!$PYTHON_EXEC_PREFIX$ac_delim
! PYTHON_PLATFORM!$PYTHON_PLATFORM$ac_delim
! pythondir!$pythondir$ac_delim
! pkgpythondir!$pkgpythondir$ac_delim
! pyexecdir!$pyexecdir$ac_delim
! pkgpyexecdir!$pkgpyexecdir$ac_delim
! PYTHON_INCLUDES!$PYTHON_INCLUDES$ac_delim
! HAVE_PYTHON_TRUE!$HAVE_PYTHON_TRUE$ac_delim
! HAVE_PYTHON_FALSE!$HAVE_PYTHON_FALSE$ac_delim
! WITH_CIMG_TRUE!$WITH_CIMG_TRUE$ac_delim
! WITH_CIMG_FALSE!$WITH_CIMG_FALSE$ac_delim
! VIPS_CFLAGS!$VIPS_CFLAGS$ac_delim
! VIPS_INCLUDES!$VIPS_INCLUDES$ac_delim
! VIPS_LIBS!$VIPS_LIBS$ac_delim
! PACKAGES_USED!$PACKAGES_USED$ac_delim
! _ACEOF
  
!   if test `sed -n "s/.*$ac_delim\$/X/p" conf$$subs.sed | grep -c X` = 97; then
!     break
!   elif $ac_last_try; then
!     { { echo "$as_me:$LINENO: error: could not make $CONFIG_STATUS" >&5
! echo "$as_me: error: could not make $CONFIG_STATUS" >&2;}
!    { (exit 1); exit 1; }; }
!   else
!     ac_delim="$ac_delim!$ac_delim _$ac_delim!! "
!   fi
! done
  
! ac_eof=`sed -n '/^CEOF[0-9]*$/s/CEOF/0/p' conf$$subs.sed`
! if test -n "$ac_eof"; then
!   ac_eof=`echo "$ac_eof" | sort -nru | sed 1q`
!   ac_eof=`expr $ac_eof + 1`
  fi
  
! cat >>$CONFIG_STATUS <<_ACEOF
! cat >"\$tmp/subs-2.sed" <<\CEOF$ac_eof
! /@[a-zA-Z_][a-zA-Z_0-9]*@/!b
! _ACEOF
! sed '
! s/[,\\&]/\\&/g; s/@/@|#_!!_#|/g
! s/^/s,@/; s/!/@,|#_!!_#|/
! :n
! t n
! s/'"$ac_delim"'$/,g/; t
! s/$/\\/; p
! N; s/^.*\n//; s/[,\\&]/\\&/g; s/@/@|#_!!_#|/g; b n
! ' >>$CONFIG_STATUS <conf$$subs.sed
! rm -f conf$$subs.sed
! cat >>$CONFIG_STATUS <<_ACEOF
! CEOF$ac_eof
  _ACEOF
  
  
  ac_delim='%!_!# '
! for ac_last_try in false false false false false :; do
!   cat >conf$$subs.sed <<_ACEOF
! LTLIBOBJS!$LTLIBOBJS$ac_delim
! _ACEOF
! 
!   if test `sed -n "s/.*$ac_delim\$/X/p" conf$$subs.sed | grep -c X` = 1; then
      break
    elif $ac_last_try; then
!     { { echo "$as_me:$LINENO: error: could not make $CONFIG_STATUS" >&5
! echo "$as_me: error: could not make $CONFIG_STATUS" >&2;}
!    { (exit 1); exit 1; }; }
    else
      ac_delim="$ac_delim!$ac_delim _$ac_delim!! "
    fi
  done
  
! ac_eof=`sed -n '/^CEOF[0-9]*$/s/CEOF/0/p' conf$$subs.sed`
! if test -n "$ac_eof"; then
!   ac_eof=`echo "$ac_eof" | sort -nru | sed 1q`
!   ac_eof=`expr $ac_eof + 1`
! fi
! 
! cat >>$CONFIG_STATUS <<_ACEOF
! cat >"\$tmp/subs-3.sed" <<\CEOF$ac_eof
! /@[a-zA-Z_][a-zA-Z_0-9]*@/!b end
! _ACEOF
! sed '
! s/[,\\&]/\\&/g; s/@/@|#_!!_#|/g
! s/^/s,@/; s/!/@,|#_!!_#|/
! :n
! t n
! s/'"$ac_delim"'$/,g/; t
! s/$/\\/; p
! N; s/^.*\n//; s/[,\\&]/\\&/g; s/@/@|#_!!_#|/g; b n
! ' >>$CONFIG_STATUS <conf$$subs.sed
! rm -f conf$$subs.sed
! cat >>$CONFIG_STATUS <<_ACEOF
! :end
! s/|#_!!_#|//g
! CEOF$ac_eof
! _ACEOF
! 
! 
! # VPATH may cause trouble with some makes, so we remove $(srcdir),
! # ${srcdir} and @srcdir@ from VPATH if srcdir is ".", strip leading and
! # trailing colons and then remove the whole line if VPATH becomes empty
! # (actually we leave an empty line to preserve line numbers).
! if test "x$srcdir" = x.; then
!   ac_vpsub='/^[	 ]*VPATH[	 ]*=/{
! s/:*\$(srcdir):*/:/
! s/:*\${srcdir}:*/:/
! s/:*@srcdir@:*/:/
! s/^\([^=]*=[	 ]*\):*/\1/
! s/:*$//
! s/^[^=]*=[	 ]*$//
! }'
! fi
  
! cat >>$CONFIG_STATUS <<\_ACEOF
! fi # test -n "$CONFIG_FILES"
  
  
! for ac_tag in  :F $CONFIG_FILES  :H $CONFIG_HEADERS    :C $CONFIG_COMMANDS
  do
    case $ac_tag in
    :[FHLC]) ac_mode=$ac_tag; continue;;
    esac
    case $ac_mode$ac_tag in
    :[FHL]*:*);;
!   :L* | :C*:*) { { echo "$as_me:$LINENO: error: Invalid tag $ac_tag." >&5
! echo "$as_me: error: Invalid tag $ac_tag." >&2;}
!    { (exit 1); exit 1; }; };;
    :[FH]-) ac_tag=-:-;;
    :[FH]*) ac_tag=$ac_tag:$ac_tag.in;;
    esac
--- 27512,27813 ----
  # after its creation but before its name has been assigned to `$tmp'.
  $debug ||
  {
!   tmp= ac_tmp=
    trap 'exit_status=$?
!   : "${ac_tmp:=$tmp}"
!   { test ! -d "$ac_tmp" || rm -fr "$ac_tmp"; } && exit $exit_status
  ' 0
!   trap 'as_fn_exit 1' 1 2 13 15
  }
  # Create a (secure) tmp directory for tmp files.
  
  {
    tmp=`(umask 077 && mktemp -d "./confXXXXXX") 2>/dev/null` &&
!   test -d "$tmp"
  }  ||
  {
    tmp=./conf$$-$RANDOM
    (umask 077 && mkdir "$tmp")
! } || as_fn_error $? "cannot create a temporary directory in ." "$LINENO" 5
! ac_tmp=$tmp
  
! # Set up the scripts for CONFIG_FILES section.
! # No need to generate them if there are no CONFIG_FILES.
! # This happens for instance with `./config.status config.h'.
  if test -n "$CONFIG_FILES"; then
  
  
+ ac_cr=`echo X | tr X '\015'`
+ # On cygwin, bash can eat \r inside `` if the user requested igncr.
+ # But we know of no other shell where ac_cr would be empty at this
+ # point, so we can use a bashism as a fallback.
+ if test "x$ac_cr" = x; then
+   eval ac_cr=\$\'\\r\'
+ fi
+ ac_cs_awk_cr=`$AWK 'BEGIN { print "a\rb" }' </dev/null 2>/dev/null`
+ if test "$ac_cs_awk_cr" = "a${ac_cr}b"; then
+   ac_cs_awk_cr='\\r'
+ else
+   ac_cs_awk_cr=$ac_cr
+ fi
+ 
+ echo 'BEGIN {' >"$ac_tmp/subs1.awk" &&
+ _ACEOF
  
  
+ {
+   echo "cat >conf$$subs.awk <<_ACEOF" &&
+   echo "$ac_subst_vars" | sed 's/.*/&!$&$ac_delim/' &&
+   echo "_ACEOF"
+ } >conf$$subs.sh ||
+   as_fn_error $? "could not make $CONFIG_STATUS" "$LINENO" 5
+ ac_delim_num=`echo "$ac_subst_vars" | grep -c '^'`
  ac_delim='%!_!# '
  for ac_last_try in false false false false false :; do
!   . ./conf$$subs.sh ||
!     as_fn_error $? "could not make $CONFIG_STATUS" "$LINENO" 5
  
!   ac_delim_n=`sed -n "s/.*$ac_delim\$/X/p" conf$$subs.awk | grep -c X`
!   if test $ac_delim_n = $ac_delim_num; then
      break
    elif $ac_last_try; then
!     as_fn_error $? "could not make $CONFIG_STATUS" "$LINENO" 5
    else
      ac_delim="$ac_delim!$ac_delim _$ac_delim!! "
    fi
  done
+ rm -f conf$$subs.sh
  
! cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
! cat >>"\$ac_tmp/subs1.awk" <<\\_ACAWK &&
  _ACEOF
+ sed -n '
+ h
+ s/^/S["/; s/!.*/"]=/
+ p
+ g
+ s/^[^!]*!//
+ :repl
+ t repl
+ s/'"$ac_delim"'$//
+ t delim
+ :nl
+ h
+ s/\(.\{148\}\)..*/\1/
+ t more1
+ s/["\\]/\\&/g; s/^/"/; s/$/\\n"\\/
+ p
+ n
+ b repl
+ :more1
+ s/["\\]/\\&/g; s/^/"/; s/$/"\\/
+ p
+ g
+ s/.\{148\}//
+ t nl
+ :delim
+ h
+ s/\(.\{148\}\)..*/\1/
+ t more2
+ s/["\\]/\\&/g; s/^/"/; s/$/"/
+ p
+ b
+ :more2
+ s/["\\]/\\&/g; s/^/"/; s/$/"\\/
+ p
+ g
+ s/.\{148\}//
+ t delim
+ ' <conf$$subs.awk | sed '
+ /^[^""]/{
+   N
+   s/\n//
+ }
+ ' >>$CONFIG_STATUS || ac_write_fail=1
+ rm -f conf$$subs.awk
+ cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
+ _ACAWK
+ cat >>"\$ac_tmp/subs1.awk" <<_ACAWK &&
+   for (key in S) S_is_set[key] = 1
+   FS = ""
  
+ }
+ {
+   line = $ 0
+   nfields = split(line, field, "@")
+   substed = 0
+   len = length(field[1])
+   for (i = 2; i < nfields; i++) {
+     key = field[i]
+     keylen = length(key)
+     if (S_is_set[key]) {
+       value = S[key]
+       line = substr(line, 1, len) "" value "" substr(line, len + keylen + 3)
+       len += length(value) + length(field[++i])
+       substed = 1
+     } else
+       len += 1 + keylen
+   }
  
!   print line
! }
  
! _ACAWK
! _ACEOF
! cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
! if sed "s/$ac_cr//" < /dev/null > /dev/null 2>&1; then
!   sed "s/$ac_cr\$//; s/$ac_cr/$ac_cs_awk_cr/g"
! else
!   cat
! fi < "$ac_tmp/subs1.awk" > "$ac_tmp/subs.awk" \
!   || as_fn_error $? "could not setup config files machinery" "$LINENO" 5
! _ACEOF
  
! # VPATH may cause trouble with some makes, so we remove sole $(srcdir),
! # ${srcdir} and @srcdir@ entries from VPATH if srcdir is ".", strip leading and
! # trailing colons and then remove the whole line if VPATH becomes empty
! # (actually we leave an empty line to preserve line numbers).
! if test "x$srcdir" = x.; then
!   ac_vpsub='/^[	 ]*VPATH[	 ]*=[	 ]*/{
! h
! s///
! s/^/:/
! s/[	 ]*$/:/
! s/:\$(srcdir):/:/g
! s/:\${srcdir}:/:/g
! s/:@srcdir@:/:/g
! s/^:*//
! s/:*$//
! x
! s/\(=[	 ]*\).*/\1/
! G
! s/\n//
! s/^[^=]*=[	 ]*$//
! }'
  fi
  
! cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
! fi # test -n "$CONFIG_FILES"
! 
! # Set up the scripts for CONFIG_HEADERS section.
! # No need to generate them if there are no CONFIG_HEADERS.
! # This happens for instance with `./config.status Makefile'.
! if test -n "$CONFIG_HEADERS"; then
! cat >"$ac_tmp/defines.awk" <<\_ACAWK ||
! BEGIN {
  _ACEOF
  
+ # Transform confdefs.h into an awk script `defines.awk', embedded as
+ # here-document in config.status, that substitutes the proper values into
+ # config.h.in to produce config.h.
  
+ # Create a delimiter string that does not exist in confdefs.h, to ease
+ # handling of long lines.
  ac_delim='%!_!# '
! for ac_last_try in false false :; do
!   ac_tt=`sed -n "/$ac_delim/p" confdefs.h`
!   if test -z "$ac_tt"; then
      break
    elif $ac_last_try; then
!     as_fn_error $? "could not make $CONFIG_HEADERS" "$LINENO" 5
    else
      ac_delim="$ac_delim!$ac_delim _$ac_delim!! "
    fi
  done
  
! # For the awk script, D is an array of macro values keyed by name,
! # likewise P contains macro parameters if any.  Preserve backslash
! # newline sequences.
  
! ac_word_re=[_$as_cr_Letters][_$as_cr_alnum]*
! sed -n '
! s/.\{148\}/&'"$ac_delim"'/g
! t rset
! :rset
! s/^[	 ]*#[	 ]*define[	 ][	 ]*/ /
! t def
! d
! :def
! s/\\$//
! t bsnl
! s/["\\]/\\&/g
! s/^ \('"$ac_word_re"'\)\(([^()]*)\)[	 ]*\(.*\)/P["\1"]="\2"\
! D["\1"]=" \3"/p
! s/^ \('"$ac_word_re"'\)[	 ]*\(.*\)/D["\1"]=" \2"/p
! d
! :bsnl
! s/["\\]/\\&/g
! s/^ \('"$ac_word_re"'\)\(([^()]*)\)[	 ]*\(.*\)/P["\1"]="\2"\
! D["\1"]=" \3\\\\\\n"\\/p
! t cont
! s/^ \('"$ac_word_re"'\)[	 ]*\(.*\)/D["\1"]=" \2\\\\\\n"\\/p
! t cont
! d
! :cont
! n
! s/.\{148\}/&'"$ac_delim"'/g
! t clear
! :clear
! s/\\$//
! t bsnlc
! s/["\\]/\\&/g; s/^/"/; s/$/"/p
! d
! :bsnlc
! s/["\\]/\\&/g; s/^/"/; s/$/\\\\\\n"\\/p
! b cont
! ' <confdefs.h | sed '
! s/'"$ac_delim"'/"\\\
! "/g' >>$CONFIG_STATUS || ac_write_fail=1
! 
! cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
!   for (key in D) D_is_set[key] = 1
!   FS = ""
! }
! /^[\t ]*#[\t ]*(define|undef)[\t ]+$ac_word_re([\t (]|\$)/ {
!   line = \$ 0
!   split(line, arg, " ")
!   if (arg[1] == "#") {
!     defundef = arg[2]
!     mac1 = arg[3]
!   } else {
!     defundef = substr(arg[1], 2)
!     mac1 = arg[2]
!   }
!   split(mac1, mac2, "(") #)
!   macro = mac2[1]
!   prefix = substr(line, 1, index(line, defundef) - 1)
!   if (D_is_set[macro]) {
!     # Preserve the white space surrounding the "#".
!     print prefix "define", macro P[macro] D[macro]
!     next
!   } else {
!     # Replace #undef with comments.  This is necessary, for example,
!     # in the case of _POSIX_SOURCE, which is predefined and required
!     # on some systems where configure will not decide to define it.
!     if (defundef == "undef") {
!       print "/*", prefix defundef, macro, "*/"
!       next
!     }
!   }
! }
! { print }
! _ACAWK
! _ACEOF
! cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
!   as_fn_error $? "could not setup config headers machinery" "$LINENO" 5
! fi # test -n "$CONFIG_HEADERS"
  
  
! eval set X "  :F $CONFIG_FILES  :H $CONFIG_HEADERS    :C $CONFIG_COMMANDS"
! shift
! for ac_tag
  do
    case $ac_tag in
    :[FHLC]) ac_mode=$ac_tag; continue;;
    esac
    case $ac_mode$ac_tag in
    :[FHL]*:*);;
!   :L* | :C*:*) as_fn_error $? "invalid tag \`$ac_tag'" "$LINENO" 5;;
    :[FH]-) ac_tag=-:-;;
    :[FH]*) ac_tag=$ac_tag:$ac_tag.in;;
    esac
***************
*** 32383,32389 ****
      for ac_f
      do
        case $ac_f in
!       -) ac_f="$tmp/stdin";;
        *) # Look for the file first in the build tree, then in the source tree
  	 # (if the path is not absolute).  The absolute path cannot be DOS-style,
  	 # because $ac_f cannot contain `:'.
--- 27826,27832 ----
      for ac_f
      do
        case $ac_f in
!       -) ac_f="$ac_tmp/stdin";;
        *) # Look for the file first in the build tree, then in the source tree
  	 # (if the path is not absolute).  The absolute path cannot be DOS-style,
  	 # because $ac_f cannot contain `:'.
***************
*** 32392,32417 ****
  	   [\\/$]*) false;;
  	   *) test -f "$srcdir/$ac_f" && ac_f="$srcdir/$ac_f";;
  	   esac ||
! 	   { { echo "$as_me:$LINENO: error: cannot find input file: $ac_f" >&5
! echo "$as_me: error: cannot find input file: $ac_f" >&2;}
!    { (exit 1); exit 1; }; };;
        esac
!       ac_file_inputs="$ac_file_inputs $ac_f"
      done
  
      # Let's still pretend it is `configure' which instantiates (i.e., don't
      # use $as_me), people would be surprised to read:
      #    /* config.h.  Generated by config.status.  */
!     configure_input="Generated from "`IFS=:
! 	  echo $* | sed 's|^[^:]*/||;s|:[^:]*/|, |g'`" by configure."
      if test x"$ac_file" != x-; then
        configure_input="$ac_file.  $configure_input"
!       { echo "$as_me:$LINENO: creating $ac_file" >&5
! echo "$as_me: creating $ac_file" >&6;}
      fi
  
      case $ac_tag in
!     *:-:* | *:-) cat >"$tmp/stdin";;
      esac
      ;;
    esac
--- 27835,27868 ----
  	   [\\/$]*) false;;
  	   *) test -f "$srcdir/$ac_f" && ac_f="$srcdir/$ac_f";;
  	   esac ||
! 	   as_fn_error 1 "cannot find input file: \`$ac_f'" "$LINENO" 5;;
        esac
!       case $ac_f in *\'*) ac_f=`$as_echo "$ac_f" | sed "s/'/'\\\\\\\\''/g"`;; esac
!       as_fn_append ac_file_inputs " '$ac_f'"
      done
  
      # Let's still pretend it is `configure' which instantiates (i.e., don't
      # use $as_me), people would be surprised to read:
      #    /* config.h.  Generated by config.status.  */
!     configure_input='Generated from '`
! 	  $as_echo "$*" | sed 's|^[^:]*/||;s|:[^:]*/|, |g'
! 	`' by configure.'
      if test x"$ac_file" != x-; then
        configure_input="$ac_file.  $configure_input"
!       { $as_echo "$as_me:${as_lineno-$LINENO}: creating $ac_file" >&5
! $as_echo "$as_me: creating $ac_file" >&6;}
      fi
+     # Neutralize special characters interpreted by sed in replacement strings.
+     case $configure_input in #(
+     *\&* | *\|* | *\\* )
+        ac_sed_conf_input=`$as_echo "$configure_input" |
+        sed 's/[\\\\&|]/\\\\&/g'`;; #(
+     *) ac_sed_conf_input=$configure_input;;
+     esac
  
      case $ac_tag in
!     *:-:* | *:-) cat >"$ac_tmp/stdin" \
!       || as_fn_error $? "could not create $ac_file" "$LINENO" 5 ;;
      esac
      ;;
    esac
***************
*** 32421,32462 ****
  	 X"$ac_file" : 'X\(//\)[^/]' \| \
  	 X"$ac_file" : 'X\(//\)$' \| \
  	 X"$ac_file" : 'X\(/\)' \| . 2>/dev/null ||
! echo X"$ac_file" |
!     sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
! 	    s//\1/
! 	    q
! 	  }
! 	  /^X\(\/\/\)[^/].*/{
! 	    s//\1/
! 	    q
! 	  }
! 	  /^X\(\/\/\)$/{
! 	    s//\1/
! 	    q
! 	  }
! 	  /^X\(\/\).*/{
! 	    s//\1/
! 	    q
! 	  }
! 	  s/.*/./; q'`
!   { as_dir="$ac_dir"
!   case $as_dir in #(
!   -*) as_dir=./$as_dir;;
!   esac
!   test -d "$as_dir" || { $as_mkdir_p && mkdir -p "$as_dir"; } || {
!     as_dirs=
!     while :; do
!       case $as_dir in #(
!       *\'*) as_qdir=`echo "$as_dir" | sed "s/'/'\\\\\\\\''/g"`;; #(
!       *) as_qdir=$as_dir;;
!       esac
!       as_dirs="'$as_qdir' $as_dirs"
!       as_dir=`$as_dirname -- "$as_dir" ||
! $as_expr X"$as_dir" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
! 	 X"$as_dir" : 'X\(//\)[^/]' \| \
! 	 X"$as_dir" : 'X\(//\)$' \| \
! 	 X"$as_dir" : 'X\(/\)' \| . 2>/dev/null ||
! echo X"$as_dir" |
      sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
  	    s//\1/
  	    q
--- 27872,27878 ----
  	 X"$ac_file" : 'X\(//\)[^/]' \| \
  	 X"$ac_file" : 'X\(//\)$' \| \
  	 X"$ac_file" : 'X\(/\)' \| . 2>/dev/null ||
! $as_echo X"$ac_file" |
      sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
  	    s//\1/
  	    q
***************
*** 32474,32493 ****
  	    q
  	  }
  	  s/.*/./; q'`
!       test -d "$as_dir" && break
!     done
!     test -z "$as_dirs" || eval "mkdir $as_dirs"
!   } || test -d "$as_dir" || { { echo "$as_me:$LINENO: error: cannot create directory $as_dir" >&5
! echo "$as_me: error: cannot create directory $as_dir" >&2;}
!    { (exit 1); exit 1; }; }; }
    ac_builddir=.
  
  case "$ac_dir" in
  .) ac_dir_suffix= ac_top_builddir_sub=. ac_top_build_prefix= ;;
  *)
!   ac_dir_suffix=/`echo "$ac_dir" | sed 's,^\.[\\/],,'`
    # A ".." for each directory in $ac_dir_suffix.
!   ac_top_builddir_sub=`echo "$ac_dir_suffix" | sed 's,/[^\\/]*,/..,g;s,/,,'`
    case $ac_top_builddir_sub in
    "") ac_top_builddir_sub=. ac_top_build_prefix= ;;
    *)  ac_top_build_prefix=$ac_top_builddir_sub/ ;;
--- 27890,27904 ----
  	    q
  	  }
  	  s/.*/./; q'`
!   as_dir="$ac_dir"; as_fn_mkdir_p
    ac_builddir=.
  
  case "$ac_dir" in
  .) ac_dir_suffix= ac_top_builddir_sub=. ac_top_build_prefix= ;;
  *)
!   ac_dir_suffix=/`$as_echo "$ac_dir" | sed 's|^\.[\\/]||'`
    # A ".." for each directory in $ac_dir_suffix.
!   ac_top_builddir_sub=`$as_echo "$ac_dir_suffix" | sed 's|/[^\\/]*|/..|g;s|/||'`
    case $ac_top_builddir_sub in
    "") ac_top_builddir_sub=. ac_top_build_prefix= ;;
    *)  ac_top_build_prefix=$ac_top_builddir_sub/ ;;
***************
*** 32532,32543 ****
    esac
  _ACEOF
  
! cat >>$CONFIG_STATUS <<\_ACEOF
  # If the template does not know about datarootdir, expand it.
  # FIXME: This hack should be removed a few years after 2.60.
  ac_datarootdir_hack=; ac_datarootdir_seen=
! 
! case `sed -n '/datarootdir/ {
    p
    q
  }
--- 27943,27954 ----
    esac
  _ACEOF
  
! cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
  # If the template does not know about datarootdir, expand it.
  # FIXME: This hack should be removed a few years after 2.60.
  ac_datarootdir_hack=; ac_datarootdir_seen=
! ac_sed_dataroot='
! /datarootdir/ {
    p
    q
  }
***************
*** 32545,32580 ****
  /@docdir@/p
  /@infodir@/p
  /@localedir@/p
! /@mandir@/p
! ' $ac_file_inputs` in
  *datarootdir*) ac_datarootdir_seen=yes;;
  *@datadir@*|*@docdir@*|*@infodir@*|*@localedir@*|*@mandir@*)
!   { echo "$as_me:$LINENO: WARNING: $ac_file_inputs seems to ignore the --datarootdir setting" >&5
! echo "$as_me: WARNING: $ac_file_inputs seems to ignore the --datarootdir setting" >&2;}
  _ACEOF
! cat >>$CONFIG_STATUS <<_ACEOF
    ac_datarootdir_hack='
    s&@datadir@&$datadir&g
    s&@docdir@&$docdir&g
    s&@infodir@&$infodir&g
    s&@localedir@&$localedir&g
    s&@mandir@&$mandir&g
!     s&\\\${datarootdir}&$datarootdir&g' ;;
  esac
  _ACEOF
  
  # Neutralize VPATH when `$srcdir' = `.'.
  # Shell code in configure.ac might set extrasub.
  # FIXME: do we really want to maintain this feature?
! cat >>$CONFIG_STATUS <<_ACEOF
!   sed "$ac_vpsub
  $extrasub
  _ACEOF
! cat >>$CONFIG_STATUS <<\_ACEOF
  :t
  /@[a-zA-Z_][a-zA-Z_0-9]*@/!b
! s&@configure_input@&$configure_input&;t t
  s&@top_builddir@&$ac_top_builddir_sub&;t t
  s&@srcdir@&$ac_srcdir&;t t
  s&@abs_srcdir@&$ac_abs_srcdir&;t t
  s&@top_srcdir@&$ac_top_srcdir&;t t
--- 27956,27992 ----
  /@docdir@/p
  /@infodir@/p
  /@localedir@/p
! /@mandir@/p'
! case `eval "sed -n \"\$ac_sed_dataroot\" $ac_file_inputs"` in
  *datarootdir*) ac_datarootdir_seen=yes;;
  *@datadir@*|*@docdir@*|*@infodir@*|*@localedir@*|*@mandir@*)
!   { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $ac_file_inputs seems to ignore the --datarootdir setting" >&5
! $as_echo "$as_me: WARNING: $ac_file_inputs seems to ignore the --datarootdir setting" >&2;}
  _ACEOF
! cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
    ac_datarootdir_hack='
    s&@datadir@&$datadir&g
    s&@docdir@&$docdir&g
    s&@infodir@&$infodir&g
    s&@localedir@&$localedir&g
    s&@mandir@&$mandir&g
!   s&\\\${datarootdir}&$datarootdir&g' ;;
  esac
  _ACEOF
  
  # Neutralize VPATH when `$srcdir' = `.'.
  # Shell code in configure.ac might set extrasub.
  # FIXME: do we really want to maintain this feature?
! cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
! ac_sed_extra="$ac_vpsub
  $extrasub
  _ACEOF
! cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
  :t
  /@[a-zA-Z_][a-zA-Z_0-9]*@/!b
! s|@configure_input@|$ac_sed_conf_input|;t t
  s&@top_builddir@&$ac_top_builddir_sub&;t t
+ s&@top_build_prefix@&$ac_top_build_prefix&;t t
  s&@srcdir@&$ac_srcdir&;t t
  s&@abs_srcdir@&$ac_abs_srcdir&;t t
  s&@top_srcdir@&$ac_top_srcdir&;t t
***************
*** 32585,32705 ****
  s&@INSTALL@&$ac_INSTALL&;t t
  s&@MKDIR_P@&$ac_MKDIR_P&;t t
  $ac_datarootdir_hack
! " $ac_file_inputs | sed -f "$tmp/subs-1.sed" | sed -f "$tmp/subs-2.sed" | sed -f "$tmp/subs-3.sed" >$tmp/out
  
  test -z "$ac_datarootdir_hack$ac_datarootdir_seen" &&
!   { ac_out=`sed -n '/\${datarootdir}/p' "$tmp/out"`; test -n "$ac_out"; } &&
!   { ac_out=`sed -n '/^[	 ]*datarootdir[	 ]*:*=/p' "$tmp/out"`; test -z "$ac_out"; } &&
!   { echo "$as_me:$LINENO: WARNING: $ac_file contains a reference to the variable \`datarootdir'
! which seems to be undefined.  Please make sure it is defined." >&5
! echo "$as_me: WARNING: $ac_file contains a reference to the variable \`datarootdir'
! which seems to be undefined.  Please make sure it is defined." >&2;}
  
!   rm -f "$tmp/stdin"
    case $ac_file in
!   -) cat "$tmp/out"; rm -f "$tmp/out";;
!   *) rm -f "$ac_file"; mv "$tmp/out" $ac_file;;
!   esac
   ;;
    :H)
    #
    # CONFIG_HEADER
    #
- _ACEOF
- 
- # Transform confdefs.h into a sed script `conftest.defines', that
- # substitutes the proper values into config.h.in to produce config.h.
- rm -f conftest.defines conftest.tail
- # First, append a space to every undef/define line, to ease matching.
- echo 's/$/ /' >conftest.defines
- # Then, protect against being on the right side of a sed subst, or in
- # an unquoted here document, in config.status.  If some macros were
- # called several times there might be several #defines for the same
- # symbol, which is useless.  But do not sort them, since the last
- # AC_DEFINE must be honored.
- ac_word_re=[_$as_cr_Letters][_$as_cr_alnum]*
- # These sed commands are passed to sed as "A NAME B PARAMS C VALUE D", where
- # NAME is the cpp macro being defined, VALUE is the value it is being given.
- # PARAMS is the parameter list in the macro definition--in most cases, it's
- # just an empty string.
- ac_dA='s,^\\([	 #]*\\)[^	 ]*\\([	 ]*'
- ac_dB='\\)[	 (].*,\\1define\\2'
- ac_dC=' '
- ac_dD=' ,'
- 
- uniq confdefs.h |
-   sed -n '
- 	t rset
- 	:rset
- 	s/^[	 ]*#[	 ]*define[	 ][	 ]*//
- 	t ok
- 	d
- 	:ok
- 	s/[\\&,]/\\&/g
- 	s/^\('"$ac_word_re"'\)\(([^()]*)\)[	 ]*\(.*\)/ '"$ac_dA"'\1'"$ac_dB"'\2'"${ac_dC}"'\3'"$ac_dD"'/p
- 	s/^\('"$ac_word_re"'\)[	 ]*\(.*\)/'"$ac_dA"'\1'"$ac_dB$ac_dC"'\2'"$ac_dD"'/p
-   ' >>conftest.defines
- 
- # Remove the space that was appended to ease matching.
- # Then replace #undef with comments.  This is necessary, for
- # example, in the case of _POSIX_SOURCE, which is predefined and required
- # on some systems where configure will not decide to define it.
- # (The regexp can be short, since the line contains either #define or #undef.)
- echo 's/ $//
- s,^[	 #]*u.*,/* & */,' >>conftest.defines
- 
- # Break up conftest.defines:
- ac_max_sed_lines=50
- 
- # First sed command is:	 sed -f defines.sed $ac_file_inputs >"$tmp/out1"
- # Second one is:	 sed -f defines.sed "$tmp/out1" >"$tmp/out2"
- # Third one will be:	 sed -f defines.sed "$tmp/out2" >"$tmp/out1"
- # et cetera.
- ac_in='$ac_file_inputs'
- ac_out='"$tmp/out1"'
- ac_nxt='"$tmp/out2"'
- 
- while :
- do
-   # Write a here document:
-     cat >>$CONFIG_STATUS <<_ACEOF
-     # First, check the format of the line:
-     cat >"\$tmp/defines.sed" <<\\CEOF
- /^[	 ]*#[	 ]*undef[	 ][	 ]*$ac_word_re[	 ]*\$/b def
- /^[	 ]*#[	 ]*define[	 ][	 ]*$ac_word_re[(	 ]/b def
- b
- :def
- _ACEOF
-   sed ${ac_max_sed_lines}q conftest.defines >>$CONFIG_STATUS
-   echo 'CEOF
-     sed -f "$tmp/defines.sed"' "$ac_in >$ac_out" >>$CONFIG_STATUS
-   ac_in=$ac_out; ac_out=$ac_nxt; ac_nxt=$ac_in
-   sed 1,${ac_max_sed_lines}d conftest.defines >conftest.tail
-   grep . conftest.tail >/dev/null || break
-   rm -f conftest.defines
-   mv conftest.tail conftest.defines
- done
- rm -f conftest.defines conftest.tail
- 
- echo "ac_result=$ac_in" >>$CONFIG_STATUS
- cat >>$CONFIG_STATUS <<\_ACEOF
    if test x"$ac_file" != x-; then
!     echo "/* $configure_input  */" >"$tmp/config.h"
!     cat "$ac_result" >>"$tmp/config.h"
!     if diff $ac_file "$tmp/config.h" >/dev/null 2>&1; then
!       { echo "$as_me:$LINENO: $ac_file is unchanged" >&5
! echo "$as_me: $ac_file is unchanged" >&6;}
      else
!       rm -f $ac_file
!       mv "$tmp/config.h" $ac_file
      fi
    else
!     echo "/* $configure_input  */"
!     cat "$ac_result"
    fi
!   rm -f "$tmp/out12"
! # Compute $ac_file's index in $config_headers.
! _am_arg=$ac_file
  _am_stamp_count=1
  for _am_header in $config_headers :; do
    case $_am_header in
--- 27997,28047 ----
  s&@INSTALL@&$ac_INSTALL&;t t
  s&@MKDIR_P@&$ac_MKDIR_P&;t t
  $ac_datarootdir_hack
! "
! eval sed \"\$ac_sed_extra\" "$ac_file_inputs" | $AWK -f "$ac_tmp/subs.awk" \
!   >$ac_tmp/out || as_fn_error $? "could not create $ac_file" "$LINENO" 5
  
  test -z "$ac_datarootdir_hack$ac_datarootdir_seen" &&
!   { ac_out=`sed -n '/\${datarootdir}/p' "$ac_tmp/out"`; test -n "$ac_out"; } &&
!   { ac_out=`sed -n '/^[	 ]*datarootdir[	 ]*:*=/p' \
!       "$ac_tmp/out"`; test -z "$ac_out"; } &&
!   { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $ac_file contains a reference to the variable \`datarootdir'
! which seems to be undefined.  Please make sure it is defined" >&5
! $as_echo "$as_me: WARNING: $ac_file contains a reference to the variable \`datarootdir'
! which seems to be undefined.  Please make sure it is defined" >&2;}
  
!   rm -f "$ac_tmp/stdin"
    case $ac_file in
!   -) cat "$ac_tmp/out" && rm -f "$ac_tmp/out";;
!   *) rm -f "$ac_file" && mv "$ac_tmp/out" "$ac_file";;
!   esac \
!   || as_fn_error $? "could not create $ac_file" "$LINENO" 5
   ;;
    :H)
    #
    # CONFIG_HEADER
    #
    if test x"$ac_file" != x-; then
!     {
!       $as_echo "/* $configure_input  */" \
!       && eval '$AWK -f "$ac_tmp/defines.awk"' "$ac_file_inputs"
!     } >"$ac_tmp/config.h" \
!       || as_fn_error $? "could not create $ac_file" "$LINENO" 5
!     if diff "$ac_file" "$ac_tmp/config.h" >/dev/null 2>&1; then
!       { $as_echo "$as_me:${as_lineno-$LINENO}: $ac_file is unchanged" >&5
! $as_echo "$as_me: $ac_file is unchanged" >&6;}
      else
!       rm -f "$ac_file"
!       mv "$ac_tmp/config.h" "$ac_file" \
! 	|| as_fn_error $? "could not create $ac_file" "$LINENO" 5
      fi
    else
!     $as_echo "/* $configure_input  */" \
!       && eval '$AWK -f "$ac_tmp/defines.awk"' "$ac_file_inputs" \
!       || as_fn_error $? "could not create -" "$LINENO" 5
    fi
! # Compute "$ac_file"'s index in $config_headers.
! _am_arg="$ac_file"
  _am_stamp_count=1
  for _am_header in $config_headers :; do
    case $_am_header in
***************
*** 32714,32720 ****
  	 X"$_am_arg" : 'X\(//\)[^/]' \| \
  	 X"$_am_arg" : 'X\(//\)$' \| \
  	 X"$_am_arg" : 'X\(/\)' \| . 2>/dev/null ||
! echo X"$_am_arg" |
      sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
  	    s//\1/
  	    q
--- 28056,28062 ----
  	 X"$_am_arg" : 'X\(//\)[^/]' \| \
  	 X"$_am_arg" : 'X\(//\)$' \| \
  	 X"$_am_arg" : 'X\(/\)' \| . 2>/dev/null ||
! $as_echo X"$_am_arg" |
      sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
  	    s//\1/
  	    q
***************
*** 32734,32741 ****
  	  s/.*/./; q'`/stamp-h$_am_stamp_count
   ;;
  
!   :C)  { echo "$as_me:$LINENO: executing $ac_file commands" >&5
! echo "$as_me: executing $ac_file commands" >&6;}
   ;;
    esac
  
--- 28076,28083 ----
  	  s/.*/./; q'`/stamp-h$_am_stamp_count
   ;;
  
!   :C)  { $as_echo "$as_me:${as_lineno-$LINENO}: executing $ac_file commands" >&5
! $as_echo "$as_me: executing $ac_file commands" >&6;}
   ;;
    esac
  
***************
*** 32757,32763 ****
  	 X"$mf" : 'X\(//\)[^/]' \| \
  	 X"$mf" : 'X\(//\)$' \| \
  	 X"$mf" : 'X\(/\)' \| . 2>/dev/null ||
! echo X"$mf" |
      sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
  	    s//\1/
  	    q
--- 28099,28105 ----
  	 X"$mf" : 'X\(//\)[^/]' \| \
  	 X"$mf" : 'X\(//\)$' \| \
  	 X"$mf" : 'X\(/\)' \| . 2>/dev/null ||
! $as_echo X"$mf" |
      sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
  	    s//\1/
  	    q
***************
*** 32801,32842 ****
  	 X"$file" : 'X\(//\)[^/]' \| \
  	 X"$file" : 'X\(//\)$' \| \
  	 X"$file" : 'X\(/\)' \| . 2>/dev/null ||
! echo X"$file" |
!     sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
! 	    s//\1/
! 	    q
! 	  }
! 	  /^X\(\/\/\)[^/].*/{
! 	    s//\1/
! 	    q
! 	  }
! 	  /^X\(\/\/\)$/{
! 	    s//\1/
! 	    q
! 	  }
! 	  /^X\(\/\).*/{
! 	    s//\1/
! 	    q
! 	  }
! 	  s/.*/./; q'`
!     { as_dir=$dirpart/$fdir
!   case $as_dir in #(
!   -*) as_dir=./$as_dir;;
!   esac
!   test -d "$as_dir" || { $as_mkdir_p && mkdir -p "$as_dir"; } || {
!     as_dirs=
!     while :; do
!       case $as_dir in #(
!       *\'*) as_qdir=`echo "$as_dir" | sed "s/'/'\\\\\\\\''/g"`;; #(
!       *) as_qdir=$as_dir;;
!       esac
!       as_dirs="'$as_qdir' $as_dirs"
!       as_dir=`$as_dirname -- "$as_dir" ||
! $as_expr X"$as_dir" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
! 	 X"$as_dir" : 'X\(//\)[^/]' \| \
! 	 X"$as_dir" : 'X\(//\)$' \| \
! 	 X"$as_dir" : 'X\(/\)' \| . 2>/dev/null ||
! echo X"$as_dir" |
      sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
  	    s//\1/
  	    q
--- 28143,28149 ----
  	 X"$file" : 'X\(//\)[^/]' \| \
  	 X"$file" : 'X\(//\)$' \| \
  	 X"$file" : 'X\(/\)' \| . 2>/dev/null ||
! $as_echo X"$file" |
      sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
  	    s//\1/
  	    q
***************
*** 32854,32865 ****
  	    q
  	  }
  	  s/.*/./; q'`
!       test -d "$as_dir" && break
!     done
!     test -z "$as_dirs" || eval "mkdir $as_dirs"
!   } || test -d "$as_dir" || { { echo "$as_me:$LINENO: error: cannot create directory $as_dir" >&5
! echo "$as_me: error: cannot create directory $as_dir" >&2;}
!    { (exit 1); exit 1; }; }; }
      # echo "creating $dirpart/$file"
      echo '# dummy' > "$dirpart/$file"
    done
--- 28161,28167 ----
  	    q
  	  }
  	  s/.*/./; q'`
!     as_dir=$dirpart/$fdir; as_fn_mkdir_p
      # echo "creating $dirpart/$file"
      echo '# dummy' > "$dirpart/$file"
    done
***************
*** 32873,32883 ****
  done # for ac_tag
  
  
! { (exit 0); exit 0; }
  _ACEOF
- chmod +x $CONFIG_STATUS
  ac_clean_files=$ac_clean_files_save
  
  
  # configure is writing to config.log, and then calls config.status.
  # config.status does its own redirection, appending to config.log.
--- 28175,28187 ----
  done # for ac_tag
  
  
! as_fn_exit 0
  _ACEOF
  ac_clean_files=$ac_clean_files_save
  
+ test $ac_write_fail = 0 ||
+   as_fn_error $? "write failure creating $CONFIG_STATUS" "$LINENO" 5
+ 
  
  # configure is writing to config.log, and then calls config.status.
  # config.status does its own redirection, appending to config.log.
***************
*** 32897,32907 ****
    exec 5>>config.log
    # Use ||, not &&, to avoid exiting from the if with $? = 1, which
    # would make configure fail if this is the last instruction.
!   $ac_cs_success || { (exit 1); exit 1; }
  fi
  
  
! { echo "$as_me:$LINENO: result:
  * general build options
  native win32:				$vips_os_win32
  open files in binary mode: 		$vips_binary_open
--- 28201,28215 ----
    exec 5>>config.log
    # Use ||, not &&, to avoid exiting from the if with $? = 1, which
    # would make configure fail if this is the last instruction.
!   $ac_cs_success || as_fn_exit 1
! fi
! if test -n "$ac_unrecognized_opts" && test "$enable_option_checking" != no; then
!   { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: unrecognized options: $ac_unrecognized_opts" >&5
! $as_echo "$as_me: WARNING: unrecognized options: $ac_unrecognized_opts" >&2;}
  fi
  
  
! { $as_echo "$as_me:${as_lineno-$LINENO}: result:
  * general build options
  native win32:				$vips_os_win32
  open files in binary mode: 		$vips_binary_open
***************
*** 32924,32930 ****
  build Python binding: 			$with_python
  build CImg wrapper: 			$with_cimg
  " >&5
! echo "${ECHO_T}
  * general build options
  native win32:				$vips_os_win32
  open files in binary mode: 		$vips_binary_open
--- 28232,28238 ----
  build Python binding: 			$with_python
  build CImg wrapper: 			$with_cimg
  " >&5
! $as_echo "
  * general build options
  native win32:				$vips_os_win32
  open files in binary mode: 		$vips_binary_open
diff -crB parsec-2.0/pkgs/apps/vips/src/libsrc/iofuncs/threadgroup.c parsec-2.0-modified/pkgs/apps/vips/src/libsrc/iofuncs/threadgroup.c
*** parsec-2.0/pkgs/apps/vips/src/libsrc/iofuncs/threadgroup.c	2008-09-15 10:22:39.000000000 -0500
--- parsec-2.0-modified/pkgs/apps/vips/src/libsrc/iofuncs/threadgroup.c	2019-04-04 11:20:56.412505283 -0500
***************
*** 37,42 ****
--- 37,43 ----
      These files are distributed with VIPS - http://www.vips.ecs.soton.ac.uk
  
   */
+ #include <heartbeat-accuracy-power.h>
  
  /* 
  #define TIME_THREAD
***************
*** 91,96 ****
--- 92,853 ----
  /* Default n threads ... 0 means get from environment.
   */
  int im__concurrency = 0;
+ heartbeat_t heart;
+ //int window_size = 20;
+ 
+ //---------------------------------------------------
+ // Control stuff
+ 
+ int current_action = -1;
+ int h1, h2, h3, h4;
+ int max_actions = 0;
+ 
+ typedef struct {
+   int beat;
+   double rate;
+   int state;
+ } controller_log_entry_t;
+ 
+ 
+ controller_log_entry_t controller_log[1000];
+ 
+ 
+ #define FAST 1
+ #define SLOW 1
+ 
+ #if FAST 
+ double p1 = 0.0;
+ double p2 = 0.0;
+ double z1 = 0.0;
+ #elif SLOW
+ const double p1 = 0.01;
+ const double p2 = 0.1;
+ const double z1 = 0.05;
+ #else
+ const double p1 = -0.5;
+ const double p2 =  0.0;
+ const double z1 =  0.0;
+ #endif
+ 
+ const double mu = 1.0;
+ //double last_speedup = 1.0;
+ #define STARTING_POWERUP 7.4
+ #define STARTING_SPEEDUP 3
+ double last_powerup = STARTING_POWERUP;
+ double last_speedup = STARTING_SPEEDUP;
+ 
+ double act_acc  = 0.0;                 // and the idled application
+ 
+ double power_u         = STARTING_POWERUP;                   // control variable
+ double power_uo        = STARTING_POWERUP;                   // old value for the control variable
+ double power_uoo       = STARTING_POWERUP;
+ double power_e         = 100000;
+ double power_eo        = 100000;
+ 
+ double speed_u         = STARTING_SPEEDUP;                   // control variable
+ double speed_uo        = STARTING_SPEEDUP;                   // old value for the control variable
+ double speed_uoo       = STARTING_SPEEDUP;
+ double speed_e         = 100000;
+ double speed_eo        = 100000;
+ 
+ int state_1 = 0;
+ int state_2 = 0;
+ int power_tdo_state_1 = 0;
+ int power_tdo_state_2 = 0;
+ int speed_tdo_state_1 = 0;
+ int speed_tdo_state_2 = 0;
+ int current_beat = 0;
+ int npids = 0;
+ pid_t pids[128]; 
+ int apps[1024];
+ 
+ 
+ int get_all_subpids(pid_t pid, pid_t* pids) {
+   int   n=0;
+   FILE  *cret;
+   int   stret;
+   char  pid_string[128];
+   char  cretpids[100];	
+   sprintf(cretpids,"ps -eLf | awk '(/%d/) && (!/awk/) {print $4}'",pid);
+   cret = popen(cretpids, "r");
+ 
+   if (cret == NULL) { 
+     printf("Error in popen\n"); 
+     exit(-1); 
+   }
+ 
+   while (fgets(pid_string, 128, cret) != NULL)  { 
+       pids[n] = atoi(pid_string); 
+       printf(" from ps - %d\n", pids[n]);
+       n++; 
+     }
+ 
+   stret = pclose(cret);
+ 
+   if (stret == -1) { 
+     printf("Error in pclose\n"); 
+     exit(-1); 
+   }
+ 
+   return n;
+ }
+ 
+ typedef int state_id_t;
+ 
+ //#define NSTATES 17
+ #define NSYSSTATES 53
+ //#define NSYSSTATES 12
+ #define NAPPSTATES 52
+ 
+ typedef struct {
+   int id;
+ 
+   double speedup;
+   double cost;
+ } control_state_t;
+ 
+ typedef struct {
+ 
+   int id;
+ 
+   double freq;
+   int cores; 
+ } power_state_t;
+ 
+ typedef struct {
+   int id;
+ 
+   int ref;
+   int range;
+   int subme;
+ } speed_state_t;
+ 
+ typedef struct {
+   int id;
+ 
+   int ref;
+   int range;
+   int subme;
+ } accuracy_state_t;
+ 
+ 
+ control_state_t power_controller_states[] = {
+ #if NSYSSTATES == 53
+ {	0	,	1	,	1	},
+ {	1	,	1.163271732	,	1.065459386	},
+ {	2	,	1.326450802	,	1.152370031	},
+ {	3	,	2.000779119	,	1.158258946	},
+ {	4	,	2.342362224	,	1.255978706	},
+ {	5	,	2.998628978	,	1.299315462	},
+ {	6	,	3.497754833	,	1.439517358	},
+ {	7	,	3.998042748	,	1.444595407	},
+ {	8	,	4.008467244	,	1.589721291	},
+ {	9	,	4.971273774	,	1.592954925	},
+ {	10	,	5.930045717	,	1.726970261	},
+ {	11	,	6.112010628	,	1.752157068	},
+ {	12	,	6.294323495	,	1.772866618	},
+ {	13	,	6.540468322	,	1.816738742	},
+ {	14	,	6.830129396	,	1.847993334	},
+ {	15	,	7.014754091	,	1.875424987	},
+ {	16	,	7.22679923	,	1.895050481	},
+ {	17	,	7.363138412	,	2.029663413	},
+ {	18	,	7.673919847	,	2.073628968	},
+ {	19	,	7.872333244	,	2.092926031	},
+ {	20	,	8.135646106	,	2.131456092	},
+ {	21	,	8.391979993	,	2.167973466	},
+ {	22	,	8.404035533	,	2.301570847	},
+ {	23	,	8.711506659	,	2.349388177	},
+ {	24	,	8.888993528	,	2.362690163	},
+ {	25	,	9.282032517	,	2.425433104	},
+ {	26	,	9.57516275	,	2.454561209	},
+ {	27	,	9.739863181	,	2.636924624	},
+ {	28	,	10.0788924	,	2.687586586	},
+ {	29	,	10.4058207	,	2.74523928	},
+ {	30	,	10.79348906	,	2.769645477	},
+ {	31	,	10.80531768	,	2.974609988	},
+ {	32	,	11.15136748	,	3.019535793	},
+ {	33	,	11.51035878	,	3.096745832	},
+ {	34	,	11.91013564	,	3.121659746	},
+ {	35	,	12.18132289	,	3.376517983	},
+ {	36	,	13.08318039	,	3.442629909	},
+ {	37	,	13.29497213	,	3.812376705	},
+ {	38	,	13.69964495	,	3.880726313	},
+ {	39	,	14.18314966	,	3.955659357	},
+ {	40	,	14.38812127	,	4.260517126	},
+ {	41	,	14.81921322	,	4.346649056	},
+ {	42	,	15.35247753	,	4.420098325	},
+ {	43	,	15.36429858	,	4.744361745	},
+ {	44	,	15.84191262	,	4.828515862	},
+ {	45	,	16.51979142	,	4.96835753	},
+ {	46	,	16.97220796	,	5.334766603	},
+ {	47	,	17.67476894	,	5.486239027	},
+ {	48	,	18.11240302	,	5.917762179	},
+ {	49	,	18.7258797	,	6.043033844	},
+ {	50	,	18.99855523	,	7.015605922	},
+ {	51	,	19.68798937	,	7.176472013	},
+ {	52	,	20.52524998	,	7.349292258	}
+ #else
+ {	0	,	1	,	1	},
+ {	1	,	1.163271732	,	1.065459386	},
+ {	2	,	1.326450802	,	1.152370031	},
+ {	3	,	1.488810095	,	1.24329113	},
+ {	4	,	1.650068787	,	1.353627355	},
+ {	5	,	1.80753684	,	1.468675067	},
+ {	6	,	1.967211766	,	1.584900326	},
+ {	7	,	2.125857007	,	1.733380748	},
+ {	8	,	2.280853438	,	1.860046486	},
+ {	9	,	2.437647326	,	2.042786943	},
+ {	10	,	2.591623527	,	2.253330233	},
+ {	11	,	3.080682296	,	3.09230493	}
+ #endif
+ };
+ 
+ control_state_t speed_controller_states[] = {
+ {	0	,	1	,	0	},
+ #if 1
+ {	1	,	1.077	,	0.11	},
+ {	2	,	1.0797	,	0.1175	},
+ {	3	,	1.1032	,	0.14	},
+ {	4	,	1.1902	,	0.16	},
+ {	5	,	1.2182	,	0.21	},
+ {	6	,	1.2187	,	0.23	},
+ {	7	,	1.2415	,	0.2425	},
+ {	8	,	1.3105	,	0.2775	},
+ {	9	,	1.333	,	0.3025	},
+ {	10	,	1.404	,	0.4325	},
+ {	11	,	1.4055	,	0.4325	},
+ {	12	,	1.4257	,	0.4725	},
+ {	13	,	1.52	,	0.535	},
+ {	14	,	1.5405	,	0.6475	},
+ {	15	,	1.5407	,	0.6475	},
+ {	16	,	1.556	,	0.7475	},
+ {	17	,	1.6357	,	0.8425	},
+ {	18	,	1.653	,	0.905	},
+ {	19	,	1.674	,	0.9575	},
+ {	20	,	1.676	,	0.9575	},
+ {	21	,	1.8322	,	1.14	},
+ {	22	,	1.8402	,	1.1475	},
+ {	23	,	1.915	,	1.32	},
+ {	24	,	1.936	,	1.33	},
+ {	25	,	1.9557	,	1.38	},
+ {	26	,	1.9565	,	1.38	},
+ {	27	,	2.0372	,	1.595	},
+ {	28	,	2.0842	,	2.13	},
+ //{	29	,	2.1747	,	2.4025	},
+ //{	30	,	2.192	,	2.435	},
+ {	31	,	2.25 /*2.2545*/	,	2.485	},
+ {	32	,	2.2665	,	2.4975	},
+ {	33	,	2.3835	,	2.68	},
+ {	34	,	2.416	,	2.6875	},
+ {	35	,	2.4507	,	2.7375	},
+ {	36	,	2.5765	,	2.9575	},
+ {	37	,	2.589	,	3.0125	},
+ {	38	,	2.6955	,	3.5325	},
+ {	39	,	2.701	,	3.545	},
+ {	40	,	2.7665	,	4.82	},
+ {	41	,	2.827	,	4.845	},
+ {	42	,	2.8807	,	4.85	},
+ {	43	,	3.1925	,	5.18	},
+ {	44	,	3.2432	,	5.2775	},
+ {	45	,	3.3797	,	5.4325	},
+ {	46	,	3.3822	,	5.5775	},
+ {	47	,	3.4307	,	5.6225	},
+ {	48	,	3.457	,	5.705	},
+ {	49	,	3.7525	,	5.7325	},
+ {	50	,	3.7615	,	5.7325	},
+ {	51	,	4.1185	,	6.2425	},
+ {	52	,	4.2537	,	6.255	},
+ #endif
+ {	53	,	7/*4.2615*/	,	6.295	}
+ };
+ 
+ speed_state_t speed_states[] = {
+ {	0	,	5,16,7	},
+ #if 1
+ {	1	,	5,15,7	},
+ {	2	,	5,14,7	},
+ {	3	,	5,12,7	},
+ {	4	,	5,10,7	},
+ {	5	,	4,15,7	},
+ {	6	,	4,14,7	},
+ {	7	,	4,12,7	},
+ {	8	,	4,11,7	},
+ {	9	,	4,10,7	},
+ {	10	,	3,15,7	},
+ {	11	,	3,14,7	},
+ {	12	,	3,12,7	},
+ {	13	,	3,10,7	},
+ {	14	,	3,9,7	},
+ {	15	,	3,8,7	},
+ {	16	,	2,12,7	},
+ {	17	,	3,6,7	},
+ {	18	,	2,10,7	},
+ {	19	,	2,9,7	},
+ {	20	,	2,8,7	},
+ {	21	,	1,13,7	},
+ {	22	,	1,12,7	},
+ {	23	,	1,11,7	},
+ {	24	,	1,10,7	},
+ {	25	,	1,9,7	},
+ {	26	,	1,8,7	},
+ {	27	,	1,6,7	},
+ {	28	,	1,4,7	},
+ //{	29	,	2,7,6	},
+ //{	30	,	2,6,6	},
+ {	31	,	1,13,6	},
+ {	32	,	1,12,6	},
+ {	33	,	1,11,6	},
+ {	34	,	1,10,6	},
+ {	35	,	1,9,6	},
+ {	36	,	1,7,6	},
+ {	37	,	1,6,6	},
+ {	38	,	1,5,6	},
+ {	39	,	1,4,6	},
+ {	40	,	3,11,1	},
+ {	41	,	3,10,1	},
+ {	42	,	3,9,1	},
+ {	43	,	3,7,1	},
+ {	44	,	3,6,1	},
+ {	45	,	3,5,1	},
+ {	46	,	3,4,1	},
+ {	47	,	1,12,1	},
+ {	48	,	2,7,1	},
+ {	49	,	1,9,1	},
+ {	50	,	1,8,1	},
+ {	51	,	1,6,1	},
+ {	52	,	1,5,1	},
+ #endif
+ {	53	,	1,4,1	}
+ };
+ 
+ power_state_t power_states[] = {
+ #if NSYSSTATES == 53
+ {	0	,	1.2	,	1	},
+ {	1	,	1.4	,	1	},
+ {	2	,	1.6	,	1	},
+ {	3	,	1.2	,	2	},
+ {	4	,	1.4	,	2	},
+ {	5	,	1.2	,	3	},
+ {	6	,	1.4	,	3	},
+ {	7	,	1.2	,	4	},
+ {	8	,	1.6	,	3	},
+ {	9	,	1.2	,	5	},
+ {	10	,	1.2	,	6	},
+ {	11	,	1.2	,	7	},
+ {	12	,	1.2	,	8	},
+ {	13	,	1.2	,	9	},
+ {	14	,	1.2	,	10	},
+ {	15	,	1.2	,	11	},
+ {	16	,	1.2	,	12	},
+ {	17	,	1.4	,	8	},
+ {	18	,	1.4	,	9	},
+ {	19	,	1.4	,	10	},
+ {	20	,	1.4	,	11	},
+ {	21	,	1.4	,	12	},
+ {	22	,	1.6	,	8	},
+ {	23	,	1.6	,	9	},
+ {	24	,	1.6	,	10	},
+ {	25	,	1.6	,	11	},
+ {	26	,	1.6	,	12	},
+ {	27	,	1.8	,	9	},
+ {	28	,	1.8	,	10	},
+ {	29	,	1.8	,	11	},
+ {	30	,	1.8	,	12	},
+ {	31	,	2	,	9	},
+ {	32	,	2	,	10	},
+ {	33	,	2	,	11	},
+ {	34	,	2	,	12	},
+ {	35	,	2.2	,	10	},
+ {	36	,	2.2	,	12	},
+ {	37	,	2.4	,	10	},
+ {	38	,	2.4	,	11	},
+ {	39	,	2.4	,	12	},
+ {	40	,	2.6	,	10	},
+ {	41	,	2.6	,	11	},
+ {	42	,	2.6	,	12	},
+ {	43	,	2.8	,	10	},
+ {	44	,	2.8	,	11	},
+ {	45	,	2.8	,	12	},
+ {	46	,	3	,	11	},
+ {	47	,	3	,	12	},
+ {	48	,	3.2	,	11	},
+ {	49	,	3.2	,	12	},
+ {	50	,	3.201	,	10	},
+ {	51	,	3.201	,	11	},
+ {	52	,	3.201	,	12	}
+ #else
+ {	0	,	1.2	,	1	},
+ {	1	,	1.4	,	1	},
+ {	2	,	1.6	,	1	},
+ {	3	,	1.8	,	1	},
+ {	4	,	2.0	,	1	},
+ {	5	,	2.2	,	1	},
+ {	6	,	2.4	,	1	},
+ {	7	,	2.6	,	1	},
+ {	8	,	2.8	,	1	},
+ {	9	,	3.0	,	1	},
+ {	10	,	3.2	,	1	},
+ {	11	,	3.201	,	1	}
+ #endif
+ };
+ 
+ double x_hat_minus = 0.0;
+ double x_hat = .2;
+ double Q = .00001;
+ double P = 1.0;
+ double P_minus = 0.0;
+ double H = 0.0;
+ double R = .01;
+ double K = 0.0; 
+ 
+ typedef struct {  
+   double x_hat_minus;
+   double x_hat;
+   double Q;
+   double P;
+   double P_minus;
+   double H;
+   double R;
+   double K;
+ } kalman_filter_t;
+ 
+ kalman_filter_t filter_init = {0.0, 0.3125, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ 
+ #define HEURISTIC_W 0
+ 
+ int adaptation_level = 1;
+ 
+ kalman_filter_t power_filter = {0.0, 0.2, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ kalman_filter_t speed_filter = {0.0, 0.3125, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ 
+ double get_base_value(kalman_filter_t* k,
+ 		      double current_measurement, 
+ 		      double last_coeff) {
+   
+   k->x_hat_minus = k->x_hat;
+   k->P_minus = k->P + k->Q;
+   
+   k->H = last_coeff;
+   k->K = k->P_minus * k->H /( k->H * k->P_minus* k->H + k->R);
+   k->x_hat = k->x_hat_minus + k->K * (current_measurement - k->H * k->x_hat_minus);
+   k->P = (1 - k->K * k->H) * k->P_minus;
+   
+   return 1.0/k->x_hat;
+ }
+ 
+ void get_power_signal(double current_power, 
+ 		      double desired_power,
+ 		      double base_power,
+ 		      double* e,
+ 		      double* eo,
+ 		      double* u,
+ 		      double* uo,
+ 		      double* uoo) {
+ 
+   if(current_power < desired_power) {
+     p1 = 0.1;
+     p2 = 0.8;
+     z1 = 0.2;
+     p1 = 0;
+     p2 = 0;
+     z1 = 0;
+   }
+   else {
+     p1 = 0;
+     p2 = 0;
+     z1 = 0;
+ 
+   }
+ 
+   
+   double A         = -(-p1*z1 - p2*z1 + mu*p1*p2 - mu*p2 + p2 - mu*p1 + p1 + mu);
+   double B         = -(-mu*p1*p2*z1 + p1*p2*z1 + mu*p2*z1 + mu*p1*z1 - mu*z1 - p1*p2);
+   double C         = ((mu - mu*p1)*p2 + mu*p1 - mu)*base_power;
+   double D         = ((mu*p1-mu)*p2 - mu*p1 + mu)*base_power*z1;
+   double F         = 1/(z1-1);
+   
+   double y = current_power;
+   *e = desired_power - y;
+   
+   //printf("u = %f, uo = %f, e = %f, A = %f, B= %f, C = %f, D= %f, F = %f\n",
+   // *u, *uo, *e, A, B, C, D, F);
+   
+   *u = F * (A*(*uo) + B*(*uoo) + C*(*e) + D*(*eo));
+ 
+   
+   
+   if (*u<1)  *u=1;        
+   if (*u>power_controller_states[NSYSSTATES-1].cost) *u=power_controller_states[NSYSSTATES-1].cost;  
+   *uoo = *uo;            // saving values
+   *uo  = *u;
+   *eo  = *e;
+ }
+ 
+ double max_speedup;
+ 
+ void get_speed_signal(double current_speed, 
+ 		      double desired_speed,
+ 		      double base_speed,
+ 		      double* e,
+ 		      double* eo,
+ 		      double* u,
+ 		      double* uo,
+ 		      double* uoo) {
+   //double p1 = 0.1;
+   //double p2 = 0.2;
+   //double z1 = 0.15; 
+ 
+   double A         = -(-p1*z1 - p2*z1 + mu*p1*p2 - mu*p2 + p2 - mu*p1 + p1 + mu);
+   double B         = -(-mu*p1*p2*z1 + p1*p2*z1 + mu*p2*z1 + mu*p1*z1 - mu*z1 - p1*p2);
+   double C         = ((mu - mu*p1)*p2 + mu*p1 - mu)*base_speed;
+   double D         = ((mu*p1-mu)*p2 - mu*p1 + mu)*base_speed*z1;
+   double F         = 1/(z1-1);
+   
+   double y = current_speed;
+   *e = desired_speed - y;
+   
+   
+   //*u = F * (A*(*uo) + B*(*uoo) + C*(*e) + D*(*eo));
+ 
+   *u = *uo + *e/base_speed;
+ 
+   //  printf("u = %f, uo = %f, e = %f, base_speed = %f\n",
+   // *u, *uo, *e, base_speed);
+ 
+ 
+   //double max_speedup = speed_controller_states[NAPPSTATES-1].speedup * 
+   //power_controller_states[NSYSSTATES-1].speedup;
+   if (*u<1)  *u=1;        
+   if (*u>max_speedup) *u=max_speedup;  
+   *uoo = *uo;            // saving values
+   *uo  = *u;
+   *eo  = *e;
+ }
+ 
+ 
+ int power_translate(double u, 
+ 		    const control_state_t* states, 
+ 		    int nstates) {
+   int i;
+ 
+   control_state_t cs = states[nstates-1];
+ 
+   double efficiency = cs.speedup/cs.cost;
+   int index = nstates-1;
+ 
+ 
+   for(i = 0; i < nstates; i++) {
+     if(states[i].cost >= u) {
+ 
+       double new_eff = states[i].speedup/states[i].cost;
+       if(new_eff > efficiency) {
+ 
+ 	cs = states[i];
+ 	efficiency = new_eff;
+ 	index = i;
+       }	
+     }
+   }
+ 
+   return index;
+ }
+ 
+ int power_translate2(double u, 
+ 		     const control_state_t* states, 
+ 		     int state1,
+ 		     const power_state_t* pstates,
+ 		     int nstates) {
+   int i;
+   
+   control_state_t cs = states[0];
+   
+   double efficiency = cs.speedup;///cs.cost;
+     int index = 0;
+     
+     for(i = 0; i < nstates; i++) {
+       if(states[i].cost < u /*&& pstates[state1].cores == pstates[i].cores*/) {
+ 	
+ 	double new_eff = states[i].speedup;///states[i].cost;
+ 	  if(new_eff >= efficiency) {
+ 	    
+ 	    cs = states[i];
+ 	    efficiency = new_eff;
+ 	    index = i;
+ 	  }	
+       }
+     }
+     
+     return index;
+ }
+ 
+ int speed_translate(double u, 
+ 		    const control_state_t* states, 
+ 		    int nstates) {
+   int i;
+ 
+   control_state_t cs = states[nstates-1];
+ 
+   double efficiency = cs.speedup/(cs.cost+1);
+   int index = nstates-1;
+ 
+ 
+   for(i = 0; i < nstates; i++) {
+     if(states[i].speedup >= u) {
+ 
+       //index = i;
+       //break;
+       double new_eff = states[i].speedup/(states[i].cost+1);
+       if(new_eff > efficiency) {
+ 
+       	cs = states[i];
+ 	efficiency = new_eff;
+ 	index = i;
+       }	
+     }
+   }
+ 
+   return index;
+ }
+ 
+ int speed_translate2(double u, 
+ 		     const control_state_t* states, 
+ 		     int nstates) {
+   int i;
+   
+   control_state_t cs = states[0];
+   
+   double efficiency = cs.speedup/(cs.cost+1);
+     int index = 0;
+     
+     for(i = 0; i < nstates; i++) {
+       if(states[i].speedup < u) {
+ 	
+ 	double new_eff = states[i].speedup/(states[i].cost+1);
+ 	  if(new_eff >= efficiency) {
+ 	    
+ 	    cs = states[i];
+ 	    efficiency = new_eff;
+ 	    index = i;
+ 	  }	
+       }
+     }
+     
+     return index;
+ }
+ 
+ 
+ int last_speed_state = 0;	
+ int control_nref = 5;
+ int control_range = 16;
+ int control_refine = 7;
+ 
+ void speed_apply(int state,
+ 		 speed_state_t* ps,
+ 		 int nstates) {
+   
+   char command[4096];
+   int i;
+   
+   //printf("APPLYING SPPED STATE %d\n", state);
+ 
+   if(last_speed_state ==state)
+     return;
+   else 
+     last_speed_state = state;
+ 
+ #if 0
+   control_nref = ps[state].ref;
+   control_range = ps[state].range;
+   control_refine = ps[state].subme;
+ #endif
+   //sprintf(command,"echo \"%d\n%d\n%d\n\" >  x264_settings",
+   //	  ps[state].ref,ps[state].range,ps[state].subme);
+   //system(command);
+   
+ }
+ 
+ int last_power_state = 52;
+ int last_cores = 12;
+ int power_apply(int state_id,
+ 		pid_t* pid,
+ 		int npids,
+ 		const power_state_t* states,
+ 		int nstates) {
+   
+   int i;
+   
+   int rc = 0;
+   int retvalsyscall1 = 0;
+   int retvalsyscall2 = 0;
+   power_state_t state = states[0];
+   char command[4096];
+   
+   if(state_id == last_power_state)
+     return 0;
+   else
+     last_power_state = state_id;
+   
+   for(i = 0; i < nstates; i++) {
+     if( states[i].id == state_id) {
+       state = states[i];
+       break;
+     }
+   }
+ 
+ #if 0
+   sprintf(command,"taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; ",
+ 	  state.cores-1, getpid(), 
+ 	  state.cores-1, pid[1],
+ 	  state.cores-1, pid[2],
+ 	  state.cores-1, pid[3],
+ 	  state.cores-1, pid[4],
+ 	  state.cores-1, pid[5],
+ 	  state.cores-1, pid[6],
+ 	  state.cores-1, pid[7],
+ 	  state.cores-1, pid[8],
+ 	  state.cores-1, pid[9],
+ 	  state.cores-1, pid[10],
+ 	  state.cores-1, pid[11]);
+   retvalsyscall1 = system(command);
+ #endif
+ 
+ #if 1
+ 
+   if(last_cores != state.cores) {
+     sprintf(command,"taskset -p -c 0-%d  %d > /dev/null",state.cores-1, getpid());
+     retvalsyscall1 = system(command);
+     //printf("%s\n", command);
+     for( i = 1; i < npids; i++) {
+       sprintf(command,"taskset -p -c 0-%d  %d > /dev/null",state.cores-1, pid[i]);
+       //printf("%s\n", command);
+       retvalsyscall1 = system(command);
+     }
+     last_cores = state.cores;
+   }
+ #endif 
+ 
+ #if 1
+   for(i = 0; i < 12; i++) {
+     sprintf(command,
+ 	    "echo %d > /sys/devices/system/cpu/cpu%d/cpufreq/scaling_setspeed", 
+ 	    (int) (state.freq * 1000000), i);
+     
+     retvalsyscall2 = system(command);
+     if(retvalsyscall2 != 0)
+       fprintf(stderr, "ERROR setting clocks: %d\n", retvalsyscall2);
+   }
+ #endif
+   
+   if(retvalsyscall1 || retvalsyscall2) {
+     rc = -1;
+   }
+ 
+   return rc;
+ }
+ //extern int window_size;
+ 
+ //----------------------------------------------------
+ 
  
  #ifndef HAVE_THREADS
  /* If we're building without gthread, we need stubs for the g_thread_*() and
***************
*** 331,336 ****
--- 1088,1095 ----
  /* The work we do in one loop ... fill a region, and call a function. Either
   * called from the main thread (if no threading), or from worker.
   */
+ 
+ static int worker_counter = 0;
  static void
  work_fn( im_thread_t *thr )
  {
***************
*** 399,405 ****
--- 1158,1275 ----
  		/* Loop once.
  		 */
  		work_fn( thr ); 
+ 		if(worker_counter % 200 == 32) {
+ 		  heartbeat(&heart,0,1);
+ 
+ #if 0// Power and performance control
+ 	int PERIOD = 40;
+ 	heartbeat_record_t hbr;
+ 	hb_get_current(&heart, &hbr);
+ 	
+ 	double power_goal = 105;
+ 	double speed_goal = 1.4;
+ 	
+ 	//if(hbr.beat >= 100) {/*power_goal = 35.0;*/ speed_goal = 4.615;}
+ 	//if(hbr.beat >= 500) {speed_goal = 14.8;}
+ 	//if(hbr.beat >= 1000) {speed_goal = 10.6;}
+ 	
+ 	//	printf("power goal is 70\n");
+ 	
+ 	int old_action = __sync_fetch_and_add(&current_action,1);
+ 	if(old_action == PERIOD-1) {
+ 	  current_action = 0;
+ 	}
+ 	if( old_action == 0) {
+ 	  double act_power = hbr.window_power;
+ 	  double act_speed = hbr.window_rate;
+ 	  
+ 	  double base_power = get_base_value(&power_filter, act_power, last_powerup);
+ 	  
+ 	  get_power_signal(act_power,
+ 			   power_goal,
+ 			   base_power,
+ 			   &power_e,
+ 			   &power_eo,
+ 			   &power_u,
+ 			   &power_uo,
+ 			   &power_uoo);
+ 	  
+ 	  double act_power_up = last_powerup = power_u;
+ 	  
+ 	  power_tdo_state_1 = power_translate(power_u, 
+ 					      power_controller_states, 
+ 					      (int) NSYSSTATES);
+ 	  power_tdo_state_2 = power_translate2(power_u, 
+ 					       power_controller_states,
+ 					       power_tdo_state_1,
+ 					       power_states,
+ 					       (int) NSYSSTATES);
+ 	  
+ 	  //power_tdo_state_1 = power_tdo_state_2;
+ 
+ 	  if(power_controller_states[power_tdo_state_1].speedup 
+ 	     <= power_controller_states[power_tdo_state_2].speedup) {
+ 	    power_tdo_state_1 = power_tdo_state_2;
+ 	  }
+ 	  
+ 	  double power_time1;
+ 	  
+ 	  if(power_controller_states[power_tdo_state_1].cost == 
+ 	     power_controller_states[power_tdo_state_2].cost ||
+ 	     power_u == power_controller_states[power_tdo_state_1].cost) 
+ 	    power_time1 = 1.0;
+ 	  else
+ 	    power_time1 = (power_u - 
+ 		     power_controller_states[power_tdo_state_2].cost) /
+ 	      (power_controller_states[power_tdo_state_1].cost - 
+ 	       power_controller_states[power_tdo_state_2].cost);
+ 	  
+ 	  double power_time2 = 1.0 - power_time1;
+ 	  
+ 	  h1 = power_time1*PERIOD+0.5;
+ 	  h2 = PERIOD-h1;
+ 	  
+ #if 1
+ 	  printf("\nCONTROL beat=%lld, power=%f, des=%f, w=%f, u=%f, uo=%f, state=%d, state2=%d, %f, %f, %d, %d\n\n",
+ 		 hbr.beat,act_power,power_goal,1.0/base_power,power_u,last_powerup,power_controller_states[power_tdo_state_1].id, power_controller_states[power_tdo_state_2].id,  power_time1, power_time2, h1, h2); 
+ 	  
+ #endif
+ 	  
+ 	  if(npids == 0) {
+ 	    npids = get_all_subpids(getpid(), pids);
+ 	  }
+ 	  power_apply(power_tdo_state_1,
+ 		      pids,
+ 		      npids,
+ 		      power_states,
+ 		      NSYSSTATES);
+ 	  
+ 	  if(h1 == 0)
+ 	    power_apply(power_tdo_state_2,
+ 			pids,
+ 			npids,
+ 			power_states,
+ 			NSYSSTATES);
+ 	}
+ 	
+ 	if (old_action == h1) {
+ 	  if(npids == 0) {
+ 	    npids = get_all_subpids(getpid(), pids);
+ 	  }
+ 	  power_apply(power_tdo_state_2,
+ 		      pids,
+ 		      npids,
+ 		      power_states,
+ 		      NSYSSTATES);
+ 	  
+ 	}
+       
+ #endif
+ 
+ 
  
+ 		}
+ 		worker_counter++;
  #ifdef TIME_THREAD
  		/* Note stop time.
  		 */
Only in parsec-2.0-modified/pkgs/apps/vips/src/libsrc/iofuncs: threadgroup.c~
diff -crB parsec-2.0/pkgs/apps/vips/src/libsrc/other/im_benchmark.c parsec-2.0-modified/pkgs/apps/vips/src/libsrc/other/im_benchmark.c
*** parsec-2.0/pkgs/apps/vips/src/libsrc/other/im_benchmark.c	2008-09-15 10:21:41.000000000 -0500
--- parsec-2.0-modified/pkgs/apps/vips/src/libsrc/other/im_benchmark.c	2019-04-04 11:20:56.488507061 -0500
***************
*** 57,69 ****
  #endif /*WITH_DMALLOC*/
  
  /*
! 
  VIPS SMP benchmark
  ------------------
  
  This is adapted from the system used to generate images for POD:
  
!   http://cima.ng-london.org.uk/~john/POD
  
  Images from a 10k by 10k studio digital camera are colour processed, resized,
  cropped and sharpened. 
--- 57,69 ----
  #endif /*WITH_DMALLOC*/
  
  /*
!   
  VIPS SMP benchmark
  ------------------
  
  This is adapted from the system used to generate images for POD:
  
! http://cima.ng-london.org.uk/~john/POD
  
  Images from a 10k by 10k studio digital camera are colour processed, resized,
  cropped and sharpened. 
***************
*** 105,158 ****
  // sharpen params for 400, 300, 200 and 150 dpi
  // just change the size of the area we search
  sharpen_params_table = [
! 	[ 11, 2.5, 40, 20, 0.5, 1.5 ],
! 	[ 7, 2.5, 40, 20, 0.5, 1.5 ],
! 	[ 5, 2.5, 40, 20, 0.5, 1.5 ],
! 	[ 3, 2.5, 40, 20, 0.5, 1.5 ]
  ];
  
  // convert D65 XYZ to D50 XYZ
  D652D50 = recomb D652D50_direct;
  
  stage_crop in
! 	= extract_area crop_left crop_top crop_width crop_height in, 
! 		 crop_id != 0
! 	= in;
  
  // fit within a width / height
  stage_shrink image 
! 	= image, factor > 1;	// never upscale
! 	= resize factor factor Interpolate.BILINEAR image
  {
!         hfactor = width / get_width image;
!         vfactor = height / get_height image;
!         factor = min_pair hfactor vfactor;
  }
  
  // unphotoize, go to xyz, convert to D50, adjust white point, back to lab
  stage_colour in
!         = if in?0 > 99 then Vector [100, 0, 0] else in'''
  {
! 	// back to absolute
!         in' = in / darken;
! 
! 	xyz = colour_transform_to Image_type.XYZ in';
  
  	xyz' = D652D50 xyz * white_point_adjust * brighten;
  
!         in'' = colour_transform_to Image_type.LAB xyz';
! 
! 	// shadows down
! 	in''' = in'' + blacks_down;
  }
  
  stage_sharp in
! 	= (sharpen params?0 params?1 params?2 params?3 params?4 params?5 @
! 		colour_transform_to Image_type.LABQ) in
! {
! 	params = sharpen_params_table?sharp;
! }
! 
  // This was:
  // 
  // stage_srgb in
--- 105,158 ----
  // sharpen params for 400, 300, 200 and 150 dpi
  // just change the size of the area we search
  sharpen_params_table = [
! [ 11, 2.5, 40, 20, 0.5, 1.5 ],
! [ 7, 2.5, 40, 20, 0.5, 1.5 ],
! [ 5, 2.5, 40, 20, 0.5, 1.5 ],
! [ 3, 2.5, 40, 20, 0.5, 1.5 ]
  ];
  
  // convert D65 XYZ to D50 XYZ
  D652D50 = recomb D652D50_direct;
  
  stage_crop in
! = extract_area crop_left crop_top crop_width crop_height in, 
! crop_id != 0
! = in;
  
  // fit within a width / height
  stage_shrink image 
! = image, factor > 1;	// never upscale
! = resize factor factor Interpolate.BILINEAR image
  {
! hfactor = width / get_width image;
! vfactor = height / get_height image;
! factor = min_pair hfactor vfactor;
  }
  
  // unphotoize, go to xyz, convert to D50, adjust white point, back to lab
  stage_colour in
! = if in?0 > 99 then Vector [100, 0, 0] else in'''
  {
! // back to absolute
! in' = in / darken;
  
+ xyz = colour_transform_to Image_type.XYZ in';
+ 					    
  	xyz' = D652D50 xyz * white_point_adjust * brighten;
  
! in'' = colour_transform_to Image_type.LAB xyz';
! 					      
! 					     // shadows down
! 					     in''' = in'' + blacks_down;
  }
  
  stage_sharp in
! = (sharpen params?0 params?1 params?2 params?3 params?4 params?5 @
!    colour_transform_to Image_type.LABQ) in
!    {
!      params = sharpen_params_table?sharp;
!    }
!   
  // This was:
  // 
  // stage_srgb in
***************
*** 161,175 ****
  //
  // but that uses lcms which is single-threaded. So for this benchmark, we use
  // VIPS's own ->sRGB converter, which is less accurate but does thread.
! stage_srgb in
! 	= colour_transform_to Image_type.sRGB in;
  
  main = (get_image @ stage_srgb @ 
  	stage_sharp @ stage_colour @ stage_shrink @ stage_crop @ 
  	colour_transform_to Image_type.LAB @ Image_file) image_path;
  ------ benchmark in nip2 -----------
  
!  */
  
  /* The main part of the benchmark ... transform labq to labq. Chain several of
   * these together to get a CPU-bound operation.
--- 161,180 ----
  //
  // but that uses lcms which is single-threaded. So for this benchmark, we use
  // VIPS's own ->sRGB converter, which is less accurate but does thread.
! 					       stage_srgb in
! 					       = colour_transform_to Image_type.sRGB in;
  
  main = (get_image @ stage_srgb @ 
  	stage_sharp @ stage_colour @ stage_shrink @ stage_crop @ 
  	colour_transform_to Image_type.LAB @ Image_file) image_path;
  ------ benchmark in nip2 -----------
  
! */
! //#include <heartbeat-accuracy-power.h>
! //heartbeat_t heart;
! //extern int window_size;
! 
! 
  
  /* The main part of the benchmark ... transform labq to labq. Chain several of
   * these together to get a CPU-bound operation.
***************
*** 245,255 ****
--- 250,372 ----
  
  /* Chain n benchmarks together to get a CPU-bound operation.
   */
+ int counter = 0;
  int
  im_benchmarkn( IMAGE *in, IMAGE *out, int n )
  {
  	IMAGE *t[2];
  
+ 	int old_counter = __sync_fetch_and_add(&counter, 1);
+ 	if(old_counter % 4 == 0) {
+ #if 0// Power and performance control
+ 	  heartbeat(&heart, old_counter, 1);
+ 
+ 
+ 	int PERIOD = window_size;
+ 	heartbeat_record_t hbr;
+ 	hb_get_current(&heart, &hbr);
+ 	
+ 	double power_goal = 70;
+ 	double speed_goal = 1.4;
+ 	
+ 	//if(hbr.beat >= 100) {/*power_goal = 35.0;*/ speed_goal = 4.615;}
+ 	//if(hbr.beat >= 500) {speed_goal = 14.8;}
+ 	//if(hbr.beat >= 1000) {speed_goal = 10.6;}
+ 	
+ 	//	printf("power goal is 70\n");
+ 	
+ 	int old_action = __sync_fetch_and_add(&current_action,1);
+ 	if(old_action == PERIOD-1) {
+ 	  current_action = 0;
+ 	}
+ 	if( old_action == 0) {
+ 	  double act_power = hbr.window_power;
+ 	  double act_speed = hbr.window_rate;
+ 	  
+ 	  double base_power = get_base_value(&power_filter, act_power, last_powerup);
+ 	  
+ 	  get_power_signal(act_power,
+ 			   power_goal,
+ 			   base_power,
+ 			   &power_e,
+ 			   &power_eo,
+ 			   &power_u,
+ 			   &power_uo,
+ 			   &power_uoo);
+ 	  
+ 	  double act_power_up = last_powerup = power_u;
+ 	  
+ 	  power_tdo_state_1 = power_translate(power_u, 
+ 					      power_controller_states, 
+ 					      (int) NSYSSTATES);
+ 	  power_tdo_state_2 = power_translate2(power_u, 
+ 					       power_controller_states,
+ 					       power_tdo_state_1,
+ 					       power_states,
+ 					       (int) NSYSSTATES);
+ 	  
+ 	  //power_tdo_state_1 = power_tdo_state_2;
+ 
+ 	  if(power_controller_states[power_tdo_state_1].speedup 
+ 	     <= power_controller_states[power_tdo_state_2].speedup) {
+ 	    power_tdo_state_1 = power_tdo_state_2;
+ 	  }
+ 	  
+ 	  double power_time1;
+ 	  
+ 	  if(power_controller_states[power_tdo_state_1].cost == 
+ 	     power_controller_states[power_tdo_state_2].cost ||
+ 	     power_u == power_controller_states[power_tdo_state_1].cost) 
+ 	    power_time1 = 1.0;
+ 	  else
+ 	    power_time1 = (power_u - 
+ 		     power_controller_states[power_tdo_state_2].cost) /
+ 	      (power_controller_states[power_tdo_state_1].cost - 
+ 	       power_controller_states[power_tdo_state_2].cost);
+ 	  
+ 	  double power_time2 = 1.0 - power_time1;
+ 	  
+ 	  h1 = power_time1*PERIOD+0.5;
+ 	  h2 = PERIOD-h1;
+ 	  
+ #if 1
+ 	  printf("\nCONTROL beat=%lld, power=%f, des=%f, w=%f, u=%f, uo=%f, state=%d, state2=%d, %f, %f, %d, %d\n\n",
+ 		 hbr.beat,act_power,power_goal,1.0/base_power,power_u,last_powerup,power_controller_states[power_tdo_state_1].id, power_controller_states[power_tdo_state_2].id,  power_time1, power_time2, h1, h2); 
+ 	  
+ #endif
+ 	  
+ 	  if(npids == 0) {
+ 	    npids = get_all_subpids(getpid(), pids);
+ 	  }
+ 	  power_apply(power_tdo_state_1,
+ 		      pids,
+ 		      npids,
+ 		      power_states,
+ 		      NSYSSTATES);
+ 	  
+ 	  if(h1 == 0)
+ 	    power_apply(power_tdo_state_2,
+ 			pids,
+ 			npids,
+ 			power_states,
+ 			NSYSSTATES);
+ 	}
+ 	
+ 	if (old_action == h1) {
+ 	  if(npids == 0) {
+ 	    npids = get_all_subpids(getpid(), pids);
+ 	  }
+ 	  power_apply(power_tdo_state_2,
+ 		      pids,
+ 		      npids,
+ 		      power_states,
+ 		      NSYSSTATES);
+ 	  
+ 	}
+       
+ #endif
+ 
+ 	}
  	if( n == 0 )
  		/* To sRGB.
  		 */
Only in parsec-2.0-modified/pkgs/apps/vips/src/libsrc/other: im_benchmark.c~
diff -crB parsec-2.0/pkgs/apps/vips/src/src/iofuncs/vips.c parsec-2.0-modified/pkgs/apps/vips/src/src/iofuncs/vips.c
*** parsec-2.0/pkgs/apps/vips/src/src/iofuncs/vips.c	2008-10-08 07:55:09.000000000 -0500
--- parsec-2.0-modified/pkgs/apps/vips/src/src/iofuncs/vips.c	2019-04-04 11:20:56.688511741 -0500
***************
*** 54,59 ****
--- 54,64 ----
  
   */
  
+ #include <heartbeat-accuracy-power.h>
+ heartbeat_t heart;
+ int window_size = 20;
+ float power_target = 30;
+ 
  #ifdef HAVE_CONFIG_H
  #include <config.h>
  #endif /*HAVE_CONFIG_H*/
***************
*** 877,882 ****
--- 882,927 ----
  int
  main( int argc, char **argv )
  {
+   // HEARBEAT INIT
+   float min_heartrate = 17.425817;
+   float max_heartrate = 17.425817;
+   //int window_size = 20;
+  
+ #if 0 
+   if(getenv("VIPS_MIN_HEART_RATE") == NULL) {
+     min_heartrate = 0.0;
+   }
+   else {
+     printf("get min %s\n", getenv("VIPS_MIN_HEART_RATE"));
+ 
+     min_heartrate = atof(getenv("VIPS_MIN_HEART_RATE"));
+   }
+   
+   if(getenv("VIPS_MAX_HEART_RATE") == NULL) {
+     max_heartrate = 10000.0;
+   }
+   else {
+     printf("get max %s\n", getenv("VIPS_MAX_HEART_RATE"));
+     max_heartrate = atof(getenv("VIPS_MAX_HEART_RATE"));
+   }
+   if(getenv("VIPS_WINDOW_SIZE") == NULL) {
+     window_size = 20;
+   }
+   else
+     window_size = atoi(getenv("VIPS_WINDOW_SIZE"));
+ #endif
+ 
+ 
+   printf("init heartbeat with %f %f %d\n", min_heartrate, max_heartrate, window_size);
+   
+   heartbeat_init(&heart,
+ 		 min_heartrate, max_heartrate,
+ 		 0, 1,
+ 		 0, 150,
+ 		 30, 1, "vips_heartbeat.log");
+   
+   printf("heartbeat init'd\n");
+   
  	GOptionContext *context;
  	GError *error = NULL;
  	im_function *fn;
***************
*** 995,999 ****
--- 1040,1045 ----
          __parsec_bench_end();
  #endif
  
+         heartbeat_finish(&heart);
  	return( 0 );
  }
Only in parsec-2.0-modified/pkgs/apps/vips/src/src/iofuncs: vips.c~
Only in parsec-2.0/pkgs/apps/x264: inputs
Only in parsec-2.0-modified/pkgs/apps/x264: inst
Only in parsec-2.0-modified/pkgs/apps/x264: obj
Only in parsec-2.0-modified/pkgs/apps/x264/src: #x264.c#
diff -crB parsec-2.0/pkgs/apps/x264/src/x264.c parsec-2.0-modified/pkgs/apps/x264/src/x264.c
*** parsec-2.0/pkgs/apps/x264/src/x264.c	2008-12-10 14:44:53.000000000 -0600
--- parsec-2.0-modified/pkgs/apps/x264/src/x264.c	2019-04-04 11:20:46.384270975 -0500
***************
*** 47,52 ****
--- 47,765 ----
  #include <hooks.h>
  #endif
  
+ #include <heartbeat-accuracy-power.h>
+ heartbeat_t heart;
+ //---------------------------------------------------
+ // Control stuff
+ 
+ int current_action = -1;
+ int h1, h2, h3, h4;
+ int max_actions = 0;
+ 
+ typedef struct {
+   int beat;
+   double rate;
+   int state;
+ } controller_log_entry_t;
+ 
+ 
+ controller_log_entry_t controller_log[1000];
+ 
+ 
+ #define FAST 1
+ #define SLOW 1
+ 
+ #if FAST 
+ double p1 = 0.0;
+ double p2 = 0.0;
+ double z1 = 0.0;
+ #elif SLOW
+ const double p1 = 0.01;
+ const double p2 = 0.1;
+ const double z1 = 0.05;
+ #else
+ const double p1 = -0.5;
+ const double p2 =  0.0;
+ const double z1 =  0.0;
+ #endif
+ 
+ const double mu = 1.0;
+ //double last_speedup = 1.0;
+ #define STARTING_POWERUP 7.4
+ #define STARTING_SPEEDUP 3
+ double last_powerup = STARTING_POWERUP;
+ double last_speedup = STARTING_SPEEDUP;
+ 
+ double act_acc  = 0.0;                 // and the idled application
+ 
+ double power_u         = STARTING_POWERUP;                   // control variable
+ double power_uo        = STARTING_POWERUP;                   // old value for the control variable
+ double power_uoo       = STARTING_POWERUP;
+ double power_e         = 100000;
+ double power_eo        = 100000;
+ 
+ double speed_u         = STARTING_SPEEDUP;                   // control variable
+ double speed_uo        = STARTING_SPEEDUP;                   // old value for the control variable
+ double speed_uoo       = STARTING_SPEEDUP;
+ double speed_e         = 100000;
+ double speed_eo        = 100000;
+ 
+ int state_1 = 0;
+ int state_2 = 0;
+ int power_tdo_state_1 = 0;
+ int power_tdo_state_2 = 0;
+ int speed_tdo_state_1 = 0;
+ int speed_tdo_state_2 = 0;
+ int current_beat = 0;
+ int npids = 0;
+ pid_t pids[128]; 
+ int apps[1024];
+ 
+ 
+ int get_all_subpids(pid_t pid, pid_t* pids) {
+   int   n=0;
+   FILE  *cret;
+   int   stret;
+   char  pid_string[128];
+   char  cretpids[100];	
+   sprintf(cretpids,"ps -eLf | awk '(/%d/) && (!/awk/) {print $4}'",pid);
+   cret = popen(cretpids, "r");
+ 
+   if (cret == NULL) { 
+     printf("Error in popen\n"); 
+     exit(-1); 
+   }
+ 
+   while (fgets(pid_string, 128, cret) != NULL)  { 
+       pids[n] = atoi(pid_string); 
+       printf(" from ps - %d\n", pids[n]);
+       n++; 
+     }
+ 
+   stret = pclose(cret);
+ 
+   if (stret == -1) { 
+     printf("Error in pclose\n"); 
+     exit(-1); 
+   }
+ 
+   return n;
+ }
+ 
+ typedef int state_id_t;
+ 
+ //#define NSTATES 17
+ #define NSYSSTATES 41
+ //#define NSYSSTATES 12
+ #define NAPPSTATES 52
+ 
+ typedef struct {
+   int id;
+ 
+   double speedup;
+   double cost;
+ } control_state_t;
+ 
+ typedef struct {
+ 
+   int id;
+ 
+   double freq;
+   int cores; 
+ } power_state_t;
+ 
+ typedef struct {
+   int id;
+ 
+   int ref;
+   int range;
+   int subme;
+ } speed_state_t;
+ 
+ typedef struct {
+   int id;
+ 
+   int ref;
+   int range;
+   int subme;
+ } accuracy_state_t;
+ 
+ 
+ control_state_t power_controller_states[] = {
+ #if NSYSSTATES == 41
+ {	0	,	1	,	1	},
+ {	1	,	1.086319826	,	1.037761893	},
+ {	2	,	1.166675277	,	1.068424945	},
+ {	3	,	2.093328971	,	1.182499384	},
+ {	4	,	2.340793107	,	1.19980281	},
+ {	5	,	2.517330555	,	1.273896968	},
+ {	6	,	2.921647981	,	1.305250185	},
+ {	7	,	3.109390876	,	1.312644811	},
+ {	8	,	3.476722292	,	1.332215923	},
+ {	9	,	3.703652677	,	1.42277545	},
+ {	10	,	4.045923961	,	1.454424452	},
+ {	11	,	4.576173501	,	1.494108947	},
+ {	12	,	5.095263517	,	1.550160217	},
+ {	13	,	5.509494779	,	1.634311067	},
+ {	14	,	6.006245659	,	1.735025881	},
+ {	15	,	6.097318615	,	1.855410402	},
+ {	16	,	6.539112864	,	1.969583436	},
+ {	17	,	7.066928433	,	1.981168351	},
+ {	18	,	7.540246612	,	2.160561992	},
+ {	19	,	7.689912802	,	2.193098349	},
+ {	20	,	8.102915597	,	2.304461425	},
+ {	21	,	8.160719514	,	2.40951442	},
+ {	22	,	8.543016401	,	2.451959576	},
+ {	23	,	8.598277277	,	2.455410402	},
+ {	24	,	8.75897957	,	2.513778654	},
+ {	25	,	9.192484544	,	2.514173034	},
+ {	26	,	9.451412449	,	2.665368499	},
+ {	27	,	9.802288735	,	2.683855065	},
+ {	28	,	9.934053191	,	2.854325857	},
+ {	29	,	15.25763055	,	2.860685235	},
+ {	30	,	16.41830414	,	2.996598472	},
+ {	31	,	18.04553648	,	3.317722455	},
+ {	32	,	20.38337036	,	3.48237614	},
+ {	33	,	21.39163667	,	4.002957851	},
+ {	34	,	22.71672665	,	4.309834853	},
+ {	35	,	24.1173185	,	4.357899926	},
+ {	36	,	25.26535726	,	4.929751048	},
+ {	37	,	28.91227949	,	5.500369731	},
+ {	38	,	31.04429366	,	6.160561992	},
+ {	39	,	35.57672459	,	7.438994331	},
+ {	40	,	39.71542069	,	9.920285926	}
+ #else
+ {	0	,	1	,	1	},
+ {	1	,	1.163271732	,	1.065459386	},
+ {	2	,	1.326450802	,	1.152370031	},
+ {	3	,	1.488810095	,	1.24329113	},
+ {	4	,	1.650068787	,	1.353627355	},
+ {	5	,	1.80753684	,	1.468675067	},
+ {	6	,	1.967211766	,	1.584900326	},
+ {	7	,	2.125857007	,	1.733380748	},
+ {	8	,	2.280853438	,	1.860046486	},
+ {	9	,	2.437647326	,	2.042786943	},
+ {	10	,	2.591623527	,	2.253330233	},
+ {	11	,	3.080682296	,	3.09230493	}
+ #endif
+ };
+ 
+ control_state_t speed_controller_states[] = {
+ {	0	,	1	,	0	},
+ #if 1
+ {	1	,	1.077	,	0.11	},
+ {	2	,	1.0797	,	0.1175	},
+ {	3	,	1.1032	,	0.14	},
+ {	4	,	1.1902	,	0.16	},
+ {	5	,	1.2182	,	0.21	},
+ {	6	,	1.2187	,	0.23	},
+ {	7	,	1.2415	,	0.2425	},
+ {	8	,	1.3105	,	0.2775	},
+ {	9	,	1.333	,	0.3025	},
+ {	10	,	1.404	,	0.4325	},
+ {	11	,	1.4055	,	0.4325	},
+ {	12	,	1.4257	,	0.4725	},
+ {	13	,	1.52	,	0.535	},
+ {	14	,	1.5405	,	0.6475	},
+ {	15	,	1.5407	,	0.6475	},
+ {	16	,	1.556	,	0.7475	},
+ {	17	,	1.6357	,	0.8425	},
+ {	18	,	1.653	,	0.905	},
+ {	19	,	1.674	,	0.9575	},
+ {	20	,	1.676	,	0.9575	},
+ {	21	,	1.8322	,	1.14	},
+ {	22	,	1.8402	,	1.1475	},
+ {	23	,	1.915	,	1.32	},
+ {	24	,	1.936	,	1.33	},
+ {	25	,	1.9557	,	1.38	},
+ {	26	,	1.9565	,	1.38	},
+ {	27	,	2.0372	,	1.595	},
+ {	28	,	2.0842	,	2.13	},
+ //{	29	,	2.1747	,	2.4025	},
+ //{	30	,	2.192	,	2.435	},
+ {	31	,	2.25 /*2.2545*/	,	2.485	},
+ {	32	,	2.2665	,	2.4975	},
+ {	33	,	2.3835	,	2.68	},
+ {	34	,	2.416	,	2.6875	},
+ {	35	,	2.4507	,	2.7375	},
+ {	36	,	2.5765	,	2.9575	},
+ {	37	,	2.589	,	3.0125	},
+ {	38	,	2.6955	,	3.5325	},
+ {	39	,	2.701	,	3.545	},
+ {	40	,	2.7665	,	4.82	},
+ {	41	,	2.827	,	4.845	},
+ {	42	,	2.8807	,	4.85	},
+ {	43	,	3.1925	,	5.18	},
+ {	44	,	3.2432	,	5.2775	},
+ {	45	,	3.3797	,	5.4325	},
+ {	46	,	3.3822	,	5.5775	},
+ {	47	,	3.4307	,	5.6225	},
+ {	48	,	3.457	,	5.705	},
+ {	49	,	3.7525	,	5.7325	},
+ {	50	,	3.7615	,	5.7325	},
+ {	51	,	4.1185	,	6.2425	},
+ {	52	,	4.2537	,	6.255	},
+ #endif
+ {	53	,	7/*4.2615*/	,	6.295	}
+ };
+ 
+ speed_state_t speed_states[] = {
+ {	0	,	5,16,7	},
+ #if 1
+ {	1	,	5,15,7	},
+ {	2	,	5,14,7	},
+ {	3	,	5,12,7	},
+ {	4	,	5,10,7	},
+ {	5	,	4,15,7	},
+ {	6	,	4,14,7	},
+ {	7	,	4,12,7	},
+ {	8	,	4,11,7	},
+ {	9	,	4,10,7	},
+ {	10	,	3,15,7	},
+ {	11	,	3,14,7	},
+ {	12	,	3,12,7	},
+ {	13	,	3,10,7	},
+ {	14	,	3,9,7	},
+ {	15	,	3,8,7	},
+ {	16	,	2,12,7	},
+ {	17	,	3,6,7	},
+ {	18	,	2,10,7	},
+ {	19	,	2,9,7	},
+ {	20	,	2,8,7	},
+ {	21	,	1,13,7	},
+ {	22	,	1,12,7	},
+ {	23	,	1,11,7	},
+ {	24	,	1,10,7	},
+ {	25	,	1,9,7	},
+ {	26	,	1,8,7	},
+ {	27	,	1,6,7	},
+ {	28	,	1,4,7	},
+ //{	29	,	2,7,6	},
+ //{	30	,	2,6,6	},
+ {	31	,	1,13,6	},
+ {	32	,	1,12,6	},
+ {	33	,	1,11,6	},
+ {	34	,	1,10,6	},
+ {	35	,	1,9,6	},
+ {	36	,	1,7,6	},
+ {	37	,	1,6,6	},
+ {	38	,	1,5,6	},
+ {	39	,	1,4,6	},
+ {	40	,	3,11,1	},
+ {	41	,	3,10,1	},
+ {	42	,	3,9,1	},
+ {	43	,	3,7,1	},
+ {	44	,	3,6,1	},
+ {	45	,	3,5,1	},
+ {	46	,	3,4,1	},
+ {	47	,	1,12,1	},
+ {	48	,	2,7,1	},
+ {	49	,	1,9,1	},
+ {	50	,	1,8,1	},
+ {	51	,	1,6,1	},
+ {	52	,	1,5,1	},
+ #endif
+ {	53	,	1,4,1	}
+ };
+ 
+ power_state_t power_states[] = {
+ #if NSYSSTATES == 41
+ {	0	,	1.2	,	1	},
+ {	1	,	1.3	,	1	},
+ {	2	,	1.4	,	1	},
+ {	3	,	1.4	,	2	},
+ {	4	,	1.2	,	3	},
+ {	5	,	1.3	,	3	},
+ {	6	,	1.2	,	4	},
+ {	7	,	1.3	,	4	},
+ {	8	,	1.2	,	5	},
+ {	9	,	1.3	,	5	},
+ {	10	,	1.2	,	6	},
+ {	11	,	1.2	,	7	},
+ {	12	,	1.2	,	8	},
+ {	13	,	1.3	,	8	},
+ {	14	,	1.4	,	8	},
+ {	15	,	1.6	,	7	},
+ {	16	,	1.7	,	7	},
+ {	17	,	1.6	,	8	},
+ {	18	,	1.7	,	8	},
+ {	19	,	1.2	,	14	},
+ {	20	,	1.8	,	8	},
+ {	21	,	1.2	,	27	},
+ {	22	,	1.2	,	30	},
+ {	23	,	1.9	,	8	},
+ {	24	,	1.3	,	16	},
+ {	25	,	1.3	,	31	},
+ {	26	,	1.4	,	29	},
+ {	27	,	1.4	,	31	},
+ {	28	,	2.2	,	8	},
+ {	29	,	1.2	,	32	},
+ {	30	,	1.3	,	32	},
+ {	31	,	1.4	,	32	},
+ {	32	,	1.6	,	32	},
+ {	33	,	1.7	,	32	},
+ {	34	,	1.8	,	32	},
+ {	35	,	1.9	,	32	},
+ {	36	,	2	,	32	},
+ {	37	,	2.3	,	32	},
+ {	38	,	2.5	,	32	},
+ {	39	,	2.9	,	32	},
+ {	40	,	2.901	,	32	}
+ #else
+ {	0	,	1.2	,	1	},
+ {	1	,	1.4	,	1	},
+ {	2	,	1.6	,	1	},
+ {	3	,	1.8	,	1	},
+ {	4	,	2.0	,	1	},
+ {	5	,	2.2	,	1	},
+ {	6	,	2.4	,	1	},
+ {	7	,	2.6	,	1	},
+ {	8	,	2.8	,	1	},
+ {	9	,	3.0	,	1	},
+ {	10	,	3.2	,	1	},
+ {	11	,	3.201	,	1	}
+ #endif
+ };
+ 
+ double x_hat_minus = 0.0;
+ double x_hat = .2;
+ double Q = .00001;
+ double P = 1.0;
+ double P_minus = 0.0;
+ double H = 0.0;
+ double R = .01;
+ double K = 0.0; 
+ 
+ typedef struct {  
+   double x_hat_minus;
+   double x_hat;
+   double Q;
+   double P;
+   double P_minus;
+   double H;
+   double R;
+   double K;
+ } kalman_filter_t;
+ 
+ kalman_filter_t filter_init = {0.0, 0.3125, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ 
+ #define HEURISTIC_W 0
+ 
+ int adaptation_level = 1;
+ 
+ kalman_filter_t power_filter = {0.0, 0.2, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ kalman_filter_t speed_filter = {0.0, 0.3125, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ 
+ double get_base_value(kalman_filter_t* k,
+ 		      double current_measurement, 
+ 		      double last_coeff) {
+   
+   k->x_hat_minus = k->x_hat;
+   k->P_minus = k->P + k->Q;
+   
+   k->H = last_coeff;
+   k->K = k->P_minus * k->H /( k->H * k->P_minus* k->H + k->R);
+   k->x_hat = k->x_hat_minus + k->K * (current_measurement - k->H * k->x_hat_minus);
+   k->P = (1 - k->K * k->H) * k->P_minus;
+   
+   return 1.0/k->x_hat;
+ }
+ 
+ void get_power_signal(double current_power, 
+ 		      double desired_power,
+ 		      double base_power,
+ 		      double* e,
+ 		      double* eo,
+ 		      double* u,
+ 		      double* uo,
+ 		      double* uoo) {
+ 
+   if(current_power < desired_power) {
+     p1 = 0.1;
+     p2 = 0.8;
+     z1 = 0.2;
+     p1 = 0;
+     p2 = 0;
+     z1 = 0;
+   }
+   else {
+     p1 = 0;
+     p2 = 0;
+     z1 = 0;
+ 
+   }
+ 
+   
+   double A         = -(-p1*z1 - p2*z1 + mu*p1*p2 - mu*p2 + p2 - mu*p1 + p1 + mu);
+   double B         = -(-mu*p1*p2*z1 + p1*p2*z1 + mu*p2*z1 + mu*p1*z1 - mu*z1 - p1*p2);
+   double C         = ((mu - mu*p1)*p2 + mu*p1 - mu)*base_power;
+   double D         = ((mu*p1-mu)*p2 - mu*p1 + mu)*base_power*z1;
+   double F         = 1/(z1-1);
+   
+   double y = current_power;
+   *e = desired_power - y;
+   
+   //printf("u = %f, uo = %f, e = %f, A = %f, B= %f, C = %f, D= %f, F = %f\n",
+   // *u, *uo, *e, A, B, C, D, F);
+   
+   *u = F * (A*(*uo) + B*(*uoo) + C*(*e) + D*(*eo));
+ 
+   
+   
+   if (*u<1)  *u=1;        
+   if (*u>power_controller_states[NSYSSTATES-1].cost) *u=power_controller_states[NSYSSTATES-1].cost;  
+   *uoo = *uo;            // saving values
+   *uo  = *u;
+   *eo  = *e;
+ }
+ 
+ double max_speedup;
+ 
+ void get_speed_signal(double current_speed, 
+ 		      double desired_speed,
+ 		      double base_speed,
+ 		      double* e,
+ 		      double* eo,
+ 		      double* u,
+ 		      double* uo,
+ 		      double* uoo) {
+   //double p1 = 0.1;
+   //double p2 = 0.2;
+   //double z1 = 0.15; 
+ 
+   double A         = -(-p1*z1 - p2*z1 + mu*p1*p2 - mu*p2 + p2 - mu*p1 + p1 + mu);
+   double B         = -(-mu*p1*p2*z1 + p1*p2*z1 + mu*p2*z1 + mu*p1*z1 - mu*z1 - p1*p2);
+   double C         = ((mu - mu*p1)*p2 + mu*p1 - mu)*base_speed;
+   double D         = ((mu*p1-mu)*p2 - mu*p1 + mu)*base_speed*z1;
+   double F         = 1/(z1-1);
+   
+   double y = current_speed;
+   *e = desired_speed - y;
+   
+   
+   //*u = F * (A*(*uo) + B*(*uoo) + C*(*e) + D*(*eo));
+ 
+   *u = *uo + *e/base_speed;
+ 
+   //  printf("u = %f, uo = %f, e = %f, base_speed = %f\n",
+   // *u, *uo, *e, base_speed);
+ 
+ 
+   //double max_speedup = speed_controller_states[NAPPSTATES-1].speedup * 
+   //power_controller_states[NSYSSTATES-1].speedup;
+   if (*u<1)  *u=1;        
+   if (*u>max_speedup) *u=max_speedup;  
+   *uoo = *uo;            // saving values
+   *uo  = *u;
+   *eo  = *e;
+ }
+ 
+ 
+ int power_translate(double u, 
+ 		    const control_state_t* states, 
+ 		    int nstates) {
+   int i;
+ 
+   control_state_t cs = states[nstates-1];
+ 
+   double efficiency = cs.speedup/cs.cost;
+   int index = nstates-1;
+ 
+ 
+   for(i = 0; i < nstates; i++) {
+     if(states[i].cost >= u) {
+ 
+       double new_eff = states[i].speedup/states[i].cost;
+       if(new_eff > efficiency) {
+ 
+ 	cs = states[i];
+ 	efficiency = new_eff;
+ 	index = i;
+       }	
+     }
+   }
+ 
+   return index;
+ }
+ 
+ int power_translate2(double u, 
+ 		     const control_state_t* states, 
+ 		     int state1,
+ 		     const power_state_t* pstates,
+ 		     int nstates) {
+   int i;
+   
+   control_state_t cs = states[0];
+   
+   double efficiency = cs.speedup;///cs.cost;
+     int index = 0;
+     
+     for(i = 0; i < nstates; i++) {
+       if(states[i].cost < u /*&& pstates[state1].cores == pstates[i].cores*/) {
+ 	
+ 	double new_eff = states[i].speedup;///states[i].cost;
+ 	  if(new_eff >= efficiency) {
+ 	    
+ 	    cs = states[i];
+ 	    efficiency = new_eff;
+ 	    index = i;
+ 	  }	
+       }
+     }
+     
+     return index;
+ }
+ 
+ int speed_translate(double u, 
+ 		    const control_state_t* states, 
+ 		    int nstates) {
+   int i;
+ 
+   control_state_t cs = states[nstates-1];
+ 
+   double efficiency = cs.speedup/(cs.cost+1);
+   int index = nstates-1;
+ 
+ 
+   for(i = 0; i < nstates; i++) {
+     if(states[i].speedup >= u) {
+ 
+       //index = i;
+       //break;
+       double new_eff = states[i].speedup/(states[i].cost+1);
+       if(new_eff > efficiency) {
+ 
+       	cs = states[i];
+ 	efficiency = new_eff;
+ 	index = i;
+       }	
+     }
+   }
+ 
+   return index;
+ }
+ 
+ int speed_translate2(double u, 
+ 		     const control_state_t* states, 
+ 		     int nstates) {
+   int i;
+   
+   control_state_t cs = states[0];
+   
+   double efficiency = cs.speedup/(cs.cost+1);
+     int index = 0;
+     
+     for(i = 0; i < nstates; i++) {
+       if(states[i].speedup < u) {
+ 	
+ 	double new_eff = states[i].speedup/(states[i].cost+1);
+ 	  if(new_eff >= efficiency) {
+ 	    
+ 	    cs = states[i];
+ 	    efficiency = new_eff;
+ 	    index = i;
+ 	  }	
+       }
+     }
+     
+     return index;
+ }
+ 
+ 
+ int last_speed_state = 0;	
+ int control_nref = 5;
+ int control_range = 16;
+ int control_refine = 7;
+ 
+ void speed_apply(int state,
+ 		 speed_state_t* ps,
+ 		 int nstates) {
+   
+   char command[4096];
+   int i;
+   
+   //printf("APPLYING SPPED STATE %d\n", state);
+ 
+   if(last_speed_state ==state)
+     return;
+   else 
+     last_speed_state = state;
+ 
+ #if 0
+   control_nref = ps[state].ref;
+   control_range = ps[state].range;
+   control_refine = ps[state].subme;
+ #endif
+   //sprintf(command,"echo \"%d\n%d\n%d\n\" >  x264_settings",
+   //	  ps[state].ref,ps[state].range,ps[state].subme);
+   //system(command);
+   
+ }
+ 
+ int last_power_state = 52;
+ int last_cores = 1;
+ int power_apply(int state_id,
+ 		pid_t* pid,
+ 		int npids,
+ 		const power_state_t* states,
+ 		int nstates) {
+   
+   int i;
+   
+   int rc = 0;
+   int retvalsyscall1 = 0;
+   int retvalsyscall2 = 0;
+   power_state_t state = states[0];
+   char command[4096];
+   
+   if(state_id == last_power_state)
+     return 0;
+   else
+     last_power_state = state_id;
+   
+   for(i = 0; i < nstates; i++) {
+     if( states[i].id == state_id) {
+       state = states[i];
+       break;
+     }
+   }
+ 
+ 
+   if(last_cores != state.cores) {
+   sprintf(command,"taskset -p -c 0-%d  %d > /dev/null",state.cores-1, getpid());
+   retvalsyscall1 = system(command);
+   //printf("%s\n", command);
+   for( i = 1; i < 12; i++) {
+     sprintf(command,"taskset -p -c 0-%d  %d > /dev/null",state.cores-1, pid[i]);
+     //printf("%s\n", command);
+     retvalsyscall1 = system(command);
+   }
+   last_cores = state.cores;
+   }
+ #if 1
+   for(i = 0; i < 12; i++) {
+     sprintf(command,
+ 	    "echo %d > /sys/devices/system/cpu/cpu%d/cpufreq/scaling_setspeed", 
+ 	    (int) (state.freq * 1000000), i);
+ 
+     retvalsyscall2 = system(command);
+     if(retvalsyscall2 != 0)
+       fprintf(stderr, "ERROR setting clocks: %d\n", retvalsyscall2);
+   }
+ #endif
+ 
+   if(retvalsyscall1 || retvalsyscall2) {
+     rc = -1;
+   }
+ 
+   return rc;
+ }
+         int window_size;
+ double power_target;
+ 
+ //----------------------------------------------------
+ 
+ 
  uint8_t *mux_buffer = NULL;
  int mux_buffer_size = 0;
  
***************
*** 94,99 ****
--- 807,848 ----
      x264_param_t param;
      cli_opt_t opt;
      int ret;
+     float min_heartrate;
+     float max_heartrate; 
+     
+     if(getenv("X264_MIN_HEART_RATE") == NULL) {
+       min_heartrate = 0.0;
+     }
+     else
+       min_heartrate = atof(getenv("X264_MIN_HEART_RATE"));
+ 
+     if(getenv("X264_MAX_HEART_RATE") == NULL) {
+       max_heartrate = 1000.0;
+     }
+     else
+       max_heartrate = atof(getenv("X264_MAX_HEART_RATE"));
+ 
+     if(getenv("X264_WINDOW_SIZE") == NULL) {
+       window_size = 20;
+     }
+     else
+       window_size = atoi(getenv("X264_WINDOW_SIZE"));
+ 
+     if(getenv("X264_POWER_TARGET") == NULL) {
+       power_target = 70;
+     }
+     else
+       power_target = atof(getenv("X264_POWER_TARGET"));
+     
+     printf("init heartbeat with %f %f %d\n", min_heartrate, max_heartrate, window_size);
+ 
+     heartbeat_init(&heart, 
+ 		   min_heartrate, max_heartrate,
+ 		   0, 100,
+ 		   0, 1000,
+ 		   window_size, 1, "x264_heartbeat.log");
+  
+    printf("heartbeat init'd\n");
  
  #ifdef PARSEC_VERSION
  #define __PARSEC_STRING(x) #x
***************
*** 873,878 ****
--- 1622,1728 ----
  
          i_frame++;
  
+ 	if(i_frame >= 35) {
+ 	  heartbeat(&heart, i_frame, i_file);
+ 
+ #if 0// Power and performance control
+ 	int PERIOD = window_size;
+ 	heartbeat_record_t hbr;
+ 	hb_get_current(&heart, &hbr);
+ 	
+ 	double power_goal = power_target;
+ 	double speed_goal = 1.4;
+ 	
+ 	int old_action = __sync_fetch_and_add(&current_action,1);
+ 	if(old_action == PERIOD) {
+ 	  current_action = 0;
+ 	}
+ 	if( old_action == 0) {
+ 	  double act_power = hbr.window_power;
+ 	  double act_speed = hbr.window_rate;
+ 	  
+ 	  double base_power = get_base_value(&power_filter, act_power, last_powerup);
+ 	  
+ 	  get_power_signal(act_power,
+ 			   power_goal,
+ 			   base_power,
+ 			   &power_e,
+ 			   &power_eo,
+ 			   &power_u,
+ 			   &power_uo,
+ 			   &power_uoo);
+ 	  
+ 	  double act_power_up = last_powerup = power_u;
+ 	  
+ 	  power_tdo_state_1 = power_translate(power_u, 
+ 					      power_controller_states, 
+ 					      (int) NSYSSTATES);
+ 	  power_tdo_state_2 = power_translate2(power_u, 
+ 					       power_controller_states,
+ 					       power_tdo_state_1,
+ 					       power_states,
+ 					       (int) NSYSSTATES);
+ 	  
+ 	  if(power_controller_states[power_tdo_state_1].speedup 
+ 	     <= power_controller_states[power_tdo_state_2].speedup) {
+ 	    power_tdo_state_1 = power_tdo_state_2;
+ 	  }
+ 	  
+ 	  double power_time1;
+ 	  
+ 	  if(power_controller_states[power_tdo_state_1].cost == 
+ 	     power_controller_states[power_tdo_state_2].cost ||
+ 	     power_u == power_controller_states[power_tdo_state_1].cost) 
+ 	    power_time1 = 1.0;
+ 	  else
+ 	    power_time1 = (power_u - 
+ 		     power_controller_states[power_tdo_state_2].cost) /
+ 	      (power_controller_states[power_tdo_state_1].cost - 
+ 	       power_controller_states[power_tdo_state_2].cost);
+ 	  
+ 	  double power_time2 = 1.0 - power_time1;
+ 	  
+ 	  h1 = power_time1*PERIOD+0.5;
+ 	  h2 = PERIOD-h1;
+ 	  
+ #if 1
+ 	  printf("\nCONTROL  beat=%lld, power=%f, des=%f, w=%f, u=%f, uo=%f, state=%d, state2=%d, %f, %f, %d, %d\n\n",
+ 		 hbr.beat,act_power,power_goal,1.0/base_power,power_u,last_powerup,power_controller_states[power_tdo_state_1].id, power_controller_states[power_tdo_state_2].id,  power_time1, power_time2, h1, h2); 
+ 	  
+ #endif
+ 	  
+ 	  //if(npids == 0) {
+ 	    npids = get_all_subpids(getpid(), pids);
+ 	    //}
+ 
+ 	  power_apply(power_tdo_state_1,
+ 		      pids,
+ 		      npids,
+ 		      power_states,
+ 		      NSYSSTATES);
+ 	  
+ 	  if(h1 == 0)
+ 	    power_apply(power_tdo_state_2,
+ 			pids,
+ 			npids,
+ 			power_states,
+ 			NSYSSTATES);
+ 	}
+ 	
+ 	if (old_action == h1) {
+ 	  //if(npids == 0) {
+ 	  npids = get_all_subpids(getpid(), pids);
+ 	  //}
+ 	  power_apply(power_tdo_state_2,
+ 		      pids,
+ 		      npids,
+ 		      power_states,
+ 		      NSYSSTATES);
+ 	  
+ 	}
+ #endif
+ 	}
+ 
          /* update status line (up to 1000 times per input file) */
          if( opt->b_progress && i_frame % i_update_interval == 0 )
          {
***************
*** 929,934 ****
                   (double) i_file * 8 * param->i_fps_num /
                   ( (double) param->i_fps_den * i_frame * 1000 ) );
      }
! 
      return 0;
  }
--- 1779,1784 ----
                   (double) i_file * 8 * param->i_fps_num /
                   ( (double) param->i_fps_den * i_frame * 1000 ) );
      }
!     heartbeat_finish(&heart);
      return 0;
  }
Only in parsec-2.0-modified/pkgs/apps/x264/src: x264.c~
Only in parsec-2.0-modified/pkgs/kernels/canneal: inst
Only in parsec-2.0-modified/pkgs/kernels/canneal: obj
diff -crB parsec-2.0/pkgs/kernels/canneal/src/annealer_thread.cpp parsec-2.0-modified/pkgs/kernels/canneal/src/annealer_thread.cpp
*** parsec-2.0/pkgs/kernels/canneal/src/annealer_thread.cpp	2008-12-08 15:00:46.000000000 -0600
--- parsec-2.0-modified/pkgs/kernels/canneal/src/annealer_thread.cpp	2019-04-04 11:20:24.899767771 -0500
***************
*** 25,30 ****
--- 25,31 ----
  // LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
  // OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
  // SUCH DAMAGE.
+ #include <heartbeat-accuracy-power.h>
  
  #ifdef ENABLE_THREADS
  #include <pthread.h>
***************
*** 38,52 ****
--- 39,1268 ----
  #include <math.h>
  #include <iostream>
  #include <fstream>
+ #include <stdlib.h>
  #include "rng.h"
  
+ extern heartbeat_t heart;
+ 
  using std::cout;
  using std::endl;
  
+ // /*-----------------------------------------------------------------------*/
+ // // Control stuff
+ // #include <stdlib.h>
+ 
+ // #define NSTATES 33
+ // #define START_STATE 0
+ 
+ // double total_time =0.0;
+ // double total_idle_time = 0.0;
+ 
+ // typedef int state_id_t;
+ 
+ // typedef struct {
+ //   int id;
+ 
+ //   double speedup;
+ //   double cost;
+ // } control_state_t;
+ 
+ // typedef struct {
+ //   int id;
+ 
+ //   double freq;
+ //   int cores;
+ // } power_state_t;
+ 
+ 
+ // control_state_t controller_states[] = {
+ // {	0	,	1	,	1	}	,
+ // {	1	,	1.074692964	,	1.008666584	}	,
+ // {	2	,	1.164632743	,	1.019991406	}	,
+ // {	3	,	1.249806426	,	1.032357675	}	,
+ // {	4	,	1.332309757	,	1.040878602	}	,
+ // {	5	,	1.414569966	,	1.042925081	}	,
+ // {	6	,	1.494416923	,	1.050972624	}	,
+ // {	7	,	1.998960115	,	1.054490237	}	,
+ // {	8	,	2.170120218	,	1.067475548	}	,
+ // {	9	,	2.33813321	,	1.076600951	}	,
+ // {	10	,	2.486586089	,	1.084604796	}	,
+ // {	11	,	2.659852918	,	1.092637773	}	,
+ // {	12	,	2.836552416	,	1.093970534	}	,
+ // {	13	,	2.997088024	,	1.112294169	}	,
+ // {	14	,	3.004848967	,	1.113932808	}	,
+ // {	15	,	3.240127961	,	1.11762521	}	,
+ // {	16	,	3.498640362	,	1.133305173	}	,
+ // {	17	,	3.740431739	,	1.133844103	}	,
+ // {	18	,	3.951377535	,	1.142903961	}	,
+ // {	19	,	4.243652985	,	1.153536913	}	,
+ // {	20	,	4.464225326	,	1.159581673	}	,
+ // {	21	,	4.68144837	,	1.16607797	}	,
+ // {	22	,	5.01091055	,	1.173207874	}	,
+ // {	23	,	5.283949884	,	1.180782032	}	,
+ // {	24	,	5.660587777	,	1.190300709	}	,
+ // {	25	,	6.011933461	,	1.207182341	}	,
+ // {	26	,	6.365044404	,	1.237566365	}	,
+ // {	27	,	7.269814343	,	1.240195472	}	,
+ // {	28	,	7.966071708	,	1.279275211	}	,
+ // {	29	,	8.239393103	,	1.354164694	}	,
+ // {	30	,	8.897565632	,	1.41512938	}	,
+ // {	31	,	9.53658192	,	1.46099673	}	,
+ // {	32	,	9.693414281	,	1.499428297	}	,
+ // {	33	,	10	,	1.5	}	
+ // };
+ 
+ // power_state_t power_states[] = {
+ // {	0	,	1.596	,	1	}	,
+ // {	1	,	1.729	,	1	}	,
+ // {	2	,	1.862	,	1	}	,
+ // {	3	,	1.995	,	1	}	,
+ // {	4	,	1.596	,	2	}	,
+ // {	5	,	2.128	,	1	}	,
+ // {	6	,	2.261	,	1	}	,
+ // {	7	,	1.729	,	2	}	,
+ // {	8	,	1.862	,	2	}	,
+ // {	9	,	1.596	,	3	}	,
+ // {	10	,	1.995	,	2	}	,
+ // {	11	,	1.729	,	3	}	,
+ // {	12	,	2.394	,	1	}	,
+ // {	13	,	2.128	,	2	}	,
+ // {	14	,	1.596	,	4	}	,
+ // {	15	,	1.862	,	3	}	,
+ // {	16	,	2.261	,	2	}	,
+ // {	17	,	1.995	,	3	}	,
+ // {	18	,	1.729	,	4	}	,
+ // {	19	,	2.128	,	3	}	,
+ // {	20	,	1.596	,	5	}	,
+ // {	21	,	2.394	,	2	}	,
+ // {	22	,	2.261	,	3	}	,
+ // {	23	,	1.729	,	5	}	,
+ // {	24	,	1.995	,	4	}	,
+ // {	25	,	1.862	,	5	}	,
+ // {	26	,	2.261	,	4	}	,
+ // {	27	,	1.995	,	6	}	,
+ // {	28	,	1.729	,	8	}	,
+ // {	29	,	2.261	,	7	}	,
+ // {	30	,	2.394	,	7	}	,
+ // {	31	,	2.261	,	8	}	,
+ // {	32	,	2.395	,	8	},	
+ // {	33	,	1.596	,	6	}	
+ // };
+ 
+ 
+ // #define MAX_ACTIONS 200
+ // #define MAX_PROCESSES 1024
+ 
+ // int current_action = -1;
+ // int max_actions = 0;
+ 
+ // typedef struct {
+ //   int beat;
+ //   double rate;
+ //   int state;
+ // } controller_log_entry_t;
+ 
+ 
+ // controller_log_entry_t controller_log[1000];
+ 
+ 
+ // #define FAST 1
+ // #define SLOW 0
+ 
+ // #if FAST
+ // const double p1 = 0.0;
+ // const double p2 = 0.0;
+ // const double z1 = 0.0;
+ // #elif SLOW
+ // const double p1 = 0.1;
+ // const double p2 = 0.8;
+ // const double z1 = 0.7;
+ // #else
+ // const double p1 = -0.5;
+ // const double p2 =  0.0;
+ // const double z1 =  0.0;
+ // #endif
+ 
+ // const double mu = 1.0;
+ // double last_speedup = 1.0;
+ 
+ // int action_vector[MAX_ACTIONS];
+ 
+ 
+ // double twoD_ready = 0;
+ // double last_t1 = 0;
+ // double last_s1 = 0;
+ // double last_t2 = 0;
+ // double last_s2 = 0;
+ 
+ // short adaptation_level = 1;
+ // #define W  0.178571
+ // int RACE = 1;
+ 
+ // const double ALPHA = 0.7;
+ 
+ // int get_all_subpids(pid_t pid, pid_t* pids) {
+ //   int   n=0;
+ //   FILE  *cret;
+ //   int   stret;
+ //   char  pid_string[MAX_PROCESSES];
+ //   char  cretpids[100];	
+ //   sprintf(cretpids,"ps -eLf | awk '(/%d/) && (!/awk/) {print $4}'",pid);
+ //   cret = popen(cretpids, "r");
+ 
+ //   if (cret == NULL) { 
+ //     printf("Error in popen\n"); 
+ //     exit(-1); 
+ //   }
+ 
+ //   while (fgets(pid_string, MAX_PROCESSES, cret) != NULL)  { 
+ //       pids[n] = atoi(pid_string); 
+ //       fprintf(stderr," from ps - %d\n", pids[n]);
+ //       n++; 
+ //     }
+ 
+ //   stret = pclose(cret);
+ 
+ //   if (stret == -1) { 
+ //     printf("Error in pclose\n"); 
+ //     exit(-1); 
+ //   }
+ 
+ //   return n;
+ // }
+ 
+ // double update_ewma(double a,
+ // 		   double old_estimate,
+ // 		   double observed) {
+ 
+ //   return a*old_estimate+(1.0-a)*observed;
+ 
+ // }
+ 
+ // double control_states_estimated_hrs[NSTATES];
+ 
+ // void init_control_state_estimates(double* e,
+ // 				  double w,
+ // 				  control_state_t* states,
+ // 				  int nstates) {
+ 
+ //   int i;
+ 
+ //   for(i = 0; i < nstates; i++) {
+ //     e[i] = (states[i].speedup/w);
+ //   }
+ 
+ // }
+ 
+ // void update_estimated_hr(double* e,
+ // 			 int state,
+ // 			 double observed_hr) 
+ // {
+ //   e[state] = update_ewma(ALPHA, e[state], observed_hr);
+ // }
+ 			 
+ 
+ 
+ // double UMAX;// = controller_states[NSTATES-1].speedup;
+ 
+ // int translate(double u, 
+ // 	      const control_state_t* states, 
+ // 	      int nstates) {
+ 
+ //   int i;
+ 
+ //   int best_index = nstates-1;
+ // #if 0
+ //   double tradeoff = 
+ //     control_states_estimated_hrs[best_index]/states[best_index].cost;
+ 
+ //   for(i = 0; i < nstates-1; i++) {
+ //     double new_tradeoff =  
+ //       control_states_estimated_hrs[i]/states[i].cost;
+ 
+ //     if(RACE){
+ //       if(states[i].speedup > u && new_tradeoff > tradeoff) {
+ // 	best_index = i;
+ // 	tradeoff = new_tradeoff;
+ //       }
+ //     }
+ //     else {
+ //       if(states[i].speedup > u*0.95) {
+ // 	best_index = i;
+ // 	tradeoff = new_tradeoff;
+ // 	break;
+ //       }
+ 
+ //     }
+ 
+ //   }
+ // #endif
+ 
+ //   return best_index;
+ 
+ // }
+ 
+ // int translate2(int state1,
+ // 	       control_state_t* states,
+ // 	       int n) {
+ //   int i = state1;
+ 
+ //   if(i == 0) return 0;
+ 
+ //   double max = states[state1-1].speedup;
+ //   int i_max = i-1;
+ 
+ //   for(i = state1-1; i >=0; i--) {
+ //     if(states[i].speedup > max) {
+ //       max = states[i].speedup;
+ //       i_max = i;
+ //     }
+ //   }
+ 
+ //   return states[i_max].id;
+ // }
+ 
+ // int current_state=0;
+ // int current_mem_state = 1;
+ // int current_cor_state = 0;
+ // int current_fre_state = 0;
+ 
+ // int apply(int state_id,
+ // 	  pid_t* pid,
+ // 	  int npids,
+ // 	  const power_state_t* states,
+ // 	  int nstates) {
+ //   int i;
+   
+ //   int rc = 0;
+ //   int retvalsyscall1 = 0;
+ //   int retvalsyscall2 = 0;
+ //   power_state_t state = states[0];
+ //   char command[4096];
+ 
+ 
+ //   //  printf("Applying state %d = <%f, %d, %d>\n",
+ //   //	 state_id, states[state_id].freq, states[state_id].cores, states[state_id].mem_nodes);
+ 
+ //   if(current_state == state_id) 
+ //     return rc;
+ //   else
+ //     current_state = state_id;
+   
+   
+ //   for(i = 0; i < nstates; i++) {
+ //     if( states[i].id == state_id) {
+ //       state = states[i];
+ //       break;
+ //     }
+ //   }
+ 
+ //   fprintf(stderr,"APPLYING...%d\n", getpid());
+ //   pid[0] = 0;
+ //   npids = get_all_subpids(getpid(), pid);
+ 
+ //   /*********************************
+ //    * CORES
+ //    *********************************/
+ //   if(state.cores != current_cor_state) {
+ // #if 1
+ //     for( i = 0; i < npids; i++) {
+ //       sprintf(command,"taskset -pc 0-%d %d >& /dev/null",state.cores, pid[i]);
+ //       retvalsyscall1 = system(command);
+ //     }
+ // #endif
+ //   }
+ //   current_cor_state = state.cores;
+ 
+ //   /*********************************
+ //    * FREQ
+ //    *********************************/
+ //   if(state.freq != current_fre_state) {
+ // #if 1 
+ //     for(i = 0; i < 8; i++) {
+ //       sprintf(command,
+ //     	      "echo %d > /sys/devices/system/cpu/cpu%d/cpufreq/scaling_setspeed", 
+ //     	      (int) (state.freq * 1000000), i);
+ //       retvalsyscall2 = system(command);
+ //     }
+ // #endif
+ //   }
+ //   current_fre_state = state.freq;
+ 
+ 
+ //   return rc;
+ // }
+ 
+ // double x_hat_minus = 0.0;
+ // double x_hat = W;
+ // double Q = .00001;
+ // double P = 1.0;
+ // double P_minus = 0.0;
+ // double H = 0.0;
+ // double R = 0.01;
+ // double K = 0.0; 
+ 
+ // double get_w(double current_hr, 
+ // 	     double last_speedup) {
+   
+ //   double _w;
+ 
+ //   if(adaptation_level == 0 || adaptation_level == 2) {
+ //     _w = W;
+ //   }
+ //   else if (adaptation_level == 1) {  // adaptation_level == 1 or 2
+ //     x_hat_minus = x_hat;
+ //     P_minus = P + Q;
+     
+ //     H = last_speedup;
+ //     K = P_minus*H/(H*P_minus*H+R);
+ //     x_hat = x_hat_minus + K*(current_hr - H*x_hat_minus);
+ //     P = (1 - K*H)*P_minus;
+    
+ //     _w = 1.0/x_hat;
+ //   }
+ 
+ //   //  return W;
+ //   return _w;
+ 
+ 
+ 
+ // }
+ 
+ // void get_u(double current_hr, 
+ // 	   double desired_hr,
+ // 	   double w,
+ // 	   double* e,
+ // 	   double* eo,
+ // 	   double* u,
+ // 	   double* uo,
+ // 	   double* uoo) {
+   
+ //   double A         = -(-p1*z1 - p2*z1 + mu*p1*p2 - mu*p2 + p2 - mu*p1 + p1 + mu);
+ //   double B         = -(-mu*p1*p2*z1 + p1*p2*z1 + mu*p2*z1 + mu*p1*z1 - mu*z1 - p1*p2);
+ //   double C         = ((mu - mu*p1)*p2 + mu*p1 - mu)*w;
+ //   double D         = ((mu*p1-mu)*p2 - mu*p1 + mu)*w*z1;
+ //   double F         = 1/(z1-1);
+ 
+ //   double y = current_hr;
+ //   *e = desired_hr - y;
+ //   UMAX = controller_states[NSTATES-1].speedup;
+ 
+ //   // *uo = (controller_states[(int) last_s1].speedup)*last_t1 +
+ //   //	    (controller_states[(int) last_s2].speedup)*last_t2;
+ 
+ //   *u = F * (A*(*uo) + B*(*uoo) + C*(*e) + D*(*eo));
+ //   //printf("u = %f, e = %f, uo = %f, w = %f\n", *u, *e, *uo, w);
+ 
+ //   if (*u<.0001)  *u=.0001;        
+ //   if (*u>UMAX) *u=UMAX;  
+ //   *uoo = *uo;            // saving values
+ //   *uo  = *u;
+ //   *eo  = *e;
+ // }
+ 
+ // double min_rate  = 0;
+ // double max_rate  = 0;
+ // double des_rate  = 0;
+ // double act_cores = 1;                   // suppose to start with one core
+ // double act_rate  = 0.0;                 // and the idled application
+ // int wait_for     = 1;                   // start immediately
+ // double w         = 0.2;                   // change to address workload changes;
+ // double u         = 1;                   // control variable
+ // double uo        = 1;                   // old value for the control variable
+ // double uoo       = 1;
+ // double y         = 100000;              // measured output value
+ // double e         = 100000;
+ // double eo        = 100000;
+ 
+ // #if 0
+ // double A         = -(-p1*z1 - p2*z1 + mu*p1*p2 - mu*p2 + p2 - mu*p1 + p1 + mu);
+ // double B         = -(-mu*p1*p2*z1 + p1*p2*z1 + mu*p2*z1 + mu*p1*z1 - mu*z1 - p1*p2);
+ // double C         = ((mu - mu*p1)*p2 + mu*p1 - mu)*w;
+ // double D         = ((mu*p1-mu)*p2 - mu*p1 + mu)*w*z1;
+ // double F         = 1/(z1-1);
+ // #endif
+ 
+ 
+ 
+ // int stop_app(pid_t* pid,
+ // 	     int npids) {
+   
+ //   char command[4096];
+ 
+ 
+ //   sprintf(command,
+ // 	  "kill -19 %d; kill -19 %d; kill -19 %d; kill -19 %d; kill -19 %d; kill -19 %d; kill -19 %d ",
+ // 	  pid[1], pid[2],pid[3],pid[4],pid[5],pid[6],pid[7]);
+   
+ //   printf("%s -- %d\n", command, getpid());
+ //   system(command);
+ 
+ //   return 0;
+ 
+ // }
+ 
+ // int cont_app(pid_t* pid,
+ // 	     int npids) {
+ //   char command[4096];
+ 
+ //   sprintf(command,
+ // 	  "kill -18 %d; kill -18 %d; kill -18 %d; kill -18 %d; kill -18 %d; kill -18 %d; kill -18 %d ",
+ // 	  pid[1], pid[2],pid[3],pid[4],pid[5],pid[6],pid[7]);
+   
+ //   system(command);
+ 
+ //   return 0;
+ // }
+ // int job_counter = 0;
+ // int state = NSTATES-1;
+ // double target_time;
+ // double start_time;
+ // double fastest_time;
+ // double idle_time;
+ // double nano      = pow(10,9);
+ // int npids =1;
+ // pid_t pids[256];
+ // int current_beat = 0;
+ // /*-----------------------------------------------------------------------*/
+ //---------------------------------------------------
+ // Control stuff
+ 
+ int current_action = -1;
+ int h1, h2, h3, h4;
+ int max_actions = 0;
+ 
+ typedef struct {
+   int beat;
+   double rate;
+   int state;
+ } controller_log_entry_t;
+ 
+ 
+ controller_log_entry_t controller_log[1000];
+ 
+ 
+ #define FAST 1
+ #define SLOW 1
+ 
+ #if FAST 
+ double p1 = 0.0;
+ double p2 = 0.0;
+ double z1 = 0.0;
+ #elif SLOW
+ const double p1 = 0.01;
+ const double p2 = 0.1;
+ const double z1 = 0.05;
+ #else
+ const double p1 = -0.5;
+ const double p2 =  0.0;
+ const double z1 =  0.0;
+ #endif
+ 
+ const double mu = 1.0;
+ //double last_speedup = 1.0;
+ #define STARTING_POWERUP 7.43
+ #define STARTING_SPEEDUP 3
+ double last_powerup = STARTING_POWERUP;
+ double last_speedup = STARTING_SPEEDUP;
+ 
+ double act_acc  = 0.0;                 // and the idled application
+ 
+ double power_u         = STARTING_POWERUP;                   // control variable
+ double power_uo        = STARTING_POWERUP;                   // old value for the control variable
+ double power_uoo       = STARTING_POWERUP;
+ double power_e         = 100000;
+ double power_eo        = 100000;
+ 
+ double speed_u         = STARTING_SPEEDUP;                   // control variable
+ double speed_uo        = STARTING_SPEEDUP;                   // old value for the control variable
+ double speed_uoo       = STARTING_SPEEDUP;
+ double speed_e         = 100000;
+ double speed_eo        = 100000;
+ 
+ int state_1 = 0;
+ int state_2 = 0;
+ int power_tdo_state_1 = 52;
+ int power_tdo_state_2 = 52;
+ int speed_tdo_state_1 = 0;
+ int speed_tdo_state_2 = 0;
+ int current_beat = 0;
+ int npids = 0;
+ pid_t pids[128]; 
+ int apps[1024];
+ 
+ 
+ int get_all_subpids(pid_t pid, pid_t* pids) {
+   int   n=0;
+   FILE  *cret;
+   int   stret;
+   char  pid_string[128];
+   char  cretpids[100];	
+   sprintf(cretpids,"ps -eLf | awk '(/%d/) && (!/awk/) {print $4}'",pid);
+   cret = popen(cretpids, "r");
+ 
+   if (cret == NULL) { 
+     printf("Error in popen\n"); 
+     exit(-1); 
+   }
+ 
+   while (fgets(pid_string, 128, cret) != NULL)  { 
+       pids[n] = atoi(pid_string); 
+       printf(" from ps - %d\n", pids[n]);
+       n++; 
+     }
+ 
+   stret = pclose(cret);
+ 
+   if (stret == -1) { 
+     printf("Error in pclose\n"); 
+     exit(-1); 
+   }
+ 
+   return n;
+ }
+ 
+ typedef int state_id_t;
+ 
+ //#define NSTATES 17
+ #define NSYSSTATES 53
+ //#define NSYSSTATES 12
+ #define NAPPSTATES 52
+ 
+ typedef struct {
+   int id;
+ 
+   double speedup;
+   double cost;
+ } control_state_t;
+ 
+ typedef struct {
+ 
+   int id;
+ 
+   double freq;
+   int cores; 
+ } power_state_t;
+ 
+ typedef struct {
+   int id;
+ 
+   int ref;
+   int range;
+   int subme;
+ } speed_state_t;
+ 
+ typedef struct {
+   int id;
+ 
+   int ref;
+   int range;
+   int subme;
+ } accuracy_state_t;
+ 
+ 
+ control_state_t power_controller_states[] = {
+ #if NSYSSTATES == 53
+ {	0	,	1	,	1	},
+ {	1	,	1.163271732	,	1.065459386	},
+ {	2	,	1.326450802	,	1.152370031	},
+ {	3	,	2.000779119	,	1.158258946	},
+ {	4	,	2.342362224	,	1.255978706	},
+ {	5	,	2.998628978	,	1.299315462	},
+ {	6	,	3.497754833	,	1.439517358	},
+ {	7	,	3.998042748	,	1.444595407	},
+ {	8	,	4.008467244	,	1.589721291	},
+ {	9	,	4.971273774	,	1.592954925	},
+ {	10	,	5.930045717	,	1.726970261	},
+ {	11	,	6.112010628	,	1.752157068	},
+ {	12	,	6.294323495	,	1.772866618	},
+ {	13	,	6.540468322	,	1.816738742	},
+ {	14	,	6.830129396	,	1.847993334	},
+ {	15	,	7.014754091	,	1.875424987	},
+ {	16	,	7.22679923	,	1.895050481	},
+ {	17	,	7.363138412	,	2.029663413	},
+ {	18	,	7.673919847	,	2.073628968	},
+ {	19	,	7.872333244	,	2.092926031	},
+ {	20	,	8.135646106	,	2.131456092	},
+ {	21	,	8.391979993	,	2.167973466	},
+ {	22	,	8.404035533	,	2.301570847	},
+ {	23	,	8.711506659	,	2.349388177	},
+ {	24	,	8.888993528	,	2.362690163	},
+ {	25	,	9.282032517	,	2.425433104	},
+ {	26	,	9.57516275	,	2.454561209	},
+ {	27	,	9.739863181	,	2.636924624	},
+ {	28	,	10.0788924	,	2.687586586	},
+ {	29	,	10.4058207	,	2.74523928	},
+ {	30	,	10.79348906	,	2.769645477	},
+ {	31	,	10.80531768	,	2.974609988	},
+ {	32	,	11.15136748	,	3.019535793	},
+ {	33	,	11.51035878	,	3.096745832	},
+ {	34	,	11.91013564	,	3.121659746	},
+ {	35	,	12.18132289	,	3.376517983	},
+ {	36	,	13.08318039	,	3.442629909	},
+ {	37	,	13.29497213	,	3.812376705	},
+ {	38	,	13.69964495	,	3.880726313	},
+ {	39	,	14.18314966	,	3.955659357	},
+ {	40	,	14.38812127	,	4.260517126	},
+ {	41	,	14.81921322	,	4.346649056	},
+ {	42	,	15.35247753	,	4.420098325	},
+ {	43	,	15.36429858	,	4.744361745	},
+ {	44	,	15.84191262	,	4.828515862	},
+ {	45	,	16.51979142	,	4.96835753	},
+ {	46	,	16.97220796	,	5.334766603	},
+ {	47	,	17.67476894	,	5.486239027	},
+ {	48	,	18.11240302	,	5.917762179	},
+ {	49	,	18.7258797	,	6.043033844	},
+ {	50	,	18.99855523	,	7.015605922	},
+ {	51	,	19.68798937	,	7.176472013	},
+ {	52	,	20.52524998	,	7.349292258	}
+ #else
+ {	0	,	1	,	1	},
+ {	1	,	1.163271732	,	1.065459386	},
+ {	2	,	1.326450802	,	1.152370031	},
+ {	3	,	1.488810095	,	1.24329113	},
+ {	4	,	1.650068787	,	1.353627355	},
+ {	5	,	1.80753684	,	1.468675067	},
+ {	6	,	1.967211766	,	1.584900326	},
+ {	7	,	2.125857007	,	1.733380748	},
+ {	8	,	2.280853438	,	1.860046486	},
+ {	9	,	2.437647326	,	2.042786943	},
+ {	10	,	2.591623527	,	2.253330233	},
+ {	11	,	3.080682296	,	3.09230493	}
+ #endif
+ };
+ 
+ control_state_t speed_controller_states[] = {
+ {	0	,	1	,	0	},
+ #if 1
+ {	1	,	1.077	,	0.11	},
+ {	2	,	1.0797	,	0.1175	},
+ {	3	,	1.1032	,	0.14	},
+ {	4	,	1.1902	,	0.16	},
+ {	5	,	1.2182	,	0.21	},
+ {	6	,	1.2187	,	0.23	},
+ {	7	,	1.2415	,	0.2425	},
+ {	8	,	1.3105	,	0.2775	},
+ {	9	,	1.333	,	0.3025	},
+ {	10	,	1.404	,	0.4325	},
+ {	11	,	1.4055	,	0.4325	},
+ {	12	,	1.4257	,	0.4725	},
+ {	13	,	1.52	,	0.535	},
+ {	14	,	1.5405	,	0.6475	},
+ {	15	,	1.5407	,	0.6475	},
+ {	16	,	1.556	,	0.7475	},
+ {	17	,	1.6357	,	0.8425	},
+ {	18	,	1.653	,	0.905	},
+ {	19	,	1.674	,	0.9575	},
+ {	20	,	1.676	,	0.9575	},
+ {	21	,	1.8322	,	1.14	},
+ {	22	,	1.8402	,	1.1475	},
+ {	23	,	1.915	,	1.32	},
+ {	24	,	1.936	,	1.33	},
+ {	25	,	1.9557	,	1.38	},
+ {	26	,	1.9565	,	1.38	},
+ {	27	,	2.0372	,	1.595	},
+ {	28	,	2.0842	,	2.13	},
+ //{	29	,	2.1747	,	2.4025	},
+ //{	30	,	2.192	,	2.435	},
+ {	31	,	2.25 /*2.2545*/	,	2.485	},
+ {	32	,	2.2665	,	2.4975	},
+ {	33	,	2.3835	,	2.68	},
+ {	34	,	2.416	,	2.6875	},
+ {	35	,	2.4507	,	2.7375	},
+ {	36	,	2.5765	,	2.9575	},
+ {	37	,	2.589	,	3.0125	},
+ {	38	,	2.6955	,	3.5325	},
+ {	39	,	2.701	,	3.545	},
+ {	40	,	2.7665	,	4.82	},
+ {	41	,	2.827	,	4.845	},
+ {	42	,	2.8807	,	4.85	},
+ {	43	,	3.1925	,	5.18	},
+ {	44	,	3.2432	,	5.2775	},
+ {	45	,	3.3797	,	5.4325	},
+ {	46	,	3.3822	,	5.5775	},
+ {	47	,	3.4307	,	5.6225	},
+ {	48	,	3.457	,	5.705	},
+ {	49	,	3.7525	,	5.7325	},
+ {	50	,	3.7615	,	5.7325	},
+ {	51	,	4.1185	,	6.2425	},
+ {	52	,	4.2537	,	6.255	},
+ #endif
+ {	53	,	7/*4.2615*/	,	6.295	}
+ };
+ 
+ speed_state_t speed_states[] = {
+ {	0	,	5,16,7	},
+ #if 1
+ {	1	,	5,15,7	},
+ {	2	,	5,14,7	},
+ {	3	,	5,12,7	},
+ {	4	,	5,10,7	},
+ {	5	,	4,15,7	},
+ {	6	,	4,14,7	},
+ {	7	,	4,12,7	},
+ {	8	,	4,11,7	},
+ {	9	,	4,10,7	},
+ {	10	,	3,15,7	},
+ {	11	,	3,14,7	},
+ {	12	,	3,12,7	},
+ {	13	,	3,10,7	},
+ {	14	,	3,9,7	},
+ {	15	,	3,8,7	},
+ {	16	,	2,12,7	},
+ {	17	,	3,6,7	},
+ {	18	,	2,10,7	},
+ {	19	,	2,9,7	},
+ {	20	,	2,8,7	},
+ {	21	,	1,13,7	},
+ {	22	,	1,12,7	},
+ {	23	,	1,11,7	},
+ {	24	,	1,10,7	},
+ {	25	,	1,9,7	},
+ {	26	,	1,8,7	},
+ {	27	,	1,6,7	},
+ {	28	,	1,4,7	},
+ //{	29	,	2,7,6	},
+ //{	30	,	2,6,6	},
+ {	31	,	1,13,6	},
+ {	32	,	1,12,6	},
+ {	33	,	1,11,6	},
+ {	34	,	1,10,6	},
+ {	35	,	1,9,6	},
+ {	36	,	1,7,6	},
+ {	37	,	1,6,6	},
+ {	38	,	1,5,6	},
+ {	39	,	1,4,6	},
+ {	40	,	3,11,1	},
+ {	41	,	3,10,1	},
+ {	42	,	3,9,1	},
+ {	43	,	3,7,1	},
+ {	44	,	3,6,1	},
+ {	45	,	3,5,1	},
+ {	46	,	3,4,1	},
+ {	47	,	1,12,1	},
+ {	48	,	2,7,1	},
+ {	49	,	1,9,1	},
+ {	50	,	1,8,1	},
+ {	51	,	1,6,1	},
+ {	52	,	1,5,1	},
+ #endif
+ {	53	,	1,4,1	}
+ };
+ 
+ power_state_t power_states[] = {
+ #if NSYSSTATES == 53
+ {	0	,	1.2	,	1	},
+ {	1	,	1.4	,	1	},
+ {	2	,	1.6	,	1	},
+ {	3	,	1.2	,	2	},
+ {	4	,	1.4	,	2	},
+ {	5	,	1.2	,	3	},
+ {	6	,	1.4	,	3	},
+ {	7	,	1.2	,	4	},
+ {	8	,	1.6	,	3	},
+ {	9	,	1.2	,	5	},
+ {	10	,	1.2	,	6	},
+ {	11	,	1.2	,	7	},
+ {	12	,	1.2	,	8	},
+ {	13	,	1.2	,	9	},
+ {	14	,	1.2	,	10	},
+ {	15	,	1.2	,	11	},
+ {	16	,	1.2	,	12	},
+ {	17	,	1.4	,	8	},
+ {	18	,	1.4	,	9	},
+ {	19	,	1.4	,	10	},
+ {	20	,	1.4	,	11	},
+ {	21	,	1.4	,	12	},
+ {	22	,	1.6	,	8	},
+ {	23	,	1.6	,	9	},
+ {	24	,	1.6	,	10	},
+ {	25	,	1.6	,	11	},
+ {	26	,	1.6	,	12	},
+ {	27	,	1.8	,	9	},
+ {	28	,	1.8	,	10	},
+ {	29	,	1.8	,	11	},
+ {	30	,	1.8	,	12	},
+ {	31	,	2	,	9	},
+ {	32	,	2	,	10	},
+ {	33	,	2	,	11	},
+ {	34	,	2	,	12	},
+ {	35	,	2.2	,	10	},
+ {	36	,	2.2	,	12	},
+ {	37	,	2.4	,	10	},
+ {	38	,	2.4	,	11	},
+ {	39	,	2.4	,	12	},
+ {	40	,	2.6	,	10	},
+ {	41	,	2.6	,	11	},
+ {	42	,	2.6	,	12	},
+ {	43	,	2.8	,	10	},
+ {	44	,	2.8	,	11	},
+ {	45	,	2.8	,	12	},
+ {	46	,	3	,	11	},
+ {	47	,	3	,	12	},
+ {	48	,	3.2	,	11	},
+ {	49	,	3.2	,	12	},
+ {	50	,	3.201	,	10	},
+ {	51	,	3.201	,	11	},
+ {	52	,	3.201	,	12	}
+ #else
+ {	0	,	1.2	,	1	},
+ {	1	,	1.4	,	1	},
+ {	2	,	1.6	,	1	},
+ {	3	,	1.8	,	1	},
+ {	4	,	2.0	,	1	},
+ {	5	,	2.2	,	1	},
+ {	6	,	2.4	,	1	},
+ {	7	,	2.6	,	1	},
+ {	8	,	2.8	,	1	},
+ {	9	,	3.0	,	1	},
+ {	10	,	3.2	,	1	},
+ {	11	,	3.201	,	1	}
+ #endif
+ };
+ 
+ double x_hat_minus = 0.0;
+ double x_hat = .2;
+ double Q = .00001;
+ double P = 1.0;
+ double P_minus = 0.0;
+ double H = 0.0;
+ double R = .01;
+ double K = 0.0; 
+ 
+ typedef struct {  
+   double x_hat_minus;
+   double x_hat;
+   double Q;
+   double P;
+   double P_minus;
+   double H;
+   double R;
+   double K;
+ } kalman_filter_t;
+ 
+ kalman_filter_t filter_init = {0.0, 0.3125, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ 
+ #define HEURISTIC_W 0
+ 
+ int adaptation_level = 1;
+ 
+ kalman_filter_t power_filter = {0.0, 0.2, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ kalman_filter_t speed_filter = {0.0, 0.3125, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ 
+ double get_base_value(kalman_filter_t* k,
+ 		      double current_measurement, 
+ 		      double last_coeff) {
+   
+   k->x_hat_minus = k->x_hat;
+   k->P_minus = k->P + k->Q;
+   
+   k->H = last_coeff;
+   k->K = k->P_minus * k->H /( k->H * k->P_minus* k->H + k->R);
+   k->x_hat = k->x_hat_minus + k->K * (current_measurement - k->H * k->x_hat_minus);
+   k->P = (1 - k->K * k->H) * k->P_minus;
+   
+   return 1.0/k->x_hat;
+ }
+ 
+ void get_power_signal(double current_power, 
+ 		      double desired_power,
+ 		      double base_power,
+ 		      double* e,
+ 		      double* eo,
+ 		      double* u,
+ 		      double* uo,
+ 		      double* uoo) {
+ 
+   if(current_power < desired_power) {
+     p1 = 0.1;
+     p2 = 0.8;
+     z1 = 0.2;
+     p1 = 0;
+     p2 = 0;
+     z1 = 0;
+   }
+   else {
+     p1 = 0;
+     p2 = 0;
+     z1 = 0;
+ 
+   }
+ 
+   
+   double A         = -(-p1*z1 - p2*z1 + mu*p1*p2 - mu*p2 + p2 - mu*p1 + p1 + mu);
+   double B         = -(-mu*p1*p2*z1 + p1*p2*z1 + mu*p2*z1 + mu*p1*z1 - mu*z1 - p1*p2);
+   double C         = ((mu - mu*p1)*p2 + mu*p1 - mu)*base_power;
+   double D         = ((mu*p1-mu)*p2 - mu*p1 + mu)*base_power*z1;
+   double F         = 1/(z1-1);
+   
+   double y = current_power;
+   *e = desired_power - y;
+   
+   //printf("u = %f, uo = %f, e = %f, A = %f, B= %f, C = %f, D= %f, F = %f\n",
+   // *u, *uo, *e, A, B, C, D, F);
+   
+   *u = F * (A*(*uo) + B*(*uoo) + C*(*e) + D*(*eo));
+ 
+   
+   
+   if (*u<1)  *u=1;        
+   if (*u>power_controller_states[NSYSSTATES-1].cost) *u=power_controller_states[NSYSSTATES-1].cost;  
+   *uoo = *uo;            // saving values
+   *uo  = *u;
+   *eo  = *e;
+ }
+ 
+ double max_speedup;
+ 
+ void get_speed_signal(double current_speed, 
+ 		      double desired_speed,
+ 		      double base_speed,
+ 		      double* e,
+ 		      double* eo,
+ 		      double* u,
+ 		      double* uo,
+ 		      double* uoo) {
+   //double p1 = 0.1;
+   //double p2 = 0.2;
+   //double z1 = 0.15; 
+ 
+   double A         = -(-p1*z1 - p2*z1 + mu*p1*p2 - mu*p2 + p2 - mu*p1 + p1 + mu);
+   double B         = -(-mu*p1*p2*z1 + p1*p2*z1 + mu*p2*z1 + mu*p1*z1 - mu*z1 - p1*p2);
+   double C         = ((mu - mu*p1)*p2 + mu*p1 - mu)*base_speed;
+   double D         = ((mu*p1-mu)*p2 - mu*p1 + mu)*base_speed*z1;
+   double F         = 1/(z1-1);
+   
+   double y = current_speed;
+   *e = desired_speed - y;
+   
+   
+   //*u = F * (A*(*uo) + B*(*uoo) + C*(*e) + D*(*eo));
+ 
+   *u = *uo + *e/base_speed;
+ 
+   //  printf("u = %f, uo = %f, e = %f, base_speed = %f\n",
+   // *u, *uo, *e, base_speed);
+ 
+ 
+   //double max_speedup = speed_controller_states[NAPPSTATES-1].speedup * 
+   //power_controller_states[NSYSSTATES-1].speedup;
+   if (*u<1)  *u=1;        
+   if (*u>max_speedup) *u=max_speedup;  
+   *uoo = *uo;            // saving values
+   *uo  = *u;
+   *eo  = *e;
+ }
+ 
+ 
+ int power_translate(double u, 
+ 		    const control_state_t* states, 
+ 		    int nstates) {
+   int i;
+ 
+   control_state_t cs = states[nstates-1];
+ 
+   double efficiency = cs.speedup/cs.cost;
+   int index = nstates-1;
+ 
+ 
+   for(i = 0; i < nstates; i++) {
+     if(states[i].cost >= u) {
+ 
+       double new_eff = states[i].speedup/states[i].cost;
+       if(new_eff > efficiency) {
+ 
+ 	cs = states[i];
+ 	efficiency = new_eff;
+ 	index = i;
+       }	
+     }
+   }
+ 
+   return index;
+ }
+ 
+ int power_translate2(double u, 
+ 		     const control_state_t* states, 
+ 		     int state1,
+ 		     const power_state_t* pstates,
+ 		     int nstates) {
+   int i;
+   
+   control_state_t cs = states[0];
+   
+   double efficiency = cs.speedup;///cs.cost;
+     int index = 0;
+     
+     for(i = 0; i < nstates; i++) {
+       if(states[i].cost < u && pstates[state1].cores == pstates[i].cores) {
+ 	
+ 	double new_eff = states[i].speedup;///states[i].cost;
+ 	  if(new_eff >= efficiency) {
+ 	    
+ 	    cs = states[i];
+ 	    efficiency = new_eff;
+ 	    index = i;
+ 	  }	
+       }
+     }
+     
+     return index;
+ }
+ 
+ int speed_translate(double u, 
+ 		    const control_state_t* states, 
+ 		    int nstates) {
+   int i;
+ 
+   control_state_t cs = states[nstates-1];
+ 
+   double efficiency = cs.speedup/(cs.cost+1);
+   int index = nstates-1;
+ 
+ 
+   for(i = 0; i < nstates; i++) {
+     if(states[i].speedup >= u) {
+ 
+       //index = i;
+       //break;
+       double new_eff = states[i].speedup/(states[i].cost+1);
+       if(new_eff > efficiency) {
+ 
+       	cs = states[i];
+ 	efficiency = new_eff;
+ 	index = i;
+       }	
+     }
+   }
+ 
+   return index;
+ }
+ 
+ int speed_translate2(double u, 
+ 		     const control_state_t* states, 
+ 		     int nstates) {
+   int i;
+   
+   control_state_t cs = states[0];
+   
+   double efficiency = cs.speedup/(cs.cost+1);
+     int index = 0;
+     
+     for(i = 0; i < nstates; i++) {
+       if(states[i].speedup < u) {
+ 	
+ 	double new_eff = states[i].speedup/(states[i].cost+1);
+ 	  if(new_eff >= efficiency) {
+ 	    
+ 	    cs = states[i];
+ 	    efficiency = new_eff;
+ 	    index = i;
+ 	  }	
+       }
+     }
+     
+     return index;
+ }
+ 
+ 
+ int last_speed_state = 0;	
+ int control_nref = 5;
+ int control_range = 16;
+ int control_refine = 7;
+ 
+ void speed_apply(int state,
+ 		 speed_state_t* ps,
+ 		 int nstates) {
+   
+   char command[4096];
+   int i;
+   
+   //printf("APPLYING SPPED STATE %d\n", state);
+ 
+   if(last_speed_state ==state)
+     return;
+   else 
+     last_speed_state = state;
+ 
+ #if 0
+   control_nref = ps[state].ref;
+   control_range = ps[state].range;
+   control_refine = ps[state].subme;
+ #endif
+   //sprintf(command,"echo \"%d\n%d\n%d\n\" >  x264_settings",
+   //	  ps[state].ref,ps[state].range,ps[state].subme);
+   //system(command);
+   
+ }
+ 
+ int last_power_state = 52;
+ int last_cores = 12;
+ int power_apply(int state_id,
+ 		pid_t* pid,
+ 		int npids,
+ 		const power_state_t* states,
+ 		int nstates) {
+   
+   int i;
+   
+   int rc = 0;
+   int retvalsyscall1 = 0;
+   int retvalsyscall2 = 0;
+   power_state_t state = states[0];
+   char command[4096];
+   
+   if(state_id == last_power_state)
+     return 0;
+   else
+     last_power_state = state_id;
+   
+   for(i = 0; i < nstates; i++) {
+     if( states[i].id == state_id) {
+       state = states[i];
+       break;
+     }
+   }
+ 
+   if(last_cores != state.cores) {
+   sprintf(command,"taskset -p -c 0-%d  %d > /dev/null",state.cores-1, getpid());
+   retvalsyscall1 = system(command);
+   //printf("%s\n", command);
+   for( i = 1; i < 12; i++) {
+     sprintf(command,"taskset -p -c 0-%d  %d > /dev/null",state.cores-1, pid[i]);
+     //printf("%s\n", command);
+     retvalsyscall1 = system(command);
+   }
+   } 
+ #if 1
+   for(i = 0; i < 12; i++) {
+     sprintf(command,
+ 	    "echo %d > /sys/devices/system/cpu/cpu%d/cpufreq/scaling_setspeed", 
+ 	    (int) (state.freq * 1000000), i);
+ 
+ 
+     retvalsyscall2 = system(command);
+     if(retvalsyscall2 != 0)
+       fprintf(stderr, "ERROR setting clocks: %d\n", retvalsyscall2);
+   }
+ #endif
+ 
+   if(retvalsyscall1 || retvalsyscall2) {
+     rc = -1;
+   }
+ 
+   return rc;
+ }
+ extern int window_size;
+ extern float power_target;
+ 
+ //----------------------------------------------------
+ 
+ 
  
  //*****************************************************************************************
  //
  //*****************************************************************************************
+ int counter = 0;
  void annealer_thread::Run()
  {
  	int accepted_good_moves=0;
***************
*** 86,91 ****
--- 1302,1541 ----
  			}
  		}
  		temp_steps_completed++;
+ 
+ 		int old_counter = __sync_fetch_and_add(&counter, 1);
+ 		if(old_counter % 500 == 0) {
+ 		  heartbeat(&heart,old_counter, 1.0);
+ 
+ #if 1// Power and performance control
+ 	int PERIOD = window_size;
+ 	heartbeat_record_t hbr;
+ 	hb_get_current(&heart, &hbr);
+ 	
+ 	double power_goal = power_target;
+ 	double speed_goal = 1.4;
+ 	
+ 	
+ 	int old_action = __sync_fetch_and_add(&current_action, 1);
+ 	//printf("power goal is 70, old action is %d, counter is %d\n", old_action, old_counter);
+ 	if((old_action+1) % PERIOD == 0) 
+ 	  current_action = 0;
+ 	if( old_action == 0 ) {
+ 	  double act_power = hbr.window_power;
+ 	  double act_speed = hbr.window_rate;
+ 	  
+ 	  double base_power = get_base_value(&power_filter, act_power, last_powerup);
+ 	  
+ 	  //double base_speed = get_base_value(&speed_filter, act_speed, last_speedup);
+ 	  
+ 	  //double app_state = acc_translate();
+ 	  
+ 	  //printf("power goal is 70, old action is %d, counter is %d\n", old_action, old_counter);
+ 	  get_power_signal(act_power,
+ 			   power_goal,
+ 			   base_power,
+ 			   &power_e,
+ 			   &power_eo,
+ 			   &power_u,
+ 			   &power_uo,
+ 			   &power_uoo);
+ 	  
+ 	  
+ 	  double act_power_up = last_powerup = power_u;
+ 	  	  
+ 	  power_tdo_state_1 = power_translate(power_u, 
+ 					      power_controller_states, 
+ 					      (int) NSYSSTATES);
+ 	  power_tdo_state_2 = power_translate2(power_u, 
+ 					       power_controller_states,
+ 					       power_tdo_state_1,
+ 					       power_states,
+ 					       (int) NSYSSTATES);
+ 
+ 	  //power_tdo_state_1 = 49;
+ 	  //power_tdo_state_2 = 45;
+ 	  
+ 	  if(power_controller_states[power_tdo_state_1].speedup 
+ 	     <= power_controller_states[power_tdo_state_2].speedup) {
+ 	    power_tdo_state_1 = power_tdo_state_2;
+ 	  }
+ 	  
+ 	  double power_time1;
+ 	  
+ 	  if(power_controller_states[power_tdo_state_1].cost == 
+ 	     power_controller_states[power_tdo_state_2].cost ||
+ 	     power_u == power_controller_states[power_tdo_state_1].cost) 
+ 	    power_time1 = 1.0;
+ 	  else
+ 	    power_time1 = (power_u - 
+ 		     power_controller_states[power_tdo_state_2].cost) /
+ 	      (power_controller_states[power_tdo_state_1].cost - 
+ 	       power_controller_states[power_tdo_state_2].cost);
+ 	  
+ 	  double power_time2 = 1.0 - power_time1;
+ 	  
+ 	  h1 = power_time1*PERIOD+0.5;
+ 	  h2 = PERIOD-h1;
+ 	  
+ 	  
+ #if 1
+ 	  printf("\nCONTROL beat=%lld, power=%f, des=%f, w=%f, u=%f, uo=%f, state=%d, state2=%d, %f, %f, %d, %d\n\n",
+ 		 hbr.beat,act_power,power_goal,1.0/base_power,power_u,last_powerup,power_controller_states[power_tdo_state_1].id, power_tdo_state_2, power_time1, power_time2, h1, h2); 
+ 	  
+ #endif
+ 	  
+ 	  if(npids == 0) {
+ 	    npids = get_all_subpids(getpid(), pids);
+ 	  }
+ 	  //power_tdo_state_1 = power_tdo_state_2 = 42;
+ 	  power_apply(power_tdo_state_1,
+ 		      pids,
+ 		      npids,
+ 		      power_states,
+ 		      NSYSSTATES);
+ 	  
+ 	  if(h1 == 0)
+ 	    power_apply(power_tdo_state_2,
+ 			pids,
+ 			npids,
+ 			power_states,
+ 			NSYSSTATES);
+ 	}
+ 	
+ 	if (old_action == h1) {
+ 	   if(npids == 0) {
+ 	  npids = get_all_subpids(getpid(), pids);
+ 	  }
+ 	  //printf("APPLYING 2\n");
+ 	  power_apply(power_tdo_state_2,
+ 		      pids,
+ 		      npids,
+ 		      power_states,
+ 		      NSYSSTATES);
+ 	  
+ 	}
+    
+ #endif
+ 
+ #if 0
+ 		    heartbeat_record_t hbr;
+ 		    hb_get_current(&heart, &hbr);
+ 		    int PERIOD = 1000;
+ 
+ 		    //printf("Current action = %d, rate = %f\n", current_action, hbr.window_rate);
+ 		    if( current_action == 0 && hbr.window_rate != 0.0) {
+ 	  int i;
+ 	  min_rate = hb_get_min_rate(&heart);
+ 	  max_rate = hb_get_max_rate(&heart);
+ 	  des_rate = (max_rate+min_rate)/2;
+ 	  act_rate = hbr.window_rate;
+ 	  
+ 	  
+ 
+ 	  w = get_w(act_rate, last_speedup);
+ 	  //printf("w = %f   %f\n", w, act_rate);
+ 	  get_u(act_rate, 
+ 		des_rate, 
+ 		w, 
+ 		&e, 
+ 		&eo, 
+ 		&u, 
+ 		&uo, 
+ 		&uoo);
+ 	  //printf("w = %f   %f\n", w, u);
+ 
+ 	  //if(!RACE && hbr.beat > 1*PERIOD)
+ 	  state = translate(u, controller_states, (int) NSTATES);
+ 	  state =28;
+ 
+ 	  double act_speedup = u;
+ 	  
+ 	  double target_speed = des_rate; //u/w;
+ 	  
+ 	  double max_speed = controller_states[state].speedup/w;
+ 	  
+ 	  last_speedup = u;
+ 	  
+ 	  target_time = 
+ 	    (double) PERIOD / target_speed;
+ 	  fastest_time = 
+ 	    (double) PERIOD / max_speed;
+ 	  idle_time = 
+ 	    target_time - fastest_time;
+ 	  
+ 	  if(target_speed == max_speed) {
+ 	    target_time = (double) PERIOD / des_rate;
+ 	  }
+ 	  	  
+ #if 1
+ 	  fprintf(stderr,"current hb = %d, goal = %f, hr = %f, u = %f, w = %f, PERIOD = %f, max_speed = %f, target_speed = %f, target_time = %f, state = %d, last state = %d\n",
+ 		 current_beat, des_rate, act_rate, u, w, (double) PERIOD, max_speed, target_speed, target_time, state);
+ #endif
+ 
+ 	  struct timespec time_info;
+ 	  clock_gettime( CLOCK_REALTIME, &time_info );
+ 	  
+ 	  start_time = (double) time_info.tv_sec + 
+ 	    ((double) time_info.tv_nsec)/1000000000.0 ;
+       
+ 	  apply(state,
+ 		pids,
+ 		npids,
+ 		power_states,
+ 		NSTATES);
+ 		    }
+ 	
+ 	current_action++;
+ 	//	wait_for = current_beat+1;
+ 	if(current_action == PERIOD) {
+ 	  struct timespec time_info;
+ 	  clock_gettime( CLOCK_REALTIME, &time_info );
+ 	  
+ 	  double stop_time = (double) time_info.tv_sec + 
+ 	    ((double) time_info.tv_nsec)/1000000000.0 ;
+ 	  
+ 	  idle_time = target_time - (stop_time-start_time);
+ 	  
+ 	  //fprintf(stderr, "target_time = %f, idle_time = %f, fastest_time = %f, fast_time = %f\n",
+ 	  //target_time, idle_time, stop_time-start_time);
+       printf("%d %f %f %f\n", current_beat, ((float)power_states[state].cores)/(8.0), power_states[state].freq/2.394, (target_time - idle_time)/target_time);
+ 
+ 	  if(idle_time > 0.0) {
+ 	    struct timespec sleep_time;
+ 	    struct timespec rem_time;
+ 	    char command[4096];
+ 
+ 
+ 	    total_time += target_time;
+ 	    total_idle_time += idle_time;
+ 	    sleep_time.tv_sec = (time_t) floor(idle_time);
+ 	    sleep_time.tv_nsec = (long)  ((idle_time - floor(idle_time))*nano);
+ 	    
+ 	    //stop_app(pids, npids);
+ 	    
+ 	    //printf("About to sleep...at hb %d\n", current_beat);
+ 	    //printf("About to sleep... %f\n", idle_time);
+ 
+ 	    sprintf(command,
+ 		    "./sleeper-one-pid %lld %f %d %d %d %d %d %d %d",
+ 		    (long long) getpid(), idle_time, pids[1], pids[2], pids[3], pids[4], pids[5], pids[6], pids[7]);
+  
+ 	    system(command);
+ 
+ 	    //nanosleep(&sleep_time, &rem_time);
+ 	    //cont_app(pids, npids);
+ 	  }
+ 	  current_action = 0;
+ 	}
+ #endif	
+ 	current_beat++;
+ 	// End Control
+       /*-----------------------------------------------------*/
+ 		  
+ 
+ 		}
+ 		//counter++;
+ 
  #ifdef ENABLE_THREADS
  		pthread_barrier_wait(&_barrier);
  #endif
Only in parsec-2.0-modified/pkgs/kernels/canneal/src: annealer_thread.cpp~
Only in parsec-2.0-modified/pkgs/kernels/canneal/src: annealer_thread_old.cpp
diff -crB parsec-2.0/pkgs/kernels/canneal/src/main.cpp parsec-2.0-modified/pkgs/kernels/canneal/src/main.cpp
*** parsec-2.0/pkgs/kernels/canneal/src/main.cpp	2008-12-08 15:00:49.000000000 -0600
--- parsec-2.0-modified/pkgs/kernels/canneal/src/main.cpp	2019-04-04 11:20:24.887767488 -0500
***************
*** 33,38 ****
--- 33,39 ----
  #include <stdlib.h>
  #include <unistd.h>
  #include <vector>
+ #include <heartbeat-accuracy-power.h>
  
  #ifdef ENABLE_THREADS
  #include <pthread.h>
***************
*** 48,59 ****
--- 49,100 ----
  #include "rng.h"
  
  using namespace std;
+ heartbeat_t heart;
  
  void* entry_pt(void*);
  
  
+         int window_size;
+ float power_target;
  
  int main (int argc, char * const argv[]) {
+ // HEARBEAT INIT canneal
+         float min_heartrate;
+         float max_heartrate;
+ 
+         if(getenv("CANNEAL_MIN_HEART_RATE") == NULL) {
+           min_heartrate = 0.0;
+         }
+         else
+           min_heartrate = atof(getenv("CANNEAL_MIN_HEART_RATE"));
+ 
+         if(getenv("CANNEAL_MAX_HEART_RATE") == NULL) {
+           max_heartrate = 100.0;
+         }
+         else          max_heartrate = atof(getenv("CANNEAL_MAX_HEART_RATE"));
+ 
+         if(getenv("CANNEAL_WINDOW_SIZE") == NULL) {
+           window_size = 20;
+         }
+         else
+           window_size = atoi(getenv("CANNEAL_WINDOW_SIZE"));
+ 
+ 	if(getenv("CANNEAL_POWER_TARGET") == NULL) {
+ 	  power_target = 70;
+ 	}
+ 	else
+ 	  power_target = atof(getenv("CANNEAL_POWER_TARGET"));
+ 
+ 
+         printf("init heartbeat with %f %f %d\n", min_heartrate, max_heartrate, window_size);
+ 
+         heartbeat_init(&heart,
+                        min_heartrate, max_heartrate,
+ 		       0, 150,
+ 		       0, 1,
+                        window_size, 10, "heartbeat.log");
+ 
+         printf("heartbeat init'd\n");
  #ifdef PARSEC_VERSION
  #define __PARSEC_STRING(x) #x
  #define __PARSEC_XSTRING(x) __PARSEC_STRING(x)
***************
*** 126,131 ****
--- 167,173 ----
  #endif
  	
  	cout << "Final routing is: " << my_netlist.total_routing_cost() << endl;
+ 	heartbeat_finish(&heart);
  
  #ifdef ENABLE_PARSEC_HOOKS
  	__parsec_bench_end();
Only in parsec-2.0-modified/pkgs/kernels/canneal/src: main.cpp~
diff -crB parsec-2.0/pkgs/kernels/canneal/src/Makefile parsec-2.0-modified/pkgs/kernels/canneal/src/Makefile
*** parsec-2.0/pkgs/kernels/canneal/src/Makefile	2008-12-08 15:00:49.000000000 -0600
--- parsec-2.0-modified/pkgs/kernels/canneal/src/Makefile	2019-04-04 11:20:24.899767771 -0500
***************
*** 7,13 ****
  
  ifdef version
    ifeq "$(version)" "pthreads"
!     CXXFLAGS+=-DENABLE_THREADS -pthread
    endif
  endif
  
--- 7,13 ----
  
  ifdef version
    ifeq "$(version)" "pthreads"
!     CXXFLAGS+=-DENABLE_THREADS -pthread -g
    endif
  endif
  
Only in parsec-2.0-modified/pkgs/kernels/canneal/src: Makefile~
Only in parsec-2.0-modified/pkgs/kernels/dedup: inst
Only in parsec-2.0-modified/pkgs/kernels/dedup: obj
diff -crB parsec-2.0/pkgs/kernels/dedup/src/decoder.c parsec-2.0-modified/pkgs/kernels/dedup/src/decoder.c
*** parsec-2.0/pkgs/kernels/dedup/src/decoder.c	2009-01-27 19:09:55.000000000 -0600
--- parsec-2.0-modified/pkgs/kernels/dedup/src/decoder.c	2019-04-04 11:20:46.284268640 -0500
***************
*** 185,191 ****
    list_head = NULL;
  
    if (args != NULL) {
!     fd = open((char *)args, O_CREAT|O_WRONLY|O_TRUNC);
      if (fd < 0) 
        perror("Reassemble open");
      fchmod(fd, ~(S_ISUID | S_ISGID |S_IXGRP | S_IXUSR | S_IXOTH));
--- 185,191 ----
    list_head = NULL;
  
    if (args != NULL) {
!     fd = open((char *)args, O_CREAT|O_WRONLY|O_TRUNC, ~(S_ISUID | S_ISGID |S_IXGRP | S_IXUSR | S_IXOTH));
      if (fd < 0) 
        perror("Reassemble open");
      fchmod(fd, ~(S_ISUID | S_ISGID |S_IXGRP | S_IXUSR | S_IXOTH));
***************
*** 255,261 ****
        //get file header
        head = (send_head *)item->str;
        if (fd == -1) {
!         fd = open(head->filename, O_CREAT|O_WRONLY|O_TRUNC);
          if (fd < 0)
            perror("head_open");
        }
--- 255,261 ----
        //get file header
        head = (send_head *)item->str;
        if (fd == -1) {
!         fd = open(head->filename, O_CREAT|O_WRONLY|O_TRUNC, ~(S_ISUID | S_ISGID |S_IXGRP | S_IXUSR | S_IXOTH));
          if (fd < 0)
            perror("head_open");
        }
Only in parsec-2.0-modified/pkgs/kernels/dedup/src: decoder.c~
diff -crB parsec-2.0/pkgs/kernels/dedup/src/dedup.c parsec-2.0-modified/pkgs/kernels/dedup/src/dedup.c
*** parsec-2.0/pkgs/kernels/dedup/src/dedup.c	2009-01-27 19:09:55.000000000 -0600
--- parsec-2.0-modified/pkgs/kernels/dedup/src/dedup.c	2019-04-04 11:20:46.288268733 -0500
***************
*** 1,3 ****
--- 1,6 ----
+ #include <heartbeat-accuracy-power.h>
+ 
+ 
  #include "util.h"
  #include "debug.h"
  #include "dedupdef.h"
***************
*** 15,20 ****
--- 18,25 ----
  #include <hooks.h>
  #endif
  
+ heartbeat_t heart;
+ 
  config * conf;
  
  static int
***************
*** 41,49 ****
--- 46,94 ----
    printf("-h \t\t\thelp\n");
  }
  /*--------------------------------------------------------------------------*/
+ int window_size;
+ float power_target;
  int 
  main(int argc, char** argv)
  {
+ // HEARBEAT INIT dedup
+         float min_heartrate;
+         float max_heartrate;
+ 
+         if(getenv("DEDUP_MIN_HEART_RATE") == NULL) {
+           min_heartrate = 0.0;
+         }
+         else
+           min_heartrate = atof(getenv("DEDUP_MIN_HEART_RATE"));
+ 
+         if(getenv("DEDUP_MAX_HEART_RATE") == NULL) {
+           max_heartrate = 100.0;
+         }
+         else          max_heartrate = atof(getenv("DEDUP_MAX_HEART_RATE"));
+ 
+         if(getenv("DEDUP_WINDOW_SIZE") == NULL) {
+           window_size = 20;
+         }
+         else
+           window_size = atoi(getenv("DEDUP_WINDOW_SIZE"));
+ 
+ 	if(getenv("DEDUP_POWER_TARGET") == NULL) {
+ 	  power_target = 70;
+ 	}
+ 	else
+ 	  power_target = atof(getenv("DEDUP_POWER_TARGET"));
+ 
+ 
+         printf("init heartbeat with %f %f %d\n", min_heartrate, max_heartrate, window_size);
+ 
+         heartbeat_init(&heart,
+                        min_heartrate, max_heartrate,
+ 		       0, 1,
+ 		       0, 150,
+                        window_size, 10, "heartbeat.log");
+ 
+         printf("heartbeat init'd\n");
+ 
  #ifdef PARSEC_VERSION
  #define __PARSEC_STRING(x) #x
  #define __PARSEC_XSTRING(x) __PARSEC_STRING(x)
***************
*** 98,103 ****
--- 143,149 ----
        break;
      case 'h':
        usage(argv[0]);
+       heartbeat_finish(&heart);
        return -1;
      case 'b':
        conf->b_size = atoi(optarg) * 1024;
***************
*** 111,116 ****
--- 157,163 ----
      case '?':
        fprintf(stdout, "Unknown option `-%c'.\n", optopt);
        usage(argv[0]);
+       heartbeat_finish(&heart);
        return -1;
      }
    }
***************
*** 118,129 ****
--- 165,178 ----
  #ifndef PARALLEL
   if (conf->nthreads != 1){
      printf("Number of threads must be 1 (serial version)\n");
+       heartbeat_finish(&heart);
      exit(1);
    }
  #endif
    cache = create_hashtable(65536, hash_from_key_fn, keys_equal_fn);
    if(cache == NULL) {
      printf("ERROR: Out of memory\n");
+       heartbeat_finish(&heart);
      exit(1);
    }
  
***************
*** 132,137 ****
--- 181,187 ----
    } else {
      Decode(conf);
    }
+       heartbeat_finish(&heart);
  
  #ifdef ENABLE_PARSEC_HOOKS
    __parsec_bench_end();
Only in parsec-2.0-modified/pkgs/kernels/dedup/src: dedup.c~
diff -crB parsec-2.0/pkgs/kernels/dedup/src/encoder.c parsec-2.0-modified/pkgs/kernels/dedup/src/encoder.c
*** parsec-2.0/pkgs/kernels/dedup/src/encoder.c	2009-01-27 19:19:20.000000000 -0600
--- parsec-2.0-modified/pkgs/kernels/dedup/src/encoder.c	2019-04-04 11:20:46.288268733 -0500
***************
*** 10,15 ****
--- 10,17 ----
  #include "binheap.h"
  #include "tree.h"
  
+ #include <heartbeat-accuracy-power.h>
+ 
  #ifdef ENABLE_PARSEC_HOOKS
  #include <hooks.h>
  #endif
***************
*** 23,30 ****
--- 25,791 ----
  
  #define INITIAL_SIZE 4096
  
+ extern heartbeat_t heart;
  extern config * conf;
  
+ 
+ //---------------------------------------------------
+ // Control stuff
+ 
+ int current_action = -1;
+ int h1, h2, h3, h4;
+ int max_actions = 0;
+ 
+ typedef struct {
+   int beat;
+   double rate;
+   int state;
+ } controller_log_entry_t;
+ 
+ 
+ controller_log_entry_t controller_log[1000];
+ 
+ 
+ #define FAST 1
+ #define SLOW 1
+ 
+ #if FAST 
+ double p1 = 0.0;
+ double p2 = 0.0;
+ double z1 = 0.0;
+ #elif SLOW
+ const double p1 = 0.01;
+ const double p2 = 0.1;
+ const double z1 = 0.05;
+ #else
+ const double p1 = -0.5;
+ const double p2 =  0.0;
+ const double z1 =  0.0;
+ #endif
+ 
+ const double mu = 1.0;
+ //double last_speedup = 1.0;
+ #define STARTING_POWERUP 7.4
+ #define STARTING_SPEEDUP 3
+ double last_powerup = STARTING_POWERUP;
+ double last_speedup = STARTING_SPEEDUP;
+ 
+ double act_acc  = 0.0;                 // and the idled application
+ 
+ double power_u         = STARTING_POWERUP;                   // control variable
+ double power_uo        = STARTING_POWERUP;                   // old value for the control variable
+ double power_uoo       = STARTING_POWERUP;
+ double power_e         = 100000;
+ double power_eo        = 100000;
+ 
+ double speed_u         = STARTING_SPEEDUP;                   // control variable
+ double speed_uo        = STARTING_SPEEDUP;                   // old value for the control variable
+ double speed_uoo       = STARTING_SPEEDUP;
+ double speed_e         = 100000;
+ double speed_eo        = 100000;
+ 
+ int state_1 = 0;
+ int state_2 = 0;
+ int power_tdo_state_1 = 0;
+ int power_tdo_state_2 = 0;
+ int speed_tdo_state_1 = 0;
+ int speed_tdo_state_2 = 0;
+ int current_beat = 0;
+ int npids = 0;
+ pid_t pids[128]; 
+ int apps[1024];
+ 
+ 
+ int get_all_subpids(pid_t pid, pid_t* pids) {
+   int   n=0;
+   FILE  *cret;
+   int   stret;
+   char  pid_string[128];
+   char  cretpids[100];	
+   sprintf(cretpids,"ps -eLf | awk '(/%d/) && (!/awk/) {print $4}'",pid);
+   cret = popen(cretpids, "r");
+ 
+   if (cret == NULL) { 
+     printf("Error in popen\n"); 
+     exit(-1); 
+   }
+ 
+   while (fgets(pid_string, 128, cret) != NULL)  { 
+       pids[n] = atoi(pid_string); 
+       printf(" from ps - %d\n", pids[n]);
+       n++; 
+     }
+ 
+   stret = pclose(cret);
+ 
+   if (stret == -1) { 
+     printf("Error in pclose\n"); 
+     exit(-1); 
+   }
+ 
+   return n;
+ }
+ 
+ typedef int state_id_t;
+ 
+ //#define NSTATES 17
+ #define NSYSSTATES 53
+ //#define NSYSSTATES 12
+ #define NAPPSTATES 52
+ 
+ typedef struct {
+   int id;
+ 
+   double speedup;
+   double cost;
+ } control_state_t;
+ 
+ typedef struct {
+ 
+   int id;
+ 
+   double freq;
+   int cores; 
+ } power_state_t;
+ 
+ typedef struct {
+   int id;
+ 
+   int ref;
+   int range;
+   int subme;
+ } speed_state_t;
+ 
+ typedef struct {
+   int id;
+ 
+   int ref;
+   int range;
+   int subme;
+ } accuracy_state_t;
+ 
+ 
+ control_state_t power_controller_states[] = {
+ #if NSYSSTATES == 53
+ {	0	,	1	,	1	},
+ {	1	,	1.163271732	,	1.065459386	},
+ {	2	,	1.326450802	,	1.152370031	},
+ {	3	,	2.000779119	,	1.158258946	},
+ {	4	,	2.342362224	,	1.255978706	},
+ {	5	,	2.998628978	,	1.299315462	},
+ {	6	,	3.497754833	,	1.439517358	},
+ {	7	,	3.998042748	,	1.444595407	},
+ {	8	,	4.008467244	,	1.589721291	},
+ {	9	,	4.971273774	,	1.592954925	},
+ {	10	,	5.930045717	,	1.726970261	},
+ {	11	,	6.112010628	,	1.752157068	},
+ {	12	,	6.294323495	,	1.772866618	},
+ {	13	,	6.540468322	,	1.816738742	},
+ {	14	,	6.830129396	,	1.847993334	},
+ {	15	,	7.014754091	,	1.875424987	},
+ {	16	,	7.22679923	,	1.895050481	},
+ {	17	,	7.363138412	,	2.029663413	},
+ {	18	,	7.673919847	,	2.073628968	},
+ {	19	,	7.872333244	,	2.092926031	},
+ {	20	,	8.135646106	,	2.131456092	},
+ {	21	,	8.391979993	,	2.167973466	},
+ {	22	,	8.404035533	,	2.301570847	},
+ {	23	,	8.711506659	,	2.349388177	},
+ {	24	,	8.888993528	,	2.362690163	},
+ {	25	,	9.282032517	,	2.425433104	},
+ {	26	,	9.57516275	,	2.454561209	},
+ {	27	,	9.739863181	,	2.636924624	},
+ {	28	,	10.0788924	,	2.687586586	},
+ {	29	,	10.4058207	,	2.74523928	},
+ {	30	,	10.79348906	,	2.769645477	},
+ {	31	,	10.80531768	,	2.974609988	},
+ {	32	,	11.15136748	,	3.019535793	},
+ {	33	,	11.51035878	,	3.096745832	},
+ {	34	,	11.91013564	,	3.121659746	},
+ {	35	,	12.18132289	,	3.376517983	},
+ {	36	,	13.08318039	,	3.442629909	},
+ {	37	,	13.29497213	,	3.812376705	},
+ {	38	,	13.69964495	,	3.880726313	},
+ {	39	,	14.18314966	,	3.955659357	},
+ {	40	,	14.38812127	,	4.260517126	},
+ {	41	,	14.81921322	,	4.346649056	},
+ {	42	,	15.35247753	,	4.420098325	},
+ {	43	,	15.36429858	,	4.744361745	},
+ {	44	,	15.84191262	,	4.828515862	},
+ {	45	,	16.51979142	,	4.96835753	},
+ {	46	,	16.97220796	,	5.334766603	},
+ {	47	,	17.67476894	,	5.486239027	},
+ {	48	,	18.11240302	,	5.917762179	},
+ {	49	,	18.7258797	,	6.043033844	},
+ {	50	,	18.99855523	,	7.015605922	},
+ {	51	,	19.68798937	,	7.176472013	},
+ {	52	,	20.52524998	,	7.349292258	}
+ #else
+ {	0	,	1	,	1	},
+ {	1	,	1.163271732	,	1.065459386	},
+ {	2	,	1.326450802	,	1.152370031	},
+ {	3	,	1.488810095	,	1.24329113	},
+ {	4	,	1.650068787	,	1.353627355	},
+ {	5	,	1.80753684	,	1.468675067	},
+ {	6	,	1.967211766	,	1.584900326	},
+ {	7	,	2.125857007	,	1.733380748	},
+ {	8	,	2.280853438	,	1.860046486	},
+ {	9	,	2.437647326	,	2.042786943	},
+ {	10	,	2.591623527	,	2.253330233	},
+ {	11	,	3.080682296	,	3.09230493	}
+ #endif
+ };
+ 
+ control_state_t speed_controller_states[] = {
+ {	0	,	1	,	0	},
+ #if 1
+ {	1	,	1.077	,	0.11	},
+ {	2	,	1.0797	,	0.1175	},
+ {	3	,	1.1032	,	0.14	},
+ {	4	,	1.1902	,	0.16	},
+ {	5	,	1.2182	,	0.21	},
+ {	6	,	1.2187	,	0.23	},
+ {	7	,	1.2415	,	0.2425	},
+ {	8	,	1.3105	,	0.2775	},
+ {	9	,	1.333	,	0.3025	},
+ {	10	,	1.404	,	0.4325	},
+ {	11	,	1.4055	,	0.4325	},
+ {	12	,	1.4257	,	0.4725	},
+ {	13	,	1.52	,	0.535	},
+ {	14	,	1.5405	,	0.6475	},
+ {	15	,	1.5407	,	0.6475	},
+ {	16	,	1.556	,	0.7475	},
+ {	17	,	1.6357	,	0.8425	},
+ {	18	,	1.653	,	0.905	},
+ {	19	,	1.674	,	0.9575	},
+ {	20	,	1.676	,	0.9575	},
+ {	21	,	1.8322	,	1.14	},
+ {	22	,	1.8402	,	1.1475	},
+ {	23	,	1.915	,	1.32	},
+ {	24	,	1.936	,	1.33	},
+ {	25	,	1.9557	,	1.38	},
+ {	26	,	1.9565	,	1.38	},
+ {	27	,	2.0372	,	1.595	},
+ {	28	,	2.0842	,	2.13	},
+ //{	29	,	2.1747	,	2.4025	},
+ //{	30	,	2.192	,	2.435	},
+ {	31	,	2.25 /*2.2545*/	,	2.485	},
+ {	32	,	2.2665	,	2.4975	},
+ {	33	,	2.3835	,	2.68	},
+ {	34	,	2.416	,	2.6875	},
+ {	35	,	2.4507	,	2.7375	},
+ {	36	,	2.5765	,	2.9575	},
+ {	37	,	2.589	,	3.0125	},
+ {	38	,	2.6955	,	3.5325	},
+ {	39	,	2.701	,	3.545	},
+ {	40	,	2.7665	,	4.82	},
+ {	41	,	2.827	,	4.845	},
+ {	42	,	2.8807	,	4.85	},
+ {	43	,	3.1925	,	5.18	},
+ {	44	,	3.2432	,	5.2775	},
+ {	45	,	3.3797	,	5.4325	},
+ {	46	,	3.3822	,	5.5775	},
+ {	47	,	3.4307	,	5.6225	},
+ {	48	,	3.457	,	5.705	},
+ {	49	,	3.7525	,	5.7325	},
+ {	50	,	3.7615	,	5.7325	},
+ {	51	,	4.1185	,	6.2425	},
+ {	52	,	4.2537	,	6.255	},
+ #endif
+ {	53	,	7/*4.2615*/	,	6.295	}
+ };
+ 
+ speed_state_t speed_states[] = {
+ {	0	,	5,16,7	},
+ #if 1
+ {	1	,	5,15,7	},
+ {	2	,	5,14,7	},
+ {	3	,	5,12,7	},
+ {	4	,	5,10,7	},
+ {	5	,	4,15,7	},
+ {	6	,	4,14,7	},
+ {	7	,	4,12,7	},
+ {	8	,	4,11,7	},
+ {	9	,	4,10,7	},
+ {	10	,	3,15,7	},
+ {	11	,	3,14,7	},
+ {	12	,	3,12,7	},
+ {	13	,	3,10,7	},
+ {	14	,	3,9,7	},
+ {	15	,	3,8,7	},
+ {	16	,	2,12,7	},
+ {	17	,	3,6,7	},
+ {	18	,	2,10,7	},
+ {	19	,	2,9,7	},
+ {	20	,	2,8,7	},
+ {	21	,	1,13,7	},
+ {	22	,	1,12,7	},
+ {	23	,	1,11,7	},
+ {	24	,	1,10,7	},
+ {	25	,	1,9,7	},
+ {	26	,	1,8,7	},
+ {	27	,	1,6,7	},
+ {	28	,	1,4,7	},
+ //{	29	,	2,7,6	},
+ //{	30	,	2,6,6	},
+ {	31	,	1,13,6	},
+ {	32	,	1,12,6	},
+ {	33	,	1,11,6	},
+ {	34	,	1,10,6	},
+ {	35	,	1,9,6	},
+ {	36	,	1,7,6	},
+ {	37	,	1,6,6	},
+ {	38	,	1,5,6	},
+ {	39	,	1,4,6	},
+ {	40	,	3,11,1	},
+ {	41	,	3,10,1	},
+ {	42	,	3,9,1	},
+ {	43	,	3,7,1	},
+ {	44	,	3,6,1	},
+ {	45	,	3,5,1	},
+ {	46	,	3,4,1	},
+ {	47	,	1,12,1	},
+ {	48	,	2,7,1	},
+ {	49	,	1,9,1	},
+ {	50	,	1,8,1	},
+ {	51	,	1,6,1	},
+ {	52	,	1,5,1	},
+ #endif
+ {	53	,	1,4,1	}
+ };
+ 
+ power_state_t power_states[] = {
+ #if NSYSSTATES == 53
+ {	0	,	1.2	,	1	},
+ {	1	,	1.4	,	1	},
+ {	2	,	1.6	,	1	},
+ {	3	,	1.2	,	2	},
+ {	4	,	1.4	,	2	},
+ {	5	,	1.2	,	3	},
+ {	6	,	1.4	,	3	},
+ {	7	,	1.2	,	4	},
+ {	8	,	1.6	,	3	},
+ {	9	,	1.2	,	5	},
+ {	10	,	1.2	,	6	},
+ {	11	,	1.2	,	7	},
+ {	12	,	1.2	,	8	},
+ {	13	,	1.2	,	9	},
+ {	14	,	1.2	,	10	},
+ {	15	,	1.2	,	11	},
+ {	16	,	1.2	,	12	},
+ {	17	,	1.4	,	8	},
+ {	18	,	1.4	,	9	},
+ {	19	,	1.4	,	10	},
+ {	20	,	1.4	,	11	},
+ {	21	,	1.4	,	12	},
+ {	22	,	1.6	,	8	},
+ {	23	,	1.6	,	9	},
+ {	24	,	1.6	,	10	},
+ {	25	,	1.6	,	11	},
+ {	26	,	1.6	,	12	},
+ {	27	,	1.8	,	9	},
+ {	28	,	1.8	,	10	},
+ {	29	,	1.8	,	11	},
+ {	30	,	1.8	,	12	},
+ {	31	,	2	,	9	},
+ {	32	,	2	,	10	},
+ {	33	,	2	,	11	},
+ {	34	,	2	,	12	},
+ {	35	,	2.2	,	10	},
+ {	36	,	2.2	,	12	},
+ {	37	,	2.4	,	10	},
+ {	38	,	2.4	,	11	},
+ {	39	,	2.4	,	12	},
+ {	40	,	2.6	,	10	},
+ {	41	,	2.6	,	11	},
+ {	42	,	2.6	,	12	},
+ {	43	,	2.8	,	10	},
+ {	44	,	2.8	,	11	},
+ {	45	,	2.8	,	12	},
+ {	46	,	3	,	11	},
+ {	47	,	3	,	12	},
+ {	48	,	3.2	,	11	},
+ {	49	,	3.2	,	12	},
+ {	50	,	3.201	,	10	},
+ {	51	,	3.201	,	11	},
+ {	52	,	3.201	,	12	}
+ #else
+ {	0	,	1.2	,	1	},
+ {	1	,	1.4	,	1	},
+ {	2	,	1.6	,	1	},
+ {	3	,	1.8	,	1	},
+ {	4	,	2.0	,	1	},
+ {	5	,	2.2	,	1	},
+ {	6	,	2.4	,	1	},
+ {	7	,	2.6	,	1	},
+ {	8	,	2.8	,	1	},
+ {	9	,	3.0	,	1	},
+ {	10	,	3.2	,	1	},
+ {	11	,	3.201	,	1	}
+ #endif
+ };
+ 
+ double x_hat_minus = 0.0;
+ double x_hat = .2;
+ double Q = .00001;
+ double P = 1.0;
+ double P_minus = 0.0;
+ double H = 0.0;
+ double R = .01;
+ double K = 0.0; 
+ 
+ typedef struct {  
+   double x_hat_minus;
+   double x_hat;
+   double Q;
+   double P;
+   double P_minus;
+   double H;
+   double R;
+   double K;
+ } kalman_filter_t;
+ 
+ kalman_filter_t filter_init = {0.0, 0.3125, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ 
+ #define HEURISTIC_W 0
+ 
+ int adaptation_level = 1;
+ 
+ kalman_filter_t power_filter = {0.0, 0.2, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ kalman_filter_t speed_filter = {0.0, 0.3125, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ 
+ double get_base_value(kalman_filter_t* k,
+ 		      double current_measurement, 
+ 		      double last_coeff) {
+   
+   k->x_hat_minus = k->x_hat;
+   k->P_minus = k->P + k->Q;
+   
+   k->H = last_coeff;
+   k->K = k->P_minus * k->H /( k->H * k->P_minus* k->H + k->R);
+   k->x_hat = k->x_hat_minus + k->K * (current_measurement - k->H * k->x_hat_minus);
+   k->P = (1 - k->K * k->H) * k->P_minus;
+   
+   return 1.0/k->x_hat;
+ }
+ 
+ void get_power_signal(double current_power, 
+ 		      double desired_power,
+ 		      double base_power,
+ 		      double* e,
+ 		      double* eo,
+ 		      double* u,
+ 		      double* uo,
+ 		      double* uoo) {
+ 
+   if(current_power < desired_power) {
+     p1 = 0.1;
+     p2 = 0.8;
+     z1 = 0.2;
+     p1 = 0;
+     p2 = 0;
+     z1 = 0;
+   }
+   else {
+     p1 = 0;
+     p2 = 0;
+     z1 = 0;
+ 
+   }
+ 
+   //p1 = 0.1;
+   //p2 = 0.8;
+   //z1 = 0.7;
+   
+   double A         = -(-p1*z1 - p2*z1 + mu*p1*p2 - mu*p2 + p2 - mu*p1 + p1 + mu);
+   double B         = -(-mu*p1*p2*z1 + p1*p2*z1 + mu*p2*z1 + mu*p1*z1 - mu*z1 - p1*p2);
+   double C         = ((mu - mu*p1)*p2 + mu*p1 - mu)*base_power;
+   double D         = ((mu*p1-mu)*p2 - mu*p1 + mu)*base_power*z1;
+   double F         = 1/(z1-1);
+   
+   double y = current_power;
+   *e = desired_power - y;
+   
+   //printf("u = %f, uo = %f, e = %f, A = %f, B= %f, C = %f, D= %f, F = %f\n",
+   // *u, *uo, *e, A, B, C, D, F);
+   
+   *u = F * (A*(*uo) + B*(*uoo) + C*(*e) + D*(*eo));
+ 
+   
+   
+   if (*u<1)  *u=1;        
+   if (*u>power_controller_states[NSYSSTATES-1].cost) *u=power_controller_states[NSYSSTATES-1].cost;  
+   *uoo = *uo;            // saving values
+   *uo  = *u;
+   *eo  = *e;
+ }
+ 
+ double max_speedup;
+ 
+ void get_speed_signal(double current_speed, 
+ 		      double desired_speed,
+ 		      double base_speed,
+ 		      double* e,
+ 		      double* eo,
+ 		      double* u,
+ 		      double* uo,
+ 		      double* uoo) {
+   //double p1 = 0.1;
+   //double p2 = 0.2;
+   //double z1 = 0.15; 
+ 
+   double A         = -(-p1*z1 - p2*z1 + mu*p1*p2 - mu*p2 + p2 - mu*p1 + p1 + mu);
+   double B         = -(-mu*p1*p2*z1 + p1*p2*z1 + mu*p2*z1 + mu*p1*z1 - mu*z1 - p1*p2);
+   double C         = ((mu - mu*p1)*p2 + mu*p1 - mu)*base_speed;
+   double D         = ((mu*p1-mu)*p2 - mu*p1 + mu)*base_speed*z1;
+   double F         = 1/(z1-1);
+   
+   double y = current_speed;
+   *e = desired_speed - y;
+   
+   
+   //*u = F * (A*(*uo) + B*(*uoo) + C*(*e) + D*(*eo));
+ 
+   *u = *uo + *e/base_speed;
+ 
+   //  printf("u = %f, uo = %f, e = %f, base_speed = %f\n",
+   // *u, *uo, *e, base_speed);
+ 
+ 
+   //double max_speedup = speed_controller_states[NAPPSTATES-1].speedup * 
+   //power_controller_states[NSYSSTATES-1].speedup;
+   if (*u<1)  *u=1;        
+   if (*u>max_speedup) *u=max_speedup;  
+   *uoo = *uo;            // saving values
+   *uo  = *u;
+   *eo  = *e;
+ }
+ 
+ 
+ int power_translate(double u, 
+ 		    const control_state_t* states, 
+ 		    int nstates) {
+   int i;
+ 
+   control_state_t cs = states[nstates-1];
+ 
+   double efficiency = cs.speedup/cs.cost;
+   int index = nstates-1;
+ 
+ 
+   for(i = 0; i < nstates; i++) {
+     if(states[i].cost >= u) {
+ 
+       double new_eff = states[i].speedup/states[i].cost;
+       if(new_eff > efficiency) {
+ 
+ 	cs = states[i];
+ 	efficiency = new_eff;
+ 	index = i;
+       }	
+     }
+   }
+ 
+   return index;
+ }
+ 
+ int power_translate2(double u, 
+ 		     const control_state_t* states, 
+ 		     int state1,
+ 		     const power_state_t* pstates,
+ 		     int nstates) {
+   int i;
+   
+   control_state_t cs = states[0];
+   
+   double efficiency = cs.speedup;///cs.cost;
+     int index = 0;
+     
+     for(i = 0; i < nstates; i++) {
+       if(states[i].cost < u && pstates[state1].cores == pstates[i].cores) {
+ 	
+ 	double new_eff = states[i].speedup;///states[i].cost;
+ 	  if(new_eff >= efficiency) {
+ 	    
+ 	    cs = states[i];
+ 	    efficiency = new_eff;
+ 	    index = i;
+ 	  }	
+       }
+     }
+     
+     return index;
+ }
+ 
+ int speed_translate(double u, 
+ 		    const control_state_t* states, 
+ 		    int nstates) {
+   int i;
+ 
+   control_state_t cs = states[nstates-1];
+ 
+   double efficiency = cs.speedup/(cs.cost+1);
+   int index = nstates-1;
+ 
+ 
+   for(i = 0; i < nstates; i++) {
+     if(states[i].speedup >= u) {
+ 
+       //index = i;
+       //break;
+       double new_eff = states[i].speedup/(states[i].cost+1);
+       if(new_eff > efficiency) {
+ 
+       	cs = states[i];
+ 	efficiency = new_eff;
+ 	index = i;
+       }	
+     }
+   }
+ 
+   return index;
+ }
+ 
+ int speed_translate2(double u, 
+ 		     const control_state_t* states, 
+ 		     int nstates) {
+   int i;
+   
+   control_state_t cs = states[0];
+   
+   double efficiency = cs.speedup/(cs.cost+1);
+     int index = 0;
+     
+     for(i = 0; i < nstates; i++) {
+       if(states[i].speedup < u) {
+ 	
+ 	double new_eff = states[i].speedup/(states[i].cost+1);
+ 	  if(new_eff >= efficiency) {
+ 	    
+ 	    cs = states[i];
+ 	    efficiency = new_eff;
+ 	    index = i;
+ 	  }	
+       }
+     }
+     
+     return index;
+ }
+ 
+ 
+ int last_speed_state = 0;	
+ int control_nref = 5;
+ int control_range = 16;
+ int control_refine = 7;
+ 
+ void speed_apply(int state,
+ 		 speed_state_t* ps,
+ 		 int nstates) {
+   
+   char command[4096];
+   int i;
+   
+   //printf("APPLYING SPPED STATE %d\n", state);
+ 
+   if(last_speed_state ==state)
+     return;
+   else 
+     last_speed_state = state;
+ 
+ #if 0
+   control_nref = ps[state].ref;
+   control_range = ps[state].range;
+   control_refine = ps[state].subme;
+ #endif
+   //sprintf(command,"echo \"%d\n%d\n%d\n\" >  x264_settings",
+   //	  ps[state].ref,ps[state].range,ps[state].subme);
+   //system(command);
+   
+ }
+ 
+ int last_power_state = 52;
+ int last_cores = 12;
+ int power_apply(int state_id,
+ 		pid_t* pid,
+ 		int npids,
+ 		const power_state_t* states,
+ 		int nstates) {
+   
+   int i;
+   
+   int rc = 0;
+   int retvalsyscall1 = 0;
+   int retvalsyscall2 = 0;
+   power_state_t state = states[0];
+   char command[4096];
+   
+   if(state_id == last_power_state)
+     return 0;
+   else
+     last_power_state = state_id;
+   
+   for(i = 0; i < nstates; i++) {
+     if( states[i].id == state_id) {
+       state = states[i];
+       break;
+     }
+   }
+ 
+ #if 0
+   sprintf(command,"taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; ",
+ 	  state.cores-1, getpid(), 
+ 	  state.cores-1, pid[1],
+ 	  state.cores-1, pid[2],
+ 	  state.cores-1, pid[3],
+ 	  state.cores-1, pid[4],
+ 	  state.cores-1, pid[5],
+ 	  state.cores-1, pid[6],
+ 	  state.cores-1, pid[7],
+ 	  state.cores-1, pid[8],
+ 	  state.cores-1, pid[9],
+ 	  state.cores-1, pid[10],
+ 	  state.cores-1, pid[11]);
+   retvalsyscall1 = system(command);
+ #endif
+ 
+ #if 1
+ 
+   if(last_cores != state.cores) {
+     sprintf(command,"taskset -p -c 0-%d  %d > /dev/null",state.cores-1, getpid());
+     retvalsyscall1 = system(command);
+     //printf("%s\n", command);
+     for( i = 1; i < npids; i++) {
+       sprintf(command,"taskset -p -c 0-%d  %d > /dev/null",state.cores-1, pid[i]);
+       //printf("%s\n", command);
+       retvalsyscall1 = system(command);
+     }
+     last_cores = state.cores;
+   }
+ #endif 
+ 
+ #if 1
+   for(i = 0; i < 12; i++) {
+     sprintf(command,
+ 	    "echo %d > /sys/devices/system/cpu/cpu%d/cpufreq/scaling_setspeed", 
+ 	    (int) (state.freq * 1000000), i);
+     
+     retvalsyscall2 = system(command);
+     if(retvalsyscall2 != 0)
+       fprintf(stderr, "ERROR setting clocks: %d\n", retvalsyscall2);
+   }
+ #endif
+   
+   if(retvalsyscall1 || retvalsyscall2) {
+     rc = -1;
+   }
+ 
+   return rc;
+ }
+ extern int window_size;
+ extern float power_target;
+ //----------------------------------------------------
+ 
+ 
  /*
   * The pipeline model for Encode is DataProcess->FindAllAnchor->ChunkProcess->Compress->SendBlock
   * Each stage has basically three steps:
***************
*** 151,156 ****
--- 912,919 ----
  /*
   * Compress the chunks
   */
+ int counter = 0;
+ 
  void *Compress(void * targs) {
    struct thread_args *args = (struct thread_args *)targs;
    const int qid = args->tid / MAX_THREADS_PER_QUEUE;
***************
*** 187,193 ****
      tmp_count ++;
      
      //put the item in the next queue for the write thread
!     if (tmp_count >= ITEM_PER_INSERT) {      
        enqueue(&send_que[qid], &tmp_count, (void **)tmpbuf);
      }
    }
--- 950,1182 ----
      tmp_count ++;
      
      //put the item in the next queue for the write thread
!     if (tmp_count >= ITEM_PER_INSERT) {
!       int old_counter = __sync_fetch_and_add(&counter, 1);
!       if(old_counter % 40 == 0) {
! 	//int old_counter = counter;
! 	heartbeat(&heart,old_counter, 1);
! #if 1// Power and performance control
! 	int PERIOD = window_size;
! 	heartbeat_record_t hbr;
! 	hb_get_current(&heart, &hbr);
! 	
! 	double power_goal = power_target;
! 	double speed_goal = 1.4;
! 	
! 	//if(hbr.beat >= 100) {/*power_goal = 35.0;*/ speed_goal = 4.615;}
! 	//if(hbr.beat >= 500) {speed_goal = 14.8;}
! 	//if(hbr.beat >= 1000) {speed_goal = 10.6;}
! 	
! 	//	printf("power goal is 70\n");
! 	
! 	int old_action = __sync_fetch_and_add(&current_action,1);
! 	if(old_action == PERIOD -1 ) {
! 	  current_action = 0;
! 	}
! 	if( old_action == 0) {
! 	  double act_power = hbr.window_power;
! 	  double act_speed = hbr.window_rate;
! 	  
! 	  double base_power = get_base_value(&power_filter, act_power, last_powerup);
! 	  
! 	  get_power_signal(act_power,
! 			   power_goal,
! 			   base_power,
! 			   &power_e,
! 			   &power_eo,
! 			   &power_u,
! 			   &power_uo,
! 			   &power_uoo);
! 	  
! 	  double act_power_up = last_powerup = power_u;
! 	  
! 	  power_tdo_state_1 = power_translate(power_u, 
! 					      power_controller_states, 
! 					      (int) NSYSSTATES);
! 	  power_tdo_state_2 = power_translate2(power_u, 
! 					       power_controller_states,
! 					       power_tdo_state_1,
! 					       power_states,
! 					       (int) NSYSSTATES);
! 	  
! 	  //power_tdo_state_1 = power_tdo_state_2;
! 
! 	  if(power_controller_states[power_tdo_state_1].speedup 
! 	     <= power_controller_states[power_tdo_state_2].speedup) {
! 	    power_tdo_state_1 = power_tdo_state_2;
! 	  }
! 	  
! 	  double power_time1;
! 	  
! 	  if(power_controller_states[power_tdo_state_1].cost == 
! 	     power_controller_states[power_tdo_state_2].cost ||
! 	     power_u == power_controller_states[power_tdo_state_1].cost) 
! 	    power_time1 = 1.0;
! 	  else
! 	    power_time1 = (power_u - 
! 		     power_controller_states[power_tdo_state_2].cost) /
! 	      (power_controller_states[power_tdo_state_1].cost - 
! 	       power_controller_states[power_tdo_state_2].cost);
! 	  
! 	  double power_time2 = 1.0 - power_time1;
! 	  
! 	  h1 = power_time1*PERIOD+0.5;
! 	  h2 = PERIOD-h1;
! 	  
! #if 1
! 	  printf("\nCONTROL counter = %d, beat=%lld, power=%f, des=%f, w=%f, u=%f, uo=%f, state=%d, state2=%d, %f, %f, %d, %d\n\n",
! 		 old_counter, hbr.beat,act_power,power_goal,1.0/base_power,power_u,last_powerup,power_controller_states[power_tdo_state_1].id, power_controller_states[power_tdo_state_2].id,  power_time1, power_time2, h1, h2); 
! 	  
! #endif
! 	  
! 	  if(npids == 0) {
! 	    npids = get_all_subpids(getpid(), pids);
! 	  }
! 	  power_apply(power_tdo_state_1,
! 		      pids,
! 		      npids,
! 		      power_states,
! 		      NSYSSTATES);
! 	  
! 	  if(h1 == 0)
! 	    power_apply(power_tdo_state_2,
! 			pids,
! 			npids,
! 			power_states,
! 			NSYSSTATES);
! 	}
! 	
! 	if (old_action == h1) {
! 	  if(npids == 0) {
! 	    npids = get_all_subpids(getpid(), pids);
! 	  }
! 	  power_apply(power_tdo_state_2,
! 		      pids,
! 		      npids,
! 		      power_states,
! 		      NSYSSTATES);
! 	  
! 	}
!       
! #endif
!       }
!       //counter++;
! 
! 
! #if 0
! 		    heartbeat_record_t hbr;
! 		    hb_get_current(&heart, &hbr);
! 		    int PERIOD = 8300;
! 
! 		    //printf("Current action = %d, rate = %f\n", current_action, hbr.window_rate);
! 	if( current_action == 0 && hbr.window_rate != 0.0) {
! 	  int i;
! 	  min_rate = hb_get_min_rate(&heart);
! 	  max_rate = hb_get_max_rate(&heart);
! 	  des_rate = (max_rate+min_rate)/2;
! 	  act_rate = hbr.window_rate;
! 	  
! 	  
! 
! 	  w = get_w(act_rate, last_speedup);
! 	  //printf("w = %f   %f\n", w, act_rate);
! 	  get_u(act_rate, 
! 		des_rate, 
! 		w, 
! 		&e, 
! 		&eo, 
! 		&u, 
! 		&uo, 
! 		&uoo);
! 	  //printf("w = %f   %f\n", w, u);
! 
! 	  //if(!RACE && hbr.beat > 1*PERIOD)
! 	  state = translate(u, controller_states, (int) NSTATES);
! 	  state = 32;
! 
! 	  double act_speedup = u;
! 	  
! 	  double target_speed = u/w;
! 	  
! 	  double max_speed = controller_states[state].speedup/w;
! 	  
! 	  last_speedup = u;
! 	  
! 	  target_time = 
! 	    (double) PERIOD / target_speed;
! 	  fastest_time = 
! 	    (double) PERIOD / max_speed;
! 	  idle_time = 
! 	    target_time - fastest_time;
! 	  
! 	  if(target_speed == max_speed) {
! 	    target_time = (double) PERIOD / des_rate;
! 	  }
! 	  	  
! #if 0
! 	  fprintf(stderr,"current hb = %d, goal = %f, hr = %f, u = %f, w = %f, PERIOD = %f, max_speed = %f, target_speed = %f, target_time = %f, state = %d, last state = %d\n",
! 		 current_beat, des_rate, act_rate, u, w, (double) PERIOD, max_speed, target_speed, target_time, state);
! #endif
! 
! 	  struct timespec time_info;
! 	  clock_gettime( CLOCK_REALTIME, &time_info );
! 	  
! 	  start_time = (double) time_info.tv_sec + 
! 	    ((double) time_info.tv_nsec)/1000000000.0 ;
!       
! 	  apply(state,
! 		pids,
! 		npids,
! 		power_states,
! 		NSTATES);
! 	}
! 	
! 	current_action++;
! 	//	wait_for = current_beat+1;
! 	if(current_action == PERIOD) {
! 	  struct timespec time_info;
! 	  clock_gettime( CLOCK_REALTIME, &time_info );
! 	  
! 	  double stop_time = (double) time_info.tv_sec + 
! 	    ((double) time_info.tv_nsec)/1000000000.0 ;
! 	  
! 	  idle_time = target_time - (stop_time-start_time);
! 	  
! 	  //fprintf(stderr, "target_time = %f, idle_time = %f, fastest_time = %f, fast_time = %f\n",
! 	  //target_time, idle_time, stop_time-start_time);
!       printf("%d %f %f %f\n", current_beat, ((float)power_states[state].cores)/(8.0), power_states[state].freq/2.394, (target_time - idle_time)/target_time);
! 
! 	  if(idle_time > 0.0) {
! 	    struct timespec sleep_time;
! 	    struct timespec rem_time;
! 	    char command[4096];
! 
! 
! 	    total_time += target_time;
! 	    total_idle_time += idle_time;
! 	    sleep_time.tv_sec = (time_t) floor(idle_time);
! 	    sleep_time.tv_nsec = (long)  ((idle_time - floor(idle_time))*nano);
! 	    
! 	    //stop_app(pids, npids);
! 	    
! 	    //printf("About to sleep...at hb %d\n", current_beat);
! 	    //printf("About to sleep... %f\n", idle_time);
! 
! 	    sprintf(command,
! 		    "./sleeper-one-pid %lld %f %d %d %d %d %d %d %d",
! 		    (long long) getpid(), idle_time, pids[1], pids[2], pids[3], pids[4], pids[5], pids[6], pids[7]);
!  
! 	    system(command);
! 
! 	    //nanosleep(&sleep_time, &rem_time);
! 	    //cont_app(pids, npids);
! 	  }
! 	  current_action = 0;
! 	}
! #endif	
! 	current_beat++;
! 	// End Control
!       /*-----------------------------------------------------*/
        enqueue(&send_que[qid], &tmp_count, (void **)tmpbuf);
      }
    }
***************
*** 768,774 ****
    int fd = 0;
    struct hash_entry * entry; 
  
!   fd = open(conf->outfile, O_CREAT|O_TRUNC|O_WRONLY|O_TRUNC);
    if (fd < 0) {
      perror("SendBlock open");
      return NULL;
--- 1757,1763 ----
    int fd = 0;
    struct hash_entry * entry; 
  
!   fd = open(conf->outfile, O_CREAT|O_TRUNC|O_WRONLY|O_TRUNC, S_IRGRP | S_IWUSR | S_IRUSR | S_IROTH);
    if (fd < 0) {
      perror("SendBlock open");
      return NULL;
Only in parsec-2.0-modified/pkgs/kernels/dedup/src: encoder.c~
diff -crB parsec-2.0/pkgs/kernels/dedup/src/Makefile parsec-2.0-modified/pkgs/kernels/dedup/src/Makefile
*** parsec-2.0/pkgs/kernels/dedup/src/Makefile	2009-01-31 20:28:59.000000000 -0600
--- parsec-2.0-modified/pkgs/kernels/dedup/src/Makefile	2019-04-04 11:20:46.288268733 -0500
***************
*** 7,13 ****
  BIGFILE_CFLAGS=$(shell getconf LFS_CFLAGS)
  
  CFLAGS += -Wall -std=c99 -fno-strict-aliasing -D_XOPEN_SOURCE=600
! LIBS += -lcrypto -lz
  
  DEDUP_OBJ =  hashtable.o queue.o util.o binheap.o tree.o decoder.o dedup.o rabin.o encoder.o
  
--- 7,13 ----
  BIGFILE_CFLAGS=$(shell getconf LFS_CFLAGS)
  
  CFLAGS += -Wall -std=c99 -fno-strict-aliasing -D_XOPEN_SOURCE=600
! LIBS += -lcrypto -lz -lm
  
  DEDUP_OBJ =  hashtable.o queue.o util.o binheap.o tree.o decoder.o dedup.o rabin.o encoder.o
  
Only in parsec-2.0-modified/pkgs/kernels/dedup/src: Makefile~
Only in parsec-2.0-modified/pkgs/kernels/streamcluster: inst
Only in parsec-2.0-modified/pkgs/kernels/streamcluster: obj
Only in parsec-2.0-modified/pkgs/kernels/streamcluster/src: #streamcluster.cpp#
diff -crB parsec-2.0/pkgs/kernels/streamcluster/src/streamcluster.cpp parsec-2.0-modified/pkgs/kernels/streamcluster/src/streamcluster.cpp
*** parsec-2.0/pkgs/kernels/streamcluster/src/streamcluster.cpp	2009-01-18 18:34:18.000000000 -0600
--- parsec-2.0-modified/pkgs/kernels/streamcluster/src/streamcluster.cpp	2019-04-04 11:20:24.051747826 -0500
***************
*** 33,38 ****
--- 33,796 ----
  #include <hooks.h>
  #endif
  
+ #include <heartbeat-accuracy-power.h>
+ heartbeat_t heart;
+ int window_size;
+ float power_target;
+ //---------------------------------------------------
+ // Control stuff
+ 
+ int current_action = -1;
+ int h1, h2, h3, h4;
+ int max_actions = 0;
+ 
+ typedef struct {
+   int beat;
+   double rate;
+   int state;
+ } controller_log_entry_t;
+ 
+ 
+ controller_log_entry_t controller_log[1000];
+ 
+ 
+ #define FAST 1
+ #define SLOW 1
+ 
+ #if FAST 
+ double p1 = 0.0;
+ double p2 = 0.0;
+ double z1 = 0.0;
+ #elif SLOW
+ const double p1 = 0.01;
+ const double p2 = 0.1;
+ const double z1 = 0.05;
+ #else
+ const double p1 = -0.5;
+ const double p2 =  0.0;
+ const double z1 =  0.0;
+ #endif
+ 
+ const double mu = 1.0;
+ //double last_speedup = 1.0;
+ #define STARTING_POWERUP 7.4
+ #define STARTING_SPEEDUP 3
+ double last_powerup = STARTING_POWERUP;
+ double last_speedup = STARTING_SPEEDUP;
+ 
+ double act_acc  = 0.0;                 // and the idled application
+ 
+ double power_u         = STARTING_POWERUP;                   // control variable
+ double power_uo        = STARTING_POWERUP;                   // old value for the control variable
+ double power_uoo       = STARTING_POWERUP;
+ double power_e         = 100000;
+ double power_eo        = 100000;
+ 
+ double speed_u         = STARTING_SPEEDUP;                   // control variable
+ double speed_uo        = STARTING_SPEEDUP;                   // old value for the control variable
+ double speed_uoo       = STARTING_SPEEDUP;
+ double speed_e         = 100000;
+ double speed_eo        = 100000;
+ 
+ int state_1 = 0;
+ int state_2 = 0;
+ int power_tdo_state_1 = 0;
+ int power_tdo_state_2 = 0;
+ int speed_tdo_state_1 = 0;
+ int speed_tdo_state_2 = 0;
+ int current_beat = 0;
+ int npids = 0;
+ pid_t pids[128]; 
+ int apps[1024];
+ 
+ 
+ int get_all_subpids(pid_t pid, pid_t* pids) {
+   int   n=0;
+   FILE  *cret;
+   int   stret;
+   char  pid_string[128];
+   char  cretpids[100];	
+   sprintf(cretpids,"ps -eLf | awk '(/%d/) && (!/awk/) {print $4}'",pid);
+   cret = popen(cretpids, "r");
+ 
+   if (cret == NULL) { 
+     printf("Error in popen\n"); 
+     exit(-1); 
+   }
+ 
+   while (fgets(pid_string, 128, cret) != NULL)  { 
+       pids[n] = atoi(pid_string); 
+       printf(" from ps - %d\n", pids[n]);
+       n++; 
+     }
+ 
+   stret = pclose(cret);
+ 
+   if (stret == -1) { 
+     printf("Error in pclose\n"); 
+     exit(-1); 
+   }
+ 
+   return n;
+ }
+ 
+ typedef int state_id_t;
+ 
+ //#define NSTATES 17
+ #define NSYSSTATES 53
+ //#define NSYSSTATES 12
+ #define NAPPSTATES 52
+ 
+ typedef struct {
+   int id;
+ 
+   double speedup;
+   double cost;
+ } control_state_t;
+ 
+ typedef struct {
+ 
+   int id;
+ 
+   double freq;
+   int cores; 
+ } power_state_t;
+ 
+ typedef struct {
+   int id;
+ 
+   int ref;
+   int range;
+   int subme;
+ } speed_state_t;
+ 
+ typedef struct {
+   int id;
+ 
+   int ref;
+   int range;
+   int subme;
+ } accuracy_state_t;
+ 
+ 
+ control_state_t power_controller_states[] = {
+ #if NSYSSTATES == 53
+ {	0	,	1	,	1	},
+ {	1	,	1.163271732	,	1.065459386	},
+ {	2	,	1.326450802	,	1.152370031	},
+ {	3	,	2.000779119	,	1.158258946	},
+ {	4	,	2.342362224	,	1.255978706	},
+ {	5	,	2.998628978	,	1.299315462	},
+ {	6	,	3.497754833	,	1.439517358	},
+ {	7	,	3.998042748	,	1.444595407	},
+ {	8	,	4.008467244	,	1.589721291	},
+ {	9	,	4.971273774	,	1.592954925	},
+ {	10	,	5.930045717	,	1.726970261	},
+ {	11	,	6.112010628	,	1.752157068	},
+ {	12	,	6.294323495	,	1.772866618	},
+ {	13	,	6.540468322	,	1.816738742	},
+ {	14	,	6.830129396	,	1.847993334	},
+ {	15	,	7.014754091	,	1.875424987	},
+ {	16	,	7.22679923	,	1.895050481	},
+ {	17	,	7.363138412	,	2.029663413	},
+ {	18	,	7.673919847	,	2.073628968	},
+ {	19	,	7.872333244	,	2.092926031	},
+ {	20	,	8.135646106	,	2.131456092	},
+ {	21	,	8.391979993	,	2.167973466	},
+ {	22	,	8.404035533	,	2.301570847	},
+ {	23	,	8.711506659	,	2.349388177	},
+ {	24	,	8.888993528	,	2.362690163	},
+ {	25	,	9.282032517	,	2.425433104	},
+ {	26	,	9.57516275	,	2.454561209	},
+ {	27	,	9.739863181	,	2.636924624	},
+ {	28	,	10.0788924	,	2.687586586	},
+ {	29	,	10.4058207	,	2.74523928	},
+ {	30	,	10.79348906	,	2.769645477	},
+ {	31	,	10.80531768	,	2.974609988	},
+ {	32	,	11.15136748	,	3.019535793	},
+ {	33	,	11.51035878	,	3.096745832	},
+ {	34	,	11.91013564	,	3.121659746	},
+ {	35	,	12.18132289	,	3.376517983	},
+ {	36	,	13.08318039	,	3.442629909	},
+ {	37	,	13.29497213	,	3.812376705	},
+ {	38	,	13.69964495	,	3.880726313	},
+ {	39	,	14.18314966	,	3.955659357	},
+ {	40	,	14.38812127	,	4.260517126	},
+ {	41	,	14.81921322	,	4.346649056	},
+ {	42	,	15.35247753	,	4.420098325	},
+ {	43	,	15.36429858	,	4.744361745	},
+ {	44	,	15.84191262	,	4.828515862	},
+ {	45	,	16.51979142	,	4.96835753	},
+ {	46	,	16.97220796	,	5.334766603	},
+ {	47	,	17.67476894	,	5.486239027	},
+ {	48	,	18.11240302	,	5.917762179	},
+ {	49	,	18.7258797	,	6.043033844	},
+ {	50	,	18.99855523	,	7.015605922	},
+ {	51	,	19.68798937	,	7.176472013	},
+ {	52	,	20.52524998	,	7.349292258	}
+ #else
+ {	0	,	1	,	1	},
+ {	1	,	1.163271732	,	1.065459386	},
+ {	2	,	1.326450802	,	1.152370031	},
+ {	3	,	1.488810095	,	1.24329113	},
+ {	4	,	1.650068787	,	1.353627355	},
+ {	5	,	1.80753684	,	1.468675067	},
+ {	6	,	1.967211766	,	1.584900326	},
+ {	7	,	2.125857007	,	1.733380748	},
+ {	8	,	2.280853438	,	1.860046486	},
+ {	9	,	2.437647326	,	2.042786943	},
+ {	10	,	2.591623527	,	2.253330233	},
+ {	11	,	3.080682296	,	3.09230493	}
+ #endif
+ };
+ 
+ control_state_t speed_controller_states[] = {
+ {	0	,	1	,	0	},
+ #if 1
+ {	1	,	1.077	,	0.11	},
+ {	2	,	1.0797	,	0.1175	},
+ {	3	,	1.1032	,	0.14	},
+ {	4	,	1.1902	,	0.16	},
+ {	5	,	1.2182	,	0.21	},
+ {	6	,	1.2187	,	0.23	},
+ {	7	,	1.2415	,	0.2425	},
+ {	8	,	1.3105	,	0.2775	},
+ {	9	,	1.333	,	0.3025	},
+ {	10	,	1.404	,	0.4325	},
+ {	11	,	1.4055	,	0.4325	},
+ {	12	,	1.4257	,	0.4725	},
+ {	13	,	1.52	,	0.535	},
+ {	14	,	1.5405	,	0.6475	},
+ {	15	,	1.5407	,	0.6475	},
+ {	16	,	1.556	,	0.7475	},
+ {	17	,	1.6357	,	0.8425	},
+ {	18	,	1.653	,	0.905	},
+ {	19	,	1.674	,	0.9575	},
+ {	20	,	1.676	,	0.9575	},
+ {	21	,	1.8322	,	1.14	},
+ {	22	,	1.8402	,	1.1475	},
+ {	23	,	1.915	,	1.32	},
+ {	24	,	1.936	,	1.33	},
+ {	25	,	1.9557	,	1.38	},
+ {	26	,	1.9565	,	1.38	},
+ {	27	,	2.0372	,	1.595	},
+ {	28	,	2.0842	,	2.13	},
+ //{	29	,	2.1747	,	2.4025	},
+ //{	30	,	2.192	,	2.435	},
+ {	31	,	2.25 /*2.2545*/	,	2.485	},
+ {	32	,	2.2665	,	2.4975	},
+ {	33	,	2.3835	,	2.68	},
+ {	34	,	2.416	,	2.6875	},
+ {	35	,	2.4507	,	2.7375	},
+ {	36	,	2.5765	,	2.9575	},
+ {	37	,	2.589	,	3.0125	},
+ {	38	,	2.6955	,	3.5325	},
+ {	39	,	2.701	,	3.545	},
+ {	40	,	2.7665	,	4.82	},
+ {	41	,	2.827	,	4.845	},
+ {	42	,	2.8807	,	4.85	},
+ {	43	,	3.1925	,	5.18	},
+ {	44	,	3.2432	,	5.2775	},
+ {	45	,	3.3797	,	5.4325	},
+ {	46	,	3.3822	,	5.5775	},
+ {	47	,	3.4307	,	5.6225	},
+ {	48	,	3.457	,	5.705	},
+ {	49	,	3.7525	,	5.7325	},
+ {	50	,	3.7615	,	5.7325	},
+ {	51	,	4.1185	,	6.2425	},
+ {	52	,	4.2537	,	6.255	},
+ #endif
+ {	53	,	7/*4.2615*/	,	6.295	}
+ };
+ 
+ speed_state_t speed_states[] = {
+ {	0	,	5,16,7	},
+ #if 1
+ {	1	,	5,15,7	},
+ {	2	,	5,14,7	},
+ {	3	,	5,12,7	},
+ {	4	,	5,10,7	},
+ {	5	,	4,15,7	},
+ {	6	,	4,14,7	},
+ {	7	,	4,12,7	},
+ {	8	,	4,11,7	},
+ {	9	,	4,10,7	},
+ {	10	,	3,15,7	},
+ {	11	,	3,14,7	},
+ {	12	,	3,12,7	},
+ {	13	,	3,10,7	},
+ {	14	,	3,9,7	},
+ {	15	,	3,8,7	},
+ {	16	,	2,12,7	},
+ {	17	,	3,6,7	},
+ {	18	,	2,10,7	},
+ {	19	,	2,9,7	},
+ {	20	,	2,8,7	},
+ {	21	,	1,13,7	},
+ {	22	,	1,12,7	},
+ {	23	,	1,11,7	},
+ {	24	,	1,10,7	},
+ {	25	,	1,9,7	},
+ {	26	,	1,8,7	},
+ {	27	,	1,6,7	},
+ {	28	,	1,4,7	},
+ //{	29	,	2,7,6	},
+ //{	30	,	2,6,6	},
+ {	31	,	1,13,6	},
+ {	32	,	1,12,6	},
+ {	33	,	1,11,6	},
+ {	34	,	1,10,6	},
+ {	35	,	1,9,6	},
+ {	36	,	1,7,6	},
+ {	37	,	1,6,6	},
+ {	38	,	1,5,6	},
+ {	39	,	1,4,6	},
+ {	40	,	3,11,1	},
+ {	41	,	3,10,1	},
+ {	42	,	3,9,1	},
+ {	43	,	3,7,1	},
+ {	44	,	3,6,1	},
+ {	45	,	3,5,1	},
+ {	46	,	3,4,1	},
+ {	47	,	1,12,1	},
+ {	48	,	2,7,1	},
+ {	49	,	1,9,1	},
+ {	50	,	1,8,1	},
+ {	51	,	1,6,1	},
+ {	52	,	1,5,1	},
+ #endif
+ {	53	,	1,4,1	}
+ };
+ 
+ power_state_t power_states[] = {
+ #if NSYSSTATES == 53
+ {	0	,	1.2	,	1	},
+ {	1	,	1.4	,	1	},
+ {	2	,	1.6	,	1	},
+ {	3	,	1.2	,	2	},
+ {	4	,	1.4	,	2	},
+ {	5	,	1.2	,	3	},
+ {	6	,	1.4	,	3	},
+ {	7	,	1.2	,	4	},
+ {	8	,	1.6	,	3	},
+ {	9	,	1.2	,	5	},
+ {	10	,	1.2	,	6	},
+ {	11	,	1.2	,	7	},
+ {	12	,	1.2	,	8	},
+ {	13	,	1.2	,	9	},
+ {	14	,	1.2	,	10	},
+ {	15	,	1.2	,	11	},
+ {	16	,	1.2	,	12	},
+ {	17	,	1.4	,	8	},
+ {	18	,	1.4	,	9	},
+ {	19	,	1.4	,	10	},
+ {	20	,	1.4	,	11	},
+ {	21	,	1.4	,	12	},
+ {	22	,	1.6	,	8	},
+ {	23	,	1.6	,	9	},
+ {	24	,	1.6	,	10	},
+ {	25	,	1.6	,	11	},
+ {	26	,	1.6	,	12	},
+ {	27	,	1.8	,	9	},
+ {	28	,	1.8	,	10	},
+ {	29	,	1.8	,	11	},
+ {	30	,	1.8	,	12	},
+ {	31	,	2	,	9	},
+ {	32	,	2	,	10	},
+ {	33	,	2	,	11	},
+ {	34	,	2	,	12	},
+ {	35	,	2.2	,	10	},
+ {	36	,	2.2	,	12	},
+ {	37	,	2.4	,	10	},
+ {	38	,	2.4	,	11	},
+ {	39	,	2.4	,	12	},
+ {	40	,	2.6	,	10	},
+ {	41	,	2.6	,	11	},
+ {	42	,	2.6	,	12	},
+ {	43	,	2.8	,	10	},
+ {	44	,	2.8	,	11	},
+ {	45	,	2.8	,	12	},
+ {	46	,	3	,	11	},
+ {	47	,	3	,	12	},
+ {	48	,	3.2	,	11	},
+ {	49	,	3.2	,	12	},
+ {	50	,	3.201	,	10	},
+ {	51	,	3.201	,	11	},
+ {	52	,	3.201	,	12	}
+ #else
+ {	0	,	1.2	,	1	},
+ {	1	,	1.4	,	1	},
+ {	2	,	1.6	,	1	},
+ {	3	,	1.8	,	1	},
+ {	4	,	2.0	,	1	},
+ {	5	,	2.2	,	1	},
+ {	6	,	2.4	,	1	},
+ {	7	,	2.6	,	1	},
+ {	8	,	2.8	,	1	},
+ {	9	,	3.0	,	1	},
+ {	10	,	3.2	,	1	},
+ {	11	,	3.201	,	1	}
+ #endif
+ };
+ 
+ double x_hat_minus = 0.0;
+ double x_hat = .2;
+ double Q = .00001;
+ double P = 1.0;
+ double P_minus = 0.0;
+ double H = 0.0;
+ double R = .01;
+ double K = 0.0; 
+ 
+ typedef struct {  
+   double x_hat_minus;
+   double x_hat;
+   double Q;
+   double P;
+   double P_minus;
+   double H;
+   double R;
+   double K;
+ } kalman_filter_t;
+ 
+ kalman_filter_t filter_init = {0.0, 0.3125, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ 
+ #define HEURISTIC_W 0
+ 
+ int adaptation_level = 1;
+ 
+ kalman_filter_t power_filter = {0.0, 0.2, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ kalman_filter_t speed_filter = {0.0, 0.3125, 0.00001, 1.0, 0.0, 0.0, 0.01, 0.0};
+ 
+ double get_base_value(kalman_filter_t* k,
+ 		      double current_measurement, 
+ 		      double last_coeff) {
+   
+   k->x_hat_minus = k->x_hat;
+   k->P_minus = k->P + k->Q;
+   
+   k->H = last_coeff;
+   k->K = k->P_minus * k->H /( k->H * k->P_minus* k->H + k->R);
+   k->x_hat = k->x_hat_minus + k->K * (current_measurement - k->H * k->x_hat_minus);
+   k->P = (1 - k->K * k->H) * k->P_minus;
+   
+   return 1.0/k->x_hat;
+ }
+ 
+ void get_power_signal(double current_power, 
+ 		      double desired_power,
+ 		      double base_power,
+ 		      double* e,
+ 		      double* eo,
+ 		      double* u,
+ 		      double* uo,
+ 		      double* uoo) {
+ 
+   if(current_power < desired_power) {
+     p1 = 0.1;
+     p2 = 0.8;
+     z1 = 0.2;
+     p1 = 0;
+     p2 = 0;
+     z1 = 0;
+   }
+   else {
+     p1 = 0;
+     p2 = 0;
+     z1 = 0;
+ 
+   }
+ 
+   
+   double A         = -(-p1*z1 - p2*z1 + mu*p1*p2 - mu*p2 + p2 - mu*p1 + p1 + mu);
+   double B         = -(-mu*p1*p2*z1 + p1*p2*z1 + mu*p2*z1 + mu*p1*z1 - mu*z1 - p1*p2);
+   double C         = ((mu - mu*p1)*p2 + mu*p1 - mu)*base_power;
+   double D         = ((mu*p1-mu)*p2 - mu*p1 + mu)*base_power*z1;
+   double F         = 1/(z1-1);
+   
+   double y = current_power;
+   *e = desired_power - y;
+   
+   //printf("u = %f, uo = %f, e = %f, A = %f, B= %f, C = %f, D= %f, F = %f\n",
+   // *u, *uo, *e, A, B, C, D, F);
+   
+   *u = F * (A*(*uo) + B*(*uoo) + C*(*e) + D*(*eo));
+ 
+   
+   
+   if (*u<1)  *u=1;        
+   if (*u>power_controller_states[NSYSSTATES-1].cost) *u=power_controller_states[NSYSSTATES-1].cost;  
+   *uoo = *uo;            // saving values
+   *uo  = *u;
+   *eo  = *e;
+ }
+ 
+ double max_speedup;
+ 
+ void get_speed_signal(double current_speed, 
+ 		      double desired_speed,
+ 		      double base_speed,
+ 		      double* e,
+ 		      double* eo,
+ 		      double* u,
+ 		      double* uo,
+ 		      double* uoo) {
+   //double p1 = 0.1;
+   //double p2 = 0.2;
+   //double z1 = 0.15; 
+ 
+   double A         = -(-p1*z1 - p2*z1 + mu*p1*p2 - mu*p2 + p2 - mu*p1 + p1 + mu);
+   double B         = -(-mu*p1*p2*z1 + p1*p2*z1 + mu*p2*z1 + mu*p1*z1 - mu*z1 - p1*p2);
+   double C         = ((mu - mu*p1)*p2 + mu*p1 - mu)*base_speed;
+   double D         = ((mu*p1-mu)*p2 - mu*p1 + mu)*base_speed*z1;
+   double F         = 1/(z1-1);
+   
+   double y = current_speed;
+   *e = desired_speed - y;
+   
+   
+   //*u = F * (A*(*uo) + B*(*uoo) + C*(*e) + D*(*eo));
+ 
+   *u = *uo + *e/base_speed;
+ 
+   //  printf("u = %f, uo = %f, e = %f, base_speed = %f\n",
+   // *u, *uo, *e, base_speed);
+ 
+ 
+   //double max_speedup = speed_controller_states[NAPPSTATES-1].speedup * 
+   //power_controller_states[NSYSSTATES-1].speedup;
+   if (*u<1)  *u=1;        
+   if (*u>max_speedup) *u=max_speedup;  
+   *uoo = *uo;            // saving values
+   *uo  = *u;
+   *eo  = *e;
+ }
+ 
+ 
+ int power_translate(double u, 
+ 		    const control_state_t* states, 
+ 		    int nstates) {
+   int i;
+ 
+   control_state_t cs = states[nstates-1];
+ 
+   double efficiency = cs.speedup/cs.cost;
+   int index = nstates-1;
+ 
+ 
+   for(i = 0; i < nstates; i++) {
+     if(states[i].cost >= u) {
+ 
+       double new_eff = states[i].speedup/states[i].cost;
+       if(new_eff > efficiency) {
+ 
+ 	cs = states[i];
+ 	efficiency = new_eff;
+ 	index = i;
+       }	
+     }
+   }
+ 
+   return index;
+ }
+ 
+ int power_translate2(double u, 
+ 		     const control_state_t* states, 
+ 		     int state1,
+ 		     const power_state_t* pstates,
+ 		     int nstates) {
+   int i;
+   
+   control_state_t cs = states[0];
+   
+   double efficiency = cs.speedup;///cs.cost;
+     int index = 0;
+     
+     for(i = 0; i < nstates; i++) {
+       if(states[i].cost < u && pstates[state1].cores == pstates[i].cores) {
+ 	
+ 	double new_eff = states[i].speedup;///states[i].cost;
+ 	  if(new_eff >= efficiency) {
+ 	    
+ 	    cs = states[i];
+ 	    efficiency = new_eff;
+ 	    index = i;
+ 	  }	
+       }
+     }
+     
+     return index;
+ }
+ 
+ int speed_translate(double u, 
+ 		    const control_state_t* states, 
+ 		    int nstates) {
+   int i;
+ 
+   control_state_t cs = states[nstates-1];
+ 
+   double efficiency = cs.speedup/(cs.cost+1);
+   int index = nstates-1;
+ 
+ 
+   for(i = 0; i < nstates; i++) {
+     if(states[i].speedup >= u) {
+ 
+       //index = i;
+       //break;
+       double new_eff = states[i].speedup/(states[i].cost+1);
+       if(new_eff > efficiency) {
+ 
+       	cs = states[i];
+ 	efficiency = new_eff;
+ 	index = i;
+       }	
+     }
+   }
+ 
+   return index;
+ }
+ 
+ int speed_translate2(double u, 
+ 		     const control_state_t* states, 
+ 		     int nstates) {
+   int i;
+   
+   control_state_t cs = states[0];
+   
+   double efficiency = cs.speedup/(cs.cost+1);
+     int index = 0;
+     
+     for(i = 0; i < nstates; i++) {
+       if(states[i].speedup < u) {
+ 	
+ 	double new_eff = states[i].speedup/(states[i].cost+1);
+ 	  if(new_eff >= efficiency) {
+ 	    
+ 	    cs = states[i];
+ 	    efficiency = new_eff;
+ 	    index = i;
+ 	  }	
+       }
+     }
+     
+     return index;
+ }
+ 
+ 
+ int last_speed_state = 0;	
+ int control_nref = 5;
+ int control_range = 16;
+ int control_refine = 7;
+ 
+ void speed_apply(int state,
+ 		 speed_state_t* ps,
+ 		 int nstates) {
+   
+   char command[4096];
+   int i;
+   
+   //printf("APPLYING SPPED STATE %d\n", state);
+ 
+   if(last_speed_state ==state)
+     return;
+   else 
+     last_speed_state = state;
+ 
+ #if 0
+   control_nref = ps[state].ref;
+   control_range = ps[state].range;
+   control_refine = ps[state].subme;
+ #endif
+   //sprintf(command,"echo \"%d\n%d\n%d\n\" >  x264_settings",
+   //	  ps[state].ref,ps[state].range,ps[state].subme);
+   //system(command);
+   
+ }
+ 
+ int last_power_state = 52;
+ int last_cores = 12;
+ int power_apply(int state_id,
+ 		pid_t* pid,
+ 		int npids,
+ 		const power_state_t* states,
+ 		int nstates) {
+   
+   int i;
+   
+   int rc = 0;
+   int retvalsyscall1 = 0;
+   int retvalsyscall2 = 0;
+   power_state_t state = states[0];
+   char command[4096];
+   
+   if(state_id == last_power_state)
+     return 0;
+   else
+     last_power_state = state_id;
+   
+   for(i = 0; i < nstates; i++) {
+     if( states[i].id == state_id) {
+       state = states[i];
+       break;
+     }
+   }
+ 
+ #if 0
+   sprintf(command,"taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; taskset -p -c 0-%d  %d > /dev/null; ",
+ 	  state.cores-1, getpid(), 
+ 	  state.cores-1, pid[1],
+ 	  state.cores-1, pid[2],
+ 	  state.cores-1, pid[3],
+ 	  state.cores-1, pid[4],
+ 	  state.cores-1, pid[5],
+ 	  state.cores-1, pid[6],
+ 	  state.cores-1, pid[7],
+ 	  state.cores-1, pid[8],
+ 	  state.cores-1, pid[9],
+ 	  state.cores-1, pid[10],
+ 	  state.cores-1, pid[11]);
+   retvalsyscall1 = system(command);
+ #endif
+ 
+ #if 1
+ 
+   if(last_cores != state.cores) {
+     sprintf(command,"taskset -p -c 0-%d  %d > /dev/null",state.cores-1, getpid());
+     retvalsyscall1 = system(command);
+     //printf("%s\n", command);
+     for( i = 1; i < npids; i++) {
+       sprintf(command,"taskset -p -c 0-%d  %d > /dev/null",state.cores-1, pid[i]);
+       //printf("%s\n", command);
+       retvalsyscall1 = system(command);
+     }
+     last_cores = state.cores;
+   }
+ #endif 
+ 
+ #if 1
+   for(i = 0; i < 12; i++) {
+     sprintf(command,
+ 	    "echo %d > /sys/devices/system/cpu/cpu%d/cpufreq/scaling_setspeed", 
+ 	    (int) (state.freq * 1000000), i);
+     
+     retvalsyscall2 = system(command);
+     if(retvalsyscall2 != 0)
+       fprintf(stderr, "ERROR setting clocks: %d\n", retvalsyscall2);
+   }
+ #endif
+   
+   if(retvalsyscall1 || retvalsyscall2) {
+     rc = -1;
+   }
+ 
+   return rc;
+ }
+ //extern int window_size;
+ 
+ //----------------------------------------------------
+ 
+ 
  using namespace std;
  
  #define MAXNAMESIZE 1024 // max filename length
***************
*** 50,56 ****
  //#define PROFILE // comment this out to disable instrumentation code
  //#define ENABLE_THREADS  // comment this out to disable threads
  
! #define CACHE_LINE 32 // cache line in byte
  
  /* this structure represents a point */
  /* these will be passed around to avoid copying coordinates */
--- 808,814 ----
  //#define PROFILE // comment this out to disable instrumentation code
  //#define ENABLE_THREADS  // comment this out to disable threads
  
! #define CACHE_LINE 64 // cache line in byte
  
  /* this structure represents a point */
  /* these will be passed around to avoid copying coordinates */
***************
*** 856,861 ****
--- 1614,1620 ----
  	}
  #ifdef ENABLE_THREADS
        pthread_barrier_wait(barrier);
+       pthread_barrier_wait(barrier);
  #endif
      } 
    }
***************
*** 2157,2162 ****
--- 2916,3027 ----
      size_t numRead  = stream->read(block, dim, chunksize ); 
      fprintf(stderr,"read %d points\n",numRead);
  
+     heartbeat(&heart, numRead,1 );
+ #if 1// Power and performance control
+ 				  int PERIOD = window_size;
+ 				  heartbeat_record_t hbr;
+ 				  hb_get_current(&heart, &hbr);
+ 				  
+ 				  double power_goal = power_target;
+ 				  double speed_goal = 1.4;
+ 				  
+ 				  //if(hbr.beat >= 100) {/*power_goal = 35.0;*/ speed_goal = 4.615;}
+ 				  //if(hbr.beat >= 500) {speed_goal = 14.8;}
+ 				  //if(hbr.beat >= 1000) {speed_goal = 10.6;}
+ 				  
+ 				  //	printf("power goal is 70\n");
+ 				  
+ 				  int old_action = __sync_fetch_and_add(&current_action,1);
+ 				  if(old_action == PERIOD - 1) {
+ 				    current_action = 0;
+ 				  }
+ 				  if( old_action == 0) {
+ 				    double act_power = hbr.window_power;
+ 				    double act_speed = hbr.window_rate;
+ 				    
+ 				    double base_power = get_base_value(&power_filter, act_power, last_powerup);
+ 				    
+ 				    get_power_signal(act_power,
+ 						     power_goal,
+ 						     base_power,
+ 						     &power_e,
+ 						     &power_eo,
+ 						     &power_u,
+ 						     &power_uo,
+ 						     &power_uoo);
+ 				    
+ 				    double act_power_up = last_powerup = power_u;
+ 				    
+ 				    power_tdo_state_1 = power_translate(power_u, 
+ 									power_controller_states, 
+ 									(int) NSYSSTATES);
+ 				    power_tdo_state_2 = power_translate2(power_u, 
+ 									 power_controller_states,
+ 									 power_tdo_state_1,
+ 									 power_states,
+ 									 (int) NSYSSTATES);
+ 				    
+ 				    //power_tdo_state_1 = power_tdo_state_2;
+ 				    
+ 				    if(power_controller_states[power_tdo_state_1].speedup 
+ 				       <= power_controller_states[power_tdo_state_2].speedup) {
+ 				      power_tdo_state_1 = power_tdo_state_2;
+ 				    }
+ 				    
+ 				    double power_time1;
+ 				    
+ 				    if(power_controller_states[power_tdo_state_1].cost == 
+ 				       power_controller_states[power_tdo_state_2].cost ||
+ 				       power_u == power_controller_states[power_tdo_state_1].cost) 
+ 				      power_time1 = 1.0;
+ 				    else
+ 				      power_time1 = (power_u - 
+ 						     power_controller_states[power_tdo_state_2].cost) /
+ 					(power_controller_states[power_tdo_state_1].cost - 
+ 					 power_controller_states[power_tdo_state_2].cost);
+ 				    
+ 				    double power_time2 = 1.0 - power_time1;
+ 				    
+ 				    h1 = power_time1*PERIOD+0.5;
+ 				    h2 = PERIOD-h1;
+ 				    
+ #if 1
+ 				    printf("\nCONTROL beat=%lld, power=%f, des=%f, w=%f, u=%f, uo=%f, state=%d, state2=%d, %f, %f, %d, %d\n\n",
+ 					   hbr.beat,act_power,power_goal,1.0/base_power,power_u,last_powerup,power_controller_states[power_tdo_state_1].id, power_controller_states[power_tdo_state_2].id,  power_time1, power_time2, h1, h2); 
+ 				    
+ #endif
+ 				    
+ 				    if(npids == 0) {
+ 				      npids = get_all_subpids(getpid(), pids);
+ 				    }
+ 				    power_apply(power_tdo_state_1,
+ 						pids,
+ 						npids,
+ 						power_states,
+ 						NSYSSTATES);
+ 				    
+ 				    if(h1 == 0)
+ 				      power_apply(power_tdo_state_2,
+ 						  pids,
+ 						  npids,
+ 						  power_states,
+ 						  NSYSSTATES);
+ 				  }
+ 				  
+ 				  if (old_action == h1) {
+ 				    if(npids == 0) {
+ 				      npids = get_all_subpids(getpid(), pids);
+ 				    }
+ 				    power_apply(power_tdo_state_2,
+ 						pids,
+ 						npids,
+ 						power_states,
+ 						NSYSSTATES);
+ 				    
+ 				  }
+ 				  
+ #endif
+ 
      if( stream->ferror() || numRead < (unsigned int)chunksize && !stream->feof() ) {
        fprintf(stderr, "error reading data!\n");
        exit(1);
***************
*** 2240,2245 ****
--- 3105,3151 ----
    long kmin, kmax, n, chunksize, clustersize;
    int dim;
  
+ 	float min_heartrate;
+ 	float max_heartrate; 
+ 	//int window_size;
+ 	
+ 	if(getenv("STREAMCLUSTER_MIN_HEART_RATE") == NULL) {
+ 	  min_heartrate = 0.0;
+ 	}
+ 	else
+ 	  min_heartrate = atof(getenv("STREAMCLUSTER_MIN_HEART_RATE"));
+ 
+ 	if(getenv("STREAMCLUSTER_MAX_HEART_RATE") == NULL) {
+ 	  max_heartrate = 100.0;
+ 	}
+ 	else
+ 	  max_heartrate = atof(getenv("STREAMCLUSTER_MAX_HEART_RATE"));
+ 	
+ 	if(getenv("STREAMCLUSTER_WINDOW_SIZE") == NULL) {
+ 	  window_size = 20;
+ 	}
+ 	else
+ 	  window_size = atoi(getenv("STREAMCLUSTER_WINDOW_SIZE"));
+ 
+ 	if(getenv("STREAMCLUSTER_POWER_TARGET") == NULL) {
+ 	  power_target = 70;
+ 	}
+ 	else
+ 	  power_target = atof(getenv("STREAMCLUSTER_POWER_TARGET"));
+ 
+ 
+ 	
+ 	printf("init heartbeat with %f %f %d\n", min_heartrate, max_heartrate, window_size);
+ 	
+ 	heartbeat_init(&heart, 
+ 		       min_heartrate, max_heartrate, 
+ 		       0, 1,
+ 		       0, 150,
+ 		       window_size, 100, "heartbeat.log");
+ 	
+ 	printf("heartbeat init'd\n");
+ 
+ 
  #ifdef PARSEC_VERSION
  #define __PARSEC_STRING(x) #x
  #define __PARSEC_XSTRING(x) __PARSEC_STRING(x)
***************
*** 2311,2316 ****
--- 3217,3224 ----
    __parsec_roi_end();
  #endif
  
+   heartbeat_finish(&heart);
+ 
    delete stream;
  
    double totalTime = t2-t1;
Only in parsec-2.0-modified/pkgs/kernels/streamcluster/src: streamcluster.cpp~
Only in parsec-2.0-modified/pkgs/libs/glib: inst
Only in parsec-2.0-modified/pkgs/libs/glib: obj
Only in parsec-2.0-modified/pkgs/libs/gsl: inst
Only in parsec-2.0-modified/pkgs/libs/gsl: obj
Only in parsec-2.0-modified/pkgs/libs/hooks: inst
Only in parsec-2.0-modified/pkgs/libs/hooks: obj
diff -crB parsec-2.0/pkgs/libs/hooks/src/hooks.c parsec-2.0-modified/pkgs/libs/hooks/src/hooks.c
*** parsec-2.0/pkgs/libs/hooks/src/hooks.c	2008-12-13 18:48:47.000000000 -0600
--- parsec-2.0-modified/pkgs/libs/hooks/src/hooks.c	2019-04-04 11:20:17.191586429 -0500
***************
*** 181,186 ****
--- 181,188 ----
    printf(HOOKS_PREFIX" Entering ROI\n");
    fflush(NULL);
  
+   system("/afs/csail.mit.edu/u/h/hank/perforation.cag/tools/powerQoS/pyWattsup-hank.py start");
+ 
    #if ENABLE_SIMICS_MAGIC
    MAGIC_BREAKPOINT;
    #endif //ENABLE_SIMICS_MAGIC
***************
*** 213,218 ****
--- 215,221 ----
    #endif //ENABLE_SIMICS_MAGIC
  
    printf(HOOKS_PREFIX" Leaving ROI\n");
+   system("/afs/csail.mit.edu/u/h/hank/perforation.cag/tools/powerQoS/pyWattsup-hank.py stop > power.txt");
    fflush(NULL);
  }
  
Only in parsec-2.0-modified/pkgs/libs/hooks/src: hooks.c~
Only in parsec-2.0-modified/pkgs/libs/imagick: inst
Only in parsec-2.0-modified/pkgs/libs/imagick: obj
Only in parsec-2.0-modified/pkgs/libs/libxml2: inst
Only in parsec-2.0-modified/pkgs/libs/libxml2: obj
diff -crB parsec-2.0/pkgs/libs/libxml2/src/nanohttp.c parsec-2.0-modified/pkgs/libs/libxml2/src/nanohttp.c
*** parsec-2.0/pkgs/libs/libxml2/src/nanohttp.c	2007-04-17 07:43:53.000000000 -0500
--- parsec-2.0-modified/pkgs/libs/libxml2/src/nanohttp.c	2019-04-04 11:20:13.479499056 -0500
***************
*** 1582,1588 ****
      if (!strcmp(filename, "-")) 
          fd = 0;
      else {
!         fd = open(filename, O_CREAT | O_WRONLY);
  	if (fd < 0) {
  	    xmlNanoHTTPClose(ctxt);
  	    return(-1);
--- 1582,1588 ----
      if (!strcmp(filename, "-")) 
          fd = 0;
      else {
!       fd = open(filename, O_CREAT | O_WRONLY,0x0777 );
  	if (fd < 0) {
  	    xmlNanoHTTPClose(ctxt);
  	    return(-1);
Only in parsec-2.0-modified/pkgs/libs/libxml2/src: nanohttp.c~
Only in parsec-2.0-modified/pkgs/libs/mesa: inst
Only in parsec-2.0-modified/pkgs/libs/mesa: obj
Only in parsec-2.0-modified/pkgs/libs/ssl: inst
Only in parsec-2.0-modified/pkgs/libs/ssl: obj
Only in parsec-2.0/pkgs/libs/ssl/src/test: fips_aes_data
Only in parsec-2.0-modified/pkgs/libs/zlib: inst
Only in parsec-2.0-modified/pkgs/libs/zlib: obj
Only in parsec-2.0-modified/pkgs/tools/cmake: inst
Only in parsec-2.0-modified/pkgs/tools/cmake: obj
Only in parsec-2.0-modified/pkgs/tools/yasm: inst
Only in parsec-2.0-modified/pkgs/tools/yasm: obj
